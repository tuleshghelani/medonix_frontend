import{a as Ho}from"./chunk-2QT7H6GG.js";import{a as ui,b as gi}from"./chunk-P763T64B.js";import{b as Bo,c as Go,d as mn,e as vn,f as Qo}from"./chunk-IU4UZRRW.js";import{a as dn,b as it,c as He,d as Pt}from"./chunk-6WP5CU5L.js";import{a as Yo}from"./chunk-2Q66MXZ3.js";import{$ as cn,$a as nt,$b as Xe,A as ge,Aa as Zi,Ab as Vo,B as an,Ba as Xi,Bb as ee,C as Q,Ca as wo,Cb as ft,D as sn,Da as re,Db as zo,Ea as _t,Eb as Ro,F as fo,Fa as yt,Fb as te,G as ho,Ga as St,Gb as ci,H as v,Ha as ei,Hb as li,I as x,Ia as ye,Ib as oe,J as Xn,Ja as ti,Jb as rt,Ka as Ee,Kb as ot,L as An,Lb as at,M as _o,Ma as ni,Mb as di,N as Yi,Na as wt,Nb as ht,O as Co,Oa as jn,Ob as mi,P as Nn,Pb as pi,Q as Ki,Qa as Ct,Qb as X,R as bo,Ra as ce,Rb as Ue,S as l,Sa as Oe,Sb as ue,T as b,Ta as K,Tb as It,Ua as Eo,Ub as jo,V as Po,Va as ut,Vb as be,W as Mo,Wa as bt,Wb as Ve,X as yo,Xb as $o,Y as Ln,Ya as le,Yb as qo,Za as ko,Zb as Fe,_ as M,_b as st,a as Me,aa as p,ab as Ji,b as lt,ba as Vn,bb as To,c as so,ca as F,cb as Io,da as Mt,db as Fo,e as Mn,ea as Oo,eb as ii,f as G,fa as o,fb as Do,ga as a,gb as Ao,h as co,ha as m,hb as ri,i as Bi,ia as zn,ib as Le,j as yn,ja as Rn,jb as Qt,ka as N,kb as ln,l as lo,lb as Et,m as mo,ma as vo,mb as No,n as Gi,na as _,nb as dt,o as gt,oa as f,ob as oi,pa as xo,pb as kt,q as jt,qb as On,r as po,rb as er,sb as ai,t as uo,tb as Lo,u as O,ua as c,ub as W,uc as de,v as Qi,va as E,vb as S,vc as me,w as Re,wa as T,wb as Z,wc as Uo,x as Se,xa as Jn,xb as J,xc as Je,y as on,ya as So,yb as si,yc as ct,z as go,za as Wi,zb as Tt,zc as Ft}from"./chunk-JBJ2KMMC.js";var Yt=globalThis;function Dt(i){return(Yt.__Zone_symbol_prefix||"__zone_symbol__")+i}function $s(){let i=Yt.performance;function r(D){i&&i.mark&&i.mark(D)}function e(D,I){i&&i.measure&&i.measure(D,I)}r("Zone");let t=(()=>{class D{static{this.__symbol__=Dt}static assertZonePatched(){if(Yt.Promise!==_e.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let C=D.current;for(;C.parent;)C=C.parent;return C}static get current(){return ne.zone}static get currentTask(){return Ce}static __load_patch(C,y,H=!1){if(_e.hasOwnProperty(C)){let ie=Yt[Dt("forceDuplicateZoneCheck")]===!0;if(!H&&ie)throw Error("Already loaded patch: "+C)}else if(!Yt["__Zone_disable_"+C]){let ie="Zone:"+C;r(ie),_e[C]=y(Yt,D,he),e(ie,ie)}}get parent(){return this._parent}get name(){return this._name}constructor(C,y){this._parent=C,this._name=y?y.name||"unnamed":"<root>",this._properties=y&&y.properties||{},this._zoneDelegate=new s(this,this._parent&&this._parent._zoneDelegate,y)}get(C){let y=this.getZoneWith(C);if(y)return y._properties[C]}getZoneWith(C){let y=this;for(;y;){if(y._properties.hasOwnProperty(C))return y;y=y._parent}return null}fork(C){if(!C)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,C)}wrap(C,y){if(typeof C!="function")throw new Error("Expecting function got: "+C);let H=this._zoneDelegate.intercept(this,C,y),ie=this;return function(){return ie.runGuarded(H,this,arguments,y)}}run(C,y,H,ie){ne={parent:ne,zone:this};try{return this._zoneDelegate.invoke(this,C,y,H,ie)}finally{ne=ne.parent}}runGuarded(C,y=null,H,ie){ne={parent:ne,zone:this};try{try{return this._zoneDelegate.invoke(this,C,y,H,ie)}catch(Ae){if(this._zoneDelegate.handleError(this,Ae))throw Ae}}finally{ne=ne.parent}}runTask(C,y,H){if(C.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(C.zone||q).name+"; Execution: "+this.name+")");let ie=C,{type:Ae,data:{isPeriodic:ve=!1,isRefreshable:qe=!1}={}}=C;if(C.state===we&&(Ae===$e||Ae===Y))return;let xt=C.state!=fe;xt&&ie._transitionTo(fe,j);let zt=Ce;Ce=ie,ne={parent:ne,zone:this};try{Ae==Y&&C.data&&!ve&&!qe&&(C.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,ie,y,H)}catch(Ye){if(this._zoneDelegate.handleError(this,Ye))throw Ye}}finally{let Ye=C.state;if(Ye!==we&&Ye!==je)if(Ae==$e||ve||qe&&Ye===B)xt&&ie._transitionTo(j,fe,B);else{let z=ie._zoneDelegates;this._updateTaskCount(ie,-1),xt&&ie._transitionTo(we,fe,we),qe&&(ie._zoneDelegates=z)}ne=ne.parent,Ce=zt}}scheduleTask(C){if(C.zone&&C.zone!==this){let H=this;for(;H;){if(H===C.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${C.zone.name}`);H=H.parent}}C._transitionTo(B,we);let y=[];C._zoneDelegates=y,C._zone=this;try{C=this._zoneDelegate.scheduleTask(this,C)}catch(H){throw C._transitionTo(je,B,we),this._zoneDelegate.handleError(this,H),H}return C._zoneDelegates===y&&this._updateTaskCount(C,1),C.state==B&&C._transitionTo(j,B),C}scheduleMicroTask(C,y,H,ie){return this.scheduleTask(new d(xe,C,y,H,ie,void 0))}scheduleMacroTask(C,y,H,ie,Ae){return this.scheduleTask(new d(Y,C,y,H,ie,Ae))}scheduleEventTask(C,y,H,ie,Ae){return this.scheduleTask(new d($e,C,y,H,ie,Ae))}cancelTask(C){if(C.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(C.zone||q).name+"; Execution: "+this.name+")");if(!(C.state!==j&&C.state!==fe)){C._transitionTo(Ne,j,fe);try{this._zoneDelegate.cancelTask(this,C)}catch(y){throw C._transitionTo(je,Ne),this._zoneDelegate.handleError(this,y),y}return this._updateTaskCount(C,-1),C._transitionTo(we,Ne),C.runCount=-1,C}}_updateTaskCount(C,y){let H=C._zoneDelegates;y==-1&&(C._zoneDelegates=null);for(let ie=0;ie<H.length;ie++)H[ie]._updateTaskCount(C.type,y)}}return D})(),n={name:"",onHasTask:(D,I,C,y)=>D.hasTask(C,y),onScheduleTask:(D,I,C,y)=>D.scheduleTask(C,y),onInvokeTask:(D,I,C,y,H,ie)=>D.invokeTask(C,y,H,ie),onCancelTask:(D,I,C,y)=>D.cancelTask(C,y)};class s{get zone(){return this._zone}constructor(I,C,y){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=I,this._parentDelegate=C,this._forkZS=y&&(y&&y.onFork?y:C._forkZS),this._forkDlgt=y&&(y.onFork?C:C._forkDlgt),this._forkCurrZone=y&&(y.onFork?this._zone:C._forkCurrZone),this._interceptZS=y&&(y.onIntercept?y:C._interceptZS),this._interceptDlgt=y&&(y.onIntercept?C:C._interceptDlgt),this._interceptCurrZone=y&&(y.onIntercept?this._zone:C._interceptCurrZone),this._invokeZS=y&&(y.onInvoke?y:C._invokeZS),this._invokeDlgt=y&&(y.onInvoke?C:C._invokeDlgt),this._invokeCurrZone=y&&(y.onInvoke?this._zone:C._invokeCurrZone),this._handleErrorZS=y&&(y.onHandleError?y:C._handleErrorZS),this._handleErrorDlgt=y&&(y.onHandleError?C:C._handleErrorDlgt),this._handleErrorCurrZone=y&&(y.onHandleError?this._zone:C._handleErrorCurrZone),this._scheduleTaskZS=y&&(y.onScheduleTask?y:C._scheduleTaskZS),this._scheduleTaskDlgt=y&&(y.onScheduleTask?C:C._scheduleTaskDlgt),this._scheduleTaskCurrZone=y&&(y.onScheduleTask?this._zone:C._scheduleTaskCurrZone),this._invokeTaskZS=y&&(y.onInvokeTask?y:C._invokeTaskZS),this._invokeTaskDlgt=y&&(y.onInvokeTask?C:C._invokeTaskDlgt),this._invokeTaskCurrZone=y&&(y.onInvokeTask?this._zone:C._invokeTaskCurrZone),this._cancelTaskZS=y&&(y.onCancelTask?y:C._cancelTaskZS),this._cancelTaskDlgt=y&&(y.onCancelTask?C:C._cancelTaskDlgt),this._cancelTaskCurrZone=y&&(y.onCancelTask?this._zone:C._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let H=y&&y.onHasTask,ie=C&&C._hasTaskZS;(H||ie)&&(this._hasTaskZS=H?y:n,this._hasTaskDlgt=C,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,y.onScheduleTask||(this._scheduleTaskZS=n,this._scheduleTaskDlgt=C,this._scheduleTaskCurrZone=this._zone),y.onInvokeTask||(this._invokeTaskZS=n,this._invokeTaskDlgt=C,this._invokeTaskCurrZone=this._zone),y.onCancelTask||(this._cancelTaskZS=n,this._cancelTaskDlgt=C,this._cancelTaskCurrZone=this._zone))}fork(I,C){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,I,C):new t(I,C)}intercept(I,C,y){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,I,C,y):C}invoke(I,C,y,H,ie){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,I,C,y,H,ie):C.apply(y,H)}handleError(I,C){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,I,C):!0}scheduleTask(I,C){let y=C;if(this._scheduleTaskZS)this._hasTaskZS&&y._zoneDelegates.push(this._hasTaskDlgtOwner),y=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,I,C),y||(y=C);else if(C.scheduleFn)C.scheduleFn(C);else if(C.type==xe)V(C);else throw new Error("Task is missing scheduleFn.");return y}invokeTask(I,C,y,H){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,I,C,y,H):C.callback.apply(y,H)}cancelTask(I,C){let y;if(this._cancelTaskZS)y=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,I,C);else{if(!C.cancelFn)throw Error("Task is not cancelable");y=C.cancelFn(C)}return y}hasTask(I,C){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,I,C)}catch(y){this.handleError(I,y)}}_updateTaskCount(I,C){let y=this._taskCounts,H=y[I],ie=y[I]=H+C;if(ie<0)throw new Error("More tasks executed then were scheduled.");if(H==0||ie==0){let Ae={microTask:y.microTask>0,macroTask:y.macroTask>0,eventTask:y.eventTask>0,change:I};this.hasTask(this._zone,Ae)}}}class d{constructor(I,C,y,H,ie,Ae){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=I,this.source=C,this.data=H,this.scheduleFn=ie,this.cancelFn=Ae,!y)throw new Error("callback is not defined");this.callback=y;let ve=this;I===$e&&H&&H.useG?this.invoke=d.invokeTask:this.invoke=function(){return d.invokeTask.call(Yt,ve,this,arguments)}}static invokeTask(I,C,y){I||(I=this),pt++;try{return I.runCount++,I.zone.runTask(I,C,y)}finally{pt==1&&U(),pt--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(we,B)}_transitionTo(I,C,y){if(this._state===C||this._state===y)this._state=I,I==we&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${I}', expecting state '${C}'${y?" or '"+y+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let u=Dt("setTimeout"),g=Dt("Promise"),h=Dt("then"),P=[],k=!1,L;function $(D){if(L||Yt[g]&&(L=Yt[g].resolve(0)),L){let I=L[h];I||(I=L.then),I.call(L,D)}else Yt[u](D,0)}function V(D){pt===0&&P.length===0&&$(U),D&&P.push(D)}function U(){if(!k){for(k=!0;P.length;){let D=P;P=[];for(let I=0;I<D.length;I++){let C=D[I];try{C.zone.runTask(C,null,null)}catch(y){he.onUnhandledError(y)}}}he.microtaskDrainDone(),k=!1}}let q={name:"NO ZONE"},we="notScheduled",B="scheduling",j="scheduled",fe="running",Ne="canceling",je="unknown",xe="microTask",Y="macroTask",$e="eventTask",_e={},he={symbol:Dt,currentZoneFrame:()=>ne,onUnhandledError:tt,microtaskDrainDone:tt,scheduleMicroTask:V,showUncaughtError:()=>!t[Dt("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:tt,patchMethod:()=>tt,bindArguments:()=>[],patchThen:()=>tt,patchMacroTask:()=>tt,patchEventPrototype:()=>tt,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>tt,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>tt,wrapWithCurrentZone:()=>tt,filterProperties:()=>[],attachOriginToPatched:()=>tt,_redefineProperty:()=>tt,patchCallbacks:()=>tt,nativeScheduleMicroTask:$},ne={parent:null,zone:new t(null,null)},Ce=null,pt=0;function tt(){}return e("Zone","Zone"),t}function qs(){let i=globalThis,r=i[Dt("forceDuplicateZoneCheck")]===!0;if(i.Zone&&(r||typeof i.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return i.Zone??=$s(),i.Zone}var qn=Object.getOwnPropertyDescriptor,or=Object.defineProperty,ar=Object.getPrototypeOf,Us=Object.create,Hs=Array.prototype.slice,sr="addEventListener",cr="removeEventListener",tr=Dt(sr),nr=Dt(cr),Xt="true",Jt="false",Un=Dt("");function lr(i,r){return Zone.current.wrap(i,r)}function dr(i,r,e,t,n){return Zone.current.scheduleMacroTask(i,r,e,t,n)}var Ge=Dt,_i=typeof window<"u",wn=_i?window:void 0,mt=_i&&wn||globalThis,Bs="removeAttribute";function mr(i,r){for(let e=i.length-1;e>=0;e--)typeof i[e]=="function"&&(i[e]=lr(i[e],r+"_"+e));return i}function Gs(i,r){let e=i.constructor.name;for(let t=0;t<r.length;t++){let n=r[t],s=i[n];if(s){let d=qn(i,n);if(!ta(d))continue;i[n]=(u=>{let g=function(){return u.apply(this,mr(arguments,e+"."+n))};return tn(g,u),g})(s)}}}function ta(i){return i?i.writable===!1?!1:!(typeof i.get=="function"&&typeof i.set>"u"):!0}var na=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ci=!("nw"in mt)&&typeof mt.process<"u"&&mt.process.toString()==="[object process]",pr=!Ci&&!na&&!!(_i&&wn.HTMLElement),ia=typeof mt.process<"u"&&mt.process.toString()==="[object process]"&&!na&&!!(_i&&wn.HTMLElement),hi={},Qs=Ge("enable_beforeunload"),Ko=function(i){if(i=i||mt.event,!i)return;let r=hi[i.type];r||(r=hi[i.type]=Ge("ON_PROPERTY"+i.type));let e=this||i.target||mt,t=e[r],n;if(pr&&e===wn&&i.type==="error"){let s=i;n=t&&t.call(this,s.message,s.filename,s.lineno,s.colno,s.error),n===!0&&i.preventDefault()}else n=t&&t.apply(this,arguments),i.type==="beforeunload"&&mt[Qs]&&typeof n=="string"?i.returnValue=n:n!=null&&!n&&i.preventDefault();return n};function Wo(i,r,e){let t=qn(i,r);if(!t&&e&&qn(e,r)&&(t={enumerable:!0,configurable:!0}),!t||!t.configurable)return;let n=Ge("on"+r+"patched");if(i.hasOwnProperty(n)&&i[n])return;delete t.writable,delete t.value;let s=t.get,d=t.set,u=r.slice(2),g=hi[u];g||(g=hi[u]=Ge("ON_PROPERTY"+u)),t.set=function(h){let P=this;if(!P&&i===mt&&(P=mt),!P)return;typeof P[g]=="function"&&P.removeEventListener(u,Ko),d&&d.call(P,null),P[g]=h,typeof h=="function"&&P.addEventListener(u,Ko,!1)},t.get=function(){let h=this;if(!h&&i===mt&&(h=mt),!h)return null;let P=h[g];if(P)return P;if(s){let k=s.call(this);if(k)return t.set.call(this,k),typeof h[Bs]=="function"&&h.removeAttribute(r),k}return null},or(i,r,t),i[n]=!0}function ra(i,r,e){if(r)for(let t=0;t<r.length;t++)Wo(i,"on"+r[t],e);else{let t=[];for(let n in i)n.slice(0,2)=="on"&&t.push(n);for(let n=0;n<t.length;n++)Wo(i,t[n],e)}}var $t=Ge("originalInstance");function $n(i){let r=mt[i];if(!r)return;mt[Ge(i)]=r,mt[i]=function(){let n=mr(arguments,i);switch(n.length){case 0:this[$t]=new r;break;case 1:this[$t]=new r(n[0]);break;case 2:this[$t]=new r(n[0],n[1]);break;case 3:this[$t]=new r(n[0],n[1],n[2]);break;case 4:this[$t]=new r(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},tn(mt[i],r);let e=new r(function(){}),t;for(t in e)i==="XMLHttpRequest"&&t==="responseBlob"||function(n){typeof e[n]=="function"?mt[i].prototype[n]=function(){return this[$t][n].apply(this[$t],arguments)}:or(mt[i].prototype,n,{set:function(s){typeof s=="function"?(this[$t][n]=lr(s,i+"."+n),tn(this[$t][n],s)):this[$t][n]=s},get:function(){return this[$t][n]}})}(t);for(t in r)t!=="prototype"&&r.hasOwnProperty(t)&&(mt[i][t]=r[t])}function en(i,r,e){let t=i;for(;t&&!t.hasOwnProperty(r);)t=ar(t);!t&&i[r]&&(t=i);let n=Ge(r),s=null;if(t&&(!(s=t[n])||!t.hasOwnProperty(n))){s=t[n]=t[r];let d=t&&qn(t,r);if(ta(d)){let u=e(s,n,r);t[r]=function(){return u(this,arguments)},tn(t[r],s)}}return s}function Ys(i,r,e){let t=null;function n(s){let d=s.data;return d.args[d.cbIdx]=function(){s.invoke.apply(this,arguments)},t.apply(d.target,d.args),s}t=en(i,r,s=>function(d,u){let g=e(d,u);return g.cbIdx>=0&&typeof u[g.cbIdx]=="function"?dr(g.name,u[g.cbIdx],g,n):s.apply(d,u)})}function tn(i,r){i[Ge("OriginalDelegate")]=r}var Zo=!1,ir=!1;function Ks(){try{let i=wn.navigator.userAgent;if(i.indexOf("MSIE ")!==-1||i.indexOf("Trident/")!==-1)return!0}catch{}return!1}function Ws(){if(Zo)return ir;Zo=!0;try{let i=wn.navigator.userAgent;(i.indexOf("MSIE ")!==-1||i.indexOf("Trident/")!==-1||i.indexOf("Edge/")!==-1)&&(ir=!0)}catch{}return ir}function Xo(i){return typeof i=="function"}function Jo(i){return typeof i=="number"}var Sn=!1;if(typeof window<"u")try{let i=Object.defineProperty({},"passive",{get:function(){Sn=!0}});window.addEventListener("test",i,i),window.removeEventListener("test",i,i)}catch{Sn=!1}var Zs={useG:!0},At={},oa={},aa=new RegExp("^"+Un+"(\\w+)(true|false)$"),sa=Ge("propagationStopped");function ca(i,r){let e=(r?r(i):i)+Jt,t=(r?r(i):i)+Xt,n=Un+e,s=Un+t;At[i]={},At[i][Jt]=n,At[i][Xt]=s}function Xs(i,r,e,t){let n=t&&t.add||sr,s=t&&t.rm||cr,d=t&&t.listeners||"eventListeners",u=t&&t.rmAll||"removeAllListeners",g=Ge(n),h="."+n+":",P="prependListener",k="."+P+":",L=function(B,j,fe){if(B.isRemoved)return;let Ne=B.callback;typeof Ne=="object"&&Ne.handleEvent&&(B.callback=Y=>Ne.handleEvent(Y),B.originalDelegate=Ne);let je;try{B.invoke(B,j,[fe])}catch(Y){je=Y}let xe=B.options;if(xe&&typeof xe=="object"&&xe.once){let Y=B.originalDelegate?B.originalDelegate:B.callback;j[s].call(j,fe.type,Y,xe)}return je};function $(B,j,fe){if(j=j||i.event,!j)return;let Ne=B||j.target||i,je=Ne[At[j.type][fe?Xt:Jt]];if(je){let xe=[];if(je.length===1){let Y=L(je[0],Ne,j);Y&&xe.push(Y)}else{let Y=je.slice();for(let $e=0;$e<Y.length&&!(j&&j[sa]===!0);$e++){let _e=L(Y[$e],Ne,j);_e&&xe.push(_e)}}if(xe.length===1)throw xe[0];for(let Y=0;Y<xe.length;Y++){let $e=xe[Y];r.nativeScheduleMicroTask(()=>{throw $e})}}}let V=function(B){return $(this,B,!1)},U=function(B){return $(this,B,!0)};function q(B,j){if(!B)return!1;let fe=!0;j&&j.useG!==void 0&&(fe=j.useG);let Ne=j&&j.vh,je=!0;j&&j.chkDup!==void 0&&(je=j.chkDup);let xe=!1;j&&j.rt!==void 0&&(xe=j.rt);let Y=B;for(;Y&&!Y.hasOwnProperty(n);)Y=ar(Y);if(!Y&&B[n]&&(Y=B),!Y||Y[g])return!1;let $e=j&&j.eventNameToString,_e={},he=Y[g]=Y[n],ne=Y[Ge(s)]=Y[s],Ce=Y[Ge(d)]=Y[d],pt=Y[Ge(u)]=Y[u],tt;j&&j.prepend&&(tt=Y[Ge(j.prepend)]=Y[j.prepend]);function D(w,R){return!Sn&&typeof w=="object"&&w?!!w.capture:!Sn||!R?w:typeof w=="boolean"?{capture:w,passive:!0}:w?typeof w=="object"&&w.passive!==!1?lt(Me({},w),{passive:!0}):w:{passive:!0}}let I=function(w){if(!_e.isExisting)return he.call(_e.target,_e.eventName,_e.capture?U:V,_e.options)},C=function(w){if(!w.isRemoved){let R=At[w.eventName],pe;R&&(pe=R[w.capture?Xt:Jt]);let Pe=pe&&w.target[pe];if(Pe){for(let ae=0;ae<Pe.length;ae++)if(Pe[ae]===w){Pe.splice(ae,1),w.isRemoved=!0,w.removeAbortListener&&(w.removeAbortListener(),w.removeAbortListener=null),Pe.length===0&&(w.allRemoved=!0,w.target[pe]=null);break}}}if(w.allRemoved)return ne.call(w.target,w.eventName,w.capture?U:V,w.options)},y=function(w){return he.call(_e.target,_e.eventName,w.invoke,_e.options)},H=function(w){return tt.call(_e.target,_e.eventName,w.invoke,_e.options)},ie=function(w){return ne.call(w.target,w.eventName,w.invoke,w.options)},Ae=fe?I:y,ve=fe?C:ie,qe=function(w,R){let pe=typeof R;return pe==="function"&&w.callback===R||pe==="object"&&w.originalDelegate===R},xt=j&&j.diff?j.diff:qe,zt=Zone[Ge("UNPATCHED_EVENTS")],Ye=i[Ge("PASSIVE_EVENTS")];function z(w){if(typeof w=="object"&&w!==null){let R=Me({},w);return w.signal&&(R.signal=w.signal),R}return w}let A=function(w,R,pe,Pe,ae=!1,ke=!1){return function(){let Te=this||i,Ie=arguments[0];j&&j.transferEventName&&(Ie=j.transferEventName(Ie));let We=arguments[1];if(!We)return w.apply(this,arguments);if(Ci&&Ie==="uncaughtException")return w.apply(this,arguments);let Ze=!1;if(typeof We!="function"){if(!We.handleEvent)return w.apply(this,arguments);Ze=!0}if(Ne&&!Ne(w,We,Te,arguments))return;let rn=Sn&&!!Ye&&Ye.indexOf(Ie)!==-1,Bt=z(D(arguments[2],rn)),bn=Bt?.signal;if(bn?.aborted)return;if(zt){for(let Gt=0;Gt<zt.length;Gt++)if(Ie===zt[Gt])return rn?w.call(Te,Ie,We,Bt):w.apply(this,arguments)}let Ui=Bt?typeof Bt=="boolean"?!0:Bt.capture:!1,no=Bt&&typeof Bt=="object"?Bt.once:!1,js=Zone.current,Hi=At[Ie];Hi||(ca(Ie,$e),Hi=At[Ie]);let io=Hi[Ui?Xt:Jt],Pn=Te[io],ro=!1;if(Pn){if(ro=!0,je){for(let Gt=0;Gt<Pn.length;Gt++)if(xt(Pn[Gt],We))return}}else Pn=Te[io]=[];let Zn,oo=Te.constructor.name,ao=oa[oo];ao&&(Zn=ao[Ie]),Zn||(Zn=oo+R+($e?$e(Ie):Ie)),_e.options=Bt,no&&(_e.options.once=!1),_e.target=Te,_e.capture=Ui,_e.eventName=Ie,_e.isExisting=ro;let Dn=fe?Zs:void 0;Dn&&(Dn.taskData=_e),bn&&(_e.options.signal=void 0);let Rt=js.scheduleEventTask(Zn,We,Dn,pe,Pe);if(bn){_e.options.signal=bn;let Gt=()=>Rt.zone.cancelTask(Rt);w.call(bn,"abort",Gt,{once:!0}),Rt.removeAbortListener=()=>bn.removeEventListener("abort",Gt)}if(_e.target=null,Dn&&(Dn.taskData=null),no&&(_e.options.once=!0),!Sn&&typeof Rt.options=="boolean"||(Rt.options=Bt),Rt.target=Te,Rt.capture=Ui,Rt.eventName=Ie,Ze&&(Rt.originalDelegate=We),ke?Pn.unshift(Rt):Pn.push(Rt),ae)return Te}};return Y[n]=A(he,h,Ae,ve,xe),tt&&(Y[P]=A(tt,k,H,ve,xe,!0)),Y[s]=function(){let w=this||i,R=arguments[0];j&&j.transferEventName&&(R=j.transferEventName(R));let pe=arguments[2],Pe=pe?typeof pe=="boolean"?!0:pe.capture:!1,ae=arguments[1];if(!ae)return ne.apply(this,arguments);if(Ne&&!Ne(ne,ae,w,arguments))return;let ke=At[R],Te;ke&&(Te=ke[Pe?Xt:Jt]);let Ie=Te&&w[Te];if(Ie)for(let We=0;We<Ie.length;We++){let Ze=Ie[We];if(xt(Ze,ae)){if(Ie.splice(We,1),Ze.isRemoved=!0,Ie.length===0&&(Ze.allRemoved=!0,w[Te]=null,!Pe&&typeof R=="string")){let rn=Un+"ON_PROPERTY"+R;w[rn]=null}return Ze.zone.cancelTask(Ze),xe?w:void 0}}return ne.apply(this,arguments)},Y[d]=function(){let w=this||i,R=arguments[0];j&&j.transferEventName&&(R=j.transferEventName(R));let pe=[],Pe=la(w,$e?$e(R):R);for(let ae=0;ae<Pe.length;ae++){let ke=Pe[ae],Te=ke.originalDelegate?ke.originalDelegate:ke.callback;pe.push(Te)}return pe},Y[u]=function(){let w=this||i,R=arguments[0];if(R){j&&j.transferEventName&&(R=j.transferEventName(R));let pe=At[R];if(pe){let Pe=pe[Jt],ae=pe[Xt],ke=w[Pe],Te=w[ae];if(ke){let Ie=ke.slice();for(let We=0;We<Ie.length;We++){let Ze=Ie[We],rn=Ze.originalDelegate?Ze.originalDelegate:Ze.callback;this[s].call(this,R,rn,Ze.options)}}if(Te){let Ie=Te.slice();for(let We=0;We<Ie.length;We++){let Ze=Ie[We],rn=Ze.originalDelegate?Ze.originalDelegate:Ze.callback;this[s].call(this,R,rn,Ze.options)}}}}else{let pe=Object.keys(w);for(let Pe=0;Pe<pe.length;Pe++){let ae=pe[Pe],ke=aa.exec(ae),Te=ke&&ke[1];Te&&Te!=="removeListener"&&this[u].call(this,Te)}this[u].call(this,"removeListener")}if(xe)return this},tn(Y[n],he),tn(Y[s],ne),pt&&tn(Y[u],pt),Ce&&tn(Y[d],Ce),!0}let we=[];for(let B=0;B<e.length;B++)we[B]=q(e[B],t);return we}function la(i,r){if(!r){let s=[];for(let d in i){let u=aa.exec(d),g=u&&u[1];if(g&&(!r||g===r)){let h=i[d];if(h)for(let P=0;P<h.length;P++)s.push(h[P])}}return s}let e=At[r];e||(ca(r),e=At[r]);let t=i[e[Jt]],n=i[e[Xt]];return t?n?t.concat(n):t.slice():n?n.slice():[]}function Js(i,r){let e=i.Event;e&&e.prototype&&r.patchMethod(e.prototype,"stopImmediatePropagation",t=>function(n,s){n[sa]=!0,t&&t.apply(n,s)})}function ec(i,r){r.patchMethod(i,"queueMicrotask",e=>function(t,n){Zone.current.scheduleMicroTask("queueMicrotask",n[0])})}var fi=Ge("zoneTask");function xn(i,r,e,t){let n=null,s=null;r+=t,e+=t;let d={};function u(h){let P=h.data;P.args[0]=function(){return h.invoke.apply(this,arguments)};let k=n.apply(i,P.args);return Jo(k)?P.handleId=k:(P.handle=k,P.isRefreshable=Xo(k.refresh)),h}function g(h){let{handle:P,handleId:k}=h.data;return s.call(i,P??k)}n=en(i,r,h=>function(P,k){if(Xo(k[0])){let L={isRefreshable:!1,isPeriodic:t==="Interval",delay:t==="Timeout"||t==="Interval"?k[1]||0:void 0,args:k},$=k[0];k[0]=function(){try{return $.apply(this,arguments)}finally{let{handle:fe,handleId:Ne,isPeriodic:je,isRefreshable:xe}=L;!je&&!xe&&(Ne?delete d[Ne]:fe&&(fe[fi]=null))}};let V=dr(r,k[0],L,u,g);if(!V)return V;let{handleId:U,handle:q,isRefreshable:we,isPeriodic:B}=V.data;if(U)d[U]=V;else if(q&&(q[fi]=V,we&&!B)){let j=q.refresh;q.refresh=function(){let{zone:fe,state:Ne}=V;return Ne==="notScheduled"?(V._state="scheduled",fe._updateTaskCount(V,1)):Ne==="running"&&(V._state="scheduling"),j.call(this)}}return q??U??V}else return h.apply(i,k)}),s=en(i,e,h=>function(P,k){let L=k[0],$;Jo(L)?($=d[L],delete d[L]):($=L?.[fi],$?L[fi]=null:$=L),$?.type?$.cancelFn&&$.zone.cancelTask($):h.apply(i,k)})}function tc(i,r){let{isBrowser:e,isMix:t}=r.getGlobalObjects();if(!e&&!t||!i.customElements||!("customElements"in i))return;let n=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];r.patchCallbacks(r,i.customElements,"customElements","define",n)}function nc(i,r){if(Zone[r.symbol("patchEventTarget")])return;let{eventNames:e,zoneSymbolEventNames:t,TRUE_STR:n,FALSE_STR:s,ZONE_SYMBOL_PREFIX:d}=r.getGlobalObjects();for(let g=0;g<e.length;g++){let h=e[g],P=h+s,k=h+n,L=d+P,$=d+k;t[h]={},t[h][s]=L,t[h][n]=$}let u=i.EventTarget;if(!(!u||!u.prototype))return r.patchEventTarget(i,r,[u&&u.prototype]),!0}function ic(i,r){r.patchEventPrototype(i,r)}function da(i,r,e){if(!e||e.length===0)return r;let t=e.filter(s=>s.target===i);if(!t||t.length===0)return r;let n=t[0].ignoreProperties;return r.filter(s=>n.indexOf(s)===-1)}function ea(i,r,e,t){if(!i)return;let n=da(i,r,e);ra(i,n,t)}function rr(i){return Object.getOwnPropertyNames(i).filter(r=>r.startsWith("on")&&r.length>2).map(r=>r.substring(2))}function rc(i,r){if(Ci&&!ia||Zone[i.symbol("patchEvents")])return;let e=r.__Zone_ignore_on_properties,t=[];if(pr){let n=window;t=t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let s=Ks()?[{target:n,ignoreProperties:["error"]}]:[];ea(n,rr(n),e&&e.concat(s),ar(n))}t=t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let n=0;n<t.length;n++){let s=r[t[n]];s&&s.prototype&&ea(s.prototype,rr(s.prototype),e)}}function oc(i){i.__load_patch("legacy",r=>{let e=r[i.__symbol__("legacyPatch")];e&&e()}),i.__load_patch("timers",r=>{let e="set",t="clear";xn(r,e,t,"Timeout"),xn(r,e,t,"Interval"),xn(r,e,t,"Immediate")}),i.__load_patch("requestAnimationFrame",r=>{xn(r,"request","cancel","AnimationFrame"),xn(r,"mozRequest","mozCancel","AnimationFrame"),xn(r,"webkitRequest","webkitCancel","AnimationFrame")}),i.__load_patch("blocking",(r,e)=>{let t=["alert","prompt","confirm"];for(let n=0;n<t.length;n++){let s=t[n];en(r,s,(d,u,g)=>function(h,P){return e.current.run(d,r,P,g)})}}),i.__load_patch("EventTarget",(r,e,t)=>{ic(r,t),nc(r,t);let n=r.XMLHttpRequestEventTarget;n&&n.prototype&&t.patchEventTarget(r,t,[n.prototype])}),i.__load_patch("MutationObserver",(r,e,t)=>{$n("MutationObserver"),$n("WebKitMutationObserver")}),i.__load_patch("IntersectionObserver",(r,e,t)=>{$n("IntersectionObserver")}),i.__load_patch("FileReader",(r,e,t)=>{$n("FileReader")}),i.__load_patch("on_property",(r,e,t)=>{rc(t,r)}),i.__load_patch("customElements",(r,e,t)=>{tc(r,t)}),i.__load_patch("XHR",(r,e)=>{h(r);let t=Ge("xhrTask"),n=Ge("xhrSync"),s=Ge("xhrListener"),d=Ge("xhrScheduled"),u=Ge("xhrURL"),g=Ge("xhrErrorBeforeScheduled");function h(P){let k=P.XMLHttpRequest;if(!k)return;let L=k.prototype;function $(he){return he[t]}let V=L[tr],U=L[nr];if(!V){let he=P.XMLHttpRequestEventTarget;if(he){let ne=he.prototype;V=ne[tr],U=ne[nr]}}let q="readystatechange",we="scheduled";function B(he){let ne=he.data,Ce=ne.target;Ce[d]=!1,Ce[g]=!1;let pt=Ce[s];V||(V=Ce[tr],U=Ce[nr]),pt&&U.call(Ce,q,pt);let tt=Ce[s]=()=>{if(Ce.readyState===Ce.DONE)if(!ne.aborted&&Ce[d]&&he.state===we){let I=Ce[e.__symbol__("loadfalse")];if(Ce.status!==0&&I&&I.length>0){let C=he.invoke;he.invoke=function(){let y=Ce[e.__symbol__("loadfalse")];for(let H=0;H<y.length;H++)y[H]===he&&y.splice(H,1);!ne.aborted&&he.state===we&&C.call(he)},I.push(he)}else he.invoke()}else!ne.aborted&&Ce[d]===!1&&(Ce[g]=!0)};return V.call(Ce,q,tt),Ce[t]||(Ce[t]=he),$e.apply(Ce,ne.args),Ce[d]=!0,he}function j(){}function fe(he){let ne=he.data;return ne.aborted=!0,_e.apply(ne.target,ne.args)}let Ne=en(L,"open",()=>function(he,ne){return he[n]=ne[2]==!1,he[u]=ne[1],Ne.apply(he,ne)}),je="XMLHttpRequest.send",xe=Ge("fetchTaskAborting"),Y=Ge("fetchTaskScheduling"),$e=en(L,"send",()=>function(he,ne){if(e.current[Y]===!0||he[n])return $e.apply(he,ne);{let Ce={target:he,url:he[u],isPeriodic:!1,args:ne,aborted:!1},pt=dr(je,j,Ce,B,fe);he&&he[g]===!0&&!Ce.aborted&&pt.state===we&&pt.invoke()}}),_e=en(L,"abort",()=>function(he,ne){let Ce=$(he);if(Ce&&typeof Ce.type=="string"){if(Ce.cancelFn==null||Ce.data&&Ce.data.aborted)return;Ce.zone.cancelTask(Ce)}else if(e.current[xe]===!0)return _e.apply(he,ne)})}}),i.__load_patch("geolocation",r=>{r.navigator&&r.navigator.geolocation&&Gs(r.navigator.geolocation,["getCurrentPosition","watchPosition"])}),i.__load_patch("PromiseRejectionEvent",(r,e)=>{function t(n){return function(s){la(r,n).forEach(u=>{let g=r.PromiseRejectionEvent;if(g){let h=new g(n,{promise:s.promise,reason:s.rejection});u.invoke(h)}})}}r.PromiseRejectionEvent&&(e[Ge("unhandledPromiseRejectionHandler")]=t("unhandledrejection"),e[Ge("rejectionHandledHandler")]=t("rejectionhandled"))}),i.__load_patch("queueMicrotask",(r,e,t)=>{ec(r,t)})}function ac(i){i.__load_patch("ZoneAwarePromise",(r,e,t)=>{let n=Object.getOwnPropertyDescriptor,s=Object.defineProperty;function d(z){if(z&&z.toString===Object.prototype.toString){let A=z.constructor&&z.constructor.name;return(A||"")+": "+JSON.stringify(z)}return z?z.toString():Object.prototype.toString.call(z)}let u=t.symbol,g=[],h=r[u("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,P=u("Promise"),k=u("then"),L="__creationTrace__";t.onUnhandledError=z=>{if(t.showUncaughtError()){let A=z&&z.rejection;A?console.error("Unhandled Promise rejection:",A instanceof Error?A.message:A,"; Zone:",z.zone.name,"; Task:",z.task&&z.task.source,"; Value:",A,A instanceof Error?A.stack:void 0):console.error(z)}},t.microtaskDrainDone=()=>{for(;g.length;){let z=g.shift();try{z.zone.runGuarded(()=>{throw z.throwOriginal?z.rejection:z})}catch(A){V(A)}}};let $=u("unhandledPromiseRejectionHandler");function V(z){t.onUnhandledError(z);try{let A=e[$];typeof A=="function"&&A.call(this,z)}catch{}}function U(z){return z&&z.then}function q(z){return z}function we(z){return ve.reject(z)}let B=u("state"),j=u("value"),fe=u("finally"),Ne=u("parentPromiseValue"),je=u("parentPromiseState"),xe="Promise.then",Y=null,$e=!0,_e=!1,he=0;function ne(z,A){return w=>{try{D(z,A,w)}catch(R){D(z,!1,R)}}}let Ce=function(){let z=!1;return function(w){return function(){z||(z=!0,w.apply(null,arguments))}}},pt="Promise resolved with itself",tt=u("currentTaskTrace");function D(z,A,w){let R=Ce();if(z===w)throw new TypeError(pt);if(z[B]===Y){let pe=null;try{(typeof w=="object"||typeof w=="function")&&(pe=w&&w.then)}catch(Pe){return R(()=>{D(z,!1,Pe)})(),z}if(A!==_e&&w instanceof ve&&w.hasOwnProperty(B)&&w.hasOwnProperty(j)&&w[B]!==Y)C(w),D(z,w[B],w[j]);else if(A!==_e&&typeof pe=="function")try{pe.call(w,R(ne(z,A)),R(ne(z,!1)))}catch(Pe){R(()=>{D(z,!1,Pe)})()}else{z[B]=A;let Pe=z[j];if(z[j]=w,z[fe]===fe&&A===$e&&(z[B]=z[je],z[j]=z[Ne]),A===_e&&w instanceof Error){let ae=e.currentTask&&e.currentTask.data&&e.currentTask.data[L];ae&&s(w,tt,{configurable:!0,enumerable:!1,writable:!0,value:ae})}for(let ae=0;ae<Pe.length;)y(z,Pe[ae++],Pe[ae++],Pe[ae++],Pe[ae++]);if(Pe.length==0&&A==_e){z[B]=he;let ae=w;try{throw new Error("Uncaught (in promise): "+d(w)+(w&&w.stack?`
`+w.stack:""))}catch(ke){ae=ke}h&&(ae.throwOriginal=!0),ae.rejection=w,ae.promise=z,ae.zone=e.current,ae.task=e.currentTask,g.push(ae),t.scheduleMicroTask()}}}return z}let I=u("rejectionHandledHandler");function C(z){if(z[B]===he){try{let A=e[I];A&&typeof A=="function"&&A.call(this,{rejection:z[j],promise:z})}catch{}z[B]=_e;for(let A=0;A<g.length;A++)z===g[A].promise&&g.splice(A,1)}}function y(z,A,w,R,pe){C(z);let Pe=z[B],ae=Pe?typeof R=="function"?R:q:typeof pe=="function"?pe:we;A.scheduleMicroTask(xe,()=>{try{let ke=z[j],Te=!!w&&fe===w[fe];Te&&(w[Ne]=ke,w[je]=Pe);let Ie=A.run(ae,void 0,Te&&ae!==we&&ae!==q?[]:[ke]);D(w,!0,Ie)}catch(ke){D(w,!1,ke)}},w)}let H="function ZoneAwarePromise() { [native code] }",ie=function(){},Ae=r.AggregateError;class ve{static toString(){return H}static resolve(A){return A instanceof ve?A:D(new this(null),$e,A)}static reject(A){return D(new this(null),_e,A)}static withResolvers(){let A={};return A.promise=new ve((w,R)=>{A.resolve=w,A.reject=R}),A}static any(A){if(!A||typeof A[Symbol.iterator]!="function")return Promise.reject(new Ae([],"All promises were rejected"));let w=[],R=0;try{for(let ae of A)R++,w.push(ve.resolve(ae))}catch{return Promise.reject(new Ae([],"All promises were rejected"))}if(R===0)return Promise.reject(new Ae([],"All promises were rejected"));let pe=!1,Pe=[];return new ve((ae,ke)=>{for(let Te=0;Te<w.length;Te++)w[Te].then(Ie=>{pe||(pe=!0,ae(Ie))},Ie=>{Pe.push(Ie),R--,R===0&&(pe=!0,ke(new Ae(Pe,"All promises were rejected")))})})}static race(A){let w,R,pe=new this((ke,Te)=>{w=ke,R=Te});function Pe(ke){w(ke)}function ae(ke){R(ke)}for(let ke of A)U(ke)||(ke=this.resolve(ke)),ke.then(Pe,ae);return pe}static all(A){return ve.allWithCallback(A)}static allSettled(A){return(this&&this.prototype instanceof ve?this:ve).allWithCallback(A,{thenCallback:R=>({status:"fulfilled",value:R}),errorCallback:R=>({status:"rejected",reason:R})})}static allWithCallback(A,w){let R,pe,Pe=new this((Ie,We)=>{R=Ie,pe=We}),ae=2,ke=0,Te=[];for(let Ie of A){U(Ie)||(Ie=this.resolve(Ie));let We=ke;try{Ie.then(Ze=>{Te[We]=w?w.thenCallback(Ze):Ze,ae--,ae===0&&R(Te)},Ze=>{w?(Te[We]=w.errorCallback(Ze),ae--,ae===0&&R(Te)):pe(Ze)})}catch(Ze){pe(Ze)}ae++,ke++}return ae-=2,ae===0&&R(Te),Pe}constructor(A){let w=this;if(!(w instanceof ve))throw new Error("Must be an instanceof Promise.");w[B]=Y,w[j]=[];try{let R=Ce();A&&A(R(ne(w,$e)),R(ne(w,_e)))}catch(R){D(w,!1,R)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return ve}then(A,w){let R=this.constructor?.[Symbol.species];(!R||typeof R!="function")&&(R=this.constructor||ve);let pe=new R(ie),Pe=e.current;return this[B]==Y?this[j].push(Pe,pe,A,w):y(this,Pe,pe,A,w),pe}catch(A){return this.then(null,A)}finally(A){let w=this.constructor?.[Symbol.species];(!w||typeof w!="function")&&(w=ve);let R=new w(ie);R[fe]=fe;let pe=e.current;return this[B]==Y?this[j].push(pe,R,A,A):y(this,pe,R,A,A),R}}ve.resolve=ve.resolve,ve.reject=ve.reject,ve.race=ve.race,ve.all=ve.all;let qe=r[P]=r.Promise;r.Promise=ve;let xt=u("thenPatched");function zt(z){let A=z.prototype,w=n(A,"then");if(w&&(w.writable===!1||!w.configurable))return;let R=A.then;A[k]=R,z.prototype.then=function(pe,Pe){return new ve((ke,Te)=>{R.call(this,ke,Te)}).then(pe,Pe)},z[xt]=!0}t.patchThen=zt;function Ye(z){return function(A,w){let R=z.apply(A,w);if(R instanceof ve)return R;let pe=R.constructor;return pe[xt]||zt(pe),R}}return qe&&(zt(qe),en(r,"fetch",z=>Ye(z))),Promise[e.__symbol__("uncaughtPromiseErrors")]=g,ve})}function sc(i){i.__load_patch("toString",r=>{let e=Function.prototype.toString,t=Ge("OriginalDelegate"),n=Ge("Promise"),s=Ge("Error"),d=function(){if(typeof this=="function"){let P=this[t];if(P)return typeof P=="function"?e.call(P):Object.prototype.toString.call(P);if(this===Promise){let k=r[n];if(k)return e.call(k)}if(this===Error){let k=r[s];if(k)return e.call(k)}}return e.call(this)};d[t]=e,Function.prototype.toString=d;let u=Object.prototype.toString,g="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?g:u.call(this)}})}function cc(i,r,e,t,n){let s=Zone.__symbol__(t);if(r[s])return;let d=r[s]=r[t];r[t]=function(u,g,h){return g&&g.prototype&&n.forEach(function(P){let k=`${e}.${t}::`+P,L=g.prototype;try{if(L.hasOwnProperty(P)){let $=i.ObjectGetOwnPropertyDescriptor(L,P);$&&$.value?($.value=i.wrapWithCurrentZone($.value,k),i._redefineProperty(g.prototype,P,$)):L[P]&&(L[P]=i.wrapWithCurrentZone(L[P],k))}else L[P]&&(L[P]=i.wrapWithCurrentZone(L[P],k))}catch{}}),d.call(r,u,g,h)},i.attachOriginToPatched(r[t],d)}function lc(i){i.__load_patch("util",(r,e,t)=>{let n=rr(r);t.patchOnProperties=ra,t.patchMethod=en,t.bindArguments=mr,t.patchMacroTask=Ys;let s=e.__symbol__("BLACK_LISTED_EVENTS"),d=e.__symbol__("UNPATCHED_EVENTS");r[d]&&(r[s]=r[d]),r[s]&&(e[s]=e[d]=r[s]),t.patchEventPrototype=Js,t.patchEventTarget=Xs,t.isIEOrEdge=Ws,t.ObjectDefineProperty=or,t.ObjectGetOwnPropertyDescriptor=qn,t.ObjectCreate=Us,t.ArraySlice=Hs,t.patchClass=$n,t.wrapWithCurrentZone=lr,t.filterProperties=da,t.attachOriginToPatched=tn,t._redefineProperty=Object.defineProperty,t.patchCallbacks=cc,t.getGlobalObjects=()=>({globalSources:oa,zoneSymbolEventNames:At,eventNames:n,isBrowser:pr,isMix:ia,isNode:Ci,TRUE_STR:Xt,FALSE_STR:Jt,ZONE_SYMBOL_PREFIX:Un,ADD_EVENT_LISTENER_STR:sr,REMOVE_EVENT_LISTENER_STR:cr})})}function dc(i){ac(i),sc(i),lc(i)}var ma=qs();dc(ma);oc(ma);function pa(i){return new Re(3e3,!1)}function mc(){return new Re(3100,!1)}function pc(){return new Re(3101,!1)}function uc(i){return new Re(3001,!1)}function gc(i){return new Re(3003,!1)}function fc(i){return new Re(3004,!1)}function hc(i,r){return new Re(3005,!1)}function _c(){return new Re(3006,!1)}function Cc(){return new Re(3007,!1)}function bc(i,r){return new Re(3008,!1)}function Pc(i){return new Re(3002,!1)}function Mc(i,r,e,t,n){return new Re(3010,!1)}function yc(){return new Re(3011,!1)}function Oc(){return new Re(3012,!1)}function vc(){return new Re(3200,!1)}function xc(){return new Re(3202,!1)}function Sc(){return new Re(3013,!1)}function wc(i){return new Re(3014,!1)}function Ec(i){return new Re(3015,!1)}function kc(i){return new Re(3016,!1)}function Tc(i,r){return new Re(3404,!1)}function Ic(i){return new Re(3502,!1)}function Fc(i){return new Re(3503,!1)}function Dc(){return new Re(3300,!1)}function Ac(i){return new Re(3504,!1)}function Nc(i){return new Re(3301,!1)}function Lc(i,r){return new Re(3302,!1)}function Vc(i){return new Re(3303,!1)}function zc(i,r){return new Re(3400,!1)}function Rc(i){return new Re(3401,!1)}function jc(i){return new Re(3402,!1)}function $c(i,r){return new Re(3505,!1)}function pn(i){switch(i.length){case 0:return new On;case 1:return i[0];default:return new er(i)}}function Sa(i,r,e=new Map,t=new Map){let n=[],s=[],d=-1,u=null;if(r.forEach(g=>{let h=g.get("offset"),P=h==d,k=P&&u||new Map;g.forEach((L,$)=>{let V=$,U=L;if($!=="offset")switch(V=i.normalizePropertyName(V,n),U){case ai:U=e.get($);break;case Qt:U=t.get($);break;default:U=i.normalizeStyleValue($,V,U,n);break}k.set(V,U)}),P||s.push(k),u=k,d=h}),n.length)throw Ic(n);return s}function Nr(i,r,e,t){switch(r){case"start":i.onStart(()=>t(e&&ur(e,"start",i)));break;case"done":i.onDone(()=>t(e&&ur(e,"done",i)));break;case"destroy":i.onDestroy(()=>t(e&&ur(e,"destroy",i)));break}}function ur(i,r,e){let t=e.totalTime,n=!!e.disabled,s=Lr(i.element,i.triggerName,i.fromState,i.toState,r||i.phaseName,t??i.totalTime,n),d=i._data;return d!=null&&(s._data=d),s}function Lr(i,r,e,t,n="",s=0,d){return{element:i,triggerName:r,fromState:e,toState:t,phaseName:n,totalTime:s,disabled:!!d}}function vt(i,r,e){let t=i.get(r);return t||i.set(r,t=e),t}function ua(i){let r=i.indexOf(":"),e=i.substring(1,r),t=i.slice(r+1);return[e,t]}var qc=typeof document>"u"?null:document.documentElement;function Vr(i){let r=i.parentNode||i.host||null;return r===qc?null:r}function Uc(i){return i.substring(1,6)=="ebkit"}var gn=null,ga=!1;function Hc(i){gn||(gn=Bc()||{},ga=gn.style?"WebkitAppearance"in gn.style:!1);let r=!0;return gn.style&&!Uc(i)&&(r=i in gn.style,!r&&ga&&(r="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in gn.style)),r}function Bc(){return typeof document<"u"?document.body:null}function wa(i,r){for(;r;){if(r===i)return!0;r=Vr(r)}return!1}function Ea(i,r,e){if(e)return Array.from(i.querySelectorAll(r));let t=i.querySelector(r);return t?[t]:[]}var zr=(()=>{class i{validateStyleProperty(e){return Hc(e)}matchesElement(e,t){return!1}containsElement(e,t){return wa(e,t)}getParentElement(e){return Vr(e)}query(e,t,n){return Ea(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,s,d,u=[],g){return new On(n,s)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac})}}return i})(),_n=class{static{this.NOOP=new zr}},Cn=class{};var Gc=1e3,ka="{{",Qc="}}",Ta="ng-enter",br="ng-leave",bi="ng-trigger",vi=".ng-trigger",fa="ng-animating",Pr=".ng-animating";function nn(i){if(typeof i=="number")return i;let r=i.match(/^(-?[\.\d]+)(m?s)/);return!r||r.length<2?0:Mr(parseFloat(r[1]),r[2])}function Mr(i,r){switch(r){case"s":return i*Gc;default:return i}}function xi(i,r,e){return i.hasOwnProperty("duration")?i:Yc(i,r,e)}function Yc(i,r,e){let t=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,n,s=0,d="";if(typeof i=="string"){let u=i.match(t);if(u===null)return r.push(pa(i)),{duration:0,delay:0,easing:""};n=Mr(parseFloat(u[1]),u[2]);let g=u[3];g!=null&&(s=Mr(parseFloat(g),u[4]));let h=u[5];h&&(d=h)}else n=i;if(!e){let u=!1,g=r.length;n<0&&(r.push(mc()),u=!0),s<0&&(r.push(pc()),u=!0),u&&r.splice(g,0,pa(i))}return{duration:n,delay:s,easing:d}}function Kc(i){return i.length?i[0]instanceof Map?i:i.map(r=>new Map(Object.entries(r))):[]}function Kt(i,r,e){r.forEach((t,n)=>{let s=Rr(n);e&&!e.has(n)&&e.set(n,i.style[s]),i.style[s]=t})}function hn(i,r){r.forEach((e,t)=>{let n=Rr(t);i.style[n]=""})}function Hn(i){return Array.isArray(i)?i.length==1?i[0]:No(i):i}function Wc(i,r,e){let t=r.params||{},n=Ia(i);n.length&&n.forEach(s=>{t.hasOwnProperty(s)||e.push(uc(s))})}var yr=new RegExp(`${ka}\\s*(.+?)\\s*${Qc}`,"g");function Ia(i){let r=[];if(typeof i=="string"){let e;for(;e=yr.exec(i);)r.push(e[1]);yr.lastIndex=0}return r}function Gn(i,r,e){let t=`${i}`,n=t.replace(yr,(s,d)=>{let u=r[d];return u==null&&(e.push(gc(d)),u=""),u.toString()});return n==t?i:n}var Zc=/-+([a-z0-9])/g;function Rr(i){return i.replace(Zc,(...r)=>r[1].toUpperCase())}function Xc(i,r){return i===0||r===0}function Jc(i,r,e){if(e.size&&r.length){let t=r[0],n=[];if(e.forEach((s,d)=>{t.has(d)||n.push(d),t.set(d,s)}),n.length)for(let s=1;s<r.length;s++){let d=r[s];n.forEach(u=>d.set(u,jr(i,u)))}}return r}function Ot(i,r,e){switch(r.type){case Le.Trigger:return i.visitTrigger(r,e);case Le.State:return i.visitState(r,e);case Le.Transition:return i.visitTransition(r,e);case Le.Sequence:return i.visitSequence(r,e);case Le.Group:return i.visitGroup(r,e);case Le.Animate:return i.visitAnimate(r,e);case Le.Keyframes:return i.visitKeyframes(r,e);case Le.Style:return i.visitStyle(r,e);case Le.Reference:return i.visitReference(r,e);case Le.AnimateChild:return i.visitAnimateChild(r,e);case Le.AnimateRef:return i.visitAnimateRef(r,e);case Le.Query:return i.visitQuery(r,e);case Le.Stagger:return i.visitStagger(r,e);default:throw fc(r.type)}}function jr(i,r){return window.getComputedStyle(i)[r]}var el=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Si=class extends Cn{normalizePropertyName(r,e){return Rr(r)}normalizeStyleValue(r,e,t,n){let s="",d=t.toString().trim();if(el.has(e)&&t!==0&&t!=="0")if(typeof t=="number")s="px";else{let u=t.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&u[1].length==0&&n.push(hc(r,t))}return d+s}};var wi="*";function tl(i,r){let e=[];return typeof i=="string"?i.split(/\s*,\s*/).forEach(t=>nl(t,e,r)):e.push(i),e}function nl(i,r,e){if(i[0]==":"){let g=il(i,e);if(typeof g=="function"){r.push(g);return}i=g}let t=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return e.push(Ec(i)),r;let n=t[1],s=t[2],d=t[3];r.push(ha(n,d));let u=n==wi&&d==wi;s[0]=="<"&&!u&&r.push(ha(d,n))}function il(i,r){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return r.push(kc(i)),"* => *"}}var Pi=new Set(["true","1"]),Mi=new Set(["false","0"]);function ha(i,r){let e=Pi.has(i)||Mi.has(i),t=Pi.has(r)||Mi.has(r);return(n,s)=>{let d=i==wi||i==n,u=r==wi||r==s;return!d&&e&&typeof n=="boolean"&&(d=n?Pi.has(i):Mi.has(i)),!u&&t&&typeof s=="boolean"&&(u=s?Pi.has(r):Mi.has(r)),d&&u}}var Fa=":self",rl=new RegExp(`s*${Fa}s*,?`,"g");function Da(i,r,e,t){return new Or(i).build(r,e,t)}var _a="",Or=class{constructor(r){this._driver=r}build(r,e,t){let n=new vr(e);return this._resetContextStyleTimingState(n),Ot(this,Hn(r),n)}_resetContextStyleTimingState(r){r.currentQuerySelector=_a,r.collectedStyles=new Map,r.collectedStyles.set(_a,new Map),r.currentTime=0}visitTrigger(r,e){let t=e.queryCount=0,n=e.depCount=0,s=[],d=[];return r.name.charAt(0)=="@"&&e.errors.push(_c()),r.definitions.forEach(u=>{if(this._resetContextStyleTimingState(e),u.type==Le.State){let g=u,h=g.name;h.toString().split(/\s*,\s*/).forEach(P=>{g.name=P,s.push(this.visitState(g,e))}),g.name=h}else if(u.type==Le.Transition){let g=this.visitTransition(u,e);t+=g.queryCount,n+=g.depCount,d.push(g)}else e.errors.push(Cc())}),{type:Le.Trigger,name:r.name,states:s,transitions:d,queryCount:t,depCount:n,options:null}}visitState(r,e){let t=this.visitStyle(r.styles,e),n=r.options&&r.options.params||null;if(t.containsDynamicStyles){let s=new Set,d=n||{};t.styles.forEach(u=>{u instanceof Map&&u.forEach(g=>{Ia(g).forEach(h=>{d.hasOwnProperty(h)||s.add(h)})})}),s.size&&e.errors.push(bc(r.name,[...s.values()]))}return{type:Le.State,name:r.name,style:t,options:n?{params:n}:null}}visitTransition(r,e){e.queryCount=0,e.depCount=0;let t=Ot(this,Hn(r.animation),e),n=tl(r.expr,e.errors);return{type:Le.Transition,matchers:n,animation:t,queryCount:e.queryCount,depCount:e.depCount,options:fn(r.options)}}visitSequence(r,e){return{type:Le.Sequence,steps:r.steps.map(t=>Ot(this,t,e)),options:fn(r.options)}}visitGroup(r,e){let t=e.currentTime,n=0,s=r.steps.map(d=>{e.currentTime=t;let u=Ot(this,d,e);return n=Math.max(n,e.currentTime),u});return e.currentTime=n,{type:Le.Group,steps:s,options:fn(r.options)}}visitAnimate(r,e){let t=cl(r.timings,e.errors);e.currentAnimateTimings=t;let n,s=r.styles?r.styles:dt({});if(s.type==Le.Keyframes)n=this.visitKeyframes(s,e);else{let d=r.styles,u=!1;if(!d){u=!0;let h={};t.easing&&(h.easing=t.easing),d=dt(h)}e.currentTime+=t.duration+t.delay;let g=this.visitStyle(d,e);g.isEmptyStep=u,n=g}return e.currentAnimateTimings=null,{type:Le.Animate,timings:t,style:n,options:null}}visitStyle(r,e){let t=this._makeStyleAst(r,e);return this._validateStyleAst(t,e),t}_makeStyleAst(r,e){let t=[],n=Array.isArray(r.styles)?r.styles:[r.styles];for(let u of n)typeof u=="string"?u===Qt?t.push(u):e.errors.push(Pc(u)):t.push(new Map(Object.entries(u)));let s=!1,d=null;return t.forEach(u=>{if(u instanceof Map&&(u.has("easing")&&(d=u.get("easing"),u.delete("easing")),!s)){for(let g of u.values())if(g.toString().indexOf(ka)>=0){s=!0;break}}}),{type:Le.Style,styles:t,easing:d,offset:r.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(r,e){let t=e.currentAnimateTimings,n=e.currentTime,s=e.currentTime;t&&s>0&&(s-=t.duration+t.delay),r.styles.forEach(d=>{typeof d!="string"&&d.forEach((u,g)=>{let h=e.collectedStyles.get(e.currentQuerySelector),P=h.get(g),k=!0;P&&(s!=n&&s>=P.startTime&&n<=P.endTime&&(e.errors.push(Mc(g,P.startTime,P.endTime,s,n)),k=!1),s=P.startTime),k&&h.set(g,{startTime:s,endTime:n}),e.options&&Wc(u,e.options,e.errors)})})}visitKeyframes(r,e){let t={type:Le.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(yc()),t;let n=1,s=0,d=[],u=!1,g=!1,h=0,P=r.steps.map(we=>{let B=this._makeStyleAst(we,e),j=B.offset!=null?B.offset:sl(B.styles),fe=0;return j!=null&&(s++,fe=B.offset=j),g=g||fe<0||fe>1,u=u||fe<h,h=fe,d.push(fe),B});g&&e.errors.push(Oc()),u&&e.errors.push(vc());let k=r.steps.length,L=0;s>0&&s<k?e.errors.push(xc()):s==0&&(L=n/(k-1));let $=k-1,V=e.currentTime,U=e.currentAnimateTimings,q=U.duration;return P.forEach((we,B)=>{let j=L>0?B==$?1:L*B:d[B],fe=j*q;e.currentTime=V+U.delay+fe,U.duration=fe,this._validateStyleAst(we,e),we.offset=j,t.styles.push(we)}),t}visitReference(r,e){return{type:Le.Reference,animation:Ot(this,Hn(r.animation),e),options:fn(r.options)}}visitAnimateChild(r,e){return e.depCount++,{type:Le.AnimateChild,options:fn(r.options)}}visitAnimateRef(r,e){return{type:Le.AnimateRef,animation:this.visitReference(r.animation,e),options:fn(r.options)}}visitQuery(r,e){let t=e.currentQuerySelector,n=r.options||{};e.queryCount++,e.currentQuery=r;let[s,d]=ol(r.selector);e.currentQuerySelector=t.length?t+" "+s:s,vt(e.collectedStyles,e.currentQuerySelector,new Map);let u=Ot(this,Hn(r.animation),e);return e.currentQuery=null,e.currentQuerySelector=t,{type:Le.Query,selector:s,limit:n.limit||0,optional:!!n.optional,includeSelf:d,animation:u,originalSelector:r.selector,options:fn(r.options)}}visitStagger(r,e){e.currentQuery||e.errors.push(Sc());let t=r.timings==="full"?{duration:0,delay:0,easing:"full"}:xi(r.timings,e.errors,!0);return{type:Le.Stagger,animation:Ot(this,Hn(r.animation),e),timings:t,options:null}}};function ol(i){let r=!!i.split(/\s*,\s*/).find(e=>e==Fa);return r&&(i=i.replace(rl,"")),i=i.replace(/@\*/g,vi).replace(/@\w+/g,e=>vi+"-"+e.slice(1)).replace(/:animating/g,Pr),[i,r]}function al(i){return i?Me({},i):null}var vr=class{constructor(r){this.errors=r,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function sl(i){if(typeof i=="string")return null;let r=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){let t=e;r=parseFloat(t.get("offset")),t.delete("offset")}});else if(i instanceof Map&&i.has("offset")){let e=i;r=parseFloat(e.get("offset")),e.delete("offset")}return r}function cl(i,r){if(i.hasOwnProperty("duration"))return i;if(typeof i=="number"){let s=xi(i,r).duration;return gr(s,0,"")}let e=i;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=gr(0,0,"");return s.dynamic=!0,s.strValue=e,s}let n=xi(e,r);return gr(n.duration,n.delay,n.easing)}function fn(i){return i?(i=Me({},i),i.params&&(i.params=al(i.params))):i={},i}function gr(i,r,e){return{duration:i,delay:r,easing:e}}function $r(i,r,e,t,n,s,d=null,u=!1){return{type:1,element:i,keyframes:r,preStyleProps:e,postStyleProps:t,duration:n,delay:s,totalTime:n+s,easing:d,subTimeline:u}}var Qn=class{constructor(){this._map=new Map}get(r){return this._map.get(r)||[]}append(r,e){let t=this._map.get(r);t||this._map.set(r,t=[]),t.push(...e)}has(r){return this._map.has(r)}clear(){this._map.clear()}},ll=1,dl=":enter",ml=new RegExp(dl,"g"),pl=":leave",ul=new RegExp(pl,"g");function Aa(i,r,e,t,n,s=new Map,d=new Map,u,g,h=[]){return new xr().buildKeyframes(i,r,e,t,n,s,d,u,g,h)}var xr=class{buildKeyframes(r,e,t,n,s,d,u,g,h,P=[]){h=h||new Qn;let k=new Sr(r,e,h,n,s,P,[]);k.options=g;let L=g.delay?nn(g.delay):0;k.currentTimeline.delayNextStep(L),k.currentTimeline.setStyles([d],null,k.errors,g),Ot(this,t,k);let $=k.timelines.filter(V=>V.containsAnimation());if($.length&&u.size){let V;for(let U=$.length-1;U>=0;U--){let q=$[U];if(q.element===e){V=q;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([u],null,k.errors,g)}return $.length?$.map(V=>V.buildKeyframes()):[$r(e,[],[],[],0,L,"",!1)]}visitTrigger(r,e){}visitState(r,e){}visitTransition(r,e){}visitAnimateChild(r,e){let t=e.subInstructions.get(e.element);if(t){let n=e.createSubContext(r.options),s=e.currentTimeline.currentTime,d=this._visitSubInstructions(t,n,n.options);s!=d&&e.transformIntoNewTimeline(d)}e.previousNode=r}visitAnimateRef(r,e){let t=e.createSubContext(r.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([r.options,r.animation.options],e,t),this.visitReference(r.animation,t),e.transformIntoNewTimeline(t.currentTimeline.currentTime),e.previousNode=r}_applyAnimationRefDelays(r,e,t){for(let n of r){let s=n?.delay;if(s){let d=typeof s=="number"?s:nn(Gn(s,n?.params??{},e.errors));t.delayNextStep(d)}}}_visitSubInstructions(r,e,t){let s=e.currentTimeline.currentTime,d=t.duration!=null?nn(t.duration):null,u=t.delay!=null?nn(t.delay):null;return d!==0&&r.forEach(g=>{let h=e.appendInstructionToTimeline(g,d,u);s=Math.max(s,h.duration+h.delay)}),s}visitReference(r,e){e.updateOptions(r.options,!0),Ot(this,r.animation,e),e.previousNode=r}visitSequence(r,e){let t=e.subContextCount,n=e,s=r.options;if(s&&(s.params||s.delay)&&(n=e.createSubContext(s),n.transformIntoNewTimeline(),s.delay!=null)){n.previousNode.type==Le.Style&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Ei);let d=nn(s.delay);n.delayNextStep(d)}r.steps.length&&(r.steps.forEach(d=>Ot(this,d,n)),n.currentTimeline.applyStylesToKeyframe(),n.subContextCount>t&&n.transformIntoNewTimeline()),e.previousNode=r}visitGroup(r,e){let t=[],n=e.currentTimeline.currentTime,s=r.options&&r.options.delay?nn(r.options.delay):0;r.steps.forEach(d=>{let u=e.createSubContext(r.options);s&&u.delayNextStep(s),Ot(this,d,u),n=Math.max(n,u.currentTimeline.currentTime),t.push(u.currentTimeline)}),t.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(n),e.previousNode=r}_visitTiming(r,e){if(r.dynamic){let t=r.strValue,n=e.params?Gn(t,e.params,e.errors):t;return xi(n,e.errors)}else return{duration:r.duration,delay:r.delay,easing:r.easing}}visitAnimate(r,e){let t=e.currentAnimateTimings=this._visitTiming(r.timings,e),n=e.currentTimeline;t.delay&&(e.incrementTime(t.delay),n.snapshotCurrentStyles());let s=r.style;s.type==Le.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(t.duration),this.visitStyle(s,e),n.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=r}visitStyle(r,e){let t=e.currentTimeline,n=e.currentAnimateTimings;!n&&t.hasCurrentStyleProperties()&&t.forwardFrame();let s=n&&n.easing||r.easing;r.isEmptyStep?t.applyEmptyStep(s):t.setStyles(r.styles,s,e.errors,e.options),e.previousNode=r}visitKeyframes(r,e){let t=e.currentAnimateTimings,n=e.currentTimeline.duration,s=t.duration,u=e.createSubContext().currentTimeline;u.easing=t.easing,r.styles.forEach(g=>{let h=g.offset||0;u.forwardTime(h*s),u.setStyles(g.styles,g.easing,e.errors,e.options),u.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(u),e.transformIntoNewTimeline(n+s),e.previousNode=r}visitQuery(r,e){let t=e.currentTimeline.currentTime,n=r.options||{},s=n.delay?nn(n.delay):0;s&&(e.previousNode.type===Le.Style||t==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ei);let d=t,u=e.invokeQuery(r.selector,r.originalSelector,r.limit,r.includeSelf,!!n.optional,e.errors);e.currentQueryTotal=u.length;let g=null;u.forEach((h,P)=>{e.currentQueryIndex=P;let k=e.createSubContext(r.options,h);s&&k.delayNextStep(s),h===e.element&&(g=k.currentTimeline),Ot(this,r.animation,k),k.currentTimeline.applyStylesToKeyframe();let L=k.currentTimeline.currentTime;d=Math.max(d,L)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),g&&(e.currentTimeline.mergeTimelineCollectedStyles(g),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=r}visitStagger(r,e){let t=e.parentContext,n=e.currentTimeline,s=r.timings,d=Math.abs(s.duration),u=d*(e.currentQueryTotal-1),g=d*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":g=u-g;break;case"full":g=t.currentStaggerTime;break}let P=e.currentTimeline;g&&P.delayNextStep(g);let k=P.currentTime;Ot(this,r.animation,e),e.previousNode=r,t.currentStaggerTime=n.currentTime-k+(n.startTime-t.currentTimeline.startTime)}},Ei={},Sr=class i{constructor(r,e,t,n,s,d,u,g){this._driver=r,this.element=e,this.subInstructions=t,this._enterClassName=n,this._leaveClassName=s,this.errors=d,this.timelines=u,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ei,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new ki(this._driver,e,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(r,e){if(!r)return;let t=r,n=this.options;t.duration!=null&&(n.duration=nn(t.duration)),t.delay!=null&&(n.delay=nn(t.delay));let s=t.params;if(s){let d=n.params;d||(d=this.options.params={}),Object.keys(s).forEach(u=>{(!e||!d.hasOwnProperty(u))&&(d[u]=Gn(s[u],d,this.errors))})}}_copyOptions(){let r={};if(this.options){let e=this.options.params;if(e){let t=r.params={};Object.keys(e).forEach(n=>{t[n]=e[n]})}}return r}createSubContext(r=null,e,t){let n=e||this.element,s=new i(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,t||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(r),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(r){return this.previousNode=Ei,this.currentTimeline=this.currentTimeline.fork(this.element,r),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(r,e,t){let n={duration:e??r.duration,delay:this.currentTimeline.currentTime+(t??0)+r.delay,easing:""},s=new wr(this._driver,r.element,r.keyframes,r.preStyleProps,r.postStyleProps,n,r.stretchStartingKeyframe);return this.timelines.push(s),n}incrementTime(r){this.currentTimeline.forwardTime(this.currentTimeline.duration+r)}delayNextStep(r){r>0&&this.currentTimeline.delayNextStep(r)}invokeQuery(r,e,t,n,s,d){let u=[];if(n&&u.push(this.element),r.length>0){r=r.replace(ml,"."+this._enterClassName),r=r.replace(ul,"."+this._leaveClassName);let g=t!=1,h=this._driver.query(this.element,r,g);t!==0&&(h=t<0?h.slice(h.length+t,h.length):h.slice(0,t)),u.push(...h)}return!s&&u.length==0&&d.push(wc(e)),u}},ki=class i{constructor(r,e,t,n){this._driver=r,this.element=e,this.startTime=t,this._elementTimelineStylesLookup=n,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(r){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+r),e&&this.snapshotCurrentStyles()):this.startTime+=r}fork(r,e){return this.applyStylesToKeyframe(),new i(this._driver,r,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=ll,this._loadKeyframe()}forwardTime(r){this.applyStylesToKeyframe(),this.duration=r,this._loadKeyframe()}_updateStyle(r,e){this._localTimelineStyles.set(r,e),this._globalTimelineStyles.set(r,e),this._styleSummary.set(r,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(r){r&&this._previousKeyframe.set("easing",r);for(let[e,t]of this._globalTimelineStyles)this._backFill.set(e,t||Qt),this._currentKeyframe.set(e,Qt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(r,e,t,n){e&&this._previousKeyframe.set("easing",e);let s=n&&n.params||{},d=gl(r,this._globalTimelineStyles);for(let[u,g]of d){let h=Gn(g,s,t);this._pendingStyles.set(u,h),this._localTimelineStyles.has(u)||this._backFill.set(u,this._globalTimelineStyles.get(u)??Qt),this._updateStyle(u,h)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((r,e)=>{this._currentKeyframe.set(e,r)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((r,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,r)}))}snapshotCurrentStyles(){for(let[r,e]of this._localTimelineStyles)this._pendingStyles.set(r,e),this._updateStyle(r,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let r=[];for(let e in this._currentKeyframe)r.push(e);return r}mergeTimelineCollectedStyles(r){r._styleSummary.forEach((e,t)=>{let n=this._styleSummary.get(t);(!n||e.time>n.time)&&this._updateStyle(t,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let r=new Set,e=new Set,t=this._keyframes.size===1&&this.duration===0,n=[];this._keyframes.forEach((u,g)=>{let h=new Map([...this._backFill,...u]);h.forEach((P,k)=>{P===ai?r.add(k):P===Qt&&e.add(k)}),t||h.set("offset",g/this.duration),n.push(h)});let s=[...r.values()],d=[...e.values()];if(t){let u=n[0],g=new Map(u);u.set("offset",0),g.set("offset",1),n=[u,g]}return $r(this.element,n,s,d,this.duration,this.startTime,this.easing,!1)}},wr=class extends ki{constructor(r,e,t,n,s,d,u=!1){super(r,e,d.delay),this.keyframes=t,this.preStyleProps=n,this.postStyleProps=s,this._stretchStartingKeyframe=u,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let r=this.keyframes,{delay:e,duration:t,easing:n}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],d=t+e,u=e/d,g=new Map(r[0]);g.set("offset",0),s.push(g);let h=new Map(r[0]);h.set("offset",Ca(u)),s.push(h);let P=r.length-1;for(let k=1;k<=P;k++){let L=new Map(r[k]),$=L.get("offset"),V=e+$*t;L.set("offset",Ca(V/d)),s.push(L)}t=d,e=0,n="",r=s}return $r(this.element,r,this.preStyleProps,this.postStyleProps,t,e,n,!0)}};function Ca(i,r=3){let e=Math.pow(10,r-1);return Math.round(i*e)/e}function gl(i,r){let e=new Map,t;return i.forEach(n=>{if(n==="*"){t??=r.keys();for(let s of t)e.set(s,Qt)}else for(let[s,d]of n)e.set(s,d)}),e}function ba(i,r,e,t,n,s,d,u,g,h,P,k,L){return{type:0,element:i,triggerName:r,isRemovalTransition:n,fromState:e,fromStyles:s,toState:t,toStyles:d,timelines:u,queriedElements:g,preStyleProps:h,postStyleProps:P,totalTime:k,errors:L}}var fr={},Ti=class{constructor(r,e,t){this._triggerName=r,this.ast=e,this._stateStyles=t}match(r,e,t,n){return fl(this.ast.matchers,r,e,t,n)}buildStyles(r,e,t){let n=this._stateStyles.get("*");return r!==void 0&&(n=this._stateStyles.get(r?.toString())||n),n?n.buildStyles(e,t):new Map}build(r,e,t,n,s,d,u,g,h,P){let k=[],L=this.ast.options&&this.ast.options.params||fr,$=u&&u.params||fr,V=this.buildStyles(t,$,k),U=g&&g.params||fr,q=this.buildStyles(n,U,k),we=new Set,B=new Map,j=new Map,fe=n==="void",Ne={params:Na(U,L),delay:this.ast.options?.delay},je=P?[]:Aa(r,e,this.ast.animation,s,d,V,q,Ne,h,k),xe=0;return je.forEach(Y=>{xe=Math.max(Y.duration+Y.delay,xe)}),k.length?ba(e,this._triggerName,t,n,fe,V,q,[],[],B,j,xe,k):(je.forEach(Y=>{let $e=Y.element,_e=vt(B,$e,new Set);Y.preStyleProps.forEach(ne=>_e.add(ne));let he=vt(j,$e,new Set);Y.postStyleProps.forEach(ne=>he.add(ne)),$e!==e&&we.add($e)}),ba(e,this._triggerName,t,n,fe,V,q,je,[...we.values()],B,j,xe))}};function fl(i,r,e,t,n){return i.some(s=>s(r,e,t,n))}function Na(i,r){let e=Me({},r);return Object.entries(i).forEach(([t,n])=>{n!=null&&(e[t]=n)}),e}var Er=class{constructor(r,e,t){this.styles=r,this.defaultParams=e,this.normalizer=t}buildStyles(r,e){let t=new Map,n=Na(r,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((d,u)=>{d&&(d=Gn(d,n,e));let g=this.normalizer.normalizePropertyName(u,e);d=this.normalizer.normalizeStyleValue(u,g,d,e),t.set(u,d)})}),t}};function hl(i,r,e){return new kr(i,r,e)}var kr=class{constructor(r,e,t){this.name=r,this.ast=e,this._normalizer=t,this.transitionFactories=[],this.states=new Map,e.states.forEach(n=>{let s=n.options&&n.options.params||{};this.states.set(n.name,new Er(n.style,s,t))}),Pa(this.states,"true","1"),Pa(this.states,"false","0"),e.transitions.forEach(n=>{this.transitionFactories.push(new Ti(r,n,this.states))}),this.fallbackTransition=_l(r,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(r,e,t,n){return this.transitionFactories.find(d=>d.match(r,e,t,n))||null}matchStyles(r,e,t){return this.fallbackTransition.buildStyles(r,e,t)}};function _l(i,r,e){let t=[(d,u)=>!0],n={type:Le.Sequence,steps:[],options:null},s={type:Le.Transition,animation:n,matchers:t,options:null,queryCount:0,depCount:0};return new Ti(i,s,r)}function Pa(i,r,e){i.has(r)?i.has(e)||i.set(e,i.get(r)):i.has(e)&&i.set(r,i.get(e))}var Cl=new Qn,Tr=class{constructor(r,e,t){this.bodyNode=r,this._driver=e,this._normalizer=t,this._animations=new Map,this._playersById=new Map,this.players=[]}register(r,e){let t=[],n=[],s=Da(this._driver,e,t,n);if(t.length)throw Fc(t);n.length&&void 0,this._animations.set(r,s)}_buildPlayer(r,e,t){let n=r.element,s=Sa(this._normalizer,r.keyframes,e,t);return this._driver.animate(n,s,r.duration,r.delay,r.easing,[],!0)}create(r,e,t={}){let n=[],s=this._animations.get(r),d,u=new Map;if(s?(d=Aa(this._driver,e,s,Ta,br,new Map,new Map,t,Cl,n),d.forEach(P=>{let k=vt(u,P.element,new Map);P.postStyleProps.forEach(L=>k.set(L,null))})):(n.push(Dc()),d=[]),n.length)throw Ac(n);u.forEach((P,k)=>{P.forEach((L,$)=>{P.set($,this._driver.computeStyle(k,$,Qt))})});let g=d.map(P=>{let k=u.get(P.element);return this._buildPlayer(P,new Map,k)}),h=pn(g);return this._playersById.set(r,h),h.onDestroy(()=>this.destroy(r)),this.players.push(h),h}destroy(r){let e=this._getPlayer(r);e.destroy(),this._playersById.delete(r);let t=this.players.indexOf(e);t>=0&&this.players.splice(t,1)}_getPlayer(r){let e=this._playersById.get(r);if(!e)throw Nc(r);return e}listen(r,e,t,n){let s=Lr(e,"","","");return Nr(this._getPlayer(r),t,s,n),()=>{}}command(r,e,t,n){if(t=="register"){this.register(r,n[0]);return}if(t=="create"){let d=n[0]||{};this.create(r,e,d);return}let s=this._getPlayer(r);switch(t){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(r);break}}},Ma="ng-animate-queued",bl=".ng-animate-queued",hr="ng-animate-disabled",Pl=".ng-animate-disabled",Ml="ng-star-inserted",yl=".ng-star-inserted",Ol=[],La={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vl={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qt="__ng_removed",Yn=class{get params(){return this.options.params}constructor(r,e=""){this.namespaceId=e;let t=r&&r.hasOwnProperty("value"),n=t?r.value:r;if(this.value=Sl(n),t){let s=r,{value:d}=s,u=so(s,["value"]);this.options=u}else this.options={};this.options.params||(this.options.params={})}absorbOptions(r){let e=r.params;if(e){let t=this.options.params;Object.keys(e).forEach(n=>{t[n]==null&&(t[n]=e[n])})}}},Bn="void",_r=new Yn(Bn),Ir=class{constructor(r,e,t){this.id=r,this.hostElement=e,this._engine=t,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+r,Nt(e,this._hostClassName)}listen(r,e,t,n){if(!this._triggers.has(e))throw Lc(t,e);if(t==null||t.length==0)throw Vc(e);if(!wl(t))throw zc(t,e);let s=vt(this._elementListeners,r,[]),d={name:e,phase:t,callback:n};s.push(d);let u=vt(this._engine.statesByElement,r,new Map);return u.has(e)||(Nt(r,bi),Nt(r,bi+"-"+e),u.set(e,_r)),()=>{this._engine.afterFlush(()=>{let g=s.indexOf(d);g>=0&&s.splice(g,1),this._triggers.has(e)||u.delete(e)})}}register(r,e){return this._triggers.has(r)?!1:(this._triggers.set(r,e),!0)}_getTrigger(r){let e=this._triggers.get(r);if(!e)throw Rc(r);return e}trigger(r,e,t,n=!0){let s=this._getTrigger(e),d=new Kn(this.id,e,r),u=this._engine.statesByElement.get(r);u||(Nt(r,bi),Nt(r,bi+"-"+e),this._engine.statesByElement.set(r,u=new Map));let g=u.get(e),h=new Yn(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&g&&h.absorbOptions(g.options),u.set(e,h),g||(g=_r),!(h.value===Bn)&&g.value===h.value){if(!Tl(g.params,h.params)){let U=[],q=s.matchStyles(g.value,g.params,U),we=s.matchStyles(h.value,h.params,U);U.length?this._engine.reportError(U):this._engine.afterFlush(()=>{hn(r,q),Kt(r,we)})}return}let L=vt(this._engine.playersByElement,r,[]);L.forEach(U=>{U.namespaceId==this.id&&U.triggerName==e&&U.queued&&U.destroy()});let $=s.matchTransition(g.value,h.value,r,h.params),V=!1;if(!$){if(!n)return;$=s.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:e,transition:$,fromState:g,toState:h,player:d,isFallbackTransition:V}),V||(Nt(r,Ma),d.onStart(()=>{En(r,Ma)})),d.onDone(()=>{let U=this.players.indexOf(d);U>=0&&this.players.splice(U,1);let q=this._engine.playersByElement.get(r);if(q){let we=q.indexOf(d);we>=0&&q.splice(we,1)}}),this.players.push(d),L.push(d),d}deregister(r){this._triggers.delete(r),this._engine.statesByElement.forEach(e=>e.delete(r)),this._elementListeners.forEach((e,t)=>{this._elementListeners.set(t,e.filter(n=>n.name!=r))})}clearElementCache(r){this._engine.statesByElement.delete(r),this._elementListeners.delete(r);let e=this._engine.playersByElement.get(r);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(r))}_signalRemovalForInnerTriggers(r,e){let t=this._engine.driver.query(r,vi,!0);t.forEach(n=>{if(n[qt])return;let s=this._engine.fetchNamespacesByElement(n);s.size?s.forEach(d=>d.triggerLeaveAnimation(n,e,!1,!0)):this.clearElementCache(n)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(n=>this.clearElementCache(n)))}triggerLeaveAnimation(r,e,t,n){let s=this._engine.statesByElement.get(r),d=new Map;if(s){let u=[];if(s.forEach((g,h)=>{if(d.set(h,g.value),this._triggers.has(h)){let P=this.trigger(r,h,Bn,n);P&&u.push(P)}}),u.length)return this._engine.markElementAsRemoved(this.id,r,!0,e,d),t&&pn(u).onDone(()=>this._engine.processLeaveNode(r)),!0}return!1}prepareLeaveAnimationListeners(r){let e=this._elementListeners.get(r),t=this._engine.statesByElement.get(r);if(e&&t){let n=new Set;e.forEach(s=>{let d=s.name;if(n.has(d))return;n.add(d);let g=this._triggers.get(d).fallbackTransition,h=t.get(d)||_r,P=new Yn(Bn),k=new Kn(this.id,d,r);this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:d,transition:g,fromState:h,toState:P,player:k,isFallbackTransition:!0})})}}removeNode(r,e){let t=this._engine;if(r.childElementCount&&this._signalRemovalForInnerTriggers(r,e),this.triggerLeaveAnimation(r,e,!0))return;let n=!1;if(t.totalAnimations){let s=t.players.length?t.playersByQueriedElement.get(r):[];if(s&&s.length)n=!0;else{let d=r;for(;d=d.parentNode;)if(t.statesByElement.get(d)){n=!0;break}}}if(this.prepareLeaveAnimationListeners(r),n)t.markElementAsRemoved(this.id,r,!1,e);else{let s=r[qt];(!s||s===La)&&(t.afterFlush(()=>this.clearElementCache(r)),t.destroyInnerAnimations(r),t._onRemovalComplete(r,e))}}insertNode(r,e){Nt(r,this._hostClassName)}drainQueuedTransitions(r){let e=[];return this._queue.forEach(t=>{let n=t.player;if(n.destroyed)return;let s=t.element,d=this._elementListeners.get(s);d&&d.forEach(u=>{if(u.name==t.triggerName){let g=Lr(s,t.triggerName,t.fromState.value,t.toState.value);g._data=r,Nr(t.player,u.phase,g,u.callback)}}),n.markedForDestroy?this._engine.afterFlush(()=>{n.destroy()}):e.push(t)}),this._queue=[],e.sort((t,n)=>{let s=t.transition.ast.depCount,d=n.transition.ast.depCount;return s==0||d==0?s-d:this._engine.driver.containsElement(t.element,n.element)?1:-1})}destroy(r){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,r)}},Fr=class{_onRemovalComplete(r,e){this.onRemovalComplete(r,e)}constructor(r,e,t,n){this.bodyNode=r,this.driver=e,this._normalizer=t,this.scheduler=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,d)=>{}}get queuedPlayers(){let r=[];return this._namespaceList.forEach(e=>{e.players.forEach(t=>{t.queued&&r.push(t)})}),r}createNamespace(r,e){let t=new Ir(r,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(t,e):(this.newHostElements.set(e,t),this.collectEnterElement(e)),this._namespaceLookup[r]=t}_balanceNamespaceList(r,e){let t=this._namespaceList,n=this.namespacesByHostElement;if(t.length-1>=0){let d=!1,u=this.driver.getParentElement(e);for(;u;){let g=n.get(u);if(g){let h=t.indexOf(g);t.splice(h+1,0,r),d=!0;break}u=this.driver.getParentElement(u)}d||t.unshift(r)}else t.push(r);return n.set(e,r),r}register(r,e){let t=this._namespaceLookup[r];return t||(t=this.createNamespace(r,e)),t}registerTrigger(r,e,t){let n=this._namespaceLookup[r];n&&n.register(e,t)&&this.totalAnimations++}destroy(r,e){r&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(r);this.namespacesByHostElement.delete(t.hostElement);let n=this._namespaceList.indexOf(t);n>=0&&this._namespaceList.splice(n,1),t.destroy(e),delete this._namespaceLookup[r]}))}_fetchNamespace(r){return this._namespaceLookup[r]}fetchNamespacesByElement(r){let e=new Set,t=this.statesByElement.get(r);if(t){for(let n of t.values())if(n.namespaceId){let s=this._fetchNamespace(n.namespaceId);s&&e.add(s)}}return e}trigger(r,e,t,n){if(yi(e)){let s=this._fetchNamespace(r);if(s)return s.trigger(e,t,n),!0}return!1}insertNode(r,e,t,n){if(!yi(e))return;let s=e[qt];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(r){let d=this._fetchNamespace(r);d&&d.insertNode(e,t)}n&&this.collectEnterElement(e)}collectEnterElement(r){this.collectedEnterElements.push(r)}markElementAsDisabled(r,e){e?this.disabledNodes.has(r)||(this.disabledNodes.add(r),Nt(r,hr)):this.disabledNodes.has(r)&&(this.disabledNodes.delete(r),En(r,hr))}removeNode(r,e,t){if(yi(e)){this.scheduler?.notify();let n=r?this._fetchNamespace(r):null;n?n.removeNode(e,t):this.markElementAsRemoved(r,e,!1,t);let s=this.namespacesByHostElement.get(e);s&&s.id!==r&&s.removeNode(e,t)}else this._onRemovalComplete(e,t)}markElementAsRemoved(r,e,t,n,s){this.collectedLeaveElements.push(e),e[qt]={namespaceId:r,setForRemoval:n,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:s}}listen(r,e,t,n,s){return yi(e)?this._fetchNamespace(r).listen(e,t,n,s):()=>{}}_buildInstruction(r,e,t,n,s){return r.transition.build(this.driver,r.element,r.fromState.value,r.toState.value,t,n,r.fromState.options,r.toState.options,e,s)}destroyInnerAnimations(r){let e=this.driver.query(r,vi,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(r,Pr,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(r){let e=this.playersByElement.get(r);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(r){let e=this.playersByQueriedElement.get(r);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(r=>{if(this.players.length)return pn(this.players).onDone(()=>r());r()})}processLeaveNode(r){let e=r[qt];if(e&&e.setForRemoval){if(r[qt]=La,e.namespaceId){this.destroyInnerAnimations(r);let t=this._fetchNamespace(e.namespaceId);t&&t.clearElementCache(r)}this._onRemovalComplete(r,e.setForRemoval)}r.classList?.contains(hr)&&this.markElementAsDisabled(r,!1),this.driver.query(r,Pl,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(r=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,n)=>this._balanceNamespaceList(t,n)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let n=this.collectedEnterElements[t];Nt(n,Ml)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{e=this._flushAnimations(t,r)}finally{for(let n=0;n<t.length;n++)t[n]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let n=this.collectedLeaveElements[t];this.processLeaveNode(n)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],e.length?pn(e).onDone(()=>{t.forEach(n=>n())}):t.forEach(n=>n())}}reportError(r){throw jc(r)}_flushAnimations(r,e){let t=new Qn,n=[],s=new Map,d=[],u=new Map,g=new Map,h=new Map,P=new Set;this.disabledNodes.forEach(D=>{P.add(D);let I=this.driver.query(D,bl,!0);for(let C=0;C<I.length;C++)P.add(I[C])});let k=this.bodyNode,L=Array.from(this.statesByElement.keys()),$=va(L,this.collectedEnterElements),V=new Map,U=0;$.forEach((D,I)=>{let C=Ta+U++;V.set(I,C),D.forEach(y=>Nt(y,C))});let q=[],we=new Set,B=new Set;for(let D=0;D<this.collectedLeaveElements.length;D++){let I=this.collectedLeaveElements[D],C=I[qt];C&&C.setForRemoval&&(q.push(I),we.add(I),C.hasAnimation?this.driver.query(I,yl,!0).forEach(y=>we.add(y)):B.add(I))}let j=new Map,fe=va(L,Array.from(we));fe.forEach((D,I)=>{let C=br+U++;j.set(I,C),D.forEach(y=>Nt(y,C))}),r.push(()=>{$.forEach((D,I)=>{let C=V.get(I);D.forEach(y=>En(y,C))}),fe.forEach((D,I)=>{let C=j.get(I);D.forEach(y=>En(y,C))}),q.forEach(D=>{this.processLeaveNode(D)})});let Ne=[],je=[];for(let D=this._namespaceList.length-1;D>=0;D--)this._namespaceList[D].drainQueuedTransitions(e).forEach(C=>{let y=C.player,H=C.element;if(Ne.push(y),this.collectedEnterElements.length){let Ye=H[qt];if(Ye&&Ye.setForMove){if(Ye.previousTriggersValues&&Ye.previousTriggersValues.has(C.triggerName)){let z=Ye.previousTriggersValues.get(C.triggerName),A=this.statesByElement.get(C.element);if(A&&A.has(C.triggerName)){let w=A.get(C.triggerName);w.value=z,A.set(C.triggerName,w)}}y.destroy();return}}let ie=!k||!this.driver.containsElement(k,H),Ae=j.get(H),ve=V.get(H),qe=this._buildInstruction(C,t,ve,Ae,ie);if(qe.errors&&qe.errors.length){je.push(qe);return}if(ie){y.onStart(()=>hn(H,qe.fromStyles)),y.onDestroy(()=>Kt(H,qe.toStyles)),n.push(y);return}if(C.isFallbackTransition){y.onStart(()=>hn(H,qe.fromStyles)),y.onDestroy(()=>Kt(H,qe.toStyles)),n.push(y);return}let xt=[];qe.timelines.forEach(Ye=>{Ye.stretchStartingKeyframe=!0,this.disabledNodes.has(Ye.element)||xt.push(Ye)}),qe.timelines=xt,t.append(H,qe.timelines);let zt={instruction:qe,player:y,element:H};d.push(zt),qe.queriedElements.forEach(Ye=>vt(u,Ye,[]).push(y)),qe.preStyleProps.forEach((Ye,z)=>{if(Ye.size){let A=g.get(z);A||g.set(z,A=new Set),Ye.forEach((w,R)=>A.add(R))}}),qe.postStyleProps.forEach((Ye,z)=>{let A=h.get(z);A||h.set(z,A=new Set),Ye.forEach((w,R)=>A.add(R))})});if(je.length){let D=[];je.forEach(I=>{D.push($c(I.triggerName,I.errors))}),Ne.forEach(I=>I.destroy()),this.reportError(D)}let xe=new Map,Y=new Map;d.forEach(D=>{let I=D.element;t.has(I)&&(Y.set(I,I),this._beforeAnimationBuild(D.player.namespaceId,D.instruction,xe))}),n.forEach(D=>{let I=D.element;this._getPreviousPlayers(I,!1,D.namespaceId,D.triggerName,null).forEach(y=>{vt(xe,I,[]).push(y),y.destroy()})});let $e=q.filter(D=>xa(D,g,h)),_e=new Map;Oa(_e,this.driver,B,h,Qt).forEach(D=>{xa(D,g,h)&&$e.push(D)});let ne=new Map;$.forEach((D,I)=>{Oa(ne,this.driver,new Set(D),g,ai)}),$e.forEach(D=>{let I=_e.get(D),C=ne.get(D);_e.set(D,new Map([...I?.entries()??[],...C?.entries()??[]]))});let Ce=[],pt=[],tt={};d.forEach(D=>{let{element:I,player:C,instruction:y}=D;if(t.has(I)){if(P.has(I)){C.onDestroy(()=>Kt(I,y.toStyles)),C.disabled=!0,C.overrideTotalTime(y.totalTime),n.push(C);return}let H=tt;if(Y.size>1){let Ae=I,ve=[];for(;Ae=Ae.parentNode;){let qe=Y.get(Ae);if(qe){H=qe;break}ve.push(Ae)}ve.forEach(qe=>Y.set(qe,H))}let ie=this._buildAnimation(C.namespaceId,y,xe,s,ne,_e);if(C.setRealPlayer(ie),H===tt)Ce.push(C);else{let Ae=this.playersByElement.get(H);Ae&&Ae.length&&(C.parentPlayer=pn(Ae)),n.push(C)}}else hn(I,y.fromStyles),C.onDestroy(()=>Kt(I,y.toStyles)),pt.push(C),P.has(I)&&n.push(C)}),pt.forEach(D=>{let I=s.get(D.element);if(I&&I.length){let C=pn(I);D.setRealPlayer(C)}}),n.forEach(D=>{D.parentPlayer?D.syncPlayerEvents(D.parentPlayer):D.destroy()});for(let D=0;D<q.length;D++){let I=q[D],C=I[qt];if(En(I,br),C&&C.hasAnimation)continue;let y=[];if(u.size){let ie=u.get(I);ie&&ie.length&&y.push(...ie);let Ae=this.driver.query(I,Pr,!0);for(let ve=0;ve<Ae.length;ve++){let qe=u.get(Ae[ve]);qe&&qe.length&&y.push(...qe)}}let H=y.filter(ie=>!ie.destroyed);H.length?El(this,I,H):this.processLeaveNode(I)}return q.length=0,Ce.forEach(D=>{this.players.push(D),D.onDone(()=>{D.destroy();let I=this.players.indexOf(D);this.players.splice(I,1)}),D.play()}),Ce}afterFlush(r){this._flushFns.push(r)}afterFlushAnimationsDone(r){this._whenQuietFns.push(r)}_getPreviousPlayers(r,e,t,n,s){let d=[];if(e){let u=this.playersByQueriedElement.get(r);u&&(d=u)}else{let u=this.playersByElement.get(r);if(u){let g=!s||s==Bn;u.forEach(h=>{h.queued||!g&&h.triggerName!=n||d.push(h)})}}return(t||n)&&(d=d.filter(u=>!(t&&t!=u.namespaceId||n&&n!=u.triggerName))),d}_beforeAnimationBuild(r,e,t){let n=e.triggerName,s=e.element,d=e.isRemovalTransition?void 0:r,u=e.isRemovalTransition?void 0:n;for(let g of e.timelines){let h=g.element,P=h!==s,k=vt(t,h,[]);this._getPreviousPlayers(h,P,d,u,e.toState).forEach($=>{let V=$.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),$.destroy(),k.push($)})}hn(s,e.fromStyles)}_buildAnimation(r,e,t,n,s,d){let u=e.triggerName,g=e.element,h=[],P=new Set,k=new Set,L=e.timelines.map(V=>{let U=V.element;P.add(U);let q=U[qt];if(q&&q.removedBeforeQueried)return new On(V.duration,V.delay);let we=U!==g,B=kl((t.get(U)||Ol).map(xe=>xe.getRealPlayer())).filter(xe=>{let Y=xe;return Y.element?Y.element===U:!1}),j=s.get(U),fe=d.get(U),Ne=Sa(this._normalizer,V.keyframes,j,fe),je=this._buildPlayer(V,Ne,B);if(V.subTimeline&&n&&k.add(U),we){let xe=new Kn(r,u,U);xe.setRealPlayer(je),h.push(xe)}return je});h.forEach(V=>{vt(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>xl(this.playersByQueriedElement,V.element,V))}),P.forEach(V=>Nt(V,fa));let $=pn(L);return $.onDestroy(()=>{P.forEach(V=>En(V,fa)),Kt(g,e.toStyles)}),k.forEach(V=>{vt(n,V,[]).push($)}),$}_buildPlayer(r,e,t){return e.length>0?this.driver.animate(r.element,e,r.duration,r.delay,r.easing,t):new On(r.duration,r.delay)}},Kn=class{constructor(r,e,t){this.namespaceId=r,this.triggerName=e,this.element=t,this._player=new On,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(r){this._containsRealPlayer||(this._player=r,this._queuedCallbacks.forEach((e,t)=>{e.forEach(n=>Nr(r,t,void 0,n))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(r.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(r){this.totalTime=r}syncPlayerEvents(r){let e=this._player;e.triggerCallback&&r.onStart(()=>e.triggerCallback("start")),r.onDone(()=>this.finish()),r.onDestroy(()=>this.destroy())}_queueEvent(r,e){vt(this._queuedCallbacks,r,[]).push(e)}onDone(r){this.queued&&this._queueEvent("done",r),this._player.onDone(r)}onStart(r){this.queued&&this._queueEvent("start",r),this._player.onStart(r)}onDestroy(r){this.queued&&this._queueEvent("destroy",r),this._player.onDestroy(r)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(r){this.queued||this._player.setPosition(r)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(r){let e=this._player;e.triggerCallback&&e.triggerCallback(r)}};function xl(i,r,e){let t=i.get(r);if(t){if(t.length){let n=t.indexOf(e);t.splice(n,1)}t.length==0&&i.delete(r)}return t}function Sl(i){return i??null}function yi(i){return i&&i.nodeType===1}function wl(i){return i=="start"||i=="done"}function ya(i,r){let e=i.style.display;return i.style.display=r??"none",e}function Oa(i,r,e,t,n){let s=[];e.forEach(g=>s.push(ya(g)));let d=[];t.forEach((g,h)=>{let P=new Map;g.forEach(k=>{let L=r.computeStyle(h,k,n);P.set(k,L),(!L||L.length==0)&&(h[qt]=vl,d.push(h))}),i.set(h,P)});let u=0;return e.forEach(g=>ya(g,s[u++])),d}function va(i,r){let e=new Map;if(i.forEach(u=>e.set(u,[])),r.length==0)return e;let t=1,n=new Set(r),s=new Map;function d(u){if(!u)return t;let g=s.get(u);if(g)return g;let h=u.parentNode;return e.has(h)?g=h:n.has(h)?g=t:g=d(h),s.set(u,g),g}return r.forEach(u=>{let g=d(u);g!==t&&e.get(g).push(u)}),e}function Nt(i,r){i.classList?.add(r)}function En(i,r){i.classList?.remove(r)}function El(i,r,e){pn(e).onDone(()=>i.processLeaveNode(r))}function kl(i){let r=[];return Va(i,r),r}function Va(i,r){for(let e=0;e<i.length;e++){let t=i[e];t instanceof er?Va(t.players,r):r.push(t)}}function Tl(i,r){let e=Object.keys(i),t=Object.keys(r);if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let s=e[n];if(!r.hasOwnProperty(s)||i[s]!==r[s])return!1}return!0}function xa(i,r,e){let t=e.get(i);if(!t)return!1;let n=r.get(i);return n?t.forEach(s=>n.add(s)):r.set(i,t),e.delete(i),!0}var kn=class{constructor(r,e,t,n){this._driver=e,this._normalizer=t,this._triggerCache={},this.onRemovalComplete=(s,d)=>{},this._transitionEngine=new Fr(r.body,e,t,n),this._timelineEngine=new Tr(r.body,e,t),this._transitionEngine.onRemovalComplete=(s,d)=>this.onRemovalComplete(s,d)}registerTrigger(r,e,t,n,s){let d=r+"-"+n,u=this._triggerCache[d];if(!u){let g=[],h=[],P=Da(this._driver,s,g,h);if(g.length)throw Tc(n,g);h.length&&void 0,u=hl(n,P,this._normalizer),this._triggerCache[d]=u}this._transitionEngine.registerTrigger(e,n,u)}register(r,e){this._transitionEngine.register(r,e)}destroy(r,e){this._transitionEngine.destroy(r,e)}onInsert(r,e,t,n){this._transitionEngine.insertNode(r,e,t,n)}onRemove(r,e,t){this._transitionEngine.removeNode(r,e,t)}disableAnimations(r,e){this._transitionEngine.markElementAsDisabled(r,e)}process(r,e,t,n){if(t.charAt(0)=="@"){let[s,d]=ua(t),u=n;this._timelineEngine.command(s,e,d,u)}else this._transitionEngine.trigger(r,e,t,n)}listen(r,e,t,n,s){if(t.charAt(0)=="@"){let[d,u]=ua(t);return this._timelineEngine.listen(d,e,u,s)}return this._transitionEngine.listen(r,e,t,n,s)}flush(r=-1){this._transitionEngine.flush(r)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(r){this._transitionEngine.afterFlushAnimationsDone(r)}};function Il(i,r){let e=null,t=null;return Array.isArray(r)&&r.length?(e=Cr(r[0]),r.length>1&&(t=Cr(r[r.length-1]))):r instanceof Map&&(e=Cr(r)),e||t?new Dr(i,e,t):null}var Dr=class i{static{this.initialStylesByElement=new WeakMap}constructor(r,e,t){this._element=r,this._startStyles=e,this._endStyles=t,this._state=0;let n=i.initialStylesByElement.get(r);n||i.initialStylesByElement.set(r,n=new Map),this._initialStyles=n}start(){this._state<1&&(this._startStyles&&Kt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Kt(this._element,this._initialStyles),this._endStyles&&(Kt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(hn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(hn(this._element,this._endStyles),this._endStyles=null),Kt(this._element,this._initialStyles),this._state=3)}};function Cr(i){let r=null;return i.forEach((e,t)=>{Fl(t)&&(r=r||new Map,r.set(t,e))}),r}function Fl(i){return i==="display"||i==="position"}var Ii=class{constructor(r,e,t,n){this.element=r,this.keyframes=e,this.options=t,this._specialStyles=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(r=>r()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let r=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,r,this.options),this._finalKeyframe=r.length?r[r.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(r){let e=[];return r.forEach(t=>{e.push(Object.fromEntries(t))}),e}_triggerWebAnimation(r,e,t){return r.animate(this._convertKeyframesToObject(e),t)}onStart(r){this._originalOnStartFns.push(r),this._onStartFns.push(r)}onDone(r){this._originalOnDoneFns.push(r),this._onDoneFns.push(r)}onDestroy(r){this._onDestroyFns.push(r)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(r=>r()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(r=>r()),this._onDestroyFns=[])}setPosition(r){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=r*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let r=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,n)=>{n!=="offset"&&r.set(n,this._finished?t:jr(this.element,n))}),this.currentSnapshot=r}triggerCallback(r){let e=r==="start"?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}},Fi=class{validateStyleProperty(r){return!0}validateAnimatableStyleProperty(r){return!0}matchesElement(r,e){return!1}containsElement(r,e){return wa(r,e)}getParentElement(r){return Vr(r)}query(r,e,t){return Ea(r,e,t)}computeStyle(r,e,t){return jr(r,e)}animate(r,e,t,n,s,d=[]){let u=n==0?"both":"forwards",g={duration:t,delay:n,fill:u};s&&(g.easing=s);let h=new Map,P=d.filter($=>$ instanceof Ii);Xc(t,n)&&P.forEach($=>{$.currentSnapshot.forEach((V,U)=>h.set(U,V))});let k=Kc(e).map($=>new Map($));k=Jc(r,k,h);let L=Il(r,k);return new Ii(r,k,g,L)}};var Oi="@",za="@.disabled",Di=class{constructor(r,e,t,n){this.namespaceId=r,this.delegate=e,this.engine=t,this._onDestroy=n,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(r){this.delegate.destroyNode?.(r)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(r,e){return this.delegate.createElement(r,e)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}appendChild(r,e){this.delegate.appendChild(r,e),this.engine.onInsert(this.namespaceId,e,r,!1)}insertBefore(r,e,t,n=!0){this.delegate.insertBefore(r,e,t),this.engine.onInsert(this.namespaceId,e,r,n)}removeChild(r,e,t){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(r,e){return this.delegate.selectRootElement(r,e)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,e,t,n){this.delegate.setAttribute(r,e,t,n)}removeAttribute(r,e,t){this.delegate.removeAttribute(r,e,t)}addClass(r,e){this.delegate.addClass(r,e)}removeClass(r,e){this.delegate.removeClass(r,e)}setStyle(r,e,t,n){this.delegate.setStyle(r,e,t,n)}removeStyle(r,e,t){this.delegate.removeStyle(r,e,t)}setProperty(r,e,t){e.charAt(0)==Oi&&e==za?this.disableAnimations(r,!!t):this.delegate.setProperty(r,e,t)}setValue(r,e){this.delegate.setValue(r,e)}listen(r,e,t){return this.delegate.listen(r,e,t)}disableAnimations(r,e){this.engine.disableAnimations(r,e)}},Ar=class extends Di{constructor(r,e,t,n,s){super(e,t,n,s),this.factory=r,this.namespaceId=e}setProperty(r,e,t){e.charAt(0)==Oi?e.charAt(1)=="."&&e==za?(t=t===void 0?!0:!!t,this.disableAnimations(r,t)):this.engine.process(this.namespaceId,r,e.slice(1),t):this.delegate.setProperty(r,e,t)}listen(r,e,t){if(e.charAt(0)==Oi){let n=Dl(r),s=e.slice(1),d="";return s.charAt(0)!=Oi&&([s,d]=Al(s)),this.engine.listen(this.namespaceId,n,s,d,u=>{let g=u._data||-1;this.factory.scheduleListenerCallback(g,t,u)})}return this.delegate.listen(r,e,t)}};function Dl(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}function Al(i){let r=i.indexOf("."),e=i.substring(0,r),t=i.slice(r+1);return[e,t]}var Ai=class{constructor(r,e,t){this.delegate=r,this.engine=e,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(n,s)=>{let d=s?.parentNode(n);d&&s.removeChild(d,n)}}createRenderer(r,e){let t="",n=this.delegate.createRenderer(r,e);if(!r||!e?.data?.animation){let h=this._rendererCache,P=h.get(n);if(!P){let k=()=>h.delete(n);P=new Di(t,n,this.engine,k),h.set(n,P)}return P}let s=e.id,d=e.id+"-"+this._currentId;this._currentId++,this.engine.register(d,r);let u=h=>{Array.isArray(h)?h.forEach(u):this.engine.registerTrigger(s,d,r,h.name,h)};return e.data.animation.forEach(u),new Ar(this,d,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(r,e,t){if(r>=0&&r<this._microtaskId){this._zone.run(()=>e(t));return}let n=this._animationCallbacksBuffer;n.length==0&&queueMicrotask(()=>{this._zone.run(()=>{n.forEach(s=>{let[d,u]=s;d(u)}),this._animationCallbacksBuffer=[]})}),n.push([e,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var Ll=(()=>{class i extends kn{constructor(e,t,n){super(e,t,n,an(Po,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(t){return new(t||i)(ge(jn),ge(_n),ge(Cn))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac})}}return i})();function Vl(){return new Si}function zl(i,r,e){return new Ai(i,r,e)}var ja=[{provide:Cn,useFactory:Vl},{provide:kn,useClass:Ll},{provide:yo,useFactory:zl,deps:[Io,kn,Ln]}],Ra=[{provide:_n,useFactory:()=>new Fi},{provide:Yi,useValue:"BrowserAnimations"},...ja],Rl=[{provide:_n,useClass:zr},{provide:Yi,useValue:"NoopAnimations"},...ja],$a=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?Rl:Ra}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=sn({type:i})}static{this.\u0275inj=on({providers:Ra,imports:[ii]})}}return i})();var qa=["toast-component",""];function jl(i,r){if(i&1){let e=N();o(0,"button",5),_("click",function(){v(e);let n=f();return x(n.remove())}),o(1,"span",6),c(2,"\xD7"),a()()}}function $l(i,r){if(i&1&&(zn(0),c(1),Rn()),i&2){let e=f(2);l(),T("[",e.duplicatesCount+1,"]")}}function ql(i,r){if(i&1&&(o(0,"div"),c(1),M(2,$l,2,1,"ng-container",4),a()),i&2){let e=f();Mt(e.options.titleClass),cn("aria-label",e.title),l(),T(" ",e.title," "),l(),p("ngIf",e.duplicatesCount)}}function Ul(i,r){if(i&1&&m(0,"div",7),i&2){let e=f();Mt(e.options.messageClass),p("innerHTML",e.message,Nn)}}function Hl(i,r){if(i&1&&(o(0,"div",8),c(1),a()),i&2){let e=f();Mt(e.options.messageClass),cn("aria-label",e.message),l(),T(" ",e.message," ")}}function Bl(i,r){if(i&1&&(o(0,"div"),m(1,"div",9),a()),i&2){let e=f();l(),Vn("width",e.width+"%")}}function Gl(i,r){if(i&1){let e=N();o(0,"button",5),_("click",function(){v(e);let n=f();return x(n.remove())}),o(1,"span",6),c(2,"\xD7"),a()()}}function Ql(i,r){if(i&1&&(zn(0),c(1),Rn()),i&2){let e=f(2);l(),T("[",e.duplicatesCount+1,"]")}}function Yl(i,r){if(i&1&&(o(0,"div"),c(1),M(2,Ql,2,1,"ng-container",4),a()),i&2){let e=f();Mt(e.options.titleClass),cn("aria-label",e.title),l(),T(" ",e.title," "),l(),p("ngIf",e.duplicatesCount)}}function Kl(i,r){if(i&1&&m(0,"div",7),i&2){let e=f();Mt(e.options.messageClass),p("innerHTML",e.message,Nn)}}function Wl(i,r){if(i&1&&(o(0,"div",8),c(1),a()),i&2){let e=f();Mt(e.options.messageClass),cn("aria-label",e.message),l(),T(" ",e.message," ")}}function Zl(i,r){if(i&1&&(o(0,"div"),m(1,"div",9),a()),i&2){let e=f();l(),Vn("width",e.width+"%")}}var qr=class{_attachedHost;component;viewContainerRef;injector;constructor(r,e){this.component=r,this.injector=e}attach(r,e){return this._attachedHost=r,r.attach(this,e)}detach(){let r=this._attachedHost;if(r)return this._attachedHost=void 0,r.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(r){this._attachedHost=r}},Ur=class{_attachedPortal;_disposeFn;attach(r,e){return this._attachedPortal=r,this.attachComponentPortal(r,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(r){this._disposeFn=r}},Hr=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new G;_activate=new G;_manualClose=new G;_resetTimeout=new G;_countDuplicate=new G;constructor(r){this._overlayRef=r}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(r,e){r&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},Tn=class{toastId;config;message;title;toastType;toastRef;_onTap=new G;_onAction=new G;constructor(r,e,t,n,s,d){this.toastId=r,this.config=e,this.message=t,this.title=n,this.toastType=s,this.toastRef=d,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(r){this._onAction.next(r)}onAction(){return this._onAction.asObservable()}},Ua={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Ha=new go("ToastConfig"),Br=class extends Ur{_hostDomElement;_componentFactoryResolver;_appRef;constructor(r,e,t){super(),this._hostDomElement=r,this._componentFactoryResolver=e,this._appRef=t}attachComponentPortal(r,e){let t=this._componentFactoryResolver.resolveComponentFactory(r.component),n;return n=t.create(r.injector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(n),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(n)),n}_getComponentRootNode(r){return r.hostView.rootNodes[0]}},Xl=(()=>{class i{_document=an(jn);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Gr=class{_portalHost;constructor(r){this._portalHost=r}attach(r,e=!0){return this._portalHost.attach(r,e)}detach(){return this._portalHost.detach()}},Jl=(()=>{class i{_overlayContainer=an(Xl);_componentFactoryResolver=an(Mo);_appRef=an(ni);_document=an(jn);_paneElements=new Map;create(e,t){return this._createOverlayRef(this.getPaneElement(e,t))}getPaneElement(e="",t){return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[e]||(this._paneElements.get(t)[e]=this._createPaneElement(e,t)),this._paneElements.get(t)[e]}_createPaneElement(e,t){let n=this._document.createElement("div");return n.id="toast-container",n.classList.add(e),n.classList.add("toast-container"),t?t.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(e){return new Br(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new Gr(this._createPortalHost(e))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),un=(()=>{class i{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,t,n,s,d){this.overlay=t,this._injector=n,this.sanitizer=s,this.ngZone=d,this.toastrConfig=Me(Me({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=Me(Me({},e.default.iconClasses),e.config.iconClasses))}show(e,t,n={},s=""){return this._preBuildNotification(s,e,t,this.applyConfig(n))}success(e,t,n={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,e,t,this.applyConfig(n))}error(e,t,n={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,e,t,this.applyConfig(n))}info(e,t,n={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,e,t,this.applyConfig(n))}warning(e,t,n={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,e,t,this.applyConfig(n))}clear(e){for(let t of this.toasts)if(e!==void 0){if(t.toastId===e){t.toastRef.manualClose();return}}else t.toastRef.manualClose()}remove(e){let t=this._findToast(e);if(!t||(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let n=this.toasts[this.currentlyActive].toastRef;n.isInactive()||(this.currentlyActive=this.currentlyActive+1,n.activate())}return!0}findDuplicate(e="",t="",n,s){let{includeTitleDuplicates:d}=this.toastrConfig;for(let u of this.toasts){let g=d&&u.title===e;if((!d||g)&&u.message===t)return u.toastRef.onDuplicate(n,s),u}return null}applyConfig(e={}){return Me(Me({},this.toastrConfig),e)}_findToast(e){for(let t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===e)return{index:t,activeToast:this.toasts[t]};return null}_preBuildNotification(e,t,n,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,t,n,s)):this._buildNotification(e,t,n,s)}_buildNotification(e,t,n,s){if(!s.toastComponent)throw new Error("toastComponent required");let d=this.findDuplicate(n,t,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||t)&&this.toastrConfig.preventDuplicates&&d!==null)return d;this.previousToastMessage=t;let u=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(u=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let g=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let h=t;t&&s.enableHtml&&(h=this.sanitizer.sanitize(Co.HTML,t));let P=new Hr(g),k=new Tn(this.index,s,h,n,e,P),L=[{provide:Tn,useValue:k}],$=Xn.create({providers:L,parent:this._injector}),V=new qr(s.toastComponent,$),U=g.attach(V,s.newestOnTop);P.componentInstance=U.instance;let q={toastId:this.index,title:n||"",message:t||"",toastRef:P,onShown:P.afterActivate(),onHidden:P.afterClosed(),onTap:k.onTap(),onAction:k.onAction(),portal:U};return u||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{q.toastRef.activate()})),this.toasts.push(q),q}static \u0275fac=function(t){return new(t||i)(ge(Ha),ge(Jl),ge(Xn),ge(ri),ge(Ln))};static \u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),ed=(()=>{class i{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.ngZone=n,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=lt(Me({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let e=new Date().getTime(),t=this.hideTime-e;this.width=t/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=lt(Me({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=lt(Me({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),t)):this.timeout=setTimeout(()=>e(),t)}outsideInterval(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),t)):this.intervalId=setInterval(()=>e(),t)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(t){return new(t||i)(b(un),b(Tn),b(Ln))};static \u0275cmp=Q({type:i,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,n){t&1&&_("click",function(){return n.tapToast()})("mouseenter",function(){return n.stickAround()})("mouseleave",function(){return n.delayedHideToast()}),t&2&&(vo("@flyInOut",n.state),Mt(n.toastClasses),Vn("display",n.displayStyle))},standalone:!0,features:[re],attrs:qa,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,n){t&1&&M(0,jl,3,0,"button",0)(1,ql,3,5,"div",1)(2,Ul,1,3,"div",2)(3,Hl,2,4,"div",3)(4,Bl,2,2,"div",4),t&2&&(p("ngIf",n.options.closeButton),l(),p("ngIf",n.title),l(),p("ngIf",n.message&&n.options.enableHtml),l(),p("ngIf",n.message&&!n.options.enableHtml),l(),p("ngIf",n.options.progressBar))},dependencies:[K],encapsulation:2,data:{animation:[ln("flyInOut",[oi("inactive",dt({opacity:0})),oi("active",dt({opacity:1})),oi("removed",dt({opacity:0})),kt("inactive => active",Et("{{ easeTime }}ms {{ easing }}")),kt("active => removed",Et("{{ easeTime }}ms {{ easing }}"))])]}})}return i})(),td=lt(Me({},Ua),{toastComponent:ed}),nd=(i={})=>fo([{provide:Ha,useValue:{default:td,config:i}}]),Ba=(()=>{class i{static forRoot(e={}){return{ngModule:i,providers:[nd(e)]}}static \u0275fac=function(t){return new(t||i)};static \u0275mod=sn({type:i});static \u0275inj=on({})}return i})();var id=(()=>{class i{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.appRef=n,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let e=new Date().getTime(),t=this.hideTime-e;this.width=t/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(t){return new(t||i)(b(un),b(Tn),b(ni))};static \u0275cmp=Q({type:i,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,n){t&1&&_("click",function(){return n.tapToast()})("mouseenter",function(){return n.stickAround()})("mouseleave",function(){return n.delayedHideToast()}),t&2&&(Mt(n.toastClasses),Vn("display",n.displayStyle))},standalone:!0,features:[re],attrs:qa,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,n){t&1&&M(0,Gl,3,0,"button",0)(1,Yl,3,5,"div",1)(2,Kl,1,3,"div",2)(3,Wl,2,4,"div",3)(4,Zl,2,2,"div",4),t&2&&(p("ngIf",n.options.closeButton),l(),p("ngIf",n.title),l(),p("ngIf",n.message&&n.options.enableHtml),l(),p("ngIf",n.message&&!n.options.enableHtml),l(),p("ngIf",n.options.progressBar))},dependencies:[K],encapsulation:2})}return i})(),Zg=lt(Me({},Ua),{toastComponent:id});var Ga=(()=>{class i{constructor(e){this.authService=e}getMenuPermissions(){let e=this.authService.getUserRoles(),t={canViewLedger:!1,canViewCategory:!1,canViewProduct:!1,canViewCustomer:!1,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!1,canViewCustomerPrice:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewPurchaseReturn:!1,canViewSale:!1,canViewSaleReturn:!1,canViewQuotation:!1,canViewPendingItem:!1,canViewDispatchQuotation:!1,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!1};return e.includes(dn.ADMIN)?{canViewLedger:!0,canViewCategory:!0,canViewProduct:!0,canViewCustomer:!0,canViewEmployee:!0,canViewMachine:!0,canViewTransport:!0,canViewCustomerPrice:!0,canViewBrand:!0,canViewUser:!0,canViewEnquiry:!0,canViewFollowup:!0,canViewPayment:!0,canViewPurchase:!0,canViewPurchaseReturn:!0,canViewSale:!0,canViewSaleReturn:!0,canViewQuotation:!0,canViewPendingItem:!0,canViewDispatchQuotation:!0,canViewEmployeeWithdraw:!0,canViewAttendance:!0,canViewAllAttendance:!0,canViewEmployeeOrder:!0,canViewBatch:!0}:e.includes(dn.SALES_AND_MARKETING)?{canViewLedger:!0,canViewCategory:!0,canViewProduct:!0,canViewCustomer:!0,canViewEmployee:!0,canViewMachine:!0,canViewTransport:!0,canViewCustomerPrice:!0,canViewBrand:!0,canViewUser:!0,canViewEnquiry:!0,canViewFollowup:!0,canViewPayment:!0,canViewPurchase:!0,canViewPurchaseReturn:!0,canViewSale:!0,canViewSaleReturn:!0,canViewQuotation:!0,canViewPendingItem:!0,canViewDispatchQuotation:!0,canViewEmployeeWithdraw:!0,canViewAttendance:!0,canViewAllAttendance:!0,canViewEmployeeOrder:!0,canViewBatch:!0}:e.includes(dn.SALES_AND_MARKETING)?{canViewLedger:!0,canViewCategory:!0,canViewProduct:!0,canViewCustomer:!0,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!0,canViewCustomerPrice:!0,canViewBrand:!0,canViewUser:!1,canViewEnquiry:!0,canViewFollowup:!0,canViewPayment:!0,canViewPurchase:!0,canViewPurchaseReturn:!0,canViewSale:!0,canViewSaleReturn:!0,canViewQuotation:!0,canViewPendingItem:!0,canViewDispatchQuotation:!0,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!0}:e.includes(dn.DEALER)?{canViewLedger:!0,canViewCategory:!1,canViewProduct:!1,canViewCustomer:!1,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!1,canViewCustomerPrice:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!0,canViewPurchaseReturn:!0,canViewSale:!0,canViewSaleReturn:!0,canViewQuotation:!0,canViewPendingItem:!0,canViewDispatchQuotation:!0,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!1}:e.includes(dn.DISPATCH)?{canViewLedger:!0,canViewCategory:!0,canViewProduct:!0,canViewCustomer:!0,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!0,canViewCustomerPrice:!0,canViewBrand:!0,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewPurchaseReturn:!1,canViewSale:!1,canViewSaleReturn:!1,canViewQuotation:!1,canViewPendingItem:!1,canViewDispatchQuotation:!0,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!0}:e.includes(dn.HR)?{canViewLedger:!0,canViewCategory:!1,canViewProduct:!1,canViewCustomer:!1,canViewEmployee:!0,canViewMachine:!1,canViewTransport:!1,canViewCustomerPrice:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewPurchaseReturn:!1,canViewSale:!1,canViewSaleReturn:!0,canViewQuotation:!1,canViewPendingItem:!1,canViewDispatchQuotation:!1,canViewEmployeeWithdraw:!0,canViewAttendance:!0,canViewAllAttendance:!0,canViewEmployeeOrder:!1,canViewBatch:!1}:e.includes(dn.REPORTER)?{canViewLedger:!0,canViewCategory:!0,canViewProduct:!0,canViewCustomer:!0,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!1,canViewCustomerPrice:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewPurchaseReturn:!1,canViewSale:!1,canViewSaleReturn:!1,canViewQuotation:!1,canViewPendingItem:!1,canViewDispatchQuotation:!1,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!1}:t}hasMasterMenuItems(){let e=this.getMenuPermissions();return e.canViewLedger||e.canViewCategory||e.canViewProduct||e.canViewCustomer||e.canViewEmployee||e.canViewMachine||e.canViewTransport||e.canViewBrand||e.canViewUser||e.canViewEnquiry||e.canViewFollowup||e.canViewPayment}hasTransactionMenuItems(){let e=this.getMenuPermissions();return e.canViewPurchase||e.canViewSale}hasDispatchQuotationMenuItems(){let e=this.getMenuPermissions();return e.canViewQuotation||e.canViewDispatchQuotation||e.canViewPendingItem}hasEmployeeMenuItems(){let e=this.getMenuPermissions();return e.canViewEmployeeWithdraw||e.canViewAttendance||e.canViewAllAttendance}static{this.\u0275fac=function(t){return new(t||i)(ge(it))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Wt=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${st.apiUrl}/api/users`}searchUsers(e){return this.http.post(`${this.apiUrl}/search`,e)}getUserDetail(e){return this.http.post(`${this.apiUrl}/detail`,e)}updatePassword(e){return this.http.put(`${this.apiUrl}/update-password`,e)}getCurrentUser(){return this.http.get(`${this.apiUrl}/me`)}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function od(i,r){if(i&1&&m(0,"img",9),i&2){let e=f();p("src",e.clientLogoImage,Ki)("alt",e.clientName||"Logo")}}function ad(i,r){if(i&1&&(o(0,"span"),c(1),a()),i&2){let e=f();l(),E(e.clientName)}}function sd(i,r){i&1&&(o(0,"span"),c(1,"Medonix"),a())}function cd(i,r){if(i&1&&(o(0,"div",10)(1,"span",11),c(2),a()()),i&2){let e=f();l(2),E(e.getUserRoles())}}function ld(i,r){if(i&1){let e=N();o(0,"button",12),_("click",function(){v(e);let n=f();return x(n.toggleMobileMenu())}),m(1,"i",13),a()}if(i&2){let e=f();l(),F("fa-bars",!e.isMobileMenuOpen)("fa-times",e.isMobileMenuOpen)}}function dd(i,r){if(i&1&&m(0,"img",9),i&2){let e=f(3);p("src",e.clientLogoImage,Ki)("alt",e.clientName||"Logo")}}function md(i,r){if(i&1&&(o(0,"span"),c(1),a()),i&2){let e=f(3);l(),E(e.clientName)}}function pd(i,r){if(i&1&&(o(0,"div",21),M(1,dd,1,2,"img",4)(2,md,2,1,"span",5),a()),i&2){let e=f(2);l(),p("ngIf",e.clientLogoImage),l(),p("ngIf",!e.clientLogoImage&&e.clientName)}}function ud(i,r){if(i&1){let e=N();o(0,"li")(1,"a",27),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",28),c(3," Category "),a()()}}function gd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",29),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",30),c(3," Product "),a()()}}function fd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",31),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",32),c(3," Vendor / Dealer "),a()()}}function hd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",33),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",34),c(3," Transport "),a()()}}function _d(i,r){if(i&1){let e=N();o(0,"li")(1,"a",35),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",36),c(3," Customer Price "),a()()}}function Cd(i,r){if(i&1){let e=N();o(0,"li",22)(1,"a",23),_("click",function(n){v(e);let s=f(2);return x(s.toggleMasterMenu(n))}),m(2,"i",24),c(3," Master "),m(4,"i",25),a(),o(5,"ul",26),M(6,ud,4,0,"li",5)(7,gd,4,0,"li",5)(8,fd,4,0,"li",5)(9,hd,4,0,"li",5)(10,_d,4,0,"li",5),a()()}if(i&2){let e=f(2);l(),F("active",e.isMasterActive()),l(4),F("show",e.showMasterMenu),l(),p("ngIf",e.permissions.canViewCategory),l(),p("ngIf",e.permissions.canViewProduct),l(),p("ngIf",e.permissions.canViewCustomer),l(),p("ngIf",e.permissions.canViewTransport),l(),p("ngIf",e.permissions.canViewCustomerPrice)}}function bd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",38),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",39),c(3," Purchase "),a()()}}function Pd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",40),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",41),c(3," Purchase Challan "),a()()}}function Md(i,r){if(i&1){let e=N();o(0,"li")(1,"a",42),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",43),c(3," Purchase Order "),a()()}}function yd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",44),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",45),c(3," PO Pending Items "),a()()}}function Od(i,r){if(i&1){let e=N();o(0,"li")(1,"a",46),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",47),c(3," Purchase Return "),a()()}}function vd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",48),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",49),c(3," Sale "),a()()}}function xd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",50),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",47),c(3," Sale Return "),a()()}}function Sd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",51),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",52),c(3," Ledger "),a()()}}function wd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",53),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",36),c(3," Payment "),a()()}}function Ed(i,r){if(i&1){let e=N();o(0,"li",22)(1,"a",23),_("click",function(n){v(e);let s=f(2);return x(s.toggleTransactionMenu(n))}),m(2,"i",37),c(3," Transaction "),m(4,"i",25),a(),o(5,"ul",26),M(6,bd,4,0,"li",5)(7,Pd,4,0,"li",5)(8,Md,4,0,"li",5)(9,yd,4,0,"li",5)(10,Od,4,0,"li",5)(11,vd,4,0,"li",5)(12,xd,4,0,"li",5)(13,Sd,4,0,"li",5)(14,wd,4,0,"li",5),a()()}if(i&2){let e=f(2);l(),F("active",e.isTransactionActive()),l(4),F("show",e.showTransactionMenu),l(),p("ngIf",e.permissions.canViewPurchase),l(),p("ngIf",e.permissions.canViewPurchase),l(),p("ngIf",e.permissions.canViewPurchase),l(),p("ngIf",e.permissions.canViewPurchase),l(),p("ngIf",e.permissions.canViewPurchaseReturn),l(),p("ngIf",e.permissions.canViewSale),l(),p("ngIf",e.permissions.canViewSaleReturn),l(),p("ngIf",e.permissions.canViewLedger),l(),p("ngIf",e.permissions.canViewPayment)}}function kd(i,r){if(i&1){let e=N();o(0,"li")(1,"a",54),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",49),c(3," Order "),a()()}}function Td(i,r){if(i&1){let e=N();o(0,"li")(1,"a",55),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",39),c(3," Dispatch Quotation "),a()()}}function Id(i,r){if(i&1){let e=N();o(0,"li")(1,"a",56),_("click",function(){v(e);let n=f(3);return x(n.closeAllMenus())}),m(2,"i",39),c(3," Pending Item "),a()()}}function Fd(i,r){if(i&1){let e=N();o(0,"li",22)(1,"a",23),_("click",function(n){v(e);let s=f(2);return x(s.toggleDispatchQuotationMenu(n))}),m(2,"i",37),c(3," Dispatch Order "),m(4,"i",25),a(),o(5,"ul",26),M(6,kd,4,0,"li",5)(7,Td,4,0,"li",5)(8,Id,4,0,"li",5),a()()}if(i&2){let e=f(2);l(),F("active",e.isDispatchQuotationActive()),l(4),F("show",e.showDispatchQuotationMenu),l(),p("ngIf",e.permissions.canViewQuotation),l(),p("ngIf",e.permissions.canViewDispatchQuotation),l(),p("ngIf",e.permissions.canViewPendingItem)}}function Dd(i,r){if(i&1){let e=N();o(0,"div",14),M(1,pd,3,2,"div",15),o(2,"ul",16),M(3,Cd,11,9,"li",17)(4,Ed,15,13,"li",17)(5,Fd,9,7,"li",17),a(),o(6,"div",18)(7,"button",19),_("click",function(){v(e);let n=f();return x(n.logout())}),m(8,"i",20),c(9," Logout "),a()()()}if(i&2){let e=f();F("show",e.isMobileMenuOpen),l(),p("ngIf",e.clientName||e.clientLogoImage),l(2),p("ngIf",e.hasMasterMenuItems()),l(),p("ngIf",e.hasTransactionMenuItems()),l(),p("ngIf",e.hasDispatchQuotationMenuItems())}}var Qa=(()=>{class i{constructor(e,t,n,s,d){this.authService=e,this.roleService=t,this.router=n,this.userService=s,this.encryptionService=d,this.isAuthenticated=!1,this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showPendingItemMenu=!1,this.showEmployeeMenu=!1,this.isMobileMenuOpen=!1,this.clientName="",this.clientLogoImage=null,this.destroy$=new G,this.permissions={canViewCategory:!1,canViewProduct:!1,canViewCustomer:!1,canViewLedger:!1,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!1,canViewCustomerPrice:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewPurchaseReturn:!1,canViewSale:!1,canViewSaleReturn:!1,canViewQuotation:!1,canViewPendingItem:!1,canViewDispatchQuotation:!1,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!1},this.authSubscription=this.authService.authState$.subscribe(u=>{this.isAuthenticated=u,u&&(this.permissions=this.roleService.getMenuPermissions(),this.loadCurrentUser())})}ngOnInit(){this.authService.authState$.subscribe(e=>{this.isAuthenticated=e,e&&(this.permissions=this.roleService.getMenuPermissions(),this.loadCurrentUser()),this.isAuthenticated&&!localStorage.getItem("userRoles")&&this.authService.logout()}),this.loadClientNameFromStorage()}loadCurrentUser(){if(localStorage.getItem("encryptedUserData")){this.loadClientNameFromStorage();return}this.userService.getCurrentUser().pipe(O(this.destroy$)).subscribe({next:t=>{if(t.success&&t.data){let n=JSON.stringify(t),s=this.encryptionService.encrypt(n);if(localStorage.setItem("encryptedUserData",s),t.data.client){let d=t.data.client.logoImage;d&&d.trim()!==""?(this.clientLogoImage=d,this.clientName=""):(this.clientLogoImage=null,t.data.client.name&&(this.clientName=t.data.client.name))}}},error:t=>{console.error("Error loading current user:",t)}})}loadClientNameFromStorage(){let e=localStorage.getItem("encryptedUserData");if(e)try{let t=this.encryptionService.decrypt(e);if(t){let n=null;if(typeof t=="object"&&t!==null?n=t:typeof t=="string"&&(n=JSON.parse(t)),n&&n.data&&n.data.client){let s=n.data.client,d=s.logoImage;d&&d.trim()!==""?(this.clientLogoImage=d,this.clientName=""):(this.clientLogoImage=null,s.name&&(this.clientName=s.name))}}}catch(t){console.error("Error decrypting user data:",t)}}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe(),this.destroy$.next(),this.destroy$.complete()}onDocumentClick(e){let t=e.target;!t.closest(".dropdown")&&!t.closest(".mobile-menu-toggle")&&(this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1,this.showPendingItemMenu=!1,t.closest(".nav-links")||(this.isMobileMenuOpen=!1))}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}toggleMasterMenu(e){e.preventDefault(),e.stopPropagation(),this.showMasterMenu=!this.showMasterMenu,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1,this.showPendingItemMenu=!1}toggleTransactionMenu(e){e.preventDefault(),e.stopPropagation(),this.showTransactionMenu=!this.showTransactionMenu,this.showMasterMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1,this.showPendingItemMenu=!1}toggleQuotationMenu(e){e.preventDefault(),e.stopPropagation(),this.showQuotationMenu=!this.showQuotationMenu,this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1,this.showPendingItemMenu=!1}toggleDispatchQuotationMenu(e){e.preventDefault(),e.stopPropagation(),this.showDispatchQuotationMenu=!this.showDispatchQuotationMenu,this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showEmployeeMenu=!1,this.showPendingItemMenu=!1}toggleEmployeeMenu(e){e.preventDefault(),e.stopPropagation(),this.showEmployeeMenu=!this.showEmployeeMenu,this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showPendingItemMenu=!1}isMasterActive(){let e=this.router.url;return["/category","/product","/customer","/employee"].some(t=>e.includes(t))}isTransactionActive(){let e=this.router.url;return["/purchase","/purchase-challan","/sale","/profit","/daily-profit"].some(t=>e.includes(t))}isQuotationActive(){let e=this.router.url;return["/quotation","/quotation/order"].some(t=>e.includes(t))}isDispatchQuotationActive(){let e=this.router.url;return["/quotation/dispatch-list"].some(t=>e.includes(t))}isEmployeeActive(){let e=this.router.url;return["/attendance","/attendance/all","/employee-withdraw"].some(t=>e.includes(t))}closeAllMenus(){this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1,this.showPendingItemMenu=!1}hasMasterMenuItems(){return this.authService.hasRole("DEALER")?!1:this.roleService.hasMasterMenuItems()}hasTransactionMenuItems(){return this.roleService.hasTransactionMenuItems()}hasDispatchQuotationMenuItems(){return this.roleService.hasDispatchQuotationMenuItems()}hasEmployeeMenuItems(){return this.roleService.hasEmployeeMenuItems()}getUserDisplayName(){let e=JSON.parse(localStorage.getItem("user")||"{}");return`${e.firstName||""} ${e.lastName||""}`.trim()||"User"}getUserRoles(){return this.authService.getUserRoles().join(", ")||"No roles"}logout(){this.authService.logout(),window.location.href=window.location.origin+"/login?_t="+new Date().getTime()}isAdmin(){return this.authService.isAdmin()}isStaffAdmin(){return this.authService.isStaffAdmin()}isProductManager(){return this.authService.isProductManager()}canViewMenu(e){if(this.isAdmin()||this.isStaffAdmin())return!0;if(this.isProductManager())switch(e){case"category":case"product":case"quotation":case"attendance":return!0;default:return!1}return!1}static{this.\u0275fac=function(t){return new(t||i)(b(it),b(Ga),b(be),b(Wt),b(Xe))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-header"]],hostBindings:function(t,n){t&1&&_("click",function(d){return n.onDocumentClick(d)},!1,bo)},decls:10,vars:6,consts:[[1,"header"],[1,"nav-container"],[1,"nav-top"],[1,"logo"],["class","logo-image",3,"src","alt",4,"ngIf"],[4,"ngIf"],["class","user-info",4,"ngIf"],["class","mobile-menu-toggle",3,"click",4,"ngIf"],["class","nav-content",3,"show",4,"ngIf"],[1,"logo-image",3,"src","alt"],[1,"user-info"],[1,"user-roles"],[1,"mobile-menu-toggle",3,"click"],[1,"fas"],[1,"nav-content"],["class","client-name",4,"ngIf"],[1,"nav-links"],["class","dropdown",4,"ngIf"],[1,"nav-actions"],[1,"btn","btn-logout",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"client-name"],[1,"dropdown"],[3,"click"],[1,"fas","fa-th-large"],[1,"fas","fa-chevron-down"],[1,"dropdown-menu"],["routerLink","/category","routerLinkActive","active",3,"click"],[1,"fas","fa-tags"],["routerLink","/product","routerLinkActive","active",3,"click"],[1,"fas","fa-box"],["routerLink","/customer","routerLinkActive","active",3,"click"],[1,"fas","fa-users"],["routerLink","/transport-master","routerLinkActive","active",3,"click"],[1,"fas","fa-truck"],["routerLink","/customer-price","routerLinkActive","active",3,"click"],[1,"fas","fa-money-bill-wave"],[1,"fas","fa-exchange-alt"],["routerLink","/purchase","routerLinkActive","active",3,"click"],[1,"fas","fa-shopping-cart"],["routerLink","/purchase-challan","routerLinkActive","active",3,"click"],[1,"fas","fa-file-invoice"],["routerLink","/purchase-order","routerLinkActive","active",3,"click"],[1,"fas","fa-clipboard-list"],["routerLink","/purchase-order/pending-item","routerLinkActive","active",3,"click"],[1,"fas","fa-clock"],["routerLink","/purchase/return","routerLinkActive","active",3,"click"],[1,"fas","fa-undo"],["routerLink","/sale","routerLinkActive","active",3,"click"],[1,"fas","fa-hand-holding-usd"],["routerLink","/sale/return","routerLinkActive","active",3,"click"],["routerLink","/ledger","routerLinkActive","active",3,"click"],[1,"fas","fa-file-invoice-dollar"],["routerLink","/payment-history","routerLinkActive","active",3,"click"],["routerLink","/quotation","routerLinkActive","active",3,"click"],["routerLink","/quotation/dispatch-list","routerLinkActive","active",3,"click"],["routerLink","/quotation/pending-item","routerLinkActive","active",3,"click"]],template:function(t,n){t&1&&(o(0,"header",0)(1,"nav",1)(2,"div",2)(3,"div",3),M(4,od,1,2,"img",4)(5,ad,2,1,"span",5)(6,sd,2,0,"span",5),a(),M(7,cd,3,1,"div",6)(8,ld,2,4,"button",7),a(),M(9,Dd,10,6,"div",8),a()()),t&2&&(l(4),p("ngIf",n.clientLogoImage),l(),p("ngIf",!n.clientLogoImage&&n.clientName),l(),p("ngIf",!n.clientLogoImage&&!n.clientName),l(),p("ngIf",n.isAuthenticated),l(),p("ngIf",n.isAuthenticated),l(),p("ngIf",n.isAuthenticated))},dependencies:[K,Ve,$o],styles:[".header[_ngcontent-%COMP%]{background-color:var(--secondary);padding:0;box-shadow:0 2px 4px #0000001a;position:sticky;top:0;z-index:1000}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:5px 1rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]{display:none;justify-content:space-between;align-items:center;padding:1rem 0}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:700;display:flex;align-items:center}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-image[_ngcontent-%COMP%]{max-height:50px;max-width:300px;object-fit:contain;height:auto;width:auto}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]   .mobile-menu-toggle[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-content[_ngcontent-%COMP%]   .client-name[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:700;white-space:nowrap;display:flex;align-items:center}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-content[_ngcontent-%COMP%]   .client-name[_ngcontent-%COMP%]   .logo-image[_ngcontent-%COMP%]{max-height:40px;max-width:200px;object-fit:contain;height:auto;width:auto}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{display:flex;gap:1rem;list-style:none;margin:0;padding:0;align-items:center}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;color:#fff;text-decoration:none;cursor:pointer;border-radius:4px;transition:all .3s ease}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   i.fa-chevron-down[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]{background-color:var(--primary)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;background:#fff;min-width:200px;border-radius:4px;box-shadow:0 4px 6px #0000001a;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease;z-index:1001}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:.75rem 1rem;color:var(--text-primary);text-decoration:none;transition:all .3s ease}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:var(--background);color:var(--primary)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:.75rem 1rem;border-radius:4px;transition:all .3s ease}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]{background-color:var(--primary)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{background:transparent;color:#fff;border:1px solid white;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:.5rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background:#fff;color:var(--secondary)}@media (max-width: 1024px){.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]{padding:0px auto}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{gap:.25rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding:.5rem;font-size:.9rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{min-width:180px}}@media (max-width: 768px){.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]   .mobile-menu-toggle[_ngcontent-%COMP%]{display:block;background:transparent;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:.5rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-content[_ngcontent-%COMP%]{display:none;position:fixed;inset:64px 0 0;background-color:var(--secondary);padding:1rem;overflow-y:auto;transition:transform .3s ease;transform:translate(-100%)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-content.show[_ngcontent-%COMP%]{display:block;transform:translate(0)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{flex-direction:column;width:100%;gap:.5rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{justify-content:space-between;background-color:#ffffff1a;margin-bottom:2px}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   i.fa-chevron-down[_ngcontent-%COMP%]{transform:rotate(0);transition:transform .3s}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]   i.fa-chevron-down[_ngcontent-%COMP%]{transform:rotate(180deg)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:static;background:transparent;box-shadow:none;opacity:1;visibility:visible;transform:none;padding-left:1rem;display:none}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;padding:.75rem 1rem;background-color:#ffffff0d;margin-bottom:2px}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background-color:#ffffff1a;margin-bottom:2px}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,.2)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{width:100%;justify-content:center;background-color:#ffffff1a}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background-color:var(--primary);border-color:var(--primary);color:#fff}}"]})}}return i})();var Ya=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=Q({type:i,selectors:[["app-root"]],decls:2,vars:0,template:function(t,n){t&1&&m(0,"app-header")(1,"router-outlet")},dependencies:[jo,Qa],encapsulation:2})}}return i})();function Nd(i,r){i&1&&(o(0,"span"),c(1,"Email is required"),a())}function Ld(i,r){i&1&&(o(0,"span"),c(1,"Invalid email format"),a())}function Vd(i,r){if(i&1&&(o(0,"div",10),M(1,Nd,2,0,"span",11)(2,Ld,2,0,"span",11),a()),i&2){let e,t,n=f();l(),p("ngIf",(e=n.loginForm.get("email"))==null||e.errors==null?null:e.errors.required),l(),p("ngIf",(t=n.loginForm.get("email"))==null||t.errors==null?null:t.errors.email)}}function zd(i,r){i&1&&(o(0,"span"),c(1,"Password is required"),a())}function Rd(i,r){if(i&1&&(o(0,"div",10),M(1,zd,2,0,"span",11),a()),i&2){let e,t=f();l(),p("ngIf",(e=t.loginForm.get("password"))==null||e.errors==null?null:e.errors.required)}}var Ka=(()=>{class i{constructor(e,t,n,s,d){this.fb=e,this.authService=t,this.router=n,this.snackbar=s,this.platformId=d,this.isLoading=!1,this.destroy$=new G,this.loginForm=this.fb.group({email:["",[S.required,S.email]],password:["",S.required]})}onSubmit(e){e?.preventDefault(),e?.stopPropagation(),this.loginForm.valid?(this.isLoading=!0,this.authService.login(this.loginForm.value).pipe(O(this.destroy$)).subscribe({next:t=>{ko(this.platformId)&&(localStorage.setItem("token",t.accessToken),localStorage.setItem("user",JSON.stringify(t.user))),this.snackbar.success("Login successful"),this.router.navigate(["/quotation"])},error:t=>{this.snackbar.error(t?.error?.message||"Login failed"),this.isLoading=!1}})):this.snackbar.warning("Please fill in all required fields correctly")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(it),b(be),b(de),b(_o))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-login"]],decls:17,vars:5,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"error-message"],[4,"ngIf"]],template:function(t,n){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Login"),a(),o(4,"form",2),_("ngSubmit",function(d){return n.onSubmit(d)}),o(5,"div",3)(6,"label",4),c(7,"Email"),a(),m(8,"input",5),M(9,Vd,3,2,"div",6),a(),o(10,"div",3)(11,"label",7),c(12,"Password"),a(),m(13,"input",8),M(14,Rd,2,1,"div",6),a(),o(15,"button",9),c(16),a()()()()),t&2){let s,d;l(4),p("formGroup",n.loginForm),l(5),p("ngIf",((s=n.loginForm.get("email"))==null?null:s.touched)&&((s=n.loginForm.get("email"))==null?null:s.invalid)),l(5),p("ngIf",((d=n.loginForm.get("password"))==null?null:d.touched)&&((d=n.loginForm.get("password"))==null?null:d.invalid)),l(),p("disabled",n.loginForm.invalid||n.isLoading),l(),T(" ",n.isLoading?"Logging in...":"Login"," ")}},dependencies:[K,ee,W,Z,J,te,oe],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Roboto,sans-serif;background-color:var(--background);color:var(--text-primary)}.container[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width: 576px){.container[_ngcontent-%COMP%]{max-width:540px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:720px}}@media (min-width: 992px){.container[_ngcontent-%COMP%]{max-width:960px}}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{max-width:1140px}}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--secondary-dark)}.form-control[_ngcontent-%COMP%]{width:90%;padding:10px;border:1px solid var(--supporting);border-radius:4px!important;margin-bottom:15px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem;background-color:#fff;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--supporting)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--primary-lightest)}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;margin-bottom:20px}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-2[_ngcontent-%COMP%]{margin-top:1rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:1rem}.p-2[_ngcontent-%COMP%]{padding:1rem}.btn-success[_ngcontent-%COMP%]{background-color:var(--success);color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:#16734c}.btn-warning[_ngcontent-%COMP%]{background-color:var(--warning);color:#fff}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#966100}.btn-error[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{background-color:var(--error);color:#fff}.btn-error[_ngcontent-%COMP%]:hover, .btn-danger[_ngcontent-%COMP%]:hover{background-color:#9b2f2f}.btn-info[_ngcontent-%COMP%]{background-color:var(--info);color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background-color:#218298}.text-success[_ngcontent-%COMP%]{color:var(--success)}.text-warning[_ngcontent-%COMP%]{color:var(--warning)}.text-error[_ngcontent-%COMP%], .text-danger[_ngcontent-%COMP%]{color:var(--error)}.text-info[_ngcontent-%COMP%]{color:var(--info)}.text-accent[_ngcontent-%COMP%]{color:var(--accent)}.bg-success[_ngcontent-%COMP%]{background-color:var(--success)}.bg-warning[_ngcontent-%COMP%]{background-color:var(--warning)}.bg-error[_ngcontent-%COMP%], .bg-danger[_ngcontent-%COMP%]{background-color:var(--error)}.bg-info[_ngcontent-%COMP%]{background-color:var(--info)}.bg-accent[_ngcontent-%COMP%]{background-color:var(--accent)}.custom-dialog-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background-color:#00000080!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{border-radius:12px!important;padding:0!important;box-shadow:0 8px 32px #0000001a!important;background:#fff!important;position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;margin:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]{padding:0!important;position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;margin:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{padding:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dialog-enter .3s ease-out}@keyframes _ngcontent-%COMP%_dialog-enter{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@media (max-width: 576px){.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{margin:16px!important}}.custom-snackbar-container[_ngcontent-%COMP%]{position:fixed!important;z-index:1001!important;transform:none!important;-webkit-transform:none!important;-ms-transform:none!important}.custom-snackbar-container.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{position:fixed!important;margin:0!important;max-width:none!important;inset:20px 20px auto auto!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__surface[_ngcontent-%COMP%]{background:none!important;box-shadow:none!important;min-width:auto!important;min-height:auto!important;padding:0!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-label[_ngcontent-%COMP%], .custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__label[_ngcontent-%COMP%]{padding:0!important}@media (max-width: 576px){.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:10px!important;max-width:calc(100% - 20px)!important}}.search-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:40px;max-width:90px}.refresh[_ngcontent-%COMP%], .calculator[_ngcontent-%COMP%]{width:33px;height:33px;display:flex;justify-content:center;align-items:center}[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.login-container[_ngcontent-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center;background-image:url(/assets/login/background.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;background-color:var(--primary-lightest)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 6px #0000001a;width:100%;max-width:400px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--primary);text-align:center;margin-bottom:2rem;font-weight:600}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--neutral-dark);font-weight:500}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:var(--neutral-light)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 .2rem #003a581a}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:1rem;margin-top:1rem;background-color:var(--primary);color:#fff;border:none;border-radius:4px;transition:background-color .3s ease}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary-dark)}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;background-color:var(--neutral-light)}@media (max-width: 576px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})}}return i})();var Wa=(()=>{class i{constructor(e){this.authService=e}intercept(e,t){if(e.url.includes("/api/refresh-token/new"))return t.handle(e);let n=this.authService.getToken();return n&&(e=e.clone({setHeaders:{Authorization:`Bearer ${n}`}})),t.handle(e)}static{this.\u0275fac=function(t){return new(t||i)(ge(it))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac})}}return i})();var Za=(()=>{class i{constructor(e,t){this.authService=e,this.router=t,this.isRefreshing=!1}intercept(e,t){return t.handle(e).pipe(Gi(n=>{let s=e.url.includes("/login")||e.url.includes("refresh-token")||e.url.includes("/auth/");return n.status===401&&!s?this.handle401Error(e,t):Bi(()=>n)}))}handle401Error(e,t){return this.isRefreshing?t.handle(e):(this.isRefreshing=!0,this.authService.refreshToken().pipe(uo(n=>{this.isRefreshing=!1;let s=e.clone({setHeaders:{Authorization:`Bearer ${n.data.token}`}});return t.handle(s)}),Gi(n=>(this.isRefreshing=!1,this.authService.logout(),window.location.href=window.location.origin+"/login?_t="+new Date().getTime(),Bi(()=>n)))))}static{this.\u0275fac=function(t){return new(t||i)(ge(it),ge(be))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac})}}return i})();var Ni=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${st.apiUrl}/api/categories`}getCategories(e){return this.http.post(`${this.apiUrl}/getCategories`,e)}searchCategories(e){return this.http.post(`${this.apiUrl}/search`,e)}createCategory(e){return this.http.post(`${this.apiUrl}`,e)}updateCategory(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}deleteCategory(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function jd(i,r){if(i&1){let e=N();o(0,"tr")(1,"td"),c(2),a(),o(3,"td")(4,"span"),c(5),a()(),o(6,"td")(7,"button",22),_("click",function(){let n=v(e).$implicit,s=f();return x(s.editCategory(n))}),m(8,"i",23),a(),o(9,"button",24),_("click",function(){let n=v(e).$implicit,s=f();return x(s.deleteCategory(n.id))}),m(10,"i",25),a()()()}if(i&2){let e=r.$implicit;l(2),E(e.name),l(2),Mt("status-badge "+(e.status==="A"?"active":"inactive")),l(),T(" ",e.status==="A"?"Active":"Inactive"," ")}}function $d(i,r){i&1&&(o(0,"tr")(1,"td",26),c(2,"No categories found"),a()())}function qd(i,r){if(i&1){let e=N();o(0,"app-pagination",27),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}function Ud(i,r){if(i&1){let e=N();o(0,"div",28),_("click",function(){v(e);let n=f();return x(n.closeDialog())}),a()}}function Hd(i,r){i&1&&(o(0,"div",44),c(1," Category name is required "),a())}function Bd(i,r){i&1&&m(0,"span",45)}function Gd(i,r){if(i&1){let e=N();o(0,"div",29)(1,"div",30)(2,"h2"),c(3),a(),o(4,"button",31),_("click",function(){v(e);let n=f();return x(n.closeDialog())}),c(5,"\xD7"),a()(),o(6,"div",32)(7,"form",33),_("ngSubmit",function(){v(e);let n=f();return x(n.onSubmit())}),o(8,"div",34)(9,"label",35),c(10,"Category Name"),a(),m(11,"input",36),M(12,Hd,2,0,"div",37),a(),o(13,"div",34)(14,"label",38),c(15,"Status"),a(),o(16,"select",39)(17,"option",8),c(18,"Active"),a(),o(19,"option",9),c(20,"Inactive"),a()()(),o(21,"div",40)(22,"button",41),_("click",function(){v(e);let n=f();return x(n.closeDialog())}),c(23,"Cancel"),a(),o(24,"button",42),M(25,Bd,1,0,"span",43),c(26),a()()()()()}if(i&2){let e,t,n=f();p("@dialogAnimation",void 0),l(3),T("",n.isEditing?"Edit":"Create"," Category"),l(4),p("formGroup",n.categoryForm),l(4),F("is-invalid",((e=n.categoryForm.get("name"))==null?null:e.invalid)&&((e=n.categoryForm.get("name"))==null?null:e.touched)),l(),p("ngIf",((t=n.categoryForm.get("name"))==null?null:t.invalid)&&((t=n.categoryForm.get("name"))==null?null:t.touched)),l(12),p("disabled",n.categoryForm.invalid||n.isLoading),l(),p("ngIf",n.isLoading),l(),T(" ",n.isEditing?"Update":"Create"," ")}}var Ja=(()=>{class i{constructor(e,t,n){this.categoryService=e,this.fb=t,this.snackbar=n,this.categories=[],this.isLoading=!1,this.isEditing=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.isDialogOpen=!1,this.destroy$=new G,this.categoryForm=this.fb.group({name:["",S.required],status:["A",S.required]}),this.searchForm=this.fb.group({search:[""],status:["A"]})}ngOnInit(){this.loadCategories()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.categories=[]}openCreateDialog(){this.isEditing=!1,this.editingId=void 0,this.categoryForm.reset({status:"A"}),this.isDialogOpen=!0}closeDialog(){this.categoryForm.dirty||(this.isLoading=!1),this.isDialogOpen=!1,this.resetForm()}loadCategories(){this.isLoading=!0;let e=lt(Me({},this.searchForm.value),{size:this.pageSize,page:this.currentPage});this.categoryService.searchCategories(e).pipe(O(this.destroy$),po(()=>this.isLoading=!1)).subscribe({next:t=>{this.categories=t.data.content,this.totalPages=t.data.totalPages,this.totalElements=t.data.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements),this.isLoading=!1},error:t=>{let n=t?.error?.message||"Failed to load categories";this.snackbar.error(n),this.isLoading=!1}})}onSubmit(){if(this.categoryForm.valid){this.isLoading=!0;let e=this.categoryForm.value;(this.isEditing&&this.editingId?this.categoryService.updateCategory(this.editingId,e):this.categoryService.createCategory(e)).pipe(O(this.destroy$)).subscribe({next:n=>{n?.success?(this.snackbar.success(n.message||"Category saved successfully"),this.closeDialog(),this.loadCategories()):(this.snackbar.error(n.message||"Operation failed"),this.isLoading=!1)},error:n=>{let s=n?.error?.message||"Operation failed";this.snackbar.error(s),this.isLoading=!1}})}else Object.keys(this.categoryForm.controls).forEach(e=>{let t=this.categoryForm.get(e);t?.invalid&&t.markAsTouched()})}editCategory(e){if(!e.id){this.snackbar.error("Invalid category ID");return}this.isEditing=!0,this.editingId=e.id,this.categoryForm.patchValue({name:e.name,status:e.status}),this.isDialogOpen=!0}deleteCategory(e){this.isLoading=!0,confirm("Are you sure you want to delete this category?")&&this.categoryService.deleteCategory(e).pipe(O(this.destroy$)).subscribe({next:t=>{t?.success?(this.snackbar.success(t.message||"Category deleted successfully"),this.loadCategories()):this.snackbar.error(t.message||"Failed to delete category")},error:t=>{let n=t?.error?.message||"Failed to delete category";this.snackbar.error(n),this.isLoading=!1}})}resetForm(){this.isEditing=!1,this.editingId=void 0,this.categoryForm.reset({status:"A"}),this.categoryForm.markAsPristine(),this.categoryForm.markAsUntouched()}onSearch(){this.loadCategories()}onPageChange(e){this.currentPage=e,this.loadCategories()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadCategories()}static{this.\u0275fac=function(t){return new(t||i)(b(Ni),b(X),b(de))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-category"]],standalone:!0,features:[re],decls:39,vars:7,consts:[[1,"category-container"],[3,"show"],[1,"search-section","card"],[1,"search-container"],[1,"search-form",3,"formGroup"],[1,"search-inputs"],["type","text","placeholder","Search categories...","formControlName","search",1,"form-control"],["formControlName","status",1,"form-control"],["value","A"],["value","I"],[1,"search-btn","btn","btn-primary",3,"click"],[1,"fas","fa-search","me-2"],[1,"btn","btn-sm","btn-primary","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"categories-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],["class","dialog-backdrop",3,"click",4,"ngIf"],["class","dialog",4,"ngIf"],["title","Edit",1,"btn","btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-icon",3,"click"],[1,"fas","fa-trash"],["colspan","3",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"],[1,"dialog-backdrop",3,"click"],[1,"dialog"],[1,"dialog-header"],[1,"close-button",3,"click"],[1,"dialog-content"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","status"],["id","status","formControlName","status",1,"form-control"],[1,"dialog-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"h3"),c(4,"Search Categories"),a(),o(5,"div",3)(6,"form",4)(7,"div",5),m(8,"input",6),o(9,"select",7)(10,"option",8),c(11,"Active"),a(),o(12,"option",9),c(13,"Inactive"),a()(),o(14,"button",10),_("click",function(){return n.onSearch()}),m(15,"i",11),c(16," Search "),a()()()()(),o(17,"button",12),_("click",function(){return n.openCreateDialog()}),m(18,"i",13),c(19," Create Category "),a(),o(20,"div",14)(21,"h2"),c(22,"Categories"),a(),o(23,"div",15)(24,"table",16)(25,"thead")(26,"tr")(27,"th"),c(28,"Name"),a(),o(29,"th"),c(30,"Status"),a(),o(31,"th"),c(32,"Actions"),a()()(),o(33,"tbody"),M(34,jd,11,4,"tr",17)(35,$d,3,0,"tr",18),a()()(),M(36,qd,1,4,"app-pagination",19),a()(),M(37,Ud,1,0,"div",20)(38,Gd,27,9,"div",21)),t&2&&(l(),p("show",n.isLoading),l(5),p("formGroup",n.searchForm),l(28),p("ngForOf",n.categories),l(),p("ngIf",n.categories.length===0),l(),p("ngIf",n.totalPages>0),l(),p("ngIf",n.isDialogOpen),l(),p("ngIf",n.isDialogOpen))},dependencies:[le,Oe,K,ue,ee,ot,at,W,rt,Z,J,te,oe,Fe,me,Ue,He],styles:[".category-container[_ngcontent-%COMP%]{position:relative;min-height:200px;padding:2rem;margin:0 auto}.category-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:2rem}.category-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-end}.category-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.category-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:42px}.category-container[_ngcontent-%COMP%]   .category-form[_ngcontent-%COMP%]{margin-bottom:2rem}.category-container[_ngcontent-%COMP%]   .category-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .badge-active[_ngcontent-%COMP%]{background-color:var(--accent2);color:#fff;padding:.25rem .5rem;border-radius:4px}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .badge-inactive[_ngcontent-%COMP%]{background-color:var(--text-secondary);color:#fff;padding:.25rem .5rem;border-radius:4px}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:4px;transition:background-color .3s}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background-color:#0000001a}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary);white-space:nowrap}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{width:auto;min-width:80px;padding:.5rem;margin-bottom:0;border-color:var(--supporting);background-color:#fff;cursor:pointer}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 2px #fd78231a}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:.5rem}@media (max-width: 768px){.category-container[_ngcontent-%COMP%]{padding:1rem}.category-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column}.category-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.table-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{width:100%}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{flex:1}}.search-container[_ngcontent-%COMP%]{margin-bottom:1rem}.search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]{display:flex;gap:1rem}.search-container[_ngcontent-%COMP%]   .search-inputs[_ngcontent-%COMP%]{display:flex;gap:1rem;width:100%;max-height:57px}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]   .search-inputs[_ngcontent-%COMP%]{flex-direction:column}}.create-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:1rem}.dialog-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000}.dialog[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:12px;min-width:400px;max-width:90%;width:500px;z-index:1001;box-shadow:0 8px 32px #0000001a}@media (max-width: 576px){.dialog[_ngcontent-%COMP%]{min-width:90%;margin:0 16px}}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--supporting)}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--text-primary)}.dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:var(--text-secondary);cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:var(--text-primary)}.dialog-content[_ngcontent-%COMP%]{padding:1.5rem}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem}.table-responsive[_ngcontent-%COMP%]{margin:1rem 0}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:50px;font-size:.875rem;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#7676761a;color:var(--text-secondary)}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;padding:0;display:inline-flex;align-items:center;justify-content:center;border-radius:4px;margin:0 .25rem;background:none;border:none;color:var(--text-secondary);transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:var(--text-primary)}.items-per-page[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;display:inline-block}"],data:{animation:[ln("dialogAnimation",[kt(":enter",[dt({transform:"translate(-50%, -48%) scale(0.95)",opacity:0}),Et("200ms ease-out",dt({transform:"translate(-50%, -50%) scale(1)",opacity:1}))]),kt(":leave",[Et("150ms ease-in",dt({transform:"translate(-50%, -48%) scale(0.95)",opacity:0}))])])]}})}}return i})();var Kr=i=>({"negative-quantity":i});function Qd(i,r){if(i&1&&(o(0,"option",34),c(1),a()),i&2){let e=r.$implicit;p("value",e.id),l(),T(" ",e.name," ")}}function Yd(i,r){if(i&1){let e=N();o(0,"tr"),m(1,"td",35),o(2,"td",36),c(3),a(),o(4,"td",37),c(5),a(),o(6,"td",38),c(7),a(),o(8,"td",39),c(9),a(),o(10,"td",40),c(11),a(),o(12,"td"),c(13),a(),o(14,"td")(15,"span"),c(16),a()(),o(17,"td",41),c(18),a(),o(19,"td",41),c(20),a(),o(21,"td",41),c(22),a(),o(23,"td"),c(24),a(),o(25,"td"),c(26),a(),o(27,"td",42)(28,"button",43),_("click",function(){let n=v(e).$implicit,s=f();return x(s.editProduct(n))}),m(29,"i",44),a(),o(30,"button",45),_("click",function(){let n=v(e).$implicit,s=f();return x(s.deleteProduct(n.id))}),m(31,"i",46),a()()()}if(i&2){let e,t,n,s,d,u,g=r.$implicit,h=f();l(),p("innerHTML",h.sanitizeHtml(g.name),Nn),l(2),E(g.productCode||"\u2014"),l(2),E(g.materialName||"\u2014"),l(2),E(g.hsnCode||"\u2014"),l(2),E(g.categoryName),l(2),E(g.description),l(2),E(g.minimumStock),l(2),F("badge-active",g.status==="A")("badge-inactive",g.status==="I"),l(),T(" ",g.status==="A"?"Active":"Inactive"," "),l(),p("ngClass",yt(20,Kr,((e=g==null?null:g.remainingQuantity)!==null&&e!==void 0?e:0)<0)),l(),T(" ",(t=g==null?null:g.remainingQuantity)!==null&&t!==void 0?t:0," "),l(),p("ngClass",yt(22,Kr,((n=g==null?null:g.blockedQuantity)!==null&&n!==void 0?n:0)<0)),l(),T(" ",(s=g==null?null:g.blockedQuantity)!==null&&s!==void 0?s:0," "),l(),p("ngClass",yt(24,Kr,((d=g==null?null:g.totalRemainingQuantity)!==null&&d!==void 0?d:0)<0)),l(),T(" ",(u=g==null?null:g.totalRemainingQuantity)!==null&&u!==void 0?u:0," "),l(2),E(g.purchaseAmount),l(2),E(g.saleAmount)}}function Kd(i,r){if(i&1){let e=N();o(0,"app-pagination",47),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}function Wd(i,r){if(i&1){let e=N();o(0,"div",48),_("click",function(){v(e);let n=f();return x(n.closeDialog())}),a()}}function Zd(i,r){i&1&&(o(0,"div",109),c(1," Product name is required "),a())}function Xd(i,r){if(i&1&&(o(0,"option",34),c(1),a()),i&2){let e=r.$implicit;p("value",e.id),l(),T(" ",e.name," ")}}function Jd(i,r){i&1&&(o(0,"div",109),c(1," Category is required "),a())}function em(i,r){i&1&&(o(0,"div",109),c(1," Minimum stock must be 0 or greater "),a())}function tm(i,r){i&1&&(o(0,"span"),c(1," Sale amount is required "),a())}function nm(i,r){i&1&&(o(0,"span"),c(1," Sale amount must be greater than 0 "),a())}function im(i,r){i&1&&(o(0,"span"),c(1," Sale amount must be a valid number "),a())}function rm(i,r){if(i&1&&(o(0,"div",109),M(1,tm,2,0,"span",110)(2,nm,2,0,"span",110)(3,im,2,0,"span",110),a()),i&2){let e,t,n,s=f(2);l(),p("ngIf",(e=s.productForm.get("saleAmount"))==null||e.errors==null?null:e.errors.required),l(),p("ngIf",((t=s.productForm.get("saleAmount"))==null||t.errors==null?null:t.errors.min)&&!(!((t=s.productForm.get("saleAmount"))==null||t.errors==null)&&t.errors.required)),l(),p("ngIf",(n=s.productForm.get("saleAmount"))==null||n.errors==null?null:n.errors.invalidNumber)}}function om(i,r){i&1&&(o(0,"div",109),c(1," Tax percentage must be between 0 and 100 "),a())}function am(i,r){if(i&1){let e=N();o(0,"div",49)(1,"div",50)(2,"h2"),m(3,"i"),c(4),a(),o(5,"button",51),_("click",function(){v(e);let n=f();return x(n.closeDialog())}),m(6,"i",52),a()(),o(7,"form",53),_("ngSubmit",function(){v(e);let n=f();return x(n.onSubmit())}),o(8,"div",54)(9,"div",55)(10,"label",56),m(11,"i",57),c(12," Product Name "),o(13,"span",58),c(14,"*"),a()(),o(15,"div",59)(16,"button",60),_("click",function(){v(e);let n=f();return x(n.toggleBold())}),c(17," B "),a(),m(18,"div",61),a(),M(19,Zd,2,0,"div",62),a(),o(20,"div",55)(21,"label",63),m(22,"i",64),c(23," HSN Code "),a(),m(24,"input",65),a(),o(25,"div",55)(26,"label",66),m(27,"i",67),c(28," Product Code "),a(),m(29,"input",68),a(),o(30,"div",55)(31,"label",69),m(32,"i",70),c(33," Material Name "),a(),m(34,"input",71),a(),o(35,"div",55)(36,"label",72),m(37,"i",73),c(38," Category "),o(39,"span",58),c(40,"*"),a()(),o(41,"select",74)(42,"option",75),c(43,"Select Category"),a(),M(44,Xd,2,2,"option",17),a(),M(45,Jd,2,0,"div",62),a(),o(46,"div",55)(47,"label",76),m(48,"i",77),c(49," Minimum Stock "),o(50,"span",58),c(51,"*"),a()(),m(52,"input",78),M(53,em,2,0,"div",62),a(),o(54,"div",55)(55,"label",79),m(56,"i",80),c(57," Status "),a(),o(58,"select",81)(59,"option",19),c(60,"Active"),a(),o(61,"option",20),c(62,"Inactive"),a()()(),o(63,"div",55)(64,"label",82),m(65,"i",83),c(66," Purchase Amount "),o(67,"span",58),c(68,"*"),a()(),m(69,"input",84),a(),o(70,"div",55)(71,"label",85),m(72,"i",83),c(73," Sale Amount "),o(74,"span",58),c(75,"*"),a()(),m(76,"input",86),M(77,rm,4,3,"div",62),a(),o(78,"div",55)(79,"label",87),m(80,"i",88),c(81," Measurement "),o(82,"span",58),c(83,"*"),a()(),m(84,"input",89),a(),o(85,"div",55)(86,"label",90),m(87,"i",91),c(88," Tax Percentage "),o(89,"span",58),c(90,"*"),a()(),m(91,"input",92),M(92,om,2,0,"div",62),a(),o(93,"div",55)(94,"label",93),m(95,"i",77),c(96," Remaining Quantity "),o(97,"span",58),c(98,"*"),a()(),o(99,"input",94),_("input",function(){v(e);let n=f();return x(n.validateRemainingQuantity())}),a()(),o(100,"div",55)(101,"label",95),m(102,"i",96),c(103," Blocked Amount "),a(),m(104,"input",97),a(),o(105,"div",55)(106,"label",98),m(107,"i",99),c(108," Total Remaining Amount "),a(),m(109,"input",100),a(),o(110,"div",101)(111,"label",102),m(112,"i",103),c(113," Description "),a(),m(114,"textarea",104),a()(),o(115,"div",105)(116,"button",106),_("click",function(){v(e);let n=f();return x(n.closeDialog())}),m(117,"i",52),c(118," Cancel "),a(),o(119,"button",107),m(120,"i",108),c(121),a()()()()}if(i&2){let e,t,n,s,d,u,g,h=f();p("@dialogAnimation",void 0),l(3),Oo("fas ",h.isEditing?"fa-edit":"fa-plus-circle",""),l(),T(" ",h.isEditing?"Edit":"Create"," Product "),l(3),p("formGroup",h.productForm),l(11),F("is-invalid",((e=h.productForm.get("name"))==null?null:e.invalid)&&((e=h.productForm.get("name"))==null?null:e.touched)),l(),p("ngIf",((t=h.productForm.get("name"))==null?null:t.invalid)&&((t=h.productForm.get("name"))==null?null:t.touched)),l(22),F("is-invalid",((n=h.productForm.get("categoryId"))==null?null:n.invalid)&&((n=h.productForm.get("categoryId"))==null?null:n.touched)),l(3),p("ngForOf",h.categories),l(),p("ngIf",((s=h.productForm.get("categoryId"))==null?null:s.invalid)&&((s=h.productForm.get("categoryId"))==null?null:s.touched)),l(7),F("is-invalid",((d=h.productForm.get("minimumStock"))==null?null:d.invalid)&&((d=h.productForm.get("minimumStock"))==null?null:d.touched)),l(),p("ngIf",((u=h.productForm.get("minimumStock"))==null?null:u.invalid)&&((u=h.productForm.get("minimumStock"))==null?null:u.touched)),l(16),F("is-invalid",h.isFieldInvalid("purchaseAmount")),p("value",0),l(7),F("is-invalid",h.isFieldInvalid("saleAmount")),l(),p("ngIf",h.isFieldInvalid("saleAmount")),l(7),F("is-invalid",h.isFieldInvalid("measurement")),p("value","kg"),l(7),F("is-invalid",h.isFieldInvalid("taxPercentage")),l(),p("ngIf",h.isFieldInvalid("taxPercentage")),l(7),F("is-invalid",((g=h.productForm.get("remainingQuantity"))==null?null:g.invalid)&&((g=h.productForm.get("remainingQuantity"))==null?null:g.touched)),l(10),p("disabled",!0),l(10),p("disabled",h.productForm.invalid||h.isLoading),l(),p("ngClass",h.isLoading?"fa-spinner fa-spin":h.isEditing?"fa-save":"fa-plus"),l(),T(" ",h.isEditing?"Update":"Create"," ")}}var es=(()=>{class i{constructor(e,t,n,s,d){this.productService=e,this.categoryService=t,this.fb=n,this.snackbarService=s,this.sanitizer=d,this.products=[],this.categories=[],this.isLoading=!1,this.isEditing=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.isDialogOpen=!1,this.destroy$=new G,this.isBrowser=typeof window<"u",this.dropdownPinned=!1,this.initializeForms()}ngOnInit(){this.loadCategories(),this.loadProducts()}initializeForms(){this.productForm=this.fb.group({name:["",[S.required]],hsnCode:[""],productCode:["",[S.maxLength(100)]],materialName:["",[S.maxLength(150)]],categoryId:["",[S.required]],minimumStock:[0,[S.required,S.min(0)]],purchaseAmount:[0,[S.required,S.min(0)]],saleAmount:[null,[S.required,S.min(0)]],measurement:["kg"],status:["A"],description:[""],remainingQuantity:[0,[S.required]],blockedQuantity:[0,[S.required,S.min(0)]],totalRemainingQuantity:[{value:0,disabled:!0}],taxPercentage:[5,[S.required,S.min(0),S.max(100)]]}),this.productForm.get("remainingQuantity")?.valueChanges.pipe(O(this.destroy$)).subscribe(()=>{this.calculateTotalRemainingQuantity()}),this.productForm.get("blockedQuantity")?.valueChanges.pipe(O(this.destroy$)).subscribe(()=>{this.calculateTotalRemainingQuantity()});let e=document.querySelector(".editable-content");e&&e.addEventListener("input",()=>{let t=e.innerHTML;t.trim()?(this.productForm.patchValue({name:t},{emitEvent:!0}),this.productForm.get("name")?.markAsTouched()):this.productForm.get("name")?.setErrors({required:!0})}),this.searchForm=this.fb.group({search:[""],hsnCode:[""],productCode:[""],materialName:[""],categoryId:[""],status:["A"]})}loadCategories(){this.categoryService.getCategories({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{this.categories=e.data},error:()=>{this.snackbarService.error("Failed to load categories")}})}loadProducts(){this.isLoading||(this.isLoading=!0);let e=lt(Me({},this.searchForm.value),{size:this.pageSize,page:this.currentPage});this.productService.searchProducts(e).pipe(O(this.destroy$)).subscribe({next:t=>{this.products=t.data.content,this.totalPages=t.data.totalPages,this.totalElements=t.data.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements),this.isLoading=!1},error:()=>{this.snackbarService.error("Failed to load products"),this.isLoading=!1}})}onSubmit(e){if(e?.preventDefault(),e?.stopPropagation(),this.isLoading)return;let n=document.querySelector(".editable-content")?.innerHTML||"";if(!n.trim()){this.productForm.get("name")?.setErrors({required:!0}),this.productForm.get("name")?.markAsTouched();return}if(this.productForm.invalid){Object.keys(this.productForm.controls).forEach(u=>{let g=this.productForm.get(u);g&&g.markAsTouched()});return}this.isLoading=!0;let s=lt(Me({},this.productForm.getRawValue()),{name:n});(this.isEditing?this.productService.updateProduct(this.editingId,s):this.productService.createProduct(s)).pipe(O(this.destroy$)).subscribe({next:u=>{this.snackbarService.success(this.isEditing?"Product updated successfully":"Product created successfully"),this.productService.refreshProducts().pipe(O(this.destroy$)).subscribe({next:g=>{},error:g=>{}}),this.closeDialog(),this.isLoading=!1},error:u=>{this.snackbarService.error(u?.error?.message),console.error("Error:",u),this.isLoading=!1},complete:()=>{this.isLoading=!1}})}sanitizeHtml(e){return this.sanitizer.bypassSecurityTrustHtml(e)}editProduct(e){this.isEditing=!0,this.editingId=e.id;let t=document.createElement("div");t.innerHTML=e.name,this.productForm.patchValue({name:e.name,hsnCode:e.hsnCode,productCode:e.productCode,materialName:e.materialName,categoryId:e.categoryId,description:e.description,minimumStock:e.minimumStock,purchaseAmount:e.purchaseAmount,saleAmount:e.saleAmount,measurement:e.measurement,status:e.status,remainingQuantity:e.remainingQuantity,blockedQuantity:e.blockedQuantity,totalRemainingQuantity:e.totalRemainingQuantity,taxPercentage:e.taxPercentage??5}),this.calculateTotalRemainingQuantity(),setTimeout(()=>{let n=document.querySelector(".editable-content");n&&(n.innerHTML=e.name||"")},0),this.isDialogOpen=!0}deleteProduct(e){confirm("Are you sure you want to delete this product?")&&(this.isLoading=!0,this.productService.deleteProduct(e).pipe(O(this.destroy$)).subscribe({next:()=>{this.snackbarService.success("Product deleted successfully"),this.productService.refreshProducts().pipe(O(this.destroy$)).subscribe({next:t=>{},error:t=>{}}),this.loadProducts()},error:t=>{this.snackbarService.error(t?.error?.message||"Failed to delete product"),this.isLoading=!1}}))}resetForm(){this.isEditing=!1,this.editingId=void 0,this.productForm.reset({status:"A",productCode:"",materialName:"",purchaseAmount:0,saleAmount:null,measurement:"kg",taxPercentage:5,remainingQuantity:0,blockedQuantity:0})}onSearch(e){e?.preventDefault(),e?.stopPropagation(),!this.isLoading&&(this.currentPage=0,this.isLoading=!0,this.loadProducts())}resetFilters(){this.searchForm.reset({search:"",hsnCode:"",productCode:"",materialName:"",categoryId:"",status:"A"}),this.onSearch()}onPageChange(e){this.currentPage=e,this.loadProducts()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadProducts()}openCreateDialog(){this.isEditing=!1,this.editingId=void 0,this.productForm.reset({status:"A",productCode:"",materialName:"",minimumStock:0,purchaseAmount:0,saleAmount:null,measurement:"kg",taxPercentage:5,remainingQuantity:0,blockedQuantity:0}),this.calculateTotalRemainingQuantity(),this.isDialogOpen=!0,setTimeout(()=>{let e=document.querySelector(".editable-content");e&&(e.innerHTML="",e.focus(),e.addEventListener("input",()=>{let t=e.innerHTML;t.trim()?(this.productForm.patchValue({name:t},{emitEvent:!0}),this.productForm.get("name")?.markAsTouched()):this.productForm.get("name")?.setErrors({required:!0})}))})}closeDialog(){this.productForm.dirty||(this.isLoading=!1),this.isDialogOpen=!1,this.resetForm(),this.loadProducts()}isFieldInvalid(e){let t=this.productForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}toggleBold(){document.execCommand("bold",!1);let e=document.querySelector(".editable-content");if(e){let t=e.innerHTML;t.trim()?(this.productForm.patchValue({name:t},{emitEvent:!0}),this.productForm.get("name")?.markAsTouched()):this.productForm.get("name")?.setErrors({required:!0})}}validateRemainingQuantity(){let e=this.productForm.get("remainingQuantity")?.value,t=this.productForm.get("blockedQuantity")?.value}positiveNumberValidator(){return e=>{if(e.value===null||e.value===void 0||e.value==="")return{required:!0};let t=Number(e.value);return isNaN(t)?{invalidNumber:!0}:t<=0?{min:{min:.01,actual:t}}:null}}exportProducts(){let e=Me({},this.searchForm.value);delete e.pageSize,delete e.currentPage,this.productService.exportProducts(e).pipe(O(this.destroy$)).subscribe({next:t=>{let n=new Blob([t],{type:"application/pdf"}),s=window.URL.createObjectURL(n),d=document.createElement("a");d.href=s,d.download="products.pdf",d.click(),window.URL.revokeObjectURL(s)},error:t=>{this.snackbarService.error("Failed to export products")}})}calculateTotalRemainingQuantity(){let e=this.productForm.get("remainingQuantity")?.value??0,t=this.productForm.get("blockedQuantity")?.value??0,n=e+t;this.productForm.patchValue({totalRemainingQuantity:n},{emitEvent:!1})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dropdownPinned&&this.isBrowser&&document.body.classList.remove("dropdown-open"),this.products=[],this.categories=[],this.productForm&&this.productForm.reset(),this.searchForm&&this.searchForm.reset()}handleTouchStart(e){if(!this.isBrowser)return;e.target?.closest("select")&&(this.dropdownPinned=!0,document.body.classList.add("dropdown-open"))}handleTouchEnd(){!this.isBrowser||!this.dropdownPinned||(this.dropdownPinned=!1,document.body.classList.remove("dropdown-open"))}static{this.\u0275fac=function(t){return new(t||i)(b(Pt),b(Ni),b(X),b(de),b(ri))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-product"]],hostBindings:function(t,n){t&1&&_("touchstart",function(d){return n.handleTouchStart(d)})("touchend",function(){return n.handleTouchEnd()})},standalone:!0,features:[re],decls:90,vars:8,consts:[[1,"product-container"],["message","Processing...",3,"show"],[1,"search-section","card","elevated"],[1,"search-header"],[1,"support-text"],[1,"search-header-actions"],["type","button",1,"btn","btn-outline","btn-icon-only",3,"click"],[1,"fas","fa-file-pdf"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"search-form",3,"ngSubmit","formGroup"],[1,"search-grid"],[1,"form-group","floating-label"],["type","text","formControlName","search","placeholder","Name / description","autocomplete","off",1,"form-control"],[1,"form-group","select-wrapper"],["formControlName","categoryId",1,"form-control","touch-friendly"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","status",1,"form-control","touch-friendly"],["value","A"],["value","I"],[1,"search-actions"],["type","button",1,"btn","btn-secondary","ghost",3,"click"],[1,"fas","fa-undo"],["type","submit",1,"search-btn","btn","btn-primary"],[1,"fas","fa-search"],[1,"products-list","card"],[1,"list-header"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],["class","dialog-backdrop",3,"click",4,"ngIf"],["class","dialog",4,"ngIf"],[3,"value"],["data-label","Name",3,"innerHTML"],["data-label","Product Code"],["data-label","Material"],["data-label","HSN Code"],["data-label","Category"],["data-label","Description"],[3,"ngClass"],[1,"actions"],[1,"btn-icon",3,"click"],[1,"fas","fa-edit"],[1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"],[1,"dialog-backdrop",3,"click"],[1,"dialog"],[1,"dialog-header"],["title","Close",1,"close-button",3,"click"],[1,"fas","fa-times"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],["for","name"],[1,"fas","fa-tag"],[1,"required"],[1,"input-with-button"],["type","button","title","Bold",1,"btn-format",3,"click"],["contenteditable","true","id","name","placeholder","Enter product name",1,"editable-content"],["class","invalid-feedback",4,"ngIf"],["for","hsnCode"],[1,"fas","fa-barcode"],["type","text","id","hsnCode","formControlName","hsnCode","placeholder","Enter HSN code",1,"form-control"],["for","productCode"],[1,"fas","fa-fingerprint"],["type","text","id","productCode","formControlName","productCode","placeholder","Enter product code",1,"form-control"],["for","materialName"],[1,"fas","fa-layer-group"],["type","text","id","materialName","formControlName","materialName","placeholder","Enter material name",1,"form-control"],["for","categoryId"],[1,"fas","fa-folder"],["id","categoryId","formControlName","categoryId",1,"form-control"],["value","","disabled","","selected",""],["for","minimumStock"],[1,"fas","fa-cubes"],["type","number","id","minimumStock","formControlName","minimumStock","min","0","placeholder","Enter minimum stock level",1,"form-control"],["for","status"],[1,"fas","fa-toggle-on"],["id","status","formControlName","status",1,"form-control"],["for","purchaseAmount"],[1,"fas","fa-rupee-sign"],["type","number","id","purchaseAmount","formControlName","purchaseAmount","min","0","step","0.01",1,"form-control",3,"value"],["for","saleAmount"],["type","number","id","saleAmount","formControlName","saleAmount","min","0.01","step","0.01","placeholder","Enter sale amount (must be greater than 0)",1,"form-control"],["for","measurement"],[1,"fas","fa-comment"],["type","text","id","measurement","formControlName","measurement",1,"form-control",3,"value"],["for","taxPercentage"],[1,"fas","fa-percent"],["type","number","id","taxPercentage","formControlName","taxPercentage","min","0","max","100","step","0.01","placeholder","Enter tax percentage",1,"form-control"],["for","remainingQuantity"],["type","number","id","remainingQuantity","formControlName","remainingQuantity",1,"form-control",3,"input"],["for","blockedQuantity"],[1,"fas","fa-ban"],["type","number","id","blockedQuantity","formControlName","blockedQuantity",1,"form-control"],["for","totalRemainingQuantity"],[1,"fas","fa-calculator"],["type","number","id","totalRemainingQuantity","formControlName","totalRemainingQuantity",1,"form-control",3,"disabled"],[1,"form-group","full-width"],["for","description"],[1,"fas","fa-align-left"],["id","description","formControlName","description","rows","3","placeholder","Enter product description",1,"form-control"],[1,"dialog-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"div",3)(4,"div")(5,"h3"),c(6,"Search Products"),a(),o(7,"p",4),c(8,"Filter by keyword, product code, material, or status."),a()(),o(9,"div",5)(10,"button",6),_("click",function(){return n.exportProducts()}),m(11,"i",7),o(12,"span"),c(13,"Export"),a()(),o(14,"button",8),_("click",function(){return n.openCreateDialog()}),m(15,"i",9),o(16,"span"),c(17,"Create Product"),a()()()(),o(18,"form",10),_("ngSubmit",function(d){return n.onSearch(d)}),o(19,"div",11)(20,"div",12)(21,"label"),c(22,"Search"),a(),m(23,"input",13),a(),o(24,"div",14)(25,"label"),c(26,"Category"),a(),o(27,"select",15)(28,"option",16),c(29,"All Categories"),a(),M(30,Qd,2,2,"option",17),a()(),o(31,"div",14)(32,"label"),c(33,"Status"),a(),o(34,"select",18)(35,"option",19),c(36,"Active"),a(),o(37,"option",20),c(38,"Inactive"),a()()()(),o(39,"div",21)(40,"button",22),_("click",function(){return n.resetFilters()}),m(41,"i",23),c(42," Reset "),a(),o(43,"button",24),m(44,"i",25),c(45," Apply Filters "),a()()()(),o(46,"div",26)(47,"div",27)(48,"div")(49,"h2"),c(50,"Products"),a(),o(51,"p",4),c(52),a()()(),o(53,"div",28)(54,"table",29)(55,"thead")(56,"tr")(57,"th"),c(58,"Name"),a(),o(59,"th"),c(60,"Product Code"),a(),o(61,"th"),c(62,"Material"),a(),o(63,"th"),c(64,"HSN Code"),a(),o(65,"th"),c(66,"Category"),a(),o(67,"th"),c(68,"Description"),a(),o(69,"th"),c(70,"Min Stock"),a(),o(71,"th"),c(72,"Status"),a(),o(73,"th"),c(74,"Remaining Quantity"),a(),o(75,"th"),c(76,"Blocked Quantity"),a(),o(77,"th"),c(78,"Total Remaining Quantity"),a(),o(79,"th"),c(80,"Purchase Amount"),a(),o(81,"th"),c(82,"Sale Amount"),a(),o(83,"th"),c(84,"Actions"),a()()(),o(85,"tbody"),M(86,Yd,32,26,"tr",30),a()()(),M(87,Kd,1,4,"app-pagination",31),a()(),M(88,Wd,1,0,"div",32)(89,am,122,34,"div",33)),t&2&&(l(),p("show",n.isLoading),l(17),p("formGroup",n.searchForm),l(12),p("ngForOf",n.categories),l(22),T("Showing ",n.totalElements," result(s)"),l(34),p("ngForOf",n.products),l(),p("ngIf",n.totalPages>0),l(),p("ngIf",n.isDialogOpen),l(),p("ngIf",n.isDialogOpen))},dependencies:[me,Ue,ee,ot,at,W,ft,rt,Z,J,ht,di,ue,te,oe,le,ce,Oe,K,He,Fe],styles:['.product-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;margin:0 auto;display:flex;flex-direction:column;gap:1.5rem}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:.5rem;border:1px solid rgba(0,0,0,.04);border-radius:16px;padding:1.5rem;box-shadow:0 10px 30px #0f172a14}.product-container[_ngcontent-%COMP%]   .search-section.elevated[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px)}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem;margin-bottom:1.5rem}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.25rem}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   .search-header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]   .search-header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;white-space:nowrap}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));gap:1rem}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem;position:relative}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .floating-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;flex-wrap:wrap}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:130px}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]{margin-bottom:2rem}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-primary)}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto;border-radius:16px;border:1px solid rgba(0,0,0,.04);box-shadow:0 24px 40px #0f172a0d;background:#fff}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .badge-active[_ngcontent-%COMP%]{background-color:var(--accent2);color:#fff;padding:.25rem .5rem;border-radius:4px}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .badge-inactive[_ngcontent-%COMP%]{background-color:var(--text-secondary);color:#fff;padding:.25rem .5rem;border-radius:4px}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:16px}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:4px;transition:background-color .3s}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background-color:#0000001a}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary);white-space:nowrap}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{width:auto;min-width:80px;padding:.5rem;margin-bottom:0;border-color:var(--supporting);background-color:#fff;cursor:pointer}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 2px #fd78231a}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:.5rem}.product-container[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;gap:1rem}.product-container[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:.25rem}.product-container[_ngcontent-%COMP%]   .list-header[_ngcontent-%COMP%]   .list-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#0f172a05}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#000;padding:1rem;text-transform:uppercase;font-size:.75rem;letter-spacing:.08em}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-top:1px solid rgba(15,23,42,.06);vertical-align:middle}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fd78230a}.product-container[_ngcontent-%COMP%]   .support-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;margin:0}.product-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{border:1px solid var(--primary);color:var(--primary);background:#fd782314}.product-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background:var(--primary);color:#fff}.product-container[_ngcontent-%COMP%]   .btn-icon-only[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-flex;gap:.35rem;align-items:center}.product-container[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(15,23,42,.15);color:var(--text-primary)}.product-container[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]:hover{border-color:var(--primary);color:var(--primary)}.product-container[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{background:transparent;border:none;color:var(--primary);padding:.35rem .75rem}.product-container[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.product-container[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]{position:relative}.product-container[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{appearance:none;padding-right:2.25rem}.product-container[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]:after{content:"\\f078";font-family:"Font Awesome 5 Free";font-weight:900;position:absolute;right:.75rem;top:50%;transform:translateY(-50%);pointer-events:none;color:var(--text-secondary)}.product-container[_ngcontent-%COMP%]   .touch-friendly[_ngcontent-%COMP%]{min-height:48px;font-size:1rem}.product-container[_ngcontent-%COMP%]   .touch-friendly[_ngcontent-%COMP%], .product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:12px;border:1px solid rgba(15,23,42,.08);padding:.75rem}.product-container[_ngcontent-%COMP%]   .touch-friendly[_ngcontent-%COMP%]:focus, .product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #fd782326}@media (max-width: 768px){.product-container[_ngcontent-%COMP%]{padding:1rem}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{padding:1.25rem}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-actions[_ngcontent-%COMP%]{justify-content:stretch}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{box-shadow:none}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%], .product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%], .product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;width:100%}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{clip:rect(0 0 0 0);height:1px;width:1px;overflow:hidden}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:12px;border:1px solid rgba(15,23,42,.05);padding:1rem;background-color:#fff;box-shadow:0 12px 24px #0f172a14}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem 0;border:none;position:relative;padding-left:48%;text-align:right}.product-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:0;width:45%;padding-right:.5rem;font-weight:600;text-align:left;color:var(--text-secondary)}}@media (max-width: 576px){.table-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{width:100%}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{flex:1}}body.dropdown-open[_ngcontent-%COMP%]{overflow:hidden;touch-action:none}body.dropdown-open[_ngcontent-%COMP%]   .dialog[_ngcontent-%COMP%]{overflow:visible}.dialog-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000}.dialog[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:var(--border-radius);box-shadow:0 4px 20px #00000026;width:90%;max-width:90vw;max-height:90vh;overflow-y:auto;z-index:1000}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;background-color:var(--background-light)}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:var(--text-primary);display:flex;align-items:center;gap:.5rem}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);font-size:1.5rem;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;padding:0;margin:-.5rem -.5rem -.5rem 0}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:var(--text-primary)}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:active{background-color:#0000001a}.dialog[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem;padding:1.5rem}.dialog[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.dialog[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:40px;padding-top:6px;margin-top:8px}@media (max-width: 576px){.dialog[_ngcontent-%COMP%]{width:calc(100% - 2rem);min-width:auto;margin:1rem}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{padding:.875rem 1.25rem}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{width:28px;height:28px;font-size:1.25rem}}.dialog-content[_ngcontent-%COMP%]{padding:1.5rem}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ced4da;border-radius:4px;transition:all .3s ease}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 .2rem #fd782340;outline:none}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #dc354540}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;padding:1rem 1.5rem;border-top:1px solid var(--border);margin-top:0}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}@media (max-width: 576px){.dialog-actions[_ngcontent-%COMP%]{padding:1rem;flex-direction:column-reverse}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.text-editor-toolbar[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.5rem}.text-editor-toolbar[_ngcontent-%COMP%]   .btn-format[_ngcontent-%COMP%]{background:none;border:1px solid var(--border-color);border-radius:4px;padding:.25rem .5rem;cursor:pointer;color:var(--text-primary);transition:all .2s ease}.text-editor-toolbar[_ngcontent-%COMP%]   .btn-format[_ngcontent-%COMP%]:hover{background-color:var(--background-light)}.text-editor-toolbar[_ngcontent-%COMP%]   .btn-format.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;border-color:var(--primary)}.editable-content[_ngcontent-%COMP%]{min-height:38px;padding:.5rem;border:1px solid var(--supporting);border-radius:4px!important}.editable-content[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(var(--primary-rgb),.1)}.editable-content[placeholder][_ngcontent-%COMP%]:empty:before{content:attr(placeholder);color:var(--text-secondary)}.input-with-button[_ngcontent-%COMP%]{display:flex;align-items:stretch;border:1px solid var(--border-color);border-radius:var(--border-radius);overflow:hidden;border:1px solid var(--supporting);border-radius:4px!important}.input-with-button[_ngcontent-%COMP%]   .btn-format[_ngcontent-%COMP%]{background-color:var(--background-light);border:none;border-right:1px solid var(--border-color);padding:0 .75rem;color:var(--text-primary);cursor:pointer;transition:all .2s ease;display:flex;align-items:center;font-weight:700}.input-with-button[_ngcontent-%COMP%]   .btn-format[_ngcontent-%COMP%]:hover, .input-with-button[_ngcontent-%COMP%]   .btn-format.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.input-with-button[_ngcontent-%COMP%]   .editable-content[_ngcontent-%COMP%]{flex:1;border:none;padding:.5rem .75rem;min-height:38px;border:1px solid var(--supporting);border-radius:4px!important}.input-with-button[_ngcontent-%COMP%]   .editable-content[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px rgba(var(--primary-rgb),.1)}.negative-quantity[_ngcontent-%COMP%]{background-color:#ffcdd2;color:#d32f2f}td.negative-quantity[_ngcontent-%COMP%]:hover{background-color:#ffebee}.dialog[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;gap:.5rem}.dialog[_ngcontent-%COMP%]   .grid-7[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:nowrap}.dialog[_ngcontent-%COMP%]   .size-rate[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.dialog[_ngcontent-%COMP%]   .size-rate[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;white-space:nowrap;font-size:.85rem}.dialog[_ngcontent-%COMP%]   .size-rate[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:80px;height:32px;padding:.25rem .5rem;font-size:.85rem}.dialog[_ngcontent-%COMP%]   .rates-table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;background:#fff;border:1px solid var(--supporting);border-radius:8px;overflow:hidden}.dialog[_ngcontent-%COMP%]   .rates-tables-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{text-align:left;padding:.75rem 1rem;color:var(--text-secondary);font-size:.9rem}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--background-light);color:var(--text-primary);text-align:left;padding:.75rem 1rem;font-weight:600;border-bottom:1px solid var(--supporting)}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:30%;padding:.75rem 1rem;color:var(--text-primary);font-weight:500;background:linear-gradient(90deg,#00000005,#0000)}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;vertical-align:middle}.dialog[_ngcontent-%COMP%]   .rates-table.premium[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table.premium[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   th[_ngcontent-%COMP%]{background-color:#00000004}.dialog[_ngcontent-%COMP%]   .rates-table.premium[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table.premium[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   th[_ngcontent-%COMP%]{background-color:#fd78230f}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{max-width:180px}@media (max-width: 768px){.dialog[_ngcontent-%COMP%]   .rates-tables-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{display:block;width:100%}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-bottom:.25rem;background:transparent}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:0}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;max-width:100%}}'],data:{animation:[ln("dialogAnimation",[kt(":enter",[dt({transform:"translate(-50%, -48%) scale(0.95)",opacity:0}),Et("200ms ease-out",dt({transform:"translate(-50%, -50%) scale(1)",opacity:1}))]),kt(":leave",[Et("150ms ease-in",dt({transform:"translate(-50%, -48%) scale(0.95)",opacity:0}))])])]}})}}return i})();var De=(()=>{class i{constructor(e,t){this.authService=e,this.router=t}canActivate(){return this.authService.isAuthenticated()?!0:(this.authService.logout(),window.location.href=window.location.origin+"/login?_t="+new Date().getTime(),!1)}static{this.\u0275fac=function(t){return new(t||i)(ge(it),ge(be))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ts=(()=>{class i{constructor(e,t){this.authService=e,this.router=t}canActivate(){return this.authService.isAuthenticated()?(this.router.navigate(["/purchase"]),!1):!0}static{this.\u0275fac=function(t){return new(t||i)(ge(it),ge(be))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var sm=()=>({label:"All Customers",value:""});function cm(i,r){if(i&1){let e=N();o(0,"div",5)(1,"div",23),m(2,"app-searchable-select",24),o(3,"button",25),_("click",function(){v(e);let n=f();return x(n.refreshCustomers())}),m(4,"i",26),a()()()}if(i&2){let e=f();l(2),p("options",e.customers)("defaultOption",_t(5,sm))("searchPlaceholder","Search customers..."),l(),p("disabled",e.isLoadingCustomers),l(),p("ngClass",e.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt")}}function lm(i,r){if(i&1){let e=N();o(0,"button",31),_("click",function(){v(e);let n=f().$implicit,s=f();return x(s.generatePdf(n.id,n.invoiceNumber))}),m(1,"i",32),a()}}function dm(i,r){if(i&1){let e=N();o(0,"button",33),_("click",function(){v(e);let n=f().$implicit,s=f();return x(s.editSales(n.id))}),m(1,"i",34),a()}}function mm(i,r){if(i&1){let e=N();o(0,"button",35),_("click",function(){v(e);let n=f().$implicit,s=f();return x(s.deleteSale(n.id))}),m(1,"i",36),a()}}function pm(i,r){if(i&1&&(o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),ye(9,"date"),a(),o(10,"td"),c(11),ye(12,"round"),a(),o(13,"td",27),M(14,lm,2,0,"button",28)(15,dm,2,0,"button",29)(16,mm,2,0,"button",30),a()()),i&2){let e,t=r.$implicit,n=r.index,s=f();l(2),E(s.startIndex+n+1),l(2),E(t==null?null:t.invoiceNumber),l(2),E(t!=null&&t.customerName?t==null?null:t.customerName:"-"),l(2),E(Ee(9,8,t==null?null:t.saleDate,"dd-MM-yyyy")),l(3),E(ti(12,11,(e=t==null?null:t.totalSaleAmount)!==null&&e!==void 0?e:0)),l(3),p("ngIf",s.canManageSales),l(),p("ngIf",s.canManageSales),l(),p("ngIf",s.canManageSales)}}function um(i,r){if(i&1){let e=N();o(0,"app-pagination",37),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}function gm(i,r){if(i&1){let e=N();o(0,"app-sale-modal",38),_("saleCreated",function(){v(e);let n=f();return x(n.loadSalesRecord())}),a()}if(i&2){let e=f();p("sales",e.selectedSales)}}var is=(()=>{class i{constructor(e,t,n,s,d,u,g,h,P,k,L,$){this.saleService=e,this.customerService=t,this.fb=n,this.snackbar=s,this.dialog=d,this.modalService=u,this.dateUtils=g,this.cacheService=h,this.encryptionService=P,this.router=k,this.authService=L,this.cdr=$,this.sales=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.selectedSales=null,this.products=[],this.isLoadingProducts=!1,this.customers=[],this.isLoadingCustomers=!1,this.canManageSales=!1,this.destroy$=new G,this.initializeForm()}ngOnInit(){this.canManageSales=this.authService.isAdmin()||this.authService.isStaffAdmin(),this.loadSales(),this.canManageSales&&this.loadCustomers()}initializeForm(){this.searchForm=this.fb.group({search:[""],customerId:[""],startDate:[""],endDate:[""],batchNumber:[""]})}onSearch(){this.currentPage=0,this.loadSales()}formatDateForApi(e,t){if(!e)return"";let n=new Date(e);if(isNaN(n.getTime()))return"";let s=n.getDate().toString().padStart(2,"0"),d=(n.getMonth()+1).toString().padStart(2,"0"),u=n.getFullYear();return`${s}-${d}-${u} ${t?"00:00:00":"23:59:59"}`}loadSalesRecord(){this.isLoading=!0;let e=this.searchForm.value,t=e.startDate?this.formatDateForApi(e.startDate,!0):"",n=e.endDate?this.formatDateForApi(e.endDate,!1):"",s={currentPage:this.currentPage,perPageRecord:this.pageSize,search:e.search||""};t&&(s.startDate=t),n&&(s.endDate=n),this.saleService.searchSales(s).pipe(O(this.destroy$)).subscribe({next:d=>{this.sales=d.data.content,this.totalPages=d.data.totalPages,this.totalElements=d.data.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements),this.isLoading=!1,this.cdr.markForCheck()},error:()=>{this.snackbar.error("Failed to load sales"),this.isLoading=!1,this.cdr.markForCheck()}})}onPageChange(e){this.currentPage=e,this.loadSales()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadSales()}deleteSale(e){confirm("Are you sure you want to delete this sale? This action cannot be undone.")&&(this.isLoading=!0,this.saleService.deleteSale(e).pipe(O(this.destroy$)).subscribe({next:t=>{t.success?(this.snackbar.success("Sale deleted successfully"),this.loadSales()):(this.snackbar.error(t.message||"Failed to delete sale"),this.isLoading=!1,this.cdr.markForCheck())},error:t=>{this.snackbar.error(t?.error?.message||"Failed to delete sale"),this.isLoading=!1,this.cdr.markForCheck()}}))}formatDate(e){return this.dateUtils.formatDate(e)}resetForm(){this.searchForm.reset(),this.currentPage=0,this.loadSales()}loadCustomers(){this.canManageSales&&(this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data),this.isLoadingCustomers=!1,this.cdr.markForCheck()},error:e=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1,this.cdr.markForCheck()}}))}refreshCustomers(){this.canManageSales&&(this.isLoadingCustomers=!0,this.customerService.refreshCustomers().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data,this.snackbar.success("Customers refreshed successfully")),this.isLoadingCustomers=!1,this.cdr.markForCheck()},error:e=>{this.snackbar.error("Failed to refresh customers"),this.isLoadingCustomers=!1,this.cdr.markForCheck()}}))}editSales(e){localStorage.setItem("saleId",this.encryptionService.encrypt(e.toString())),this.router.navigate(["/sale/create"])}addSaleReturn(e){let t=this.encryptionService.encrypt(e.toString());this.router.navigate(["/sale/return",t])}generatePdf(e,t){this.saleService.generatePdf(e).pipe(O(this.destroy$)).subscribe({next:({blob:n,filename:s})=>{let d="sale-"+(t?`${t}.pdf`:s),u=window.URL.createObjectURL(n),g=document.createElement("a");g.href=u,g.download=d,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(u),this.snackbar.success("PDF downloaded successfully")},error:n=>{this.snackbar.error(n?.error?.message||"Failed to generate PDF")}})}loadSales(){this.isLoading=!0;let e=Me({currentPage:this.currentPage,perPageRecord:this.pageSize,startDate:this.searchForm.value.startDate?this.dateUtils.formatDate(this.searchForm.value.startDate):"",endDate:this.searchForm.value.endDate?this.dateUtils.formatDate(this.searchForm.value.endDate):""},this.searchForm.value);this.saleService.searchSales(e).pipe(O(this.destroy$)).subscribe({next:t=>{this.sales=t.content,this.totalPages=t.totalPages,this.totalElements=t.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements),this.isLoading=!1,this.cdr.markForCheck()},error:t=>{this.snackbar.error(t.message||"Failed to load sales"),this.isLoading=!1,this.cdr.markForCheck()}})}clearLocalStorage(){localStorage.removeItem("saleId"),this.router.navigate(["/sale/create"])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(b(mn),b(ct),b(X),b(de),b(Bo),b(vn),b(Ft),b(Uo),b(Xe),b(be),b(it),b(wt))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-sale"]],standalone:!0,features:[re],decls:47,vars:6,consts:[[1,"sales-container"],[3,"show"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by invoice number...",1,"form-control"],["type","text","formControlName","batchNumber","placeholder","Search by Batch Number...",1,"form-control"],["class","form-group",4,"ngIf"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"btn","btn-sm","btn-primary","mb-2",3,"click"],[1,"sales-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[3,"sales","saleCreated",4,"ngIf"],[1,"product-select-group"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","defaultOption","searchPlaceholder"],["type","button","title","Refresh Customers",1,"btn","btn-sm","btn-primary","refresh",2,"margin-top","3px",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"actions"],["class","btn-icon pdf","title","Export PDF",3,"click",4,"ngIf"],["class","btn-icon edit","title","Edit Sale",3,"click",4,"ngIf"],["class","btn-icon delete","title","Delete Sale",3,"click",4,"ngIf"],["title","Export PDF",1,"btn-icon","pdf",3,"click"],[1,"fas","fa-file-pdf"],["title","Edit Sale",1,"btn-icon","edit",3,"click"],[1,"fas","fa-eye"],["title","Delete Sale",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"],[3,"saleCreated","sales"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"h2"),c(4,"Search Sales"),a(),o(5,"form",3),_("ngSubmit",function(){return n.onSearch()}),o(6,"div",4)(7,"div",5),m(8,"input",6)(9,"input",7),a(),M(10,cm,5,6,"div",8),o(11,"div",5),m(12,"input",9),a(),o(13,"div",5),m(14,"input",10),a(),o(15,"div",11)(16,"button",12),m(17,"i",13),c(18," Search "),a(),o(19,"button",14),_("click",function(){return n.resetForm()}),m(20,"i",15),c(21," Reset "),a()()()()(),o(22,"button",16),_("click",function(){return n.clearLocalStorage()}),c(23,"Add Sale"),a(),o(24,"div",17)(25,"h2"),c(26,"Sales"),a(),o(27,"div",18)(28,"table",19)(29,"thead")(30,"tr")(31,"th"),c(32,"No"),a(),o(33,"th"),c(34,"Invoice No."),a(),o(35,"th"),c(36,"Customer Name"),a(),o(37,"th"),c(38,"sale Date"),a(),o(39,"th"),c(40,"Total Sales Amount"),a(),o(41,"th"),c(42,"Actions"),a()()(),o(43,"tbody"),M(44,pm,17,13,"tr",20),a()()(),M(45,um,1,4,"app-pagination",21),a()(),M(46,gm,1,1,"app-sale-modal",22)),t&2&&(l(),p("show",n.isLoading),l(4),p("formGroup",n.searchForm),l(5),p("ngIf",n.canManageSales),l(34),p("ngForOf",n.sales),l(),p("ngIf",n.totalPages>0),l(),p("ngIf",n.selectedSales))},dependencies:[le,ce,Oe,K,ut,ue,ee,W,Z,J,te,oe,Ue,Fe,Go,Qo,me,Je,He,Ho],styles:[".sales-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;background-color:var(--background)}.sales-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.sales-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;align-items:flex-start}@media (max-width: 768px){.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:40px}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:42px;padding:0;display:flex;align-items:center;justify-content:center;border:1px solid var(--border-color);border-radius:var(--border-radius);background:var(--primary)}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary)}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media (max-width: 768px){.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{grid-column:1/-1}}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:42px;display:flex;align-items:center;justify-content:center;gap:.5rem}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.sales-container[_ngcontent-%COMP%]   .slaes-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.sales-container[_ngcontent-%COMP%]   .slaes-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}.sales-container[_ngcontent-%COMP%]   .slaes-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.sales-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.sales-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.sales-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary);white-space:nowrap}.sales-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{width:auto;min-width:80px;padding:.5rem;margin-bottom:0}@media (max-width: 768px){.sales-container[_ngcontent-%COMP%]{padding:1rem}.sales-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.sales-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .sales-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.table-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{width:100%}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{flex:1}}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--primary);background-color:#1458811a}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon.return[_ngcontent-%COMP%]{color:#ff9800;background-color:#ff98001a}.actions[_ngcontent-%COMP%]   .btn-icon.return[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#ff9800;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.return[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon.sale[_ngcontent-%COMP%]{color:var(--primary);background-color:#fd78231a}.actions[_ngcontent-%COMP%]   .btn-icon.sale[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.sale[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon.pdf[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a}.actions[_ngcontent-%COMP%]   .btn-icon.pdf[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.pdf[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{padding:6px}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}  .custom-snackbar.success{background-color:var(--accent2)}  .custom-snackbar.error{background-color:#dc3545}  .custom-snackbar .snackbar-message{display:flex;align-items:center;gap:.5rem;color:#fff}  .custom-snackbar .snackbar-message i{font-size:1.2rem}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:1000}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:var(--primary)}.product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]{background-color:var(--background);color:#fff;margin-top:3px;width:42px;height:42px;border-radius:6px;transition:all .2s ease}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:active{transform:translateY(0)}"],changeDetection:0})}}return i})();var Vi=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${st.apiUrl}/api/profits`}searchProfits(e){return this.http.post(`${this.apiUrl}/search`,e)}getDailyProfits(e){return this.http.post(`${this.apiUrl}/daily`,e)}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var os=(i,r)=>({"text-success":i,"text-danger":r});function fm(i,r){if(i&1&&(o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),a(),o(9,"td"),c(10),a(),o(11,"td"),c(12),a(),o(13,"td",20),c(14),a(),o(15,"td",20),c(16),a(),o(17,"td"),c(18),ye(19,"date"),a()()),i&2){let e=r.$implicit,t=r.index,n=f();l(2),E(n.startIndex+t+1),l(2),E(e.productName),l(2),E(e.saleInvoice),l(2),E(e.saleAmount),l(2),E(e.purchaseAmount),l(2),E(e.otherExpenses),l(),p("ngClass",St(14,os,e.grossProfit>0,e.grossProfit<0)),l(),T(" ",e.grossProfit," "),l(),p("ngClass",St(17,os,e.netProfit>0,e.netProfit<0)),l(),T(" ",e.netProfit," "),l(2),E(Ee(19,11,e.profitDate,"medium"))}}function hm(i,r){if(i&1){let e=N();o(0,"app-pagination",21),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var as=(()=>{class i{constructor(e,t){this.profitService=e,this.fb=t,this.currentPage=0,this.pageSize=10,this.searchTerm="",this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.isLoading=!1,this.startIndex=0,this.endIndex=0,this.destroy$=new G,this.searchForm=this.fb.group({search:[""],startDate:[""],endDate:[""]})}ngOnInit(){this.loadProfits()}formatDateForApi(e,t){if(!e)return"";let n=new Date(e);if(isNaN(n.getTime()))return"";let s=n.getDate().toString().padStart(2,"0"),d=(n.getMonth()+1).toString().padStart(2,"0"),u=n.getFullYear();return`${s}-${d}-${u} ${t?"00:00:00":"23:59:59"}`}onSearch(){this.isLoading=!0;let e=this.searchForm.value,t={page:this.currentPage,size:this.pageSize};e.search?.trim()&&(t.search=e.search.trim()),e.startDate&&(t.startDate=this.formatDateForApi(e.startDate,!0)),e.endDate&&(t.endDate=this.formatDateForApi(e.endDate,!1)),this.profitService.searchProfits(t).pipe(O(this.destroy$)).subscribe({next:n=>{this.profits=n.data,this.totalElements=n.data.totalElements,this.isLoading=!1},error:n=>{console.error("Error loading profits:",n),this.isLoading=!1}})}onPageChange(e){this.currentPage=e,this.loadProfits()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadProfits()}loadProfits(){this.isLoading=!0;let e=this.searchForm.value,t={page:this.currentPage,size:this.pageSize};e.search?.trim()&&(t.search=e.search.trim()),e.startDate&&(t.startDate=this.formatDateForApi(e.startDate,!0)),e.endDate&&(t.endDate=this.formatDateForApi(e.endDate,!1)),this.profitService.searchProfits(t).pipe(O(this.destroy$)).subscribe({next:n=>{this.profits=n.data,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements),this.isLoading=!1},error:n=>{console.error("Error loading profits:",n),this.isLoading=!1}})}resetForm(){this.searchForm.reset(),this.currentPage=0,this.loadProfits()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(b(Vi),b(X))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-profit"]],standalone:!0,features:[re],decls:49,vars:4,consts:[[1,"profit-container"],[3,"show"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by invoice number...",1,"form-control"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"profits-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"table-controls"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[3,"ngClass"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"h2"),c(4,"Search Profits"),a(),o(5,"form",3),_("ngSubmit",function(){return n.onSearch()}),o(6,"div",4)(7,"div",5),m(8,"input",6),a(),o(9,"div",5),m(10,"input",7),a(),o(11,"div",5),m(12,"input",8),a(),o(13,"div",9)(14,"button",10),m(15,"i",11),c(16," Search "),a(),o(17,"button",12),_("click",function(){return n.resetForm()}),m(18,"i",13),c(19," Reset "),a()()()()(),o(20,"div",14)(21,"h2"),c(22,"Profits"),a(),o(23,"div",15)(24,"table",16)(25,"thead")(26,"tr")(27,"th"),c(28,"#"),a(),o(29,"th"),c(30,"Product Name"),a(),o(31,"th"),c(32,"Sale Invoice"),a(),o(33,"th"),c(34,"Sale Amount"),a(),o(35,"th"),c(36,"Purchase Amount"),a(),o(37,"th"),c(38,"Other Expenses"),a(),o(39,"th"),c(40,"Gross Profit"),a(),o(41,"th"),c(42,"Net Profit"),a(),o(43,"th"),c(44,"Date"),a()()(),o(45,"tbody"),M(46,fm,20,20,"tr",17),a()()(),o(47,"div",18),M(48,hm,1,4,"app-pagination",19),a()()()),t&2&&(l(),p("show",n.isLoading),l(4),p("formGroup",n.searchForm),l(41),p("ngForOf",n.profits==null?null:n.profits.content),l(2),p("ngIf",n.totalPages>0))},dependencies:[le,ce,Oe,K,ut,ue,ee,W,Z,J,te,oe,Ue,me,He],styles:[".profit-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;background-color:var(--background)}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:first-child{margin-top:0}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.profit-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:baseline}.profit-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   app-pagination[_ngcontent-%COMP%]{width:100%}.profit-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{width:100%;margin:0;overflow-x:auto}.profit-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.profit-container[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:var(--accent2)!important}.profit-container[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:var(--primary)!important}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:var(--text-secondary)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;gap:5px}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid var(--supporting);background:#fff;cursor:pointer;border-radius:4px;color:var(--text-primary);transition:all .3s ease}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--supporting)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;border-color:var(--primary)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .ellipsis[_ngcontent-%COMP%]{padding:6px 12px;color:var(--text-secondary);display:flex;align-items:center}@media (max-width: 768px){.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:15px}}.form-control[_ngcontent-%COMP%]{padding:10px;border:1px solid var(--supporting);border-radius:4px;color:var(--text-primary)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px #fd782340}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#eb5d02}"]})}}return i})();function _m(i,r){i&1&&(o(0,"div",51),c(1," Name is required "),a())}function Cm(i,r){i&1&&(o(0,"div",51),c(1," Mobile number is required "),a())}function bm(i,r){i&1&&(o(0,"div",51),c(1," Please enter a valid 10-digit mobile number "),a())}function Pm(i,r){i&1&&(o(0,"span"),c(1,"Please enter a valid email address"),a())}function Mm(i,r){if(i&1&&(o(0,"div",51),c(1," Email is required "),M(2,Pm,2,0,"span",52),a()),i&2){let e,t=f(2);l(2),p("ngIf",(e=t.customerForm.get("email"))==null||e.errors==null?null:e.errors.email)}}function ym(i,r){i&1&&(o(0,"div",51),c(1," Please enter a valid GST number "),a())}function Om(i,r){i&1&&(o(0,"div",51),c(1," Pincode is required "),a())}function vm(i,r){i&1&&(o(0,"div",51),c(1," Please enter a valid 6-digit pincode "),a())}function xm(i,r){i&1&&(o(0,"div",51),c(1," Credit Days must be greater than or equal to 0 "),a())}function Sm(i,r){if(i&1){let e=N();o(0,"div",1),_("click",function(){v(e);let n=f();return x(n.close())}),o(1,"div",2),_("click",function(n){return v(e),x(n.stopPropagation())}),o(2,"div",3)(3,"h4"),m(4,"i",4),c(5),a(),o(6,"button",5),_("click",function(){v(e);let n=f();return x(n.close())}),m(7,"i",6),a()(),o(8,"form",7),_("ngSubmit",function(){v(e);let n=f();return x(n.onSubmit())})("keydown.enter",function(n){return v(e),x(n.preventDefault())}),o(9,"div",8)(10,"div",9)(11,"label",10),m(12,"i",4),c(13," Name "),o(14,"span",11),c(15,"*"),a()(),m(16,"input",12),M(17,_m,2,0,"div",13),a(),o(18,"div",9)(19,"label",14),m(20,"i",15),c(21," Mobile "),a(),m(22,"input",16),M(23,Cm,2,0,"div",13)(24,bm,2,0,"div",13),a(),o(25,"div",9)(26,"label",17),m(27,"i",18),c(28," Email "),a(),m(29,"input",19),M(30,Mm,3,1,"div",13),a(),o(31,"div",9)(32,"label",20),m(33,"i",21),c(34," GST Number "),a(),m(35,"input",22),M(36,ym,2,0,"div",13),a(),o(37,"div",9)(38,"label",23),m(39,"i",24),c(40," DL Number "),a(),m(41,"input",25),a(),o(42,"div",9)(43,"label",26),c(44,"Next Action Date"),a(),o(45,"div",27),m(46,"input",28),o(47,"button",29),_("click",function(n){v(e);let s=f();return x(s.clearNextActionDate(n))})("touchstart",function(n){v(e);let s=f();return n.preventDefault(),x(s.clearNextActionDate(n))}),m(48,"i",6),a()()(),o(49,"div",9)(50,"label",30),c(51,"Remaining Payment Amount"),a(),m(52,"input",31),a(),o(53,"div",9)(54,"label",32),c(55,"Address"),a(),m(56,"textarea",33),a(),o(57,"div",9)(58,"label",34),m(59,"i",35),c(60," Pincode "),o(61,"span",11),c(62,"*"),a()(),m(63,"input",36),M(64,Om,2,0,"div",13)(65,vm,2,0,"div",13),a(),o(66,"div",9)(67,"label",37),c(68,"Remarks"),a(),m(69,"textarea",38),a(),o(70,"div",9)(71,"label",39),m(72,"i",40),c(73," Credit Days "),a(),o(74,"input",41),_("touchstart",function(n){return v(e),x(n.stopPropagation())}),a(),M(75,xm,2,0,"div",13),a(),o(76,"div",9)(77,"label",42),c(78,"Status"),a(),o(79,"select",43)(80,"option",44),c(81,"Active"),a(),o(82,"option",45),c(83,"Inactive"),a(),o(84,"option",46),c(85,"Pending"),a()()()(),o(86,"div",47)(87,"button",48),_("click",function(){v(e);let n=f();return x(n.close())}),c(88," Cancel "),a(),o(89,"button",49),m(90,"i",50),c(91),a()()()()()}if(i&2){let e,t,n,s,d,u,g,h,P,k,L,$,V,U,q=f();l(5),T(" ",q.isEditing?"Update":"Add New"," Customer/ Dealer"),l(3),p("formGroup",q.customerForm),l(8),F("is-invalid",((e=q.customerForm.get("name"))==null?null:e.invalid)&&((e=q.customerForm.get("name"))==null?null:e.touched)),l(),p("ngIf",(t=q.customerForm.get("name"))==null||t.errors==null?null:t.errors.required),l(5),F("is-invalid",((n=q.customerForm.get("mobile"))==null?null:n.invalid)&&((n=q.customerForm.get("mobile"))==null?null:n.touched)),l(),p("ngIf",(s=q.customerForm.get("mobile"))==null||s.errors==null?null:s.errors.required),l(),p("ngIf",(d=q.customerForm.get("mobile"))==null||d.errors==null?null:d.errors.pattern),l(5),F("is-invalid",((u=q.customerForm.get("email"))==null?null:u.invalid)&&((u=q.customerForm.get("email"))==null?null:u.touched)),l(),p("ngIf",(g=q.customerForm.get("email"))==null||g.errors==null?null:g.errors.required),l(5),F("is-invalid",((h=q.customerForm.get("gst"))==null?null:h.invalid)&&((h=q.customerForm.get("gst"))==null?null:h.touched)),l(),p("ngIf",(P=q.customerForm.get("gst"))==null||P.errors==null?null:P.errors.pattern),l(27),F("is-invalid",((k=q.customerForm.get("pincode"))==null?null:k.invalid)&&((k=q.customerForm.get("pincode"))==null?null:k.touched)),l(),p("ngIf",(L=q.customerForm.get("pincode"))==null||L.errors==null?null:L.errors.required),l(),p("ngIf",($=q.customerForm.get("pincode"))==null||$.errors==null?null:$.errors.pattern),l(9),F("is-invalid",((V=q.customerForm.get("validityDays"))==null?null:V.invalid)&&((V=q.customerForm.get("validityDays"))==null?null:V.touched)),l(),p("ngIf",(U=q.customerForm.get("validityDays"))==null||U.errors==null?null:U.errors.min),l(14),p("disabled",q.customerForm.invalid||q.loading),l(),p("ngClass",q.loading?"fa-spinner fa-spin":q.isEditing?"fa-save":"fa-plus"),l(),T(" ",q.loading?q.isEditing?"Updating...":"Creating...":q.isEditing?"Update":"Create"," Customer ")}}var ss=(()=>{class i{constructor(e,t,n,s){this.fb=e,this.customerService=t,this.toastr=n,this.modalService=s,this.customerSaved=new An,this.loading=!1,this.isSubmitted=!1,this.display$=this.modalService.modalState$.pipe(yn(d=>d.isOpen&&d.modalType==="customer")),this.currentCustomer=null,this.isEditing=!1,this.destroy$=new G,this.initForm()}ngOnInit(){this.modalStateSubscription=this.modalService.modalState$.subscribe(e=>{e.isOpen&&e.modalType==="customer"&&(e.data?(this.currentCustomer=e.data,this.isEditing=!0,this.patchForm(e.data)):(this.currentCustomer=null,this.isEditing=!1,this.initForm()))})}ngOnDestroy(){this.modalStateSubscription&&this.modalStateSubscription.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.currentCustomer=null,this.customerForm&&this.customerForm.reset()}initForm(){let e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,16);this.customerForm=this.fb.group({name:["",[S.required]],mobile:[""],email:[""],gst:["",[S.pattern("^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$")]],dlNumber:[""],address:[""],pincode:["",[S.required,S.pattern(/^\d{6}$/)]],coatingUnitPrice:[0,[S.required,S.min(0)]],remainingPaymentAmount:[0],nextActionDate:[t],remarks:[""],status:["A"],validityDays:[null]})}patchForm(e){if(e)try{let t="";if(e.nextActionDate)try{let n=new Date(e.nextActionDate);t=new Date(n.getTime()+5.5*60*60*1e3).toISOString().slice(0,16)}catch(n){console.error("Error parsing date:",n)}this.customerForm.patchValue({name:e.name||"",mobile:e.mobile||"",email:e.email||"",gst:e.gst||"",dlNumber:e.dlNumber||"",address:e.address||"",pincode:e.pincode||"",coatingUnitPrice:e.coatingUnitPrice||0,remainingPaymentAmount:e.remainingPaymentAmount||0,nextActionDate:t,remarks:e.remarks||"",status:e.status||"A",validityDays:e.validityDays||null})}catch(t){console.error("Error in patchForm:",t),this.initForm()}}onSubmit(){if(this.isSubmitted=!0,this.customerForm.valid){this.loading=!0;let e=this.customerForm.value;if(e.nextActionDate){let n=new Date(e.nextActionDate);e.nextActionDate=n.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-").replace(",","")}e.validityDays===""||e.validityDays===null||e.validityDays===void 0?e.validityDays=null:e.validityDays=Number(e.validityDays),(this.isEditing&&this.currentCustomer?this.customerService.updateCustomer(this.currentCustomer.id,e):this.customerService.createCustomer(e)).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.toastr.success(n.message||`Customer ${this.isEditing?"updated":"created"} successfully`),this.customerSaved.emit(!0),this.close())},error:n=>{this.toastr.error(n.message||`Failed to ${this.isEditing?"update":"create"} customer`)},complete:()=>{this.loading=!1}})}}clearNextActionDate(e){e&&(e.preventDefault(),e.stopPropagation());let t=this.customerForm.get("nextActionDate");t?.setValue(null,{emitEvent:!0}),t?.markAsDirty(),t?.markAsTouched()}close(){this.modalService.close(),this.customerForm.reset(),this.isSubmitted=!1,this.currentCustomer=null,this.isEditing=!1}getFieldError(e){let t=this.customerForm.get(e);if(t?.errors&&(t.dirty||t.touched||this.isSubmitted)){if(t.errors.required)return`${e} is required`;if(t.errors.email)return"Invalid email format";if(t.errors.pattern)return"Invalid format";if(t.errors.min)return`${e} must be greater than or equal to ${t.errors.min.min}`}return""}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(ct),b(un),b(vn))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-customer-modal"]],outputs:{customerSaved:"customerSaved"},standalone:!0,features:[re],decls:2,vars:3,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"fas","fa-user"],["title","Close",1,"btn","close",3,"click"],[1,"fa-solid","fa-xmark"],[3,"ngSubmit","keydown.enter","formGroup"],[1,"form-grid"],[1,"form-group"],["for","name"],[1,"required"],["type","text","id","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","mobile"],[1,"fas","fa-phone"],["type","text","id","mobile","formControlName","mobile",1,"form-control"],["for","email"],[1,"fas","fa-envelope"],["type","email","id","email","formControlName","email",1,"form-control"],["for","gst"],[1,"fas","fa-receipt"],["type","text","id","gst","formControlName","gst",1,"form-control"],["for","dlNumber"],[1,"fas","fa-id-card"],["type","text","id","dlNumber","formControlName","dlNumber",1,"form-control"],["for","nextActionDate"],[1,"input-group"],["type","datetime-local","id","nextActionDate","formControlName","nextActionDate",1,"form-control"],["type","button","title","Clear date",1,"btn","btn-outline-secondary",3,"click","touchstart"],["for","remainingPaymentAmount"],["type","number","id","remainingPaymentAmount","formControlName","remainingPaymentAmount","step","0.01",1,"form-control"],["for","address"],["id","address","formControlName","address","rows","3",1,"form-control"],["for","pincode"],[1,"fas","fa-map-marker-alt"],["type","text","id","pincode","formControlName","pincode","maxlength","6","placeholder","123456",1,"form-control"],["for","remarks"],["id","remarks","formControlName","remarks","rows","3",1,"form-control"],["for","validityDays"],[1,"fas","fa-calendar-day"],["type","number","id","validityDays","formControlName","validityDays","min","0","step","1","placeholder","Enter Credit Days",1,"form-control",3,"touchstart"],["for","status"],["id","status","formControlName","status","title","Select status",1,"form-control"],["value","A"],["value","I"],["value","P"],[1,"modal-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,n){t&1&&(M(0,Sm,92,25,"div",0),ye(1,"async")),t&2&&p("ngIf",ti(1,1,n.display$))},dependencies:[le,ce,K,Eo,ue,ee,ot,at,W,ft,rt,Z,J,mi,ht,te,oe],styles:[".modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--supporting)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.5rem;font-weight:500}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;color:var(--text-secondary);transition:all .3s ease;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background-color:var(--background);color:var(--text-primary)}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{max-width:300px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{transition:all .3s ease;margin-top:8px;height:43px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 2px rgba(var(--primary-rgb),.1)}.form-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{height:43px;margin-top:8px}.form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:var(--danger);font-size:.875rem;margin-top:.25rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--supporting)}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}@media (max-width: 576px){.sale-modal[_ngcontent-%COMP%]{padding:1rem}.sale-modal[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{flex-direction:column}.sale-modal[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:800px;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px #0000001a;animation:_ngcontent-%COMP%_slideIn .3s ease-out;padding:40px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:0px 40px;margin-bottom:1.5rem}.form-grid[_ngcontent-%COMP%]   .form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.25rem;color:var(--text-secondary);font-size:.9rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary);font-size:.9rem}.form-group[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger)}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return i})();var wm=(i,r,e)=>({active:i,inactive:r,pending:e});function Em(i,r){i&1&&(o(0,"div",29),m(1,"i",30),a())}function km(i,r){if(i&1){let e=N();o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),a(),o(9,"td"),c(10),a(),o(11,"td"),c(12),a(),o(13,"td"),c(14),a(),o(15,"td"),c(16),ye(17,"number"),a(),o(18,"td"),c(19),ye(20,"date"),a(),o(21,"td"),c(22),a(),o(23,"td"),c(24),a(),o(25,"td")(26,"span",31),c(27),a()(),o(28,"td",32)(29,"button",33),_("click",function(){let n=v(e).$implicit,s=f();return x(s.openCustomerModal(n))}),m(30,"i",34),a()()()}if(i&2){let e,t=r.$implicit;l(2),E(t.name),l(2),E(t.mobile),l(2),E(t.email),l(2),E(t.gst),l(2),E(t.dlNumber||"-"),l(2),E(t.address||"-"),l(2),E(t.pincode||"-"),l(2),T("\u20B9",Ee(17,13,t.remainingPaymentAmount,"1.2-2"),""),l(3),E(Ee(20,16,t.nextActionDate||null,"medium")),l(3),E((e=t.validityDays)!==null&&e!==void 0?e:"-"),l(2),E(t.remarks||"-"),l(2),p("ngClass",ei(19,wm,t.status==="A",t.status==="I",t.status==="P")),l(),T(" ",t.status==="A"?"Active":t.status==="I"?"Inactive":"Pending"," ")}}function Tm(i,r){i&1&&(o(0,"tr")(1,"td",35),c(2,"No customers found"),a()())}var cs=(()=>{class i{constructor(e,t,n,s,d,u){this.customerService=e,this.fb=t,this.toastr=n,this.modalService=s,this.router=d,this.cdr=u,this.customers=[],this.isLoading=!1,this.displayModal=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.destroy$=new G,this.initializeForm()}ngOnInit(){this.loadCustomers(),this.modalStateSubscription=this.modalService.modalState$.subscribe(e=>{e.isOpen})}ngOnDestroy(){this.modalStateSubscription&&this.modalStateSubscription.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.customers=[],this.searchForm&&this.searchForm.reset()}initializeForm(){this.searchForm=this.fb.group({search:[""],status:[""],startDate:[""],endDate:[""]})}formatDateForApi(e,t){if(!e)return"";let n=new Date(e);if(isNaN(n.getTime()))return"";let s=n.getDate().toString().padStart(2,"0"),d=(n.getMonth()+1).toString().padStart(2,"0"),u=n.getFullYear();return`${s}-${d}-${u} ${t?"00:00:00":"23:59:59"}`}loadCustomers(){this.isLoading=!0;let e=this.searchForm.value,t={currentPage:this.currentPage,perPageRecord:this.pageSize,search:e.search||""};e.startDate&&(t.startDate=this.formatDateForApi(e.startDate,!0)),e.endDate&&(t.endDate=this.formatDateForApi(e.endDate,!1)),e.status&&(t.status=e.status),this.customerService.searchCustomers(t).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.customers=n.data.content,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements),this.isLoading=!1,this.cdr.markForCheck()},error:()=>{this.toastr.error("Failed to load customers"),this.isLoading=!1,this.cdr.markForCheck()}})}onSearch(){this.currentPage=0,this.loadCustomers()}onPageChange(e){this.currentPage=e,this.loadCustomers()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadCustomers()}openDealerRegister(){this.router.navigate(["/dealers/register"])}openCustomerModal(e){this.modalService.open("customer",e),this.modalService.modalState$.pipe(O(this.destroy$)).subscribe(t=>{t.isOpen||this.cdr.markForCheck()})}resetForm(){this.searchForm.reset({search:"",status:"",startDate:"",endDate:""}),this.currentPage=0,this.loadCustomers()}static{this.\u0275fac=function(t){return new(t||i)(b(ct),b(X),b(un),b(vn),b(be),b(wt))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-customer"]],standalone:!0,features:[re],decls:70,vars:8,consts:[[1,"customer-container"],[1,"search-section","card"],[3,"ngSubmit","keydown.enter","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search customers...",1,"form-control"],[1,"form-group","status-filter"],["formControlName","status","title","Filter by status",1,"form-control"],["value","A"],["value","I"],["value","P"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"btn","btn-sm","btn-primary","add-customer-btn","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"customers-list","card"],[1,"table-responsive"],["class","loading-overlay",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-controls"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"],[3,"customerSaved"],[1,"loading-overlay"],[1,"fas","fa-spinner","fa-spin"],[1,"status-badge",3,"ngClass"],[1,"actions"],[1,"btn-icon","edit",3,"click"],[1,"fas","fa-edit"],["colspan","13",1,"text-center"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Search Customers"),a(),o(4,"form",2),_("ngSubmit",function(){return n.onSearch()})("keydown.enter",function(d){return d.preventDefault()}),o(5,"div",3)(6,"div",4),m(7,"input",5),a(),o(8,"div",6)(9,"select",7)(10,"option",8),c(11,"Active"),a(),o(12,"option",9),c(13,"Inactive"),a(),o(14,"option",10),c(15,"Pending"),a()()(),o(16,"div",4),m(17,"input",11),a(),o(18,"div",4),m(19,"input",12),a(),o(20,"div",13)(21,"button",14),m(22,"i",15),c(23," Search "),a(),o(24,"button",16),_("click",function(){return n.resetForm()}),m(25,"i",17),c(26," Reset "),a()()()()(),o(27,"button",18),_("click",function(){return n.openDealerRegister()}),m(28,"i",19),c(29," Add Customer / Dealer "),a(),o(30,"div",20)(31,"h2"),c(32,"Customers"),a(),o(33,"div",21),M(34,Em,2,0,"div",22),o(35,"table",23)(36,"thead")(37,"tr")(38,"th"),c(39,"Name"),a(),o(40,"th"),c(41,"Mobile"),a(),o(42,"th"),c(43,"Email"),a(),o(44,"th"),c(45,"GST"),a(),o(46,"th"),c(47,"DL Number"),a(),o(48,"th"),c(49,"Address"),a(),o(50,"th"),c(51,"Pincode"),a(),o(52,"th"),c(53,"Remaining Payment"),a(),o(54,"th"),c(55,"Next Action Date"),a(),o(56,"th"),c(57,"Credit Days"),a(),o(58,"th"),c(59,"Remarks"),a(),o(60,"th"),c(61,"Status"),a(),o(62,"th"),c(63,"Actions"),a()()(),o(64,"tbody"),M(65,km,31,23,"tr",24)(66,Tm,3,0,"tr",25),a()()(),o(67,"div",26)(68,"app-pagination",27),_("pageChange",function(d){return n.onPageChange(d)})("pageSizeChange",function(d){return n.onPageSizeChange(d)}),a()()()(),o(69,"app-customer-modal",28),_("customerSaved",function(){return n.loadCustomers()}),a()),t&2&&(l(4),p("formGroup",n.searchForm),l(30),p("ngIf",n.isLoading),l(31),p("ngForOf",n.customers),l(),p("ngIf",!(n.customers!=null&&n.customers.length)),l(2),p("currentPage",n.currentPage)("pageSize",n.pageSize)("totalElements",n.totalElements)("pageSizeOptions",n.pageSizeOptions))},dependencies:[le,ce,Oe,K,bt,ut,ue,ee,ot,at,W,rt,Z,J,te,oe,Ue,Fe,ss,He],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.table-responsive[_ngcontent-%COMP%]{margin:0 -20px;padding:0 20px;overflow-x:auto;position:relative;min-height:200px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--supporting);border-radius:4px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#97a3ab}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;padding:15px 12px;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;font-size:.95rem}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.status-badge.pending[_ngcontent-%COMP%]{background-color:#b3bcc21f;color:var(--supporting)}@media (max-width: 768px){.search-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.search-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{max-width:100%}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.85rem;padding:10px 8px}}.customer-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background)}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.customer-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:start}.customer-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.customer-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.customer-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.customer-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--text-secondary)}.customer-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80px;padding:5px;border-radius:4px;border:1px solid var(--supporting);background-color:#fff;color:var(--text-primary)}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--supporting)}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff;font-weight:600}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#aec6cf1a}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.875rem}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:var(--accent2);color:#fff}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background-color:var(--supporting);color:#fff}@media (max-width: 768px){.customer-container[_ngcontent-%COMP%]{padding:10px}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:15px}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;border-radius:4px;transition:all .2s ease}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:rgba(var(--secondary-rgb),.1);padding:8px;border-radius:6px;transition:all .2s ease}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;justify-content:flex-start}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{padding:6px}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:1}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:var(--primary)}.search-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.form-control[_ngcontent-%COMP%]{height:43px}@media (max-width: 768px){.search-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:column;width:100%}.search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})}}return i})();var ls=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${st.apiUrl}/api/combined-purchase-sale`}createCombinedPurchaseSale(e){return this.http.post(`${this.apiUrl}/create`,e)}getCombinedEntries(e={}){return this.http.get(`${this.apiUrl}`,{params:e})}getCombinedEntryById(e){return this.http.get(`${this.apiUrl}/${e}`)}updateCombinedEntry(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}deleteCombinedEntry(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Fm=()=>({label:"Select Product",value:""});function Dm(i,r){i&1&&m(0,"app-loader")}var ds=(()=>{class i{constructor(e,t,n,s,d){this.fb=e,this.productService=t,this.combinedService=n,this.snackbar=s,this.cdr=d,this.products=[],this.loading=!1,this.isLoadingProducts=!1,this.destroy$=new G,this.formSubscriptions=[],this.productMap=new Map,this.initForm(),this.setupProductChangeListener()}ngOnInit(){this.loadProducts()}initForm(){let e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,16);this.combinedForm=this.fb.group({productId:["",S.required],purchaseUnitPrice:["",[S.required,S.min(.01)]],purchaseDate:[t,S.required],purchaseInvoiceNumber:[null],purchaseOtherExpenses:[0,[S.required,S.min(0)]],quantity:["",[S.required,S.min(1)]],saleUnitPrice:["",[S.required,S.min(.01)]],saleDate:[t,S.required],saleInvoiceNumber:[null],saleOtherExpenses:[0,[S.required,S.min(0)]],purchaseDiscount:[0,[S.required,S.min(0),S.max(100)]],purchaseDiscountAmount:[0,[S.required,S.min(0)]],purchaseDiscountedPrice:[{value:0,disabled:!0}],saleDiscount:[0,[S.required,S.min(0),S.max(100)]],saleDiscountAmount:[0,[S.required,S.min(0)]],saleDiscountedPrice:[{value:0,disabled:!0}]}),this.setupPurchaseDiscountCalculation(),this.setupSaleDiscountCalculation()}ngOnDestroy(){this.formSubscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.formSubscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.products=[],this.productMap.clear(),this.combinedForm&&this.combinedForm.reset()}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data,this.buildProductMap()),this.isLoadingProducts=!1,this.cdr.markForCheck()},error:e=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1,this.cdr.markForCheck()}})}buildProductMap(){this.productMap.clear();for(let e of this.products)this.productMap.set(e.id,e)}refreshProducts(){this.isLoadingProducts=!0,this.productService.refreshProducts().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data,this.buildProductMap(),this.snackbar.success("Products refreshed successfully")),this.isLoadingProducts=!1,this.cdr.markForCheck()},error:e=>{this.snackbar.error("Failed to refresh products"),this.isLoadingProducts=!1,this.cdr.markForCheck()}})}onSubmit(){if(this.combinedForm.valid){this.loading=!0;let e=Me({},this.combinedForm.value);if(["purchaseDate","saleDate"].forEach(t=>{if(e[t])try{let n=new Date(e[t]);if(!isNaN(n.getTime()))e[t]=n.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-").replace(",","");else{this.snackbar.error(`Invalid ${t} format`),this.loading=!1,this.cdr.markForCheck();return}}catch{this.snackbar.error(`Invalid ${t} format`),this.loading=!1,this.cdr.markForCheck();return}}),!this.loading)return;this.combinedService.createCombinedPurchaseSale(e).pipe(O(this.destroy$)).subscribe({next:t=>{this.snackbar.success("Combined purchase and sale created successfully"),this.resetForm(),this.loading=!1,this.cdr.markForCheck()},error:t=>{this.snackbar.error(t?.error?.message||"Failed to create combined purchase and sale"),this.loading=!1,this.cdr.markForCheck()}})}}resetForm(){let e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,16);this.combinedForm.reset({purchaseDate:t,saleDate:t,purchaseOtherExpenses:0,saleOtherExpenses:0,purchaseDiscount:0,purchaseDiscountAmount:0,purchaseDiscountedPrice:0,saleDiscount:0,saleDiscountAmount:0,saleDiscountedPrice:0}),this.cdr.markForCheck()}isFieldInvalid(e){let t=this.combinedForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}getFieldError(e){let t=this.combinedForm.get(e);if(t?.errors){if(t.errors.required)return`${e} is required`;if(t.errors.min)return`${e} must be greater than ${t.errors.min.min}`}return""}setupProductChangeListener(){let e=this.combinedForm.get("productId")?.valueChanges.pipe(O(this.destroy$),jt()).subscribe(t=>{if(t){let n=this.productMap.get(t);n&&(this.combinedForm.patchValue({purchaseUnitPrice:n.purchase_amount,saleUnitPrice:n.sale_amount},{emitEvent:!1}),this.cdr.markForCheck())}});e&&this.formSubscriptions.push(e)}setupPurchaseDiscountCalculation(){["quantity","purchaseUnitPrice","purchaseDiscount","purchaseDiscountAmount"].forEach(t=>{let n=this.combinedForm.get(t)?.valueChanges.pipe(O(this.destroy$),gt(150),jt()).subscribe(()=>{this.calculatePurchaseDiscount(),this.cdr.markForCheck()});n&&this.formSubscriptions.push(n)})}setupSaleDiscountCalculation(){["quantity","saleUnitPrice","saleDiscount","saleDiscountAmount"].forEach(t=>{let n=this.combinedForm.get(t)?.valueChanges.pipe(O(this.destroy$),gt(150),jt()).subscribe(()=>{this.calculateSaleDiscount(),this.cdr.markForCheck()});n&&this.formSubscriptions.push(n)})}calculateDiscount(e){let t=e.quantity*e.unitPrice;return e.discountAmount>0?(e.finalPrice=t-e.discountAmount,e.discountPercentage=e.discountAmount/t*100):e.discountPercentage>0?(e.discountAmount=t*e.discountPercentage/100,e.finalPrice=t-e.discountAmount):e.finalPrice=t,e}calculatePurchaseDiscount(){let e={quantity:this.combinedForm.get("quantity")?.value||0,unitPrice:this.combinedForm.get("purchaseUnitPrice")?.value||0,discountPercentage:this.combinedForm.get("purchaseDiscount")?.value||0,discountAmount:this.combinedForm.get("purchaseDiscountAmount")?.value||0,finalPrice:0},t=this.calculateDiscount(e);this.combinedForm.patchValue({purchaseDiscountAmount:t.discountAmount,purchaseDiscount:t.discountPercentage,purchaseDiscountedPrice:t.finalPrice},{emitEvent:!1})}calculateSaleDiscount(){let e={quantity:this.combinedForm.get("quantity")?.value||0,unitPrice:this.combinedForm.get("saleUnitPrice")?.value||0,discountPercentage:this.combinedForm.get("saleDiscount")?.value||0,discountAmount:this.combinedForm.get("saleDiscountAmount")?.value||0,finalPrice:0},t=this.calculateDiscount(e);this.combinedForm.patchValue({saleDiscountAmount:t.discountAmount,saleDiscount:t.discountPercentage,saleDiscountedPrice:t.finalPrice},{emitEvent:!1})}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(Pt),b(ls),b(de),b(wt))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-add-combined-purchase-sale"]],standalone:!0,features:[re],decls:137,vars:33,consts:[[1,"combined-form-container"],["routerLink","/purchase",1,"btn","btn-sm","btn-secondary","back-btn"],[1,"fas","fa-arrow-left"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-cart-plus"],[1,"combined-form",3,"ngSubmit","formGroup"],[1,"section-card"],[1,"form-row","two-columns"],[1,"form-group"],["for","productId"],[1,"fas","fa-box"],[1,"required"],[1,"product-select-group"],["formControlName","productId","labelKey","name","valueKey","id",3,"options","placeholder","defaultOption","searchPlaceholder"],["type","button","title","Refresh Products",1,"btn","btn-primary","btn-sm","refresh","mt-2",3,"click","disabled"],[1,"fas",3,"ngClass"],["for","quantity"],[1,"fas","fa-hashtag"],["type","number","id","quantity","formControlName","quantity","min","1",1,"form-control"],[1,"purchase-sale-grid"],[1,"purchase-section"],[1,"section-title"],[1,"fas","fa-shopping-cart"],[1,"form-column"],["for","purchaseUnitPrice"],[1,"fas","fa-tag"],[1,"input-group"],["type","number","id","purchaseUnitPrice","formControlName","purchaseUnitPrice","min","0.01","step","0.01",1,"form-control"],["for","purchaseDate"],[1,"fas","fa-calendar"],["type","datetime-local","id","purchaseDate","formControlName","purchaseDate",1,"form-control"],["for","purchaseInvoiceNumber"],[1,"fas","fa-file-invoice"],["type","text","id","purchaseInvoiceNumber","formControlName","purchaseInvoiceNumber",1,"form-control"],["for","purchaseOtherExpenses"],[1,"fas","fa-coins"],["type","number","id","purchaseOtherExpenses","formControlName","purchaseOtherExpenses","min","0","step","0.01",1,"form-control"],["for","purchaseDiscount"],[1,"fas","fa-percent"],["type","number","id","purchaseDiscount","formControlName","purchaseDiscount","min","0","max","100","step","0.01",1,"form-control"],["for","purchaseDiscountAmount"],[1,"fas","fa-tags"],["type","number","id","purchaseDiscountAmount","formControlName","purchaseDiscountAmount","min","0","step","0.01",1,"form-control"],["for","purchaseDiscountedPrice"],[1,"fas","fa-calculator"],["type","number","id","purchaseDiscountedPrice","formControlName","purchaseDiscountedPrice","readonly","",1,"form-control"],[1,"sale-section"],[1,"fas","fa-cash-register"],["for","saleUnitPrice"],["type","number","id","saleUnitPrice","formControlName","saleUnitPrice","min","0.01","step","0.01",1,"form-control"],["for","saleDate"],["type","datetime-local","id","saleDate","formControlName","saleDate",1,"form-control"],["for","saleInvoiceNumber"],["type","text","id","saleInvoiceNumber","formControlName","saleInvoiceNumber",1,"form-control"],["for","saleOtherExpenses"],["type","number","id","saleOtherExpenses","formControlName","saleOtherExpenses","min","0","step","0.01",1,"form-control"],["for","saleDiscount"],["type","number","id","saleDiscount","formControlName","saleDiscount","min","0","max","100","step","0.01",1,"form-control"],["for","saleDiscountAmount"],["type","number","id","saleDiscountAmount","formControlName","saleDiscountAmount","min","0","step","0.01",1,"form-control"],["for","saleDiscountedPrice"],["type","number","id","saleDiscountedPrice","formControlName","saleDiscountedPrice","readonly","",1,"form-control"],[1,"form-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[4,"ngIf"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"button",1),m(2,"i",2),c(3," Back to Purchases "),a(),o(4,"div",3)(5,"div",4)(6,"h2",5),m(7,"i",6),c(8," Combined Purchase & Sale Entry "),a()(),o(9,"form",7),_("ngSubmit",function(){return n.onSubmit()}),o(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),m(14,"i",12),c(15," Select Product "),o(16,"span",13),c(17,"*"),a()(),o(18,"div",14),m(19,"app-searchable-select",15),o(20,"button",16),_("click",function(){return n.refreshProducts()}),m(21,"i",17),a()()(),o(22,"div",10)(23,"label",18),m(24,"i",19),c(25," Quantity "),o(26,"span",13),c(27,"*"),a()(),m(28,"input",20),a()()(),o(29,"div",8)(30,"div",21)(31,"div",22)(32,"h3",23),m(33,"i",24),c(34," Purchase Details "),a(),o(35,"div",25)(36,"div",10)(37,"label",26),m(38,"i",27),c(39," Purchase Unit Price "),o(40,"span",13),c(41,"*"),a()(),o(42,"div",28),m(43,"input",29),a()(),o(44,"div",10)(45,"label",30),m(46,"i",31),c(47," Purchase Date "),o(48,"span",13),c(49,"*"),a()(),m(50,"input",32),a(),o(51,"div",10)(52,"label",33),m(53,"i",34),c(54," Purchase Invoice Number "),a(),m(55,"input",35),a(),o(56,"div",10)(57,"label",36),m(58,"i",37),c(59," Purchase Other Expenses "),a(),o(60,"div",28),m(61,"input",38),a()(),o(62,"div",10)(63,"label",39),m(64,"i",40),c(65," Discount Percentage "),a(),o(66,"div",28),m(67,"input",41),a()(),o(68,"div",10)(69,"label",42),m(70,"i",43),c(71," Discount Amount "),a(),o(72,"div",28),m(73,"input",44),a()(),o(74,"div",10)(75,"label",45),m(76,"i",46),c(77," Final Price "),a(),o(78,"div",28),m(79,"input",47),a()()()(),o(80,"div",48)(81,"h3",23),m(82,"i",49),c(83," Sale Details "),a(),o(84,"div",25)(85,"div",10)(86,"label",50),m(87,"i",27),c(88," Sale Unit Price "),o(89,"span",13),c(90,"*"),a()(),o(91,"div",28),m(92,"input",51),a()(),o(93,"div",10)(94,"label",52),m(95,"i",31),c(96," Sale Date "),o(97,"span",13),c(98,"*"),a()(),m(99,"input",53),a(),o(100,"div",10)(101,"label",54),m(102,"i",34),c(103," Sale Invoice Number "),a(),m(104,"input",55),a(),o(105,"div",10)(106,"label",56),m(107,"i",37),c(108," Sale Other Expenses "),a(),o(109,"div",28),m(110,"input",57),a()(),o(111,"div",10)(112,"label",58),m(113,"i",40),c(114," Discount Percentage "),a(),o(115,"div",28),m(116,"input",59),a()(),o(117,"div",10)(118,"label",60),m(119,"i",43),c(120," Discount Amount "),a(),o(121,"div",28),m(122,"input",61),a()(),o(123,"div",10)(124,"label",62),m(125,"i",46),c(126," Final Price "),a(),o(127,"div",28),m(128,"input",63),a()()()()()(),o(129,"div",64)(130,"button",65),_("click",function(){return n.resetForm()}),m(131,"i",66),c(132," Reset "),a(),o(133,"button",67),m(134,"i",17),c(135),a()()()()(),M(136,Dm,1,0,"app-loader",68)),t&2&&(l(9),p("formGroup",n.combinedForm),l(10),F("is-invalid",n.isFieldInvalid("productId")),p("options",n.products)("placeholder","Select Product")("defaultOption",_t(32,Fm))("searchPlaceholder","Search products..."),l(),p("disabled",n.isLoadingProducts),l(),p("ngClass",n.isLoadingProducts?"fa-spinner fa-spin":"fa-sync-alt"),l(7),F("is-invalid",n.isFieldInvalid("quantity")),l(15),F("is-invalid",n.isFieldInvalid("purchaseUnitPrice")),l(7),F("is-invalid",n.isFieldInvalid("purchaseDate")),l(17),F("is-invalid",n.isFieldInvalid("purchaseDiscount")),l(6),F("is-invalid",n.isFieldInvalid("purchaseDiscountAmount")),l(19),F("is-invalid",n.isFieldInvalid("saleUnitPrice")),l(7),F("is-invalid",n.isFieldInvalid("saleDate")),l(17),F("is-invalid",n.isFieldInvalid("saleDiscount")),l(6),F("is-invalid",n.isFieldInvalid("saleDiscountAmount")),l(8),p("disabled",n.loading),l(3),p("disabled",n.combinedForm.invalid||n.loading),l(),p("ngClass",n.loading?"fa-spinner fa-spin":"fa-save"),l(),T(" ",n.loading?"Saving...":"Save Entry"," "),l(),p("ngIf",n.loading))},dependencies:[le,ce,K,ue,ee,W,ft,Z,J,ht,di,te,oe,Fe,Ve,me,Je],styles:[".combined-form-container[_ngcontent-%COMP%]{padding:1.5rem;margin:0 auto;max-width:1400px}.back-btn[_ngcontent-%COMP%]{margin-bottom:1.5rem}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;border:1px solid var(--border-color);overflow:hidden;margin-bottom:2rem}.card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.combined-form[_ngcontent-%COMP%]{padding:1.5rem}@media (min-width: 768px){.combined-form[_ngcontent-%COMP%]{padding:2rem}}.section-card[_ngcontent-%COMP%]{background:var(--background-light);border-radius:8px;padding:1.25rem;margin-bottom:1rem;border:1px solid var(--border-color);box-shadow:0 2px 4px #0000000d}.section-card[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--primary);font-size:1.25rem;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}.section-card[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1em}.form-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem;grid-template-columns:1fr}@media (min-width: 576px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 992px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;width:90%}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{width:90%}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem;color:var(--text-primary);font-weight:500;display:flex;align-items:center;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger);margin-left:4px}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[formControlName=purchaseUnitPrice][_ngcontent-%COMP%]{transition:background-color .3s ease}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[formControlName=purchaseUnitPrice].auto-filled[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_highlight-background 1s ease}.product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start;width:100%}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-container{height:42px;border-radius:var(--border-radius);transition:all .3s ease}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]{background-color:var(--background);color:var(--primary);width:42px;border-radius:6px;transition:all .2s ease;flex-shrink:0}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:active{transform:translateY(0)}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.input-group[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:90%!important;border-top-left-radius:0;border-bottom-left-radius:0}.form-control[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:var(--border-radius);font-size:.95rem;transition:all .3s ease;background-color:var(--input-bg, #fff);color:var(--text-primary);min-width:252px}.invalid-feedback[_ngcontent-%COMP%]{display:block;color:var(--danger);font-size:.875rem;margin-top:.25rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:space-between;margin-top:2rem;padding-top:1.5rem;border-top:1px solid var(--border-color)}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;font-size:1rem;border-radius:4px;cursor:pointer;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1em}@media (max-width: 768px){.combined-form-container[_ngcontent-%COMP%], .section-card[_ngcontent-%COMP%]{padding:1rem}.form-control[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%]{height:40px;padding:.5rem .75rem}}.form-row.two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:1rem;margin-bottom:1rem;align-items:flex-start}.form-row.two-columns[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 768px){.form-row.two-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}.purchase-sale-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}@media (max-width: 992px){.purchase-sale-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.purchase-sale-grid[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%], .purchase-sale-grid[_ngcontent-%COMP%]   .sale-section[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);padding:1rem;border:1px solid var(--border-color);box-shadow:0 2px 4px #0000000d}.purchase-sale-grid[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%], .purchase-sale-grid[_ngcontent-%COMP%]   .sale-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--primary);font-size:1.25rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid var(--border-color)}.purchase-sale-grid[_ngcontent-%COMP%]   .form-column[_ngcontent-%COMP%]{display:grid;flex-direction:column;grid-template-columns:1fr 1fr;gap:.875rem}.form-control[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:var(--border-radius);font-size:.95rem;transition:all .3s ease;background-color:var(--input-bg, #fff);color:var(--text-primary)}.form-control[_ngcontent-%COMP%]:hover{border-color:var(--primary-dark)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.15)}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger, #dc3545)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc354526}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.95rem;color:var(--text-secondary);background-color:var(--background-light);border-right:0;border-radius:var(--border-radius) 0 0 var(--border-radius)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:90%!important;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:1px}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-left-width:2px}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus ~ .input-group-text[_ngcontent-%COMP%]{border-color:var(--primary)}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-container{border-radius:var(--border-radius);transition:all .3s ease}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-container:hover{border-color:var(--primary-dark)}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-container:focus-within{box-shadow:0 0 0 3px rgba(var(--primary-rgb),.15)}.section-card[_ngcontent-%COMP%], .purchase-section[_ngcontent-%COMP%], .sale-section[_ngcontent-%COMP%]{border-radius:var(--border-radius)}.input-group[_ngcontent-%COMP%]   input[formControlName=purchaseUnitPrice][_ngcontent-%COMP%]{transition:all .3s ease}.input-group[_ngcontent-%COMP%]   input[formControlName=purchaseUnitPrice].ng-touched[_ngcontent-%COMP%]:not(:focus){background-color:rgba(var(--primary-rgb),.05)}@keyframes _ngcontent-%COMP%_highlight{0%{background-color:rgba(var(--primary-rgb),.1)}to{background-color:transparent}}.auto-filled[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_highlight 1s ease}@keyframes _ngcontent-%COMP%_highlight-background{0%{background-color:rgba(var(--primary-rgb),.1)}50%{background-color:rgba(var(--primary-rgb),.1)}to{background-color:transparent}}.discount-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border-color)}@media (max-width: 768px){.discount-group[_ngcontent-%COMP%]{grid-template-columns:1fr}}.discount-group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.discount-group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:read-only{background-color:var(--background-light);cursor:not-allowed}.discount-group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:40px;justify-content:center}"],changeDetection:0})}}return i})();var Vt=(()=>{class i{constructor(e,t){this.http=e,this.encryptionService=t,this.CACHE_KEY="active_employees",this.apiUrl=`${st.apiUrl}/api/employees`}searchEmployees(e){return this.http.post(`${this.apiUrl}/search`,e)}createEmployee(e){return this.http.post(this.apiUrl,e)}updateEmployee(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}deleteEmployee(e){return this.http.delete(`${this.apiUrl}/${e}`)}getEmployeeDetail(e){return this.http.post(`${this.apiUrl}/detail`,{id:e}).pipe(Qi(t=>{if(t.success){let n=this.encryptionService.encrypt(JSON.stringify(t.data));localStorage.setItem("selectedEmployee",n)}}))}getAllEmployees(){let e=localStorage.getItem(this.CACHE_KEY);if(e){let t=this.encryptionService.decrypt(e);if(t)return co(t)}return this.http.post(`${this.apiUrl}/all`,{}).pipe(Qi(t=>{if(t.success){let n=this.encryptionService.encrypt(t);localStorage.setItem(this.CACHE_KEY,n)}}))}refreshEmployees(){return localStorage.removeItem(this.CACHE_KEY),this.getAllEmployees()}static{this.\u0275fac=function(t){return new(t||i)(ge(nt),ge(Xe))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Am=(i,r)=>({active:i,inactive:r}),Nm=i=>["/employee/edit",i];function Lm(i,r){if(i&1){let e=N();o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),a(),o(9,"td"),c(10),a(),o(11,"td")(12,"span",23),c(13),a()(),o(14,"td",24)(15,"button",25),m(16,"i",26),a(),o(17,"button",27),_("click",function(){let n=v(e).$implicit,s=f();return x(s.deleteEmployee(n.id))}),m(18,"i",28),a()()()}if(i&2){let e=r.$implicit;l(2),E(e.name),l(2),E(e.mobileNumber),l(2),E(e.email),l(2),E(e.designation),l(2),E(e.department),l(2),p("ngClass",St(8,Am,e.status==="A",e.status!=="A")),l(),T(" ",e.status==="A"?"Active":"Inactive"," "),l(2),p("routerLink",yt(11,Nm,e.id))}}function Vm(i,r){i&1&&(o(0,"tr")(1,"td",29),c(2,"No employees found"),a()())}function zm(i,r){if(i&1){let e=N();o(0,"app-pagination",30),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var ms=(()=>{class i{constructor(e,t,n){this.employeeService=e,this.fb=t,this.snackbar=n,this.employees=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.destroy$=new G,this.subscriptions=[],this.initializeForm()}ngOnInit(){this.loadEmployees()}initializeForm(){this.searchForm=this.fb.group({search:[""]})}loadEmployees(){this.isLoading=!0;let e=lt(Me({},this.searchForm.value),{page:this.currentPage,size:this.pageSize}),t=this.employeeService.searchEmployees(e).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.employees=n.data.content,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements,this.updatePaginationIndexes()),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load employees"),this.isLoading=!1}});this.subscriptions.push(t)}onSearch(){this.currentPage=0,this.pageSize=10,this.loadEmployees()}resetForm(){this.searchForm.reset(),this.currentPage=0,this.pageSize=10,this.loadEmployees()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadEmployees()}deleteEmployee(e){if(confirm("Are you sure you want to delete this employee?")){this.isLoading=!0;let t=this.employeeService.deleteEmployee(e).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.snackbar.success("Employee deleted successfully"),this.loadEmployees())},error:n=>{this.snackbar.error(n?.error?.message||"Failed to delete employee"),this.isLoading=!1}});this.subscriptions.push(t)}}onPageChange(e){e>=0&&e<this.totalPages&&(this.currentPage=e,this.loadEmployees())}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.employees=[],this.searchForm&&this.searchForm.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(Vt),b(X),b(de))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-employee-list"]],standalone:!0,features:[re],decls:47,vars:7,consts:[[1,"employee-container"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search employees...",1,"form-control"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"action-buttons"],["routerLink","/employee/create",1,"btn","btn-sm","btn-primary"],[1,"fas","fa-plus"],[1,"employees-list","card"],[1,"table-wrapper"],[1,"table-container"],[3,"show"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"status-badge",3,"ngClass"],[1,"actions"],["title","Edit Employee",1,"btn-icon","edit",3,"routerLink"],[1,"fas","fa-edit"],["title","Delete Employee",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","8",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Search Employees"),a(),o(4,"form",2),_("ngSubmit",function(){return n.onSearch()}),o(5,"div",3)(6,"div",4),m(7,"input",5),a(),o(8,"div",6)(9,"button",7),m(10,"i",8),c(11," Search "),a(),o(12,"button",9),_("click",function(){return n.resetForm()}),m(13,"i",10),c(14," Reset "),a()()()()(),o(15,"div",11)(16,"button",12),m(17,"i",13),c(18," Add Employee "),a()(),o(19,"div",14)(20,"h2"),c(21,"Employees"),a(),o(22,"div",15)(23,"div",16),m(24,"app-loader",17),o(25,"div",18)(26,"table",19)(27,"thead")(28,"tr")(29,"th"),c(30,"Name"),a(),o(31,"th"),c(32,"Mobile"),a(),o(33,"th"),c(34,"Email"),a(),o(35,"th"),c(36,"Designation"),a(),o(37,"th"),c(38,"Department"),a(),o(39,"th"),c(40,"Status"),a(),o(41,"th"),c(42,"Actions"),a()()(),o(43,"tbody"),M(44,Lm,19,13,"tr",20)(45,Vm,3,0,"tr",21),a()()()()(),M(46,zm,1,4,"app-pagination",22),a()()),t&2&&(l(4),p("formGroup",n.searchForm),l(20),p("show",n.isLoading),l(),F("loading",n.isLoading),l(19),p("ngForOf",n.employees),l(),p("ngIf",!(n.employees!=null&&n.employees.length)),l(),p("ngIf",n.totalPages>0))},dependencies:[le,ce,Oe,K,Fe,Ve,ue,ee,W,Z,J,te,oe,Ue,me,He],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.employee-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background)}.employee-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.employee-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:start}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:43px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px}.employee-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin:20px 0}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--text-secondary)}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80px;padding:5px;border-radius:4px;border:1px solid var(--supporting);background-color:#fff;color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative;min-height:200px;background:#fff}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;width:100%}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;min-height:200px;overflow-x:auto}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--supporting);border-radius:4px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#97a3ab}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;padding:15px 12px;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px;background-color:var(--background);color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;border-top:1px solid var(--supporting);color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:.85rem;font-weight:500}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;border-radius:4px;transition:all .2s ease}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:rgba(var(--secondary-rgb),.1);padding:8px;border-radius:6px}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a;padding:8px;border-radius:6px}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.employee-container[_ngcontent-%COMP%]{padding:10px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin:0 -15px;padding:0 15px}}"]})}}return i})();function Rm(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("name")," ")}}function jm(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("mobileNumber")," ")}}function $m(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("aadharNumber")," ")}}function qm(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("email")," ")}}function Um(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("designation")," ")}}function Hm(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("department")," ")}}function Bm(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("status")," ")}}function Gm(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("regularPay")," ")}}function Qm(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("overtimePay")," ")}}function Ym(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("wageType")," ")}}function Km(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("regularHours")," ")}}function Wm(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("startTime")," ")}}function Zm(i,r){if(i&1&&(o(0,"div",56),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("address")," ")}}var Zr=(()=>{class i{constructor(e,t,n,s,d){this.fb=e,this.employeeService=t,this.router=n,this.route=s,this.snackbar=d,this.isLoading=!1,this.isEditMode=!1,this.destroy$=new G,this.subscriptions=[],this.initializeForm()}ngOnInit(){this.employeeId=Number(this.route.snapshot.paramMap.get("id")),this.employeeId&&(this.isEditMode=!0,this.loadEmployee())}initializeForm(){this.employeeForm=this.fb.group({name:[null,[S.required]],mobileNumber:[null,[]],aadharNumber:[null,[S.pattern("^[0-9]{12}$")]],email:[null,[S.email]],address:[null,[]],designation:[null,[]],department:[null,[]],status:["A"],regularPay:[null,[S.required]],overtimePay:[null,[S.required]],wageType:["HOURLY",[S.required]],regularHours:[8,[S.required,S.min(0)]],startTime:["07:00",[S.required,S.pattern("^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$")]]})}formatDateForApi(e){let t=new Date(e),n=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),d=t.getFullYear();return`${n}-${s}-${d} 00:00:00`}onSubmit(){if(this.employeeForm.valid){this.isLoading=!0;let e=Me({},this.employeeForm.value),n=(this.isEditMode?this.employeeService.updateEmployee(this.employeeId,e):this.employeeService.createEmployee(e)).pipe(O(this.destroy$)).subscribe({next:s=>{s.success&&(this.snackbar.success(s.message),this.router.navigate(["/employee"]))},error:s=>{this.snackbar.error(s.message||`Failed to ${this.isEditMode?"update":"create"} employee`),this.isLoading=!1}});this.subscriptions.push(n)}else Object.keys(this.employeeForm.controls).forEach(e=>{let t=this.employeeForm.get(e);t?.invalid&&t.markAsTouched()})}loadEmployee(){if(!this.employeeId)return;this.isLoading=!0;let e=this.employeeService.getEmployeeDetail(this.employeeId).pipe(O(this.destroy$)).subscribe({next:t=>{t.success&&this.employeeForm.patchValue({name:t.data.name,mobileNumber:t.data.mobileNumber,aadharNumber:t.data.aadharNumber,email:t.data.email,address:t.data.address,designation:t.data.designation,department:t.data.department,status:t.data.status,regularPay:t.data.regularPay,overtimePay:t.data.overtimePay,wageType:t.data.wageType||"HOURLY",regularHours:t.data.regularHours||8,startTime:t.data.startTime||"07:00"}),this.isLoading=!1},error:t=>{this.snackbar.error(t?.error?.message||"Failed to load employee details"),this.isLoading=!1}});this.subscriptions.push(e)}isFieldInvalid(e){let t=this.employeeForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}getFieldError(e){let t=this.employeeForm.get(e);if(t?.errors&&t.touched){if(t.errors.required)return`${e} is required`;if(t.errors.email)return"Invalid email format";if(t.errors.pattern)return e==="startTime"?"Invalid time format (HH:mm)":"Invalid format";if(t.errors.min)return`${e} must be greater than 0`}return""}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.employeeForm&&this.employeeForm.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(Vt),b(be),b(It),b(de))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-employee-form"]],standalone:!0,features:[re],decls:112,vars:45,consts:[[1,"employee-form-container"],[3,"show"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-user"],[1,"employee-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","name"],[1,"required"],["type","text","id","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","mobileNumber"],[1,"fas","fa-phone"],["type","text","id","mobileNumber","formControlName","mobileNumber",1,"form-control"],["for","aadharNumber"],[1,"fas","fa-id-card"],["type","text","id","aadharNumber","formControlName","aadharNumber",1,"form-control"],["for","email"],[1,"fas","fa-envelope"],["type","email","id","email","formControlName","email",1,"form-control"],["for","designation"],[1,"fas","fa-briefcase"],["type","text","id","designation","formControlName","designation",1,"form-control"],["for","department"],[1,"fas","fa-building"],["type","text","id","department","formControlName","department",1,"form-control"],["for","status"],[1,"fas","fa-toggle-on"],["id","status","formControlName","status",1,"form-control"],["value","A"],["value","I"],["for","regularPay"],[1,"fa-solid","fa-coins"],["type","number","id","regularPay","formControlName","regularPay",1,"form-control"],["for","overtimePay"],["type","number","id","overtimePay","formControlName","overtimePay",1,"form-control"],["for","wageType"],[1,"fas","fa-money-bill"],["id","wageType","formControlName","wageType",1,"form-control"],["value","HOURLY"],["for","regularHours"],[1,"fas","fa-clock"],["type","number","id","regularHours","formControlName","regularHours","min","0",1,"form-control"],["for","startTime"],[1,"fas","fa-hourglass-start"],["type","time","id","startTime","formControlName","startTime",1,"form-control"],["for","address"],[1,"fas","fa-map-marker-alt"],["id","address","formControlName","address","rows","3",1,"form-control"],[1,"form-actions"],["type","button","routerLink","/employee",1,"btn","btn-sm","btn-secondary"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],[1,"invalid-feedback"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"div",3)(4,"h2",4),m(5,"i",5),c(6),a()(),o(7,"form",6),_("ngSubmit",function(){return n.onSubmit()}),o(8,"div",7)(9,"div",8)(10,"label",9),m(11,"i",5),c(12," Name "),o(13,"span",10),c(14,"*"),a()(),m(15,"input",11),M(16,Rm,2,1,"div",12),a(),o(17,"div",8)(18,"label",13),m(19,"i",14),c(20," Mobile Number "),a(),m(21,"input",15),M(22,jm,2,1,"div",12),a(),o(23,"div",8)(24,"label",16),m(25,"i",17),c(26," Aadhar Number "),a(),m(27,"input",18),M(28,$m,2,1,"div",12),a()(),o(29,"div",7)(30,"div",8)(31,"label",19),m(32,"i",20),c(33," Email "),a(),m(34,"input",21),M(35,qm,2,1,"div",12),a(),o(36,"div",8)(37,"label",22),m(38,"i",23),c(39," Designation "),a(),m(40,"input",24),M(41,Um,2,1,"div",12),a()(),o(42,"div",7)(43,"div",8)(44,"label",25),m(45,"i",26),c(46," Department "),a(),m(47,"input",27),M(48,Hm,2,1,"div",12),a(),o(49,"div",8)(50,"label",28),m(51,"i",29),c(52," Status "),a(),o(53,"select",30)(54,"option",31),c(55,"Active"),a(),o(56,"option",32),c(57,"Inactive"),a()(),M(58,Bm,2,1,"div",12),a()(),o(59,"div",7)(60,"div",8)(61,"label",33),m(62,"i",34),c(63," Regular Hours Price "),a(),m(64,"input",35),M(65,Gm,2,1,"div",12),a(),o(66,"div",8)(67,"label",36),m(68,"i",34),c(69," Overtime Hours Price "),a(),m(70,"input",37),M(71,Qm,2,1,"div",12),a()(),o(72,"div",7)(73,"div",8)(74,"label",38),m(75,"i",39),c(76," Wage Type "),o(77,"span",10),c(78,"*"),a()(),o(79,"select",40)(80,"option",41),c(81,"Hourly"),a()(),M(82,Ym,2,1,"div",12),a(),o(83,"div",8)(84,"label",42),m(85,"i",43),c(86," Regular Hours "),o(87,"span",10),c(88,"*"),a()(),m(89,"input",44),M(90,Km,2,1,"div",12),a(),o(91,"div",8)(92,"label",45),m(93,"i",46),c(94," Start Time "),o(95,"span",10),c(96,"*"),a()(),m(97,"input",47),M(98,Wm,2,1,"div",12),a()(),o(99,"div",8)(100,"label",48),m(101,"i",49),c(102," Address "),a(),m(103,"textarea",50),M(104,Zm,2,1,"div",12),a(),o(105,"div",51)(106,"button",52),m(107,"i",53),c(108," Cancel "),a(),o(109,"button",54),m(110,"i",55),c(111),a()()()()()),t&2&&(l(),p("show",n.isLoading),l(5),T(" ",n.isEditMode?"Edit Employee":"Create Employee"," "),l(),p("formGroup",n.employeeForm),l(8),F("is-invalid",n.isFieldInvalid("name")),l(),p("ngIf",n.isFieldInvalid("name")),l(5),F("is-invalid",n.isFieldInvalid("mobileNumber")),l(),p("ngIf",n.isFieldInvalid("mobileNumber")),l(5),F("is-invalid",n.isFieldInvalid("aadharNumber")),l(),p("ngIf",n.isFieldInvalid("aadharNumber")),l(6),F("is-invalid",n.isFieldInvalid("email")),l(),p("ngIf",n.isFieldInvalid("email")),l(5),F("is-invalid",n.isFieldInvalid("designation")),l(),p("ngIf",n.isFieldInvalid("designation")),l(6),F("is-invalid",n.isFieldInvalid("department")),l(),p("ngIf",n.isFieldInvalid("department")),l(5),F("is-invalid",n.isFieldInvalid("status")),l(5),p("ngIf",n.isFieldInvalid("status")),l(6),F("is-invalid",n.isFieldInvalid("regularPay")),l(),p("ngIf",n.isFieldInvalid("regularPay")),l(5),F("is-invalid",n.isFieldInvalid("overtimePay")),l(),p("ngIf",n.isFieldInvalid("overtimePay")),l(8),F("is-invalid",n.isFieldInvalid("wageType")),l(3),p("ngIf",n.isFieldInvalid("wageType")),l(7),F("is-invalid",n.isFieldInvalid("regularHours")),l(),p("ngIf",n.isFieldInvalid("regularHours")),l(7),F("is-invalid",n.isFieldInvalid("startTime")),l(),p("ngIf",n.isFieldInvalid("startTime")),l(5),F("is-invalid",n.isFieldInvalid("address")),l(),p("ngIf",n.isFieldInvalid("address")),l(5),p("disabled",n.employeeForm.invalid||n.isLoading),l(),p("ngClass",n.isLoading?"fa-spinner fa-spin":n.isEditMode?"fa-save":"fa-plus"),l(),T(" ",n.isLoading?"Processing...":n.isEditMode?"Update":"Create"," "))},dependencies:[le,ce,K,ue,ee,ot,at,W,ft,rt,Z,J,ht,te,oe,me,Ve],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.employee-form-container[_ngcontent-%COMP%]{padding:1.5rem;margin:0 auto;max-width:1200px}.employee-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;overflow:hidden;margin-bottom:2rem}.employee-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.employee-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]{padding:2rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545;margin-left:4px}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:43px;border:1px solid var(--supporting);border-radius:8px;transition:all .3s ease}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 2px #003a581a}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #dc35451a}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{appearance:none;background-image:url(data:image/svg+xml,...);background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;padding-right:2.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--background)}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;transition:all .3s ease}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media (max-width: 768px){.employee-form-container[_ngcontent-%COMP%]{padding:1rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]{padding:1.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return i})();var zi=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${st.apiUrl}/api/employee-orders`}searchEmployeeOrders(e){return this.http.post(`${this.apiUrl}/search`,e)}createEmployeeOrder(e){return this.http.post(`${this.apiUrl}/create`,e)}updateEmployeeOrder(e){return this.http.put(`${this.apiUrl}/update`,e)}deleteEmployeeOrder(e){return this.http.delete(`${this.apiUrl}/${e}`)}getEmployeeOrderDetail(e){return this.http.post(`${this.apiUrl}/detail`,{id:e})}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Xm=i=>["/employee-order/edit",i];function Jm(i,r){if(i&1){let e=N();o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),a(),o(9,"td")(10,"span",29),c(11),a()(),o(12,"td"),c(13),ye(14,"date"),a(),o(15,"td",30)(16,"button",31),m(17,"i",32),a(),o(18,"button",33),_("click",function(){let n,s=v(e).$implicit,d=f();return x(d.deleteEmployeeOrder((n=s.id)!==null&&n!==void 0?n:0))}),m(19,"i",34),a()()()}if(i&2){let e=r.$implicit;l(2),E(e.productName),l(2),T("",e.employeeIds.length||0," assigned"),l(2),E(e.quantity),l(2),E(e.remarks),l(2),p("ngClass","status-"+e.status.toLowerCase()),l(),T(" ",e.status==="O"?"Open":e.status==="I"?"In Progress":e.status==="C"?"Completed":"Unknown"," "),l(2),E(Ee(14,8,e.createdAt,"medium")),l(3),p("routerLink",yt(11,Xm,e.id))}}function ep(i,r){i&1&&(o(0,"tr")(1,"td",35),c(2,"No employee orders found"),a()())}function tp(i,r){if(i&1){let e=N();o(0,"app-pagination",36),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var us=(()=>{class i{constructor(e,t,n,s){this.employeeOrderService=e,this.fb=t,this.snackbar=n,this.dateUtils=s,this.employeeOrders=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.statusOptions=[{label:"All",value:""},{label:"Open",value:"O"},{label:"In Progress",value:"P"},{label:"Completed",value:"C"},{label:"Inactive",value:"I"}],this.destroy$=new G,this.subscriptions=[],this.initializeForm()}ngOnInit(){this.loadEmployeeOrders()}initializeForm(){this.searchForm=this.fb.group({search:[""],status:[""],startDate:[null],endDate:[null]})}loadEmployeeOrders(){this.isLoading=!0;let e=this.searchForm.value,t=lt(Me({currentPage:this.currentPage,perPageRecord:this.pageSize},e),{startDate:e.startDate?this.dateUtils.formatDateForApi(e.startDate,!0):null,endDate:e.endDate?this.dateUtils.formatDateForApi(e.endDate,!0):null}),n=this.employeeOrderService.searchEmployeeOrders(t).pipe(O(this.destroy$)).subscribe({next:s=>{s.success&&(this.employeeOrders=s.data.content,this.totalPages=s.data.totalPages,this.totalElements=s.data.totalElements,this.updatePaginationIndexes()),this.isLoading=!1},error:s=>{this.snackbar.error(s?.error?.message||"Failed to load employee orders"),this.isLoading=!1}});this.subscriptions.push(n)}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements)}onSearch(){this.currentPage=0,this.loadEmployeeOrders()}resetForm(){this.searchForm.reset(),this.currentPage=0,this.loadEmployeeOrders()}onPageChange(e){this.currentPage=e,this.loadEmployeeOrders()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadEmployeeOrders()}deleteEmployeeOrder(e){if(confirm("Are you sure you want to delete this employee order?")){this.isLoading=!0;let t=this.employeeOrderService.deleteEmployeeOrder(e).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.snackbar.success("Employee order deleted successfully"),this.loadEmployeeOrders())},error:n=>{this.snackbar.error(n.message||"Failed to delete employee order"),this.isLoading=!1}});this.subscriptions.push(t)}}getPageNumbers(){return Array.from({length:this.totalPages},(e,t)=>t+1)}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.employeeOrders=[],this.statusOptions=[],this.searchForm&&this.searchForm.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(zi),b(X),b(de),b(Ft))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-employee-order-list"]],standalone:!0,features:[re],decls:60,vars:5,consts:[[1,"employee-order-container"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by product name or remarks...",1,"form-control"],["formControlName","status",1,"form-control"],["value",""],["value","O"],["value","I"],["value","C"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"action-buttons"],["routerLink","/employee-order/create",1,"btn","btn-primary"],[1,"fas","fa-plus"],[1,"employee-orders-list","card"],[1,"table-responsive"],[3,"show"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-controls"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[3,"ngClass"],[1,"actions"],["title","Edit Order",1,"btn-icon","edit",3,"routerLink"],[1,"fas","fa-edit"],["title","Delete Order",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","7",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Search Employee Orders"),a(),o(4,"form",2),_("ngSubmit",function(){return n.onSearch()}),o(5,"div",3)(6,"div",4),m(7,"input",5),a(),o(8,"div",4)(9,"select",6)(10,"option",7),c(11,"All Status"),a(),o(12,"option",8),c(13,"Open"),a(),o(14,"option",9),c(15,"In Progress"),a(),o(16,"option",10),c(17,"Completed"),a()()(),o(18,"div",4),m(19,"input",11),a(),o(20,"div",4),m(21,"input",12),a(),o(22,"div",13)(23,"button",14),m(24,"i",15),c(25," Search "),a(),o(26,"button",16),_("click",function(){return n.resetForm()}),m(27,"i",17),c(28," Reset "),a()()()()(),o(29,"div",18)(30,"button",19),m(31,"i",20),c(32," Create Employee Order "),a()(),o(33,"div",21)(34,"h2"),c(35,"Employee Orders"),a(),o(36,"div",22),m(37,"app-loader",23),o(38,"table",24)(39,"thead")(40,"tr")(41,"th"),c(42,"Product"),a(),o(43,"th"),c(44,"Employees"),a(),o(45,"th"),c(46,"Quantity"),a(),o(47,"th"),c(48,"Remarks"),a(),o(49,"th"),c(50,"Status"),a(),o(51,"th"),c(52,"Created At"),a(),o(53,"th"),c(54,"Actions"),a()()(),o(55,"tbody"),M(56,Jm,20,13,"tr",25)(57,ep,3,0,"tr",26),a()()(),o(58,"div",27),M(59,tp,1,4,"app-pagination",28),a()()()),t&2&&(l(4),p("formGroup",n.searchForm),l(33),p("show",n.isLoading),l(19),p("ngForOf",n.employeeOrders),l(),p("ngIf",!(n.employeeOrders!=null&&n.employeeOrders.length)),l(2),p("ngIf",n.totalPages>0))},dependencies:[le,ce,Oe,K,ut,ue,ee,ot,at,W,rt,Z,J,te,oe,Ue,Fe,Ve,me,He],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.employee-order-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background)}.employee-order-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.employee-order-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.employee-order-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;align-items:start}.employee-order-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}.employee-order-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin:20px 0}.employee-order-container[_ngcontent-%COMP%]   .status-o[_ngcontent-%COMP%]{color:var(--warning);background-color:#ffa5001a;padding:4px 8px;border-radius:4px;font-size:.875rem}.employee-order-container[_ngcontent-%COMP%]   .status-i[_ngcontent-%COMP%]{color:var(--info);background-color:#ffa5001a;padding:4px 8px;border-radius:4px;font-size:.875rem}.employee-order-container[_ngcontent-%COMP%]   .status-c[_ngcontent-%COMP%]{color:var(--success);background-color:#ffa5001a;padding:4px 8px;border-radius:4px;font-size:.875rem}@media (max-width: 768px){.employee-order-container[_ngcontent-%COMP%]{padding:10px}.employee-order-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.employee-order-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.employee-order-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin:0 -15px;padding:0 15px}}"]})}}return i})();function np(i,r){if(i&1&&(o(0,"div",38),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("productId")," ")}}function ip(i,r){if(i&1&&(o(0,"div",38),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("employeeIds")," ")}}function rp(i,r){if(i&1&&(o(0,"div",38),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("quantity")," ")}}function op(i,r){if(i&1&&(o(0,"div",38),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("status")," ")}}var Xr=(()=>{class i{constructor(e,t,n,s,d,u,g){this.fb=e,this.employeeOrderService=t,this.employeeService=n,this.productService=s,this.router=d,this.route=u,this.snackbar=g,this.isLoading=!1,this.isEditMode=!1,this.products=[],this.employees=[],this.isLoadingProducts=!1,this.isLoadingEmployees=!1,this.destroy$=new G,this.initializeForm()}ngOnInit(){this.orderId=Number(this.route.snapshot.paramMap.get("id")),this.orderId&&(this.isEditMode=!0,this.loadEmployeeOrder()),this.loadProducts(),this.loadEmployees()}initializeForm(){this.employeeOrderForm=this.fb.group({productId:["",S.required],employeeIds:[[],S.required],quantity:["",[S.required,S.min(1)]],remarks:[""],status:["O",S.required]})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.products=[],this.employees=[],this.employeeOrderForm&&this.employeeOrderForm.reset()}loadEmployeeOrder(){this.orderId&&(this.isLoading=!0,this.employeeOrderService.getEmployeeOrderDetail(this.orderId).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&this.employeeOrderForm.patchValue({productId:e.data.productId,employeeIds:e.data.employeeIds,quantity:e.data.quantity,remarks:e.data.remarks,status:e.data.status},{emitEvent:!1}),this.isLoading=!1},error:e=>{this.snackbar.error(e?.error?.message||"Failed to load employee order details"),this.isLoading=!1}}))}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data),this.isLoadingProducts=!1},error:()=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1}})}refreshProducts(){this.isLoadingProducts=!0,this.productService.refreshProducts().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data,this.snackbar.success("Products refreshed successfully")),this.isLoadingProducts=!1},error:e=>{this.snackbar.error("Failed to refresh products"),this.isLoadingProducts=!1}})}loadEmployees(){this.isLoadingEmployees=!0,this.employeeService.getAllEmployees().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.employees=e.data),this.isLoadingEmployees=!1},error:()=>{this.snackbar.error("Failed to load employees"),this.isLoadingEmployees=!1}})}onSubmit(){if(this.employeeOrderForm.valid){this.isLoading=!0;let e=Me({},this.employeeOrderForm.value);(this.isEditMode?this.employeeOrderService.updateEmployeeOrder(lt(Me({},e),{id:this.orderId})):this.employeeOrderService.createEmployeeOrder(e)).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.snackbar.success(n.message),this.router.navigate(["/employee-order"])),this.isLoading=!1},error:n=>{this.snackbar.error(n.message||`Failed to ${this.isEditMode?"update":"create"} employee order`),this.isLoading=!1}})}else Object.keys(this.employeeOrderForm.controls).forEach(e=>{let t=this.employeeOrderForm.get(e);t?.invalid&&t.markAsTouched()})}isFieldInvalid(e){let t=this.employeeOrderForm.get(e);return t?t.invalid&&t.touched:!1}getFieldError(e){let t=this.employeeOrderForm.get(e);if(t?.errors){if(t.errors.required)return"This field is required";if(t.errors.min)return"Value must be greater than 0"}return""}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(zi),b(Vt),b(Pt),b(be),b(It),b(de))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-employee-order-form"]],standalone:!0,features:[re],decls:64,vars:25,consts:[[1,"employee-order-form-container"],[3,"show"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-tasks"],[1,"employee-order-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","productId"],[1,"fas","fa-box"],[1,"required"],[1,"product-select-group"],["formControlName","productId","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder"],["type","button","title","Refresh Products",1,"btn-icon","refresh",3,"click","disabled"],[1,"fas",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","employeeIds"],[1,"fas","fa-users"],[1,"employee-select-group"],["formControlName","employeeIds","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder","multiple"],["type","button","title","Refresh Employees",1,"btn-icon","refresh",3,"click","disabled"],["for","quantity"],[1,"fas","fa-sort-amount-up"],["type","number","id","quantity","formControlName","quantity","min","1",1,"form-control"],["for","status"],[1,"fas","fa-info-circle"],["id","status","formControlName","status",1,"form-control"],["value","O"],["value","I"],["value","C"],["for","remarks"],[1,"fas","fa-comment"],["id","remarks","formControlName","remarks","rows","3",1,"form-control"],[1,"form-actions"],["type","button","routerLink","/employee-order",1,"btn","btn-secondary"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"div",3)(4,"h2",4),m(5,"i",5),c(6),a()(),o(7,"form",6),_("ngSubmit",function(){return n.onSubmit()}),o(8,"div",7)(9,"div",8)(10,"label",9),m(11,"i",10),c(12," Product "),o(13,"span",11),c(14,"*"),a()(),o(15,"div",12),m(16,"app-searchable-select",13),o(17,"button",14),_("click",function(){return n.refreshProducts()}),m(18,"i",15),a()(),M(19,np,2,1,"div",16),a(),o(20,"div",8)(21,"label",17),m(22,"i",18),c(23," Employees "),o(24,"span",11),c(25,"*"),a()(),o(26,"div",19),m(27,"app-searchable-select",20),o(28,"button",21),_("click",function(){return n.loadEmployees()}),m(29,"i",15),a()(),M(30,ip,2,1,"div",16),a()(),o(31,"div",7)(32,"div",8)(33,"label",22),m(34,"i",23),c(35," Quantity "),o(36,"span",11),c(37,"*"),a()(),m(38,"input",24),M(39,rp,2,1,"div",16),a(),o(40,"div",8)(41,"label",25),m(42,"i",26),c(43," Status "),a(),o(44,"select",27)(45,"option",28),c(46,"Open"),a(),o(47,"option",29),c(48,"In Progress"),a(),o(49,"option",30),c(50,"Completed"),a()(),M(51,op,2,1,"div",16),a()(),o(52,"div",8)(53,"label",31),m(54,"i",32),c(55," Remarks "),a(),m(56,"textarea",33),a(),o(57,"div",34)(58,"button",35),m(59,"i",36),c(60," Cancel "),a(),o(61,"button",37),m(62,"i",15),c(63),a()()()()()),t&2&&(l(),p("show",n.isLoading),l(5),T(" ",n.isEditMode?"Edit Employee Order":"Create Employee Order"," "),l(),p("formGroup",n.employeeOrderForm),l(9),p("options",n.products)("placeholder","Select Product")("searchPlaceholder","Search products..."),l(),p("disabled",n.isLoadingProducts),l(),p("ngClass",n.isLoadingProducts?"fa-spinner fa-spin":"fa-sync-alt"),l(),p("ngIf",n.isFieldInvalid("productId")),l(8),p("options",n.employees)("placeholder","Select Employees")("searchPlaceholder","Search employees...")("multiple",!0),l(),p("disabled",n.isLoadingEmployees),l(),p("ngClass",n.isLoadingEmployees?"fa-spinner fa-spin":"fa-sync-alt"),l(),p("ngIf",n.isFieldInvalid("employeeIds")),l(8),F("is-invalid",n.isFieldInvalid("quantity")),l(),p("ngIf",n.isFieldInvalid("quantity")),l(5),F("is-invalid",n.isFieldInvalid("status")),l(7),p("ngIf",n.isFieldInvalid("status")),l(10),p("disabled",n.employeeOrderForm.invalid||n.isLoading),l(),p("ngClass",n.isLoading?"fa-spinner fa-spin":n.isEditMode?"fa-save":"fa-plus"),l(),T(" ",n.isLoading?"Processing...":n.isEditMode?"Update":"Create"," "))},dependencies:[le,ce,K,ue,ee,ot,at,W,ft,rt,Z,J,ht,te,oe,me,Ve,Je,Ue,Fe],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.employee-order-form-container[_ngcontent-%COMP%]{padding:1.5rem;margin:0 auto;max-width:1200px}.employee-order-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;overflow:hidden;margin-bottom:2rem}.employee-order-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.employee-order-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]{padding:2rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-bottom:1.5rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545;margin-left:4px}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%], .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%], .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%], .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]{padding:.75rem;height:42px;width:42px;display:flex;align-items:center;justify-content:center;border:1px solid var(--supporting);border-radius:8px;background:#fff;color:var(--primary);transition:all .3s ease}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled), .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled, .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}@media (max-width: 768px){.employee-order-form-container[_ngcontent-%COMP%], .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]{padding:1rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return i})();var Ri=(i,r)=>({"text-success":i,"text-danger":r});function ap(i,r){if(i&1&&(o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),ye(5,"date"),a(),o(6,"td"),c(7),ye(8,"number"),a(),o(9,"td",19),c(10),ye(11,"number"),a(),o(12,"td",19),c(13),ye(14,"number"),a()()),i&2){let e=r.$implicit,t=r.index,n=f();l(2),E(n.startIndex+t+1),l(2),E(Ee(5,7,e.date,"mediumDate")),l(3),E(Ee(8,10,e.totalExpenses,"1.2-2")),l(2),p("ngClass",St(19,Ri,e.grossProfit>0,e.grossProfit<0)),l(),T(" ",Ee(11,13,e.grossProfit,"1.2-2")," "),l(2),p("ngClass",St(22,Ri,e.netProfit>0,e.netProfit<0)),l(),T(" ",Ee(14,16,e.netProfit,"1.2-2")," ")}}function sp(i,r){if(i&1){let e=N();o(0,"button",26),_("click",function(){v(e);let n=f();return x(n.loadPage(0))}),c(1," 1 "),a()}}function cp(i,r){i&1&&(o(0,"span",27),c(1,"..."),a())}function lp(i,r){if(i&1){let e=N();zn(0),o(1,"button",26),_("click",function(){let n=v(e).$implicit,s=f();return x(s.loadPage(n-1))}),c(2),a(),Rn()}if(i&2){let e=r.$implicit,t=f();l(),F("active",e===t.currentPage+1),l(),T(" ",e," ")}}function dp(i,r){i&1&&(o(0,"span",27),c(1,"..."),a())}function mp(i,r){if(i&1){let e=N();o(0,"button",26),_("click",function(){v(e);let n=f();return x(n.loadPage((n.profits==null?null:n.profits.totalPages)-1))}),c(1),a()}if(i&2){let e=f();l(),T(" ",e.profits==null?null:e.profits.totalPages," ")}}var gs=(()=>{class i{constructor(e,t,n){this.profitService=e,this.fb=t,this.snackbar=n,this.currentPage=0,this.pageSize=5,this.pageSizeOptions=[1,5,10,25,50],this.totalElements=0,this.startIndex=0,this.endIndex=0,this.isLoading=!1,this.destroy$=new G;let s=new Date,d=new Date(s.getFullYear(),s.getMonth(),1),u=new Date(s.getFullYear(),s.getMonth()+1,0);this.searchForm=this.fb.group({startDate:[this.formatDateForInput(d)],endDate:[this.formatDateForInput(u)]})}formatDateForInput(e){return e.toISOString().split("T")[0]}formatDateForApi(e,t){let n=new Date(e),s=n.getDate().toString().padStart(2,"0"),d=(n.getMonth()+1).toString().padStart(2,"0"),u=n.getFullYear();return`${s}-${d}-${u} ${t?"00:00:00":"23:59:59"}`}ngOnInit(){this.loadProfits()}loadProfits(){this.isLoading=!0;let e=this.searchForm.value,t={startDate:this.formatDateForApi(e.startDate,!0),endDate:this.formatDateForApi(e.endDate,!1)};this.profitService.getDailyProfits(t).pipe(O(this.destroy$)).subscribe({next:n=>{n.success?(this.profits=n.data,this.totalElements=n.data.totalElements,this.updatePaginationIndexes()):this.snackbar.error(n?.message||"Failed to load profits"),this.isLoading=!1},error:n=>{this.snackbar.error(n?.error?.message||"Failed to load profits"),this.isLoading=!1}})}onSearch(){this.loadProfits()}resetForm(){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);this.searchForm.patchValue({startDate:this.formatDateForInput(t),endDate:this.formatDateForInput(n)}),this.loadProfits()}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}getTotalGrossProfit(){return this.profits?.content.reduce((e,t)=>e+t.grossProfit,0)||0}getTotalNetProfit(){return this.profits?.content.reduce((e,t)=>e+t.netProfit,0)||0}getPageNumbers(){let e=this.profits?.totalPages||0,t=this.currentPage+1,n=5,s=Math.max(1,t-Math.floor(n/2)),d=s+n-1;d>e&&(d=e,s=Math.max(1,d-n+1));let u=[];for(let g=s;g<=d;g++)u.push(g);return u}loadPage(e){e>=0&&e<this.profits?.totalPages&&(this.currentPage=e,this.loadProfits())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(b(Vi),b(X),b(de))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-daily-profit"]],standalone:!0,features:[re],decls:58,vars:26,consts:[[1,"profit-container"],[3,"show"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"profits-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"totals-row"],["colspan","3",1,"text-end"],[3,"ngClass"],[1,"pagination"],[1,"btn-page",3,"click","disabled"],[1,"fas","fa-chevron-left"],["class","btn-page",3,"click",4,"ngIf"],["class","pagination-dots",4,"ngIf"],[1,"fas","fa-chevron-right"],[1,"btn-page",3,"click"],[1,"pagination-dots"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"h2"),c(4,"Daily Profits"),a(),o(5,"form",3),_("ngSubmit",function(){return n.onSearch()}),o(6,"div",4)(7,"div",5),m(8,"input",6),a(),o(9,"div",5),m(10,"input",7),a(),o(11,"div",8)(12,"button",9),m(13,"i",10),c(14," Search "),a(),o(15,"button",11),_("click",function(){return n.resetForm()}),m(16,"i",12),c(17," Reset "),a()()()()(),o(18,"div",13)(19,"div",14)(20,"table",15)(21,"thead")(22,"tr")(23,"th"),c(24,"#"),a(),o(25,"th"),c(26,"Date"),a(),o(27,"th"),c(28,"Total Expenses"),a(),o(29,"th"),c(30,"Gross Profit"),a(),o(31,"th"),c(32,"Net Profit"),a()()(),o(33,"tbody"),M(34,ap,15,25,"tr",16),a(),o(35,"tfoot")(36,"tr",17)(37,"td",18)(38,"strong"),c(39,"Totals:"),a()(),o(40,"td",19)(41,"strong"),c(42),ye(43,"number"),a()(),o(44,"td",19)(45,"strong"),c(46),ye(47,"number"),a()()()()()()(),o(48,"div",20)(49,"button",21),_("click",function(){return n.loadPage(n.currentPage-1)}),m(50,"i",22),a(),M(51,sp,2,0,"button",23)(52,cp,2,0,"span",24)(53,lp,3,3,"ng-container",16)(54,dp,2,0,"span",24)(55,mp,2,1,"button",23),o(56,"button",21),_("click",function(){return n.loadPage(n.currentPage+1)}),m(57,"i",25),a()()()),t&2&&(l(),p("show",n.isLoading),l(4),p("formGroup",n.searchForm),l(29),p("ngForOf",n.profits==null?null:n.profits.content),l(6),p("ngClass",St(20,Ri,n.getTotalGrossProfit()>0,n.getTotalGrossProfit()<0)),l(2),E(Ee(43,14,n.getTotalGrossProfit(),"1.2-2")),l(2),p("ngClass",St(23,Ri,n.getTotalNetProfit()>0,n.getTotalNetProfit()<0)),l(2),E(Ee(47,17,n.getTotalNetProfit(),"1.2-2")),l(3),p("disabled",n.currentPage===0),l(2),p("ngIf",n.currentPage+1>3),l(),p("ngIf",n.currentPage+1>3),l(),p("ngForOf",n.getPageNumbers()),l(),p("ngIf",n.currentPage+1<(n.profits==null?null:n.profits.totalPages)-2),l(),p("ngIf",n.currentPage+1<(n.profits==null?null:n.profits.totalPages)-2),l(),p("disabled",n.currentPage===(n.profits==null?null:n.profits.totalPages)-1))},dependencies:[le,ce,Oe,K,bt,ut,ue,ee,W,Z,J,te,oe,Ue,me],styles:[".profit-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;background-color:var(--background)}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:first-child{margin-top:0}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.profit-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:baseline}.profit-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--text-secondary)}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80px;padding:5px;border-radius:4px;border:1px solid var(--supporting);background-color:#fff;color:var(--text-primary)}.profit-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{width:100%;margin:0;overflow-x:auto}.profit-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.profit-container[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:var(--accent2)!important}.profit-container[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:var(--primary)!important}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:var(--text-secondary)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;gap:5px}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid var(--supporting);background:#fff;cursor:pointer;border-radius:4px;color:var(--text-primary);transition:all .3s ease}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--supporting)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;border-color:var(--primary)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:15px}}.profit-container[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background-color:var(--background)}.profit-container[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.profit-container[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td.text-end[_ngcontent-%COMP%]{text-align:right}.form-control[_ngcontent-%COMP%]{padding:10px;border:1px solid var(--supporting);border-radius:4px;color:var(--text-primary)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px #fd782340}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#eb5d02}.pagination[_ngcontent-%COMP%]   .pagination-dots[_ngcontent-%COMP%]{padding:0 5px;color:var(--text-secondary)}"]})}}return i})();var ji=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${st.apiUrl}/api/attendance`}createAttendance(e){return this.http.post(`${this.apiUrl}/create`,e)}searchAttendance(e){return this.http.post(`${this.apiUrl}/search`,e)}deleteAttendances(e){return this.http.post(`${this.apiUrl}/delete`,{attendanceIds:e})}generatePdf(e){return this.http.post(`${this.apiUrl}/pdf`,e,{responseType:"blob",observe:"response"}).pipe(yn(t=>{let s=t.headers.get("Content-Disposition")?.split("filename=")[1]?.replace(/"/g,"")||"attendance.pdf";return{blob:new Blob([t.body],{type:"application/pdf"}),filename:s}}))}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function pp(i,r){i&1&&(o(0,"span"),c(1," End date must be the same as start date "),a())}function up(i,r){i&1&&(o(0,"span"),c(1," End time cannot be before start time "),a())}function gp(i,r){if(i&1&&(o(0,"div",31),M(1,pp,2,0,"span",32)(2,up,2,0,"span",32),a()),i&2){let e,t,n=f();l(),p("ngIf",(e=n.attendanceForm.get("endDateTime"))==null||e.errors==null?null:e.errors.sameDayRequired),l(),p("ngIf",(t=n.attendanceForm.get("endDateTime"))==null||t.errors==null?null:t.errors.endTimeBeforeStart)}}var hs=(()=>{class i{constructor(e,t,n,s,d,u){this.fb=e,this.attendanceService=t,this.employeeService=n,this.router=s,this.snackbar=d,this.dateUtils=u,this.employees=[],this.isLoading=!1,this.isLoadingEmployees=!1,this.destroy$=new G,this.subscriptions=[],this.initializeForm()}ngOnInit(){this.loadEmployees()}initializeForm(){let e=new Date,t=this.setDefaultTime(e,15,0),n=this.setDefaultTime(e,23,0);this.attendanceForm=this.fb.group({employeeIds:["",S.required],startDateTime:[t,S.required],endDateTime:[n,[S.required,this.validateEndDateTime.bind(this)]],remarks:[""]});let s=this.attendanceForm.get("startDateTime")?.valueChanges.pipe(O(this.destroy$)).subscribe(()=>{this.attendanceForm.get("endDateTime")?.updateValueAndValidity()});s&&this.subscriptions.push(s)}setDefaultTime(e,t,n){let s=new Date(e),d=t-5.5;s.setHours(d,n,0,0);let u=s.getFullYear(),g=String(s.getMonth()+1).padStart(2,"0"),h=String(s.getDate()).padStart(2,"0"),P=String(s.getHours()).padStart(2,"0"),k=String(s.getMinutes()).padStart(2,"0");return`${u}-${g}-${h}T${P}:${k}`}validateEndDateTime(e){if(!e.value)return null;let t=this.attendanceForm?.get("startDateTime")?.value;if(!t)return null;let n=new Date(t),s=new Date(e.value);return n.toDateString()!==s.toDateString()?{sameDayRequired:!0}:s<n?{endTimeBeforeStart:!0}:null}loadEmployees(){this.isLoadingEmployees=!0;let e=this.employeeService.getAllEmployees().pipe(O(this.destroy$)).subscribe({next:t=>{t.success&&(this.employees=t.data),this.isLoadingEmployees=!1},error:()=>{this.snackbar.error("Failed to load employees"),this.isLoadingEmployees=!1}});this.subscriptions.push(e)}selectAllEmployees(){let e=this.employees.map(t=>t.id);this.attendanceForm.patchValue({employeeIds:e})}clearEmployeeSelection(){this.attendanceForm.patchValue({employeeIds:[]})}onSubmit(){if(this.attendanceForm.valid){this.isLoading=!0;let e=Me({},this.attendanceForm.value);e.startDateTime=this.dateUtils.formatDateTimeForApi(e.startDateTime),e.endDateTime=this.dateUtils.formatDateTimeForApi(e.endDateTime);let t=this.attendanceService.createAttendance(e).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&this.snackbar.success("Attendance created successfully"),this.isLoading=!1,this.attendanceForm.reset(),this.initializeForm()},error:n=>{this.snackbar.error(n?.error?.message||"Failed to create attendance"),this.isLoading=!1}});this.subscriptions.push(t)}}refreshEmployees(){this.isLoadingEmployees=!0;let e=this.employeeService.refreshEmployees().pipe(O(this.destroy$)).subscribe({next:t=>{t.success&&(this.employees=t.data,this.snackbar.success("Employees refreshed successfully")),this.isLoadingEmployees=!1},error:()=>{this.snackbar.error("Failed to refresh employees"),this.isLoadingEmployees=!1}});this.subscriptions.push(e)}getMaxEndDateTime(){let e=this.attendanceForm.get("startDateTime")?.value;if(!e)return"";let t=new Date(e),n=new Date(t);return n.setHours(23,59,59),this.dateUtils.formatDateTimeForInput(n)}isFieldInvalid(e){let t=this.attendanceForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.employees=[],this.attendanceForm&&this.attendanceForm.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(ji),b(Vt),b(be),b(de),b(Ft))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-create-attendance"]],standalone:!0,features:[wo([Ft]),re],decls:52,vars:13,consts:[[1,"attendance-form-container"],[3,"show"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-clock"],[1,"attendance-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],[1,"fas","fa-users"],[1,"required"],[1,"employee-select-group"],["formControlName","employeeIds","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder","multiple"],[1,"button-group"],["type","button","title","Select All Employees",1,"btn-icon","select-all",3,"click"],[1,"fas","fa-check-double"],["type","button","title","Clear Selection",1,"btn-icon","clear",3,"click"],[1,"fas","fa-times"],["type","button","title","Refresh Employees",1,"btn-icon","refresh",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"fas","fa-hourglass-start"],["type","datetime-local","formControlName","startDateTime",1,"form-control"],[1,"fas","fa-hourglass-end"],["type","datetime-local","formControlName","endDateTime",1,"form-control",3,"max"],["class","invalid-feedback",4,"ngIf"],[1,"fas","fa-comment"],["formControlName","remarks","rows","3","placeholder","Enter remarks (optional)",1,"form-control"],[1,"form-actions"],["type","button","routerLink","/attendance",1,"btn","btn-sm","btn-secondary"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"fas","fa-save"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"div",3)(4,"h2",4),m(5,"i",5),c(6," Create Attendance "),a()(),o(7,"form",6),_("ngSubmit",function(){return n.onSubmit()}),o(8,"div",7)(9,"div",8)(10,"label"),m(11,"i",9),c(12," Employees "),o(13,"span",10),c(14,"*"),a()(),o(15,"div",11),m(16,"app-searchable-select",12),o(17,"div",13)(18,"button",14),_("click",function(){return n.selectAllEmployees()}),m(19,"i",15),a(),o(20,"button",16),_("click",function(){return n.clearEmployeeSelection()}),m(21,"i",17),a(),o(22,"button",18),_("click",function(){return n.refreshEmployees()}),m(23,"i",19),a()()()()(),o(24,"div",7)(25,"div",8)(26,"label"),m(27,"i",20),c(28," Start Time "),o(29,"span",10),c(30,"*"),a()(),m(31,"input",21),a(),o(32,"div",8)(33,"label"),m(34,"i",22),c(35," End Time "),o(36,"span",10),c(37,"*"),a()(),m(38,"input",23),M(39,gp,3,2,"div",24),a()(),o(40,"div",8)(41,"label"),m(42,"i",25),c(43," Remarks "),a(),m(44,"textarea",26),a(),o(45,"div",27)(46,"button",28),m(47,"i",17),c(48," Cancel "),a(),o(49,"button",29),m(50,"i",30),c(51," Save "),a()()()()()),t&2&&(l(),p("show",n.isLoading),l(6),p("formGroup",n.attendanceForm),l(9),p("options",n.employees)("placeholder","Select Employees")("searchPlaceholder","Search employees...")("multiple",!0),l(6),p("disabled",n.isLoadingEmployees),l(),p("ngClass",n.isLoadingEmployees?"fa-spinner fa-spin":"fa-sync-alt"),l(15),F("is-invalid",n.isFieldInvalid("endDateTime")),p("max",n.getMaxEndDateTime()),l(),p("ngIf",n.isFieldInvalid("endDateTime")),l(10),p("disabled",n.attendanceForm.invalid||n.isLoading))},dependencies:[le,ce,K,ue,ee,W,Z,J,te,oe,Ue,Je,me,Ve],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.attendance-form-container[_ngcontent-%COMP%]{padding:1.5rem;margin:0 auto;max-width:1200px}.attendance-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;overflow:hidden}.attendance-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.attendance-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]{padding:2rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-bottom:1.5rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545;margin-left:4px}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{padding:.75rem;height:42px;width:42px;display:flex;align-items:center;justify-content:center;border:1px solid var(--supporting);border-radius:8px;background:#fff;transition:all .3s ease}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.select-all[_ngcontent-%COMP%]{color:var(--accent2)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.select-all[_ngcontent-%COMP%]:hover{background:var(--accent2)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.clear[_ngcontent-%COMP%]{color:var(--text-secondary)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.clear[_ngcontent-%COMP%]:hover{background:var(--text-secondary)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{color:#fff}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]{color:var(--primary);border:1px solid var(--supporting);background:#fff;transition:all .3s ease}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff;transform:rotate(180deg);box-shadow:0 2px 4px #0000001a}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem}"]})}}return i})();var fp=(i,r)=>({active:i,inactive:r});function hp(i,r){if(i&1){let e=N();o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),a(),o(9,"td"),c(10),a(),o(11,"td")(12,"span",23),c(13),a()(),o(14,"td",24)(15,"button",25),_("click",function(){let n=v(e).$implicit,s=f();return x(s.viewAttendanceDetails(n.id))}),m(16,"i",26),a()()()}if(i&2){let e=r.$implicit;l(2),E(e.name),l(2),E(e.mobileNumber),l(2),E(e.email),l(2),E(e.designation),l(2),E(e.department),l(2),p("ngClass",St(7,fp,e.status==="A",e.status!=="A")),l(),T(" ",e.status==="A"?"Active":"Inactive"," ")}}function _p(i,r){i&1&&(o(0,"tr")(1,"td",27),c(2,"No employees found"),a()())}function Cp(i,r){if(i&1){let e=N();o(0,"app-pagination",28),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var _s=(()=>{class i{constructor(e,t,n,s,d){this.employeeService=e,this.fb=t,this.snackbar=n,this.router=s,this.encryptionService=d,this.employees=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.destroy$=new G,this.subscriptions=[],this.initializeForm()}ngOnInit(){this.loadEmployees()}initializeForm(){this.searchForm=this.fb.group({search:[""]})}loadEmployees(){this.isLoading=!0;let e=lt(Me({},this.searchForm.value),{page:this.currentPage,size:this.pageSize}),t=this.employeeService.searchEmployees(e).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.employees=n.data.content,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements,this.updatePaginationIndexes()),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load employees"),this.isLoading=!1}});this.subscriptions.push(t)}onSearch(){this.currentPage=0,this.pageSize=10,this.loadEmployees()}resetForm(){this.searchForm.reset(),this.currentPage=0,this.pageSize=10,this.loadEmployees()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadEmployees()}deleteEmployee(e){if(confirm("Are you sure you want to delete this employee?")){this.isLoading=!0;let t=this.employeeService.deleteEmployee(e).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.snackbar.success("Employee deleted successfully"),this.loadEmployees())},error:n=>{this.snackbar.error(n?.error?.message||"Failed to delete employee"),this.isLoading=!1}});this.subscriptions.push(t)}}onPageChange(e){e>=0&&e<this.totalPages&&(this.currentPage=e,this.loadEmployees())}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}viewAttendanceDetails(e){this.isLoading=!0;let t=this.employeeService.getEmployeeDetail(e).pipe(O(this.destroy$)).subscribe({next:n=>{if(n.success){let s=this.encryptionService.encrypt(JSON.stringify(n.data));localStorage.setItem("selectedEmployee",s),this.router.navigate(["/attendance/details"])}this.isLoading=!1},error:n=>{this.snackbar.error(n.message||"Failed to load employee details"),this.isLoading=!1}});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.employees=[],this.searchForm&&this.searchForm.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(Vt),b(X),b(de),b(be),b(Xe))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-attendance-list"]],standalone:!0,features:[re],decls:47,vars:7,consts:[[1,"employee-container"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search employees...",1,"form-control"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"action-buttons"],["routerLink","/attendance/create",1,"btn","btn-sm","btn-primary"],[1,"fas","fa-plus"],[1,"employees-list","card"],[1,"table-wrapper"],[1,"table-container"],[3,"show"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"status-badge",3,"ngClass"],[1,"actions"],["title","Employee Attendance details",1,"btn-icon","view",3,"click"],[1,"fas","fa-eye"],["colspan","8",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Search Employees"),a(),o(4,"form",2),_("ngSubmit",function(){return n.onSearch()}),o(5,"div",3)(6,"div",4),m(7,"input",5),a(),o(8,"div",6)(9,"button",7),m(10,"i",8),c(11," Search "),a(),o(12,"button",9),_("click",function(){return n.resetForm()}),m(13,"i",10),c(14," Reset "),a()()()()(),o(15,"div",11)(16,"button",12),m(17,"i",13),c(18," Add Attendance "),a()(),o(19,"div",14)(20,"h2"),c(21,"Attendance"),a(),o(22,"div",15)(23,"div",16),m(24,"app-loader",17),o(25,"div",18)(26,"table",19)(27,"thead")(28,"tr")(29,"th"),c(30,"Name"),a(),o(31,"th"),c(32,"Mobile"),a(),o(33,"th"),c(34,"Email"),a(),o(35,"th"),c(36,"Designation"),a(),o(37,"th"),c(38,"Department"),a(),o(39,"th"),c(40,"Status"),a(),o(41,"th"),c(42,"Actions"),a()()(),o(43,"tbody"),M(44,hp,17,10,"tr",20)(45,_p,3,0,"tr",21),a()()()()(),M(46,Cp,1,4,"app-pagination",22),a()()),t&2&&(l(4),p("formGroup",n.searchForm),l(20),p("show",n.isLoading),l(),F("loading",n.isLoading),l(19),p("ngForOf",n.employees),l(),p("ngIf",!(n.employees!=null&&n.employees.length)),l(),p("ngIf",n.totalPages>0))},dependencies:[le,ce,Oe,K,Fe,Ve,ue,ee,W,Z,J,te,oe,Ue,me,He],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.employee-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background)}.employee-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.employee-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:start}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:43px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px}.employee-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin:20px 0}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--text-secondary)}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80px;padding:5px;border-radius:4px;border:1px solid var(--supporting);background-color:#fff;color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative;min-height:200px;background:#fff}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;width:100%}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;min-height:200px;overflow-x:auto}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--supporting);border-radius:4px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#97a3ab}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;padding:15px 12px;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px;background-color:var(--background);color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;border-top:1px solid var(--supporting);color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:.85rem;font-weight:500}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;border-radius:4px;transition:all .2s ease}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:rgba(var(--secondary-rgb),.1);padding:8px;border-radius:6px}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a;padding:8px;border-radius:6px}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.employee-container[_ngcontent-%COMP%]{padding:10px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin:0 -15px;padding:0 15px}}"]})}}return i})();function bp(i,r){if(i&1){let e=N();o(0,"div",1),_("click",function(){v(e);let n=f();return x(n.onCancel())}),o(1,"div",2),_("click",function(n){return v(e),x(n.stopPropagation())}),o(2,"div",3)(3,"h3"),c(4),a()(),o(5,"div",4)(6,"p"),c(7),a()(),o(8,"div",5)(9,"button",6),_("click",function(){v(e);let n=f();return x(n.onCancel())}),m(10,"i",7),c(11," No "),a(),o(12,"button",8),_("click",function(){v(e);let n=f();return x(n.onConfirm())}),m(13,"i",9),c(14," Yes "),a()()()()}if(i&2){let e=f();l(4),E(e.title),l(3),E(e.message)}}var $i=(()=>{class i{constructor(){this.show=!1,this.title="Confirm Delete",this.message="Are you sure you want to delete this item?",this.confirm=new An,this.cancel=new An}onConfirm(){this.confirm.emit()}onCancel(){this.cancel.emit()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=Q({type:i,selectors:[["app-confirm-modal"]],inputs:{show:"show",title:"title",message:"message"},outputs:{confirm:"confirm",cancel:"cancel"},standalone:!0,features:[re],decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-check"]],template:function(t,n){t&1&&M(0,bp,15,2,"div",0),t&2&&p("ngIf",n.show)},dependencies:[le,K],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:400px;box-shadow:0 4px 6px #0000001a;animation:modalIn .2s ease-out}.modal-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #dee2e6}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary)}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-primary)}.modal-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;gap:1rem}"],data:{animation:[ln("modalAnimation",[kt(":enter",[dt({opacity:0,transform:"translateY(-20px)"}),Et("200ms ease-out",dt({opacity:1,transform:"translateY(0)"}))]),kt(":leave",[Et("150ms ease-in",dt({opacity:0,transform:"translateY(-20px)"}))])])]}})}}return i})();var Pp=(i,r,e)=>({empty:i,"has-attendance":r,wednesday:e});function Mp(i,r){if(i&1&&(o(0,"div",5),c(1),a()),i&2){let e=r.$implicit;l(),E(e)}}function yp(i,r){if(i&1&&(o(0,"span",11),c(1),a()),i&2){let e=f().$implicit;l(),T(" ",e.attendance.startTime," ")}}function Op(i,r){if(i&1&&(o(0,"div",8)(1,"span",9),c(2),ye(3,"date"),a(),M(4,yp,2,1,"span",10),a()),i&2){let e=r.$implicit,t=f(2);p("ngClass",ei(7,Pp,!e,e==null?null:e.attendance,(e==null?null:e.date.getDay())===3))("title",t.getTooltipText(e)),l(2),E(Ee(3,4,e==null?null:e.date,"d")),l(2),p("ngIf",e==null?null:e.attendance)}}function vp(i,r){if(i&1&&(o(0,"div",6),M(1,Op,5,11,"div",7),a()),i&2){let e=r.$implicit;l(),p("ngForOf",e)}}var Cs=(()=>{class i{constructor(){this.attendanceRecords=[],this.currentMonth=new Date,this.calendar=[],this.weekDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.attendanceDays={}}ngOnChanges(){this.processAttendanceRecords(),this.generateCalendar()}processAttendanceRecords(){this.attendanceDays={},this.attendanceRecords.forEach(e=>{let t=new Date(e.startDateTime),n=this.formatDate(t);this.attendanceDays[n]={date:n,startTime:new Date(e.startDateTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),endTime:new Date(e.endDateTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}})}generateCalendar(){let e=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),1),t=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,0);this.calendar=[];let n=[];for(let s=0;s<e.getDay();s++)n.push(null);for(let s=1;s<=t.getDate();s++){n.length===7&&(this.calendar.push(n),n=[]);let d=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),s);n.push({date:d,attendance:this.attendanceDays[this.formatDate(d)]})}for(;n.length<7;)n.push(null);this.calendar.push(n)}formatDate(e){return`${String(e.getDate()).padStart(2,"0")}-${String(e.getMonth()+1).padStart(2,"0")}-${e.getFullYear()}`}isWednesday(e){return e&&e.getDay()===3}getTooltipText(e){return e?.attendance?`Time: ${e.attendance.startTime} - ${e.attendance.endTime}`:""}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=Q({type:i,selectors:[["app-calendar-view"]],inputs:{attendanceRecords:"attendanceRecords",currentMonth:"currentMonth"},standalone:!0,features:[ho,re],decls:5,vars:2,consts:[[1,"calendar-container"],[1,"calendar-header"],["class","weekday",4,"ngFor","ngForOf"],[1,"calendar-body"],["class","week",4,"ngFor","ngForOf"],[1,"weekday"],[1,"week"],["class","day",3,"ngClass","title",4,"ngFor","ngForOf"],[1,"day",3,"ngClass","title"],[1,"date"],["class","time",4,"ngIf"],[1,"time"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),M(2,Mp,2,1,"div",2),a(),o(3,"div",3),M(4,vp,2,1,"div",4),a()()),t&2&&(l(2),p("ngForOf",n.weekDays),l(2),p("ngForOf",n.calendar))},dependencies:[le,ce,Oe,K,ut],styles:[".calendar-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;box-shadow:0 2px 4px #0000001a;margin:1rem auto;max-width:600px;width:100%}.calendar-container[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:8px}.calendar-container[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .weekday[_ngcontent-%COMP%]{text-align:center;font-weight:600;color:var(--text-secondary);padding:6px;font-size:.75rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]{display:grid;gap:4px}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:4px;padding:4px;font-size:.75rem;transition:all .3s ease;border:1px solid var(--border)}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day.empty[_ngcontent-%COMP%]{background:transparent;border:none}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day.has-attendance[_ngcontent-%COMP%]{background-color:var(--accent1);color:#fff;border-color:var(--accent1)}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day.has-attendance[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#ffffffe6}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day.wednesday[_ngcontent-%COMP%]:not(.has-attendance){border-color:var(--primary);background-color:var(--primary-light);color:var(--primary)}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-weight:500;font-size:.875rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.65rem;margin-top:2px}@media (max-width: 768px){.calendar-container[_ngcontent-%COMP%]{margin:1rem;padding:.75rem;aspect-ratio:auto}.calendar-container[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .weekday[_ngcontent-%COMP%]{padding:4px;font-size:.75rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-size:.75rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:.875rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.7rem}}"]})}}return i})();var xp=i=>({show:i}),Sp=i=>({active:i});function wp(i,r){if(i&1&&(o(0,"div",33)(1,"div",34)(2,"div",35)(3,"label"),c(4,"Name:"),a(),o(5,"span"),c(6),a()(),o(7,"div",35)(8,"label"),c(9,"Email:"),a(),o(10,"span"),c(11),a()()(),o(12,"div",34)(13,"div",35)(14,"label"),c(15,"Mobile:"),a(),o(16,"span"),c(17),a()(),o(18,"div",35)(19,"label"),c(20,"Department:"),a(),o(21,"span"),c(22),a()()(),o(23,"div",34)(24,"div",35)(25,"label"),c(26,"Designation:"),a(),o(27,"span"),c(28),a()(),o(29,"div",35)(30,"label"),c(31,"Status:"),a(),o(32,"span",36),c(33),a()()()()),i&2){let e=f();l(6),E(e.employee==null?null:e.employee.name),l(5),E(e.employee.email||"N/A"),l(6),E(e.employee.mobileNumber||"N/A"),l(5),E(e.employee.department||"N/A"),l(6),E(e.employee.designation||"N/A"),l(4),p("ngClass",yt(7,Sp,e.employee.status==="A")),l(),T(" ",e.employee.status==="A"?"Active":"Inactive"," ")}}function Ep(i,r){if(i&1){let e=N();o(0,"tr")(1,"td")(2,"input",28),_("change",function(){let n=v(e).$implicit,s=f();return x(s.toggleSelection(n.id))}),a()(),o(3,"td"),c(4),ye(5,"date"),a(),o(6,"td"),c(7),ye(8,"date"),a(),o(9,"td"),c(10),ye(11,"date"),a(),o(12,"td"),c(13),a(),o(14,"td"),c(15),a(),o(16,"td"),c(17),a(),o(18,"td"),c(19),a(),o(20,"td"),c(21),a(),o(22,"td"),c(23),a()()}if(i&2){let e=r.$implicit,t=f();l(2),p("checked",t.selectedAttendances.includes(e.id)),l(2),E(Ee(5,10,e.startDateTime,"dd-MM-yyyy")),l(3),E(Ee(8,13,e.startDateTime,"HH:mm")),l(3),E(Ee(11,16,e.endDateTime,"HH:mm")),l(3),E(e.regularHours),l(2),E(e.regularPay),l(2),E(e.overtimeHours),l(2),E(e.overtimePay),l(2),E(e.totalPay),l(2),E(e.remarks)}}function kp(i,r){i&1&&(o(0,"tr")(1,"td",37),c(2,"No attendance records found"),a()())}function Tp(i,r){if(i&1){let e=N();o(0,"app-pagination",38),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var bs=(()=>{class i{constructor(e,t,n,s,d,u){this.employeeService=e,this.attendanceService=t,this.router=n,this.snackbar=s,this.encryptionService=d,this.fb=u,this.attendanceRecords=[],this.isLoading=!1,this.pageSizeOptions=[2,5,10,25,50,100],this.currentPage=0,this.pageSize=10,this.totalPages=0,this.totalElements=0,this.selectedAttendances=[],this.selectAll=!1,this.showDeleteModal=!1,this.startDate=new Tt(""),this.endDate=new Tt(""),this.attendanceDates=[],this.destroy$=new G,this.subscriptions=[],this.initializeDateFilter()}ngOnInit(){this.loadEmployeeDetails()}loadEmployeeDetails(){let e=localStorage.getItem("selectedEmployee");if(!e){this.router.navigate(["/attendance"]);return}try{this.employee=JSON.parse(this.encryptionService.decrypt(e)),this.loadAttendanceRecords()}catch{this.snackbar.error("Failed to load employee details"),this.router.navigate(["/attendance"])}}initializeDateFilter(){let e=new Date,t=e.getFullYear(),n=e.getMonth(),s=new Date(t,n,1),d=new Date(t,n+1,0),u=this.formatDateForInput(s),g=this.formatDateForInput(d);this.startDate.setValue(u),this.endDate.setValue(g);let h=lo(this.startDate.valueChanges,this.endDate.valueChanges).pipe(gt(300),O(this.destroy$)).subscribe(()=>{this.startDate.value&&this.endDate.value&&(this.currentPage=0,this.loadAttendanceRecords())});this.subscriptions.push(h)}formatDateForInput(e){let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${s}`}formatDateForApi(e){let t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}-${String(t.getMonth()+1).padStart(2,"0")}-${t.getFullYear()}`}loadAttendanceRecords(){this.isLoading=!0;let e={employeeId:this.employee.id,page:this.currentPage,size:this.pageSize,startDate:this.formatDateForApi(this.startDate.value||""),endDate:this.formatDateForApi(this.endDate.value||"")},t=this.attendanceService.searchAttendance(e).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.attendanceRecords=n.data.content,this.calculateTotalPayAndHours(),this.attendanceDates=this.attendanceRecords.map(s=>this.formatDateForApi(s.startDateTime)),this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load attendance records"),this.isLoading=!1}});this.subscriptions.push(t)}calculateTotal(e){return e.reduce((t,n)=>t+n,0)}calculateTotalPayAndHours(){let e=this.attendanceRecords.map(u=>u.regularHours),t=this.attendanceRecords.map(u=>u.regularPay),n=this.attendanceRecords.map(u=>u.overtimeHours),s=this.attendanceRecords.map(u=>u.overtimePay),d=this.attendanceRecords.map(u=>u.totalPay);this.totalRegularHours=this.calculateTotal(e),this.totalRegularPay=this.calculateTotal(t),this.totalOvertimeHours=this.calculateTotal(n),this.totalOvertimePay=this.calculateTotal(s),this.totalOfTotalPay=this.calculateTotal(d)}onPageChange(e){this.currentPage=e,this.loadAttendanceRecords()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadAttendanceRecords()}toggleSelectAll(){this.selectAll=!this.selectAll,this.selectedAttendances=this.selectAll?this.attendanceRecords.map(e=>e.id):[]}toggleSelection(e){let t=this.selectedAttendances.indexOf(e);t===-1?this.selectedAttendances.push(e):this.selectedAttendances.splice(t,1),this.selectAll=this.selectedAttendances.length===this.attendanceRecords.length}deleteSelected(){if(!this.selectedAttendances.length){this.snackbar.error("Please select records to delete");return}this.showDeleteModal=!0}onConfirmDelete(){this.isLoading=!0;let e=this.attendanceService.deleteAttendances(this.selectedAttendances).pipe(O(this.destroy$)).subscribe({next:t=>{t.success&&(this.snackbar.success("Records deleted successfully"),this.selectedAttendances=[],this.selectAll=!1,this.loadAttendanceRecords()),this.showDeleteModal=!1,this.isLoading=!1},error:t=>{this.snackbar.error(t.message||"Failed to delete records"),this.showDeleteModal=!1,this.isLoading=!1}});this.subscriptions.push(e)}onCancelDelete(){this.showDeleteModal=!1}getCurrentMonth(){return this.startDate.value?new Date(this.startDate.value):new Date}downloadAttendance(){if(!this.startDate.value){this.snackbar.error("Please select start date");return}this.isLoading=!0;let e={employeeId:this.employee.id,startDate:this.formatDateForApi(this.startDate.value)},t=this.attendanceService.generatePdf(e).pipe(O(this.destroy$)).subscribe({next:n=>{let s=window.URL.createObjectURL(n.blob),d=document.createElement("a");d.href=s,d.download=n.filename,d.click(),window.URL.revokeObjectURL(s),this.isLoading=!1},error:n=>{this.snackbar.error("Failed to download attendance report"),this.isLoading=!1}});this.subscriptions.push(t)}printAttendance(){if(!this.startDate.value){this.snackbar.error("Please select start date");return}this.isLoading=!0;let e={employeeId:this.employee.id,startDate:this.formatDateForApi(this.startDate.value)},t=this.attendanceService.generatePdf(e).pipe(O(this.destroy$)).subscribe({next:n=>{let s=n.blob,d=window.URL.createObjectURL(s),u=document.createElement("iframe");u.style.display="none",u.src=d,document.body.appendChild(u),u.onload=()=>{setTimeout(()=>{try{u.contentWindow?.print(),this.isLoading=!1}catch{this.snackbar.error("Failed to open print dialog"),this.isLoading=!1}},1e3),setTimeout(()=>{document.body.contains(u)&&document.body.removeChild(u),window.URL.revokeObjectURL(d)},5e3)}},error:n=>{this.snackbar.error("Failed to generate attendance report"),this.isLoading=!1}});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.attendanceRecords=[],this.attendanceDates=[],this.selectedAttendances=[],this.startDate.reset(),this.endDate.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(Vt),b(ji),b(be),b(de),b(Xe),b(X))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-attendance-detail"]],standalone:!0,features:[re],decls:91,vars:27,consts:[[1,"attendance-detail-container"],[3,"show"],[1,"employee-info","card"],[1,"card-header"],[1,"fas","fa-user"],["routerLink","/attendance",1,"btn","btn-secondary"],[1,"fas","fa-arrow-left"],["class","employee-details",4,"ngIf"],[1,"attendance-records","card"],[1,"header-actions"],[1,"header-left"],[1,"fas","fa-clock"],[1,"date-filter"],[1,"date-inputs"],[1,"form-group"],[1,"fas","fa-calendar-alt"],["type","date",1,"form-control",3,"formControl"],[1,"button-group"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"calendar-wrapper"],[3,"attendanceRecords","currentMonth"],[1,"btn","btn-danger","delete-btn",3,"click","ngClass"],[1,"fas","fa-trash"],[1,"table-wrapper"],[1,"table-responsive"],[1,"table"],["type","checkbox",3,"change","checked"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],["title","Confirm Delete",3,"confirm","cancel","show","message"],[1,"employee-details"],[1,"detail-row"],[1,"detail-item"],[1,"status-badge",3,"ngClass"],["colspan","6",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"div",3)(4,"h2"),m(5,"i",4),c(6," Employee Details "),a(),o(7,"button",5),m(8,"i",6),c(9," Back "),a()(),M(10,wp,34,9,"div",7),a(),o(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2"),m(15,"i",11),c(16," Attendance Records "),a(),m(17,"br"),o(18,"div",12)(19,"div",13)(20,"div",14)(21,"label"),m(22,"i",15),c(23," From Date "),a(),m(24,"input",16),a(),o(25,"div",14)(26,"label"),m(27,"i",15),c(28," To Date "),a(),m(29,"input",16),a(),o(30,"div",17)(31,"button",18),_("click",function(){return n.downloadAttendance()}),m(32,"i",19),c(33),a(),o(34,"button",20),_("click",function(){return n.printAttendance()}),m(35,"i",19),c(36),a()()()()()(),o(37,"div",21),m(38,"app-calendar-view",22),a(),o(39,"button",23),_("click",function(){return n.deleteSelected()}),m(40,"i",24),c(41),a(),o(42,"div",25)(43,"div",26)(44,"table",27)(45,"thead")(46,"tr")(47,"th")(48,"input",28),_("change",function(){return n.toggleSelectAll()}),a()(),o(49,"th"),c(50,"Date"),a(),o(51,"th"),c(52,"Start Time"),a(),o(53,"th"),c(54,"End Time"),a(),o(55,"th"),c(56,"Regular Hours"),a(),o(57,"th"),c(58,"Regular Pay"),a(),o(59,"th"),c(60,"Overtime Hours"),a(),o(61,"th"),c(62,"Overtime Pay"),a(),o(63,"th"),c(64,"Total Pay"),a(),o(65,"th"),c(66,"Remarks"),a()()(),o(67,"tbody"),M(68,Ep,24,19,"tr",29)(69,kp,3,0,"tr",30),a(),o(70,"tfoot")(71,"tr")(72,"td")(73,"b"),c(74,"Total"),a()(),m(75,"td")(76,"td")(77,"td"),o(78,"td"),c(79),a(),o(80,"td"),c(81),a(),o(82,"td"),c(83),a(),o(84,"td"),c(85),a(),o(86,"td"),c(87),a(),m(88,"td"),a()()()()(),M(89,Tp,1,4,"app-pagination",31),a(),o(90,"app-confirm-modal",32),_("confirm",function(){return n.onConfirmDelete()})("cancel",function(){return n.onCancelDelete()}),a()()),t&2&&(l(),p("show",n.isLoading),l(9),p("ngIf",n.employee),l(14),p("formControl",n.startDate),l(5),p("formControl",n.endDate),l(2),p("disabled",n.isLoading||!n.startDate.value),l(),p("ngClass",n.isLoading?"fa-spinner fa-spin":"fa-download"),l(),T(" ",n.isLoading?"Downloading...":"Download"," "),l(),p("disabled",n.isLoading||!n.startDate.value),l(),p("ngClass",n.isLoading?"fa-spinner fa-spin":"fa-print"),l(),T(" ",n.isLoading?"Processing...":"Print"," "),l(2),p("attendanceRecords",n.attendanceRecords)("currentMonth",n.getCurrentMonth()),l(),p("ngClass",yt(25,xp,n.selectedAttendances.length>0)),l(2),T(" Delete Selected (",n.selectedAttendances.length,") "),l(7),p("checked",n.selectAll),l(20),p("ngForOf",n.attendanceRecords),l(),p("ngIf",!(n.attendanceRecords!=null&&n.attendanceRecords.length)),l(10),E(n.totalRegularHours),l(2),E(n.totalRegularPay),l(2),E(n.totalOvertimeHours),l(2),E(n.totalOvertimePay),l(2),E(n.totalOfTotalPay),l(2),p("ngIf",n.totalPages>0),l(),p("show",n.showDeleteModal)("message","Are you sure you want to delete "+n.selectedAttendances.length+" attendance record(s)?"))},dependencies:[le,ce,Oe,K,ut,me,Ve,He,Ue,W,Z,ue,Ro,$i,Cs],styles:[".attendance-detail-container[_ngcontent-%COMP%]{padding:20px;margin:0 auto}.attendance-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 4px #0000001a;padding:20px;margin-bottom:20px}.attendance-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.attendance-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.5rem}.attendance-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary);margin-right:8px}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:15px}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{flex:1}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);margin-right:8px}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-primary)}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.875rem}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:var(--success-light);color:var(--success)}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:var(--danger-light);color:var(--danger)}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{margin:20px 0}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--border)}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--background);color:var(--text-secondary);font-weight:600}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--text-primary)}@media (max-width: 768px){.attendance-detail-container[_ngcontent-%COMP%]{padding:10px}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.attendance-detail-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}}.delete-btn[_ngcontent-%COMP%]{display:none;align-items:center;gap:8px;background-color:#dc3545;color:#fff;border:none;padding:8px 16px;border-radius:4px;transition:all .3s ease;opacity:0;transform:translateY(10px);cursor:pointer}.delete-btn.show[_ngcontent-%COMP%]{display:flex;opacity:1;transform:translateY(0)}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c82333;transform:translateY(-1px)}.delete-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding:.5rem 0}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-end;flex-wrap:wrap}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;height:42px}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media (max-width: 992px){.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}}@media (max-width: 768px){.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-width:unset}}input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.calendar-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1rem;background:var(--background);border-radius:12px;margin:1rem 0}.button-group[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;height:42px}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}"]})}}return i})();function Ip(i,r){i&1&&(o(0,"div",53),c(1," Customer is required "),a())}function Fp(i,r){i&1&&(o(0,"div",53),c(1," Sale date is required "),a())}function Dp(i,r){i&1&&(o(0,"div",53),c(1," Packaging and forwarding charges is required and must be 0 or greater "),a())}function Ap(i,r){i&1&&(o(0,"div",53),c(1," Please select a product "),a())}function Np(i,r){i&1&&(o(0,"div",53),c(1," Quantity must be 1 or greater "),a())}function Lp(i,r){i&1&&(o(0,"div",53),c(1," Double quotes are not allowed "),a())}function Vp(i,r){i&1&&(o(0,"div",53),c(1," Unit price must be greater than 0 "),a())}function zp(i,r){if(i&1){let e=N();o(0,"tr",54)(1,"td")(2,"div",55)(3,"div",14),m(4,"app-searchable-select",56),o(5,"button",57),_("click",function(){v(e);let n=f();return x(n.refreshProducts())}),m(6,"i",17),a()(),M(7,Ap,2,0,"div",18),a()(),o(8,"td")(9,"div",55),m(10,"input",58),M(11,Np,2,0,"div",18),a()(),o(12,"td")(13,"div",55),m(14,"input",59),M(15,Lp,2,0,"div",18),a()(),o(16,"td")(17,"div",55)(18,"div",34)(19,"span",35),c(20,"\u20B9"),a(),m(21,"input",60),a(),M(22,Vp,2,0,"div",18),a()(),o(23,"td")(24,"div",34),m(25,"input",61),a()(),o(26,"td")(27,"div",34),m(28,"input",62),a()(),o(29,"td")(30,"div",55),m(31,"input",63),a()(),o(32,"td")(33,"button",64),_("click",function(){let n=v(e).index,s=f();return x(s.removeProduct(n))}),m(34,"i",65),a()()()}if(i&2){let e,t=r.index,n=f();p("formGroupName",t),l(4),F("is-invalid",n.isProductFieldInvalid(t,"productId")),p("focusWidthPx",600)("options",n.products)("placeholder","Select Product")("searchPlaceholder","Search products..."),l(),p("disabled",n.isLoadingProducts),l(),p("ngClass",n.isLoadingProducts?"fa-spinner fa-spin":"fa-sync-alt"),l(),p("ngIf",n.isProductFieldInvalid(t,"productId")),l(3),F("is-invalid",n.isProductFieldInvalid(t,"quantity")),l(),p("ngIf",n.isProductFieldInvalid(t,"quantity")),l(3),F("is-invalid",n.isProductFieldInvalid(t,"batchNumber")),l(),p("ngIf",(e=n.productsFormArray.at(t).get("batchNumber"))==null||e.errors==null?null:e.errors.doubleQuotes),l(6),F("is-invalid",n.isProductFieldInvalid(t,"unitPrice")),l(),p("ngIf",n.isProductFieldInvalid(t,"unitPrice")),l(3),p("value",n.getFormattedPrice(t)),l(3),p("value",n.getFormattedTaxAmount(t)),l(5),p("disabled",n.productsFormArray.length===1)}}function Rp(i,r){i&1&&m(0,"app-loader")}var Ps=(()=>{class i{get productsFormArray(){return this.saleForm.get("products")}trackByProductIndex(e,t){return t}constructor(e,t,n,s,d,u,g,h,P){this.fb=e,this.productService=t,this.customerService=n,this.saleService=s,this.snackbar=d,this.http=u,this.router=g,this.encryptionService=h,this.cdr=P,this.products=[],this.customers=[],this.loading=!1,this.isLoadingProducts=!1,this.isLoadingCustomers=!1,this.isEdit=!1,this.destroy$=new G,this.productSubscriptions=[],this.productMap=new Map,this.totalAmount=0,this.totalTaxAmount=0,this.grandTotal=0,this.initForm()}ngOnInit(){this.loadProducts(),this.loadCustomers(),this.saleForm.get("packagingAndForwadingCharges")?.valueChanges.pipe(O(this.destroy$),gt(150)).subscribe(()=>{this.calculateTotalAmount(),this.cdr.markForCheck()});let e=localStorage.getItem("saleId");if(e){let t=this.encryptionService.decrypt(e);t&&this.fetchSaleDetails(Number(t))}}ngOnDestroy(){this.productSubscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.productSubscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.products=[],this.customers=[],this.productMap.clear(),this.saleForm&&this.saleForm.reset()}initForm(){this.saleForm=this.fb.group({id:[null],customerId:["",S.required],saleDate:[Ct(new Date,"yyyy-MM-dd","en"),S.required],invoiceNumber:[""],products:this.fb.array([]),isBlack:[!1,S.required],packagingAndForwadingCharges:[0,[S.required,S.min(0)]]}),this.addProduct()}createProductFormGroup(){return this.fb.group({id:[null],productId:["",S.required],quantity:["",[S.required,S.min(1)]],batchNumber:["",[this.noDoubleQuotesValidator()]],unitPrice:["",[S.required,S.min(.01)]],price:[{value:0,disabled:!0}],taxPercentage:[{value:0,disabled:!0}],taxAmount:[{value:0,disabled:!0}],remarks:[null,[]]})}addProduct(){let e=this.createProductFormGroup(),t=this.setupProductCalculations(e);this.productSubscriptions.push(t),this.productsFormArray.push(e)}removeProduct(e){this.productsFormArray.length!==1&&(this.productSubscriptions[e]&&(this.productSubscriptions[e].unsubscribe(),this.productSubscriptions.splice(e,1)),this.productsFormArray.removeAt(e),this.calculateTotalAmount())}setupProductCalculations(e){let t=new Mn,n=e.get("productId")?.valueChanges.pipe(O(this.destroy$),jt()).subscribe(d=>{if(d){let u=this.productMap.get(d);if(u){let g=u.taxPercentage||0;e.patchValue({taxPercentage:g},{emitEvent:!1}),this.calculateProductPrice(e)}}});n&&t.add(n);let s=e.valueChanges.pipe(O(this.destroy$),gt(150)).subscribe(()=>{this.calculateProductPrice(e)});return t.add(s),t}calculateProductPrice(e){if(!e)return;let t=Number(e.get("quantity")?.value||0),n=Number(e.get("unitPrice")?.value||0),s=Number(e.get("taxPercentage")?.value||0),d=Number((t*n).toFixed(2)),u=Number((d*s/100).toFixed(2));e.patchValue({price:d,taxAmount:u},{emitEvent:!1}),this.calculateTotalAmount(),this.cdr.markForCheck()}getTotalAmount(){return this.productsFormArray.controls.reduce((e,t)=>e+(t.get("price").value||0),0)}getTotalTaxAmount(){return this.productsFormArray.controls.reduce((e,t)=>e+(t.get("taxAmount").value||0),0)}getTotalFinalPrice(){return this.productsFormArray.controls.reduce((e,t)=>{let n=Number(t.get("price")?.value||0),s=Number(t.get("taxAmount")?.value||0);return e+(n+s)},0)}getGrandTotal(){let e=Number(this.saleForm.get("packagingAndForwadingCharges")?.value||0);return this.getTotalFinalPrice()+e}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data,this.buildProductMap()),this.isLoadingProducts=!1,this.cdr.markForCheck()},error:e=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1,this.cdr.markForCheck()}})}buildProductMap(){this.productMap.clear();for(let e of this.products)this.productMap.set(e.id,e)}refreshProducts(){this.isLoadingProducts=!0,this.productService.refreshProducts().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data,this.buildProductMap(),this.snackbar.success("Products refreshed successfully")),this.isLoadingProducts=!1,this.cdr.markForCheck()},error:e=>{this.snackbar.error("Failed to refresh products"),this.isLoadingProducts=!1,this.cdr.markForCheck()}})}loadCustomers(){this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data),this.isLoadingCustomers=!1,this.cdr.markForCheck()},error:e=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1,this.cdr.markForCheck()}})}refreshCustomers(){this.isLoadingCustomers=!0,this.customerService.refreshCustomers().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data),this.snackbar.success("Customers refreshed successfully"),this.isLoadingCustomers=!1,this.cdr.markForCheck()},error:e=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1,this.cdr.markForCheck()}})}isFieldInvalid(e){let t=this.saleForm.get(e);return t?t.invalid&&t.touched:!1}isProductFieldInvalid(e,t){let n=this.productsFormArray.at(e).get(t);if(!n)return!1;if(n.invalid&&(n.dirty||n.touched)){let d=n.errors;if(d&&(d.required||d.min&&t==="quantity"||d.min&&t==="unitPrice"||d.min||d.max||d.min))return!0}return!1}resetForm(){this.isEdit=!1,this.saleForm.patchValue({id:null}),this.initForm()}onSubmit(){if(this.markFormGroupTouched(this.saleForm),this.saleForm.valid){this.loading=!0;let e=this.prepareFormData();(this.isEdit?this.saleService.updateSale(e):this.saleService.createSale(e)).pipe(O(this.destroy$)).subscribe({next:n=>{n?.success&&(this.snackbar.success(`Sale ${this.isEdit?"updated":"created"} successfully`),localStorage.removeItem("saleId"),this.router.navigate(["/sale"])),this.loading=!1,this.cdr.markForCheck()},error:n=>{this.snackbar.error(n?.error?.message||`Failed to ${this.isEdit?"update":"create"} sale`),this.loading=!1,this.cdr.markForCheck()}})}else{let e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}}prepareFormData(){let e=this.saleForm.value,t={saleDate:Ct(e.saleDate,"dd-MM-yyyy","en"),customerId:e.customerId,invoiceNumber:e.invoiceNumber,price:this.getTotalAmount(),taxAmount:this.getTotalTaxAmount(),packagingAndForwadingCharges:Number(e.packagingAndForwadingCharges||0),totalAmount:this.getGrandTotal(),isBlack:!!e.isBlack,products:e.products.map((n,s)=>{let d=this.productsFormArray.at(s).get("id")?.value,u=this.productsFormArray.at(s).get("price")?.value||0,g=this.productsFormArray.at(s).get("taxAmount")?.value||0,h={productId:n.productId,quantity:n.quantity,batchNumber:n.batchNumber,unitPrice:n.unitPrice,price:u,taxPercentage:this.productsFormArray.at(s).get("taxPercentage")?.value,taxAmount:g,finalPrice:u+g,remarks:n.remarks};return this.isEdit&&d&&(h.id=d),h})};return this.isEdit&&e.id&&(t.id=e.id),t}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t instanceof si||t instanceof pi?this.markFormGroupTouched(t):(t.markAsTouched(),t.markAsDirty())})}calculateTotalAmount(){this.totalAmount=this.productsFormArray.controls.reduce((t,n)=>t+(n.get("price").value||0),0),this.totalTaxAmount=this.productsFormArray.controls.reduce((t,n)=>t+(n.get("taxAmount").value||0),0);let e=Number(this.saleForm.get("packagingAndForwadingCharges")?.value||0);this.grandTotal=this.totalAmount+this.totalTaxAmount+e,this.saleForm.patchValue({price:this.totalAmount,taxAmount:this.totalTaxAmount},{emitEvent:!1}),this.cdr.markForCheck()}noDoubleQuotesValidator(){return e=>e.value&&e.value.includes('"')?{doubleQuotes:!0}:null}getFormattedPrice(e){let t=this.productsFormArray.at(e).get("price")?.value;return t?t.toFixed(2):"0.00"}getFormattedTaxAmount(e){let t=this.productsFormArray.at(e).get("taxAmount")?.value;return t?t.toFixed(2):"0.00"}fetchSaleDetails(e){this.saleService.getSaleDetails(e).pipe(O(this.destroy$)).subscribe({next:t=>{t.id&&(this.isEdit=!0,this.populateForm(t)),this.cdr.markForCheck()},error:t=>{this.snackbar.error(t?.error?.message||"Failed to load sale details"),this.cdr.markForCheck()}})}populateForm(e){this.productSubscriptions.forEach(t=>{t&&!t.closed&&t.unsubscribe()}),this.productSubscriptions=[],this.saleForm.patchValue({customerId:e.customerId,id:e.id,saleDate:Ct(new Date(e.saleDate),"yyyy-MM-dd","en"),invoiceNumber:e.invoiceNumber,isBlack:e.isBlack,packagingAndForwadingCharges:e.packagingAndForwadingCharges||0}),this.productsFormArray.clear(),e.items.forEach(t=>{let n=this.createProductFormGroup(),s=this.setupProductCalculations(n);this.productSubscriptions.push(s),n.patchValue({id:t.id,productId:t.productId,quantity:t.quantity,unitPrice:t.unitPrice,price:t.price||0,taxPercentage:t.taxPercentage||0,taxAmount:t.taxAmount||0,batchNumber:t.batchNumber||"",remarks:t.remarks||""},{emitEvent:!1}),this.productsFormArray.push(n)}),this.isEdit=!0}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(Pt),b(ct),b(mn),b(de),b(nt),b(be),b(Xe),b(wt))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-add-sale"]],standalone:!0,features:[re],decls:124,vars:37,consts:[[1,"add-sale-container"],["routerLink","/sale",1,"btn","btn-sm","btn-secondary","back-btn"],[1,"fas","fa-arrow-left"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-cart-plus"],[1,"sale-form",3,"ngSubmit","formGroup"],[1,"header-section"],[1,"form-row"],[1,"form-group"],["for","customerId"],[1,"fas","fa-user"],[1,"required"],[1,"select-group"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder"],["type","button","title","Refresh Customers",1,"btn","btn-sm","btn-primary","refresh",3,"click","disabled"],[1,"fas",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","saleDate"],[1,"fas","fa-calendar"],["type","date","id","saleDate","formControlName","saleDate",1,"form-control"],["for","invoiceNumber"],[1,"fas","fa-file-invoice"],["type","text","id","invoiceNumber","formControlName","invoiceNumber","readonly","",1,"form-control"],[1,"form-label"],[1,"d-flex","gap-3"],[1,"form-check"],["type","radio","formControlName","isBlack","id","isBlackTrue",1,"form-check-input",3,"value"],["for","isBlackTrue",1,"form-check-label"],["type","radio","formControlName","isBlack","id","isBlackFalse",1,"form-check-input",3,"value"],["for","isBlackFalse",1,"form-check-label"],["for","packagingAndForwadingCharges"],[1,"fas","fa-box"],[1,"input-group"],[1,"input-group-text"],["type","number","id","packagingAndForwadingCharges","formControlName","packagingAndForwadingCharges","min","0","step","0.01","placeholder","Enter packaging and forwarding charges",1,"form-control"],["formArrayName","products",1,"products-section"],[1,"products-header"],[1,"fas","fa-boxes"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"table-responsive"],[1,"table","products-table"],[3,"formGroupName",4,"ngFor","ngForOf","ngForTrackBy"],[1,"sale-summary"],[1,"summary-item"],[1,"summary-item","total"],[1,"form-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[4,"ngIf"],[1,"invalid-feedback"],[3,"formGroupName"],[1,"form-field-container"],["formControlName","productId","labelKey","name","valueKey","id",3,"focusWidthPx","options","placeholder","searchPlaceholder"],["type","button","title","Refresh Products",1,"btn","btn-sm","btn-primary","refresh",3,"click","disabled"],["type","number","formControlName","quantity","placeholder","Qty","min","1",1,"form-control"],["type","text","formControlName","batchNumber","placeholder","Batch Number",1,"form-control"],["type","number","formControlName","unitPrice","placeholder","Price","min","0.01","step","0.01",1,"form-control"],["type","number","formControlName","price","readonly","",1,"form-control",3,"value"],["type","number","formControlName","taxAmount","readonly","",1,"form-control",3,"value"],["type","text","formControlName","remarks","placeholder","Remarks",1,"form-control"],["type","button","title","Remove Product",1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"fas","fa-trash"]],template:function(t,n){if(t&1&&(o(0,"div",0)(1,"button",1),m(2,"i",2),c(3," Back to Sales "),a(),o(4,"div",3)(5,"div",4)(6,"h2",5),m(7,"i",6),c(8," Add New Sale "),a()(),o(9,"form",7),_("ngSubmit",function(){return n.onSubmit()}),o(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),m(14,"i",12),c(15," Select Customer "),o(16,"span",13),c(17,"*"),a()(),o(18,"div",14),m(19,"app-searchable-select",15),o(20,"button",16),_("click",function(){return n.refreshCustomers()}),m(21,"i",17),a()(),M(22,Ip,2,0,"div",18),a(),o(23,"div",10)(24,"label",19),m(25,"i",20),c(26," Sale Date "),o(27,"span",13),c(28,"*"),a()(),m(29,"input",21),M(30,Fp,2,0,"div",18),a(),o(31,"div",10)(32,"label",22),m(33,"i",23),c(34," Invoice Number "),a(),m(35,"input",24),a(),o(36,"div",10)(37,"label",25),c(38,"Is Black"),a(),o(39,"div",26)(40,"div",27),m(41,"input",28),o(42,"label",29),c(43,"Yes"),a()(),o(44,"div",27),m(45,"input",30),o(46,"label",31),c(47,"No"),a()()()(),o(48,"div",10)(49,"label",32),m(50,"i",33),c(51," Packaging & Forwarding Charges "),o(52,"span",13),c(53,"*"),a()(),o(54,"div",34)(55,"span",35),c(56,"\u20B9"),a(),m(57,"input",36),a(),M(58,Dp,2,0,"div",18),a()()(),o(59,"div",37)(60,"div",38)(61,"h3"),m(62,"i",39),c(63," Products"),a(),o(64,"button",40),_("click",function(){return n.addProduct()}),m(65,"i",41),c(66," Add Product "),a()(),o(67,"div",42)(68,"table",43)(69,"thead")(70,"tr")(71,"th"),c(72,"Product Name"),a(),o(73,"th"),c(74,"Quantity"),a(),o(75,"th"),c(76,"Batch Number"),a(),o(77,"th"),c(78,"Sale Rate"),a(),o(79,"th"),c(80,"Price"),a(),o(81,"th"),c(82,"Tax Amount"),a(),o(83,"th"),c(84,"Remarks"),a(),o(85,"th"),c(86,"Actions"),a()()(),o(87,"tbody"),M(88,zp,35,22,"tr",44),a()()()(),o(89,"button",40),_("click",function(){return n.addProduct()}),m(90,"i",41),c(91," Add Product "),a(),o(92,"div",45)(93,"div",46)(94,"span"),c(95,"Total Products:"),a(),o(96,"strong"),c(97),a()(),o(98,"div",46)(99,"span"),c(100,"Total Final Price (Items):"),a(),o(101,"strong"),c(102),ye(103,"number"),a()(),o(104,"div",46)(105,"span"),c(106,"Packaging & Forwarding Charges:"),a(),o(107,"strong"),c(108),ye(109,"number"),a()(),o(110,"div",47)(111,"span"),c(112,"Grand Total:"),a(),o(113,"strong"),c(114),ye(115,"number"),a()()(),o(116,"div",48)(117,"button",49),_("click",function(){return n.resetForm()}),m(118,"i",50),c(119," Reset "),a(),o(120,"button",51),m(121,"i",17),c(122),a()()()()(),M(123,Rp,1,0,"app-loader",52)),t&2){let s;l(9),p("formGroup",n.saleForm),l(10),F("is-invalid",n.isFieldInvalid("customerId")),p("options",n.customers)("placeholder","Select Customer")("searchPlaceholder","Search customers..."),l(),p("disabled",n.isLoadingCustomers),l(),p("ngClass",n.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt"),l(),p("ngIf",n.isFieldInvalid("customerId")),l(7),F("is-invalid",n.isFieldInvalid("saleDate")),l(),p("ngIf",n.isFieldInvalid("saleDate")),l(11),p("value",!0),l(4),p("value",!1),l(12),F("is-invalid",n.isFieldInvalid("packagingAndForwadingCharges")),l(),p("ngIf",n.isFieldInvalid("packagingAndForwadingCharges")),l(30),p("ngForOf",n.productsFormArray.controls)("ngForTrackBy",n.trackByProductIndex),l(9),E(n.productsFormArray.length),l(5),T("\u20B9",Ee(103,28,n.totalAmount+n.totalTaxAmount,"1.2-2"),""),l(6),T("\u20B9",Ee(109,31,((s=n.saleForm.get("packagingAndForwadingCharges"))==null?null:s.value)||0,"1.2-2"),""),l(6),T("\u20B9",Ee(115,34,n.grandTotal,"1.2-2"),""),l(3),p("disabled",n.loading),l(3),p("disabled",n.saleForm.invalid||n.loading),l(),p("ngClass",n.loading?"fa-spinner fa-spin":"fa-save"),l(),T(" ",n.loading?"Saving...":n.isEdit?"Update Sale":"Save Sale"," "),l(),p("ngIf",n.loading)}},dependencies:[le,ce,Oe,K,bt,ue,ee,W,ft,zo,Z,J,ht,te,oe,ci,li,Fe,Ve,me,Je],styles:[".add-sale-container[_ngcontent-%COMP%]{padding:2rem;margin:0 auto}@media (max-width: 768px){.add-sale-container[_ngcontent-%COMP%]{padding:1rem}}.form-control[_ngcontent-%COMP%]{height:40px}.back-btn[_ngcontent-%COMP%]{margin-bottom:1rem}.select-group[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.5rem;width:100%;overflow:visible}.select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{display:block;flex:1;position:relative;z-index:100;overflow:visible}.select-group[_ngcontent-%COMP%]   app-searchable-select.custom-width[_ngcontent-%COMP%]{position:absolute;z-index:1000;left:0}.select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]:focus-within{z-index:1000;position:relative}.select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]:focus-within     .select-dropdown{z-index:1001!important;position:absolute!important}.select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-dropdown{z-index:1001!important;position:absolute!important}.select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{flex-shrink:0;margin-top:0;height:40px;min-width:40px;display:flex;align-items:center;justify-content:center;position:relative;z-index:1;border:1px solid var(--supporting);border-radius:8px;background:#fff;transition:all .3s ease;color:var(--primary);touch-action:manipulation}.select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff}.select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);box-shadow:var(--card-shadow);overflow:hidden}.card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.sale-form[_ngcontent-%COMP%]{padding:2rem}@media (max-width: 768px){.sale-form[_ngcontent-%COMP%]{padding:1rem}}.header-section[_ngcontent-%COMP%]{background-color:var(--background-light);border-radius:var(--border-radius);padding:1.5rem;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.products-section[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius);padding:1.5rem;margin-top:2rem;border:1px solid var(--primary)}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.25rem;display:flex;align-items:center;gap:.5rem}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr 1fr auto;gap:1rem;align-items:start}@media (max-width: 1200px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.remove-product[_ngcontent-%COMP%]{background-color:var(--danger-light);color:var(--danger);border:none;width:36px;height:36px;border-radius:var(--border-radius);display:flex;align-items:center;justify-content:center;transition:all .3s ease}.remove-product[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--danger);color:#fff;transform:translateY(-1px)}.remove-product[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.remove-product[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger);margin-left:4px}.input-group[_ngcontent-%COMP%]{display:flex;align-items:stretch}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background-color:var(--background);border:1px solid var(--border-color);border-right:none;border-radius:var(--border-radius) 0 0 var(--border-radius);height:38px;color:var(--text-secondary);min-width:40px;display:flex;align-items:center;justify-content:center}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:0 var(--border-radius) var(--border-radius) 0;flex:1}.sale-summary[_ngcontent-%COMP%]{background-color:var(--background-light);border-radius:var(--border-radius);padding:1.5rem;margin-top:2rem;display:flex;justify-content:flex-end;gap:2rem;flex-wrap:wrap}.sale-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.sale-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.sale-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.25rem;font-weight:600}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid var(--border-color)}@media (max-width: 576px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.table-responsive[_ngcontent-%COMP%]{margin:0 -1.5rem;padding:0 1.5rem;overflow-x:auto;min-height:400px;-webkit-overflow-scrolling:touch}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{margin:0 -1rem;padding:0 1rem}}.products-table[_ngcontent-%COMP%]{width:100%;margin-bottom:0;background:#fff;border-collapse:separate;border-spacing:0}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--background-light);color:var(--text-primary);font-weight:600;padding:1rem;white-space:nowrap;border-bottom:2px solid var(--border-color)}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30%;min-width:300px}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:10%;max-width:120px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;vertical-align:middle;border-bottom:1px solid var(--border-color)}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{min-width:80px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30%;min-width:300px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   .form-control[_ngcontent-%COMP%]{min-width:300px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:10%;max-width:120px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4)   .form-control[_ngcontent-%COMP%]{min-width:100px;max-width:120px}.products-table[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{flex-wrap:nowrap}.products-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{margin:0 auto}@media (max-width: 768px){.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem}}.form-field-container[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem;overflow:visible}.form-field-container[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%], .form-field-container[_ngcontent-%COMP%]   .input-group.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger);background-image:url(data:image/svg+xml,...)}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:1.5rem;vertical-align:top}.invalid-feedback[_ngcontent-%COMP%]{color:var(--danger);font-size:.75rem;margin-top:.25rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}"],changeDetection:0})}}return i})();function jp(i,r){i&1&&(o(0,"div",46),c(1," Customer is required "),a())}function $p(i,r){i&1&&(o(0,"div",46),c(1," Sale return date is required "),a())}function qp(i,r){i&1&&(o(0,"div",46),c(1," Packaging and forwarding charges is required and must be 0 or greater "),a())}function Up(i,r){i&1&&(o(0,"div",46),c(1," Please select a product "),a())}function Hp(i,r){i&1&&(o(0,"div",46),c(1," Quantity must be 1 or greater "),a())}function Bp(i,r){i&1&&(o(0,"div",46),c(1," Double quotes are not allowed "),a())}function Gp(i,r){i&1&&(o(0,"div",46),c(1," Unit price must be greater than 0 "),a())}function Qp(i,r){if(i&1){let e=N();o(0,"tr",47)(1,"td")(2,"div",48)(3,"div",49),m(4,"app-searchable-select",50),o(5,"button",51),_("click",function(){v(e);let n=f();return x(n.refreshProducts())}),m(6,"i",17),a()(),M(7,Up,2,0,"div",18),a()(),o(8,"td")(9,"div",48),m(10,"input",52),M(11,Hp,2,0,"div",18),a()(),o(12,"td")(13,"div",48),m(14,"input",53),M(15,Bp,2,0,"div",18),a()(),o(16,"td")(17,"div",48)(18,"div",27)(19,"span",28),c(20,"\u20B9"),a(),m(21,"input",54),a(),M(22,Gp,2,0,"div",18),a()(),o(23,"td")(24,"div",27),m(25,"input",55),a()(),o(26,"td")(27,"div",27),m(28,"input",56),a()(),o(29,"td")(30,"div",48),m(31,"input",57),a()(),o(32,"td")(33,"button",58),_("click",function(){let n=v(e).index,s=f();return x(s.removeProduct(n))}),m(34,"i",59),a()()()}if(i&2){let e,t=r.index,n=f();p("formGroupName",t),l(4),F("is-invalid",n.isProductFieldInvalid(t,"productId")),p("focusWidthPx",600)("options",n.products)("placeholder","Select Product")("searchPlaceholder","Search products..."),l(),p("disabled",n.isLoadingProducts),l(),p("ngClass",n.isLoadingProducts?"fa-spinner fa-spin":"fa-sync-alt"),l(),p("ngIf",n.isProductFieldInvalid(t,"productId")),l(3),F("is-invalid",n.isProductFieldInvalid(t,"quantity")),l(),p("ngIf",n.isProductFieldInvalid(t,"quantity")),l(3),F("is-invalid",n.isProductFieldInvalid(t,"batchNumber")),l(),p("ngIf",(e=n.productsFormArray.at(t).get("batchNumber"))==null||e.errors==null?null:e.errors.doubleQuotes),l(6),F("is-invalid",n.isProductFieldInvalid(t,"unitPrice")),l(),p("ngIf",n.isProductFieldInvalid(t,"unitPrice")),l(3),p("value",n.getFormattedPrice(t)),l(3),p("value",n.getFormattedTaxAmount(t)),l(5),p("disabled",n.productsFormArray.length===1)}}var Jr=(()=>{class i{get productsFormArray(){return this.returnForm.get("products")}trackByProductIndex(e,t){return t}constructor(e,t,n,s,d,u,g,h,P){this.fb=e,this.router=t,this.route=n,this.saleService=s,this.productService=d,this.customerService=u,this.snackbar=g,this.encryptionService=h,this.cdr=P,this.products=[],this.customers=[],this.loading=!1,this.isLoadingProducts=!1,this.isLoadingCustomers=!1,this.isEdit=!1,this.saleReturnId=null,this.destroy$=new G,this.productSubscriptions=[],this.productMap=new Map,this.totalAmount=0,this.totalTaxAmount=0,this.grandTotal=0,this.initForm()}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");if(e){let t=this.encryptionService.decrypt(e);if(t){let n=Number(t);isNaN(n)||(this.saleReturnId=n,this.isEdit=!0)}}this.loadCustomers(),this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).pipe(O(this.destroy$)).subscribe({next:t=>{t?.success&&t.data&&(this.products=t.data.content||t.data,this.isEdit&&this.saleReturnId&&this.fetchSaleReturnDetails(this.saleReturnId)),this.isLoadingProducts=!1},error:()=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1}}),this.returnForm.get("packagingAndForwadingCharges")?.valueChanges.pipe(O(this.destroy$),gt(150)).subscribe(()=>{this.calculateTotalAmount(),this.cdr.markForCheck()})}ngOnDestroy(){this.productSubscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.productSubscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.products=[],this.customers=[],this.productMap.clear(),this.returnForm&&this.returnForm.reset()}initForm(){this.returnForm=this.fb.group({id:[null],customerId:["",S.required],saleReturnDate:[Ct(new Date,"yyyy-MM-dd","en"),S.required],invoiceNumber:[""],products:this.fb.array([]),packagingAndForwadingCharges:[0,[S.required,S.min(0)]]}),this.isEdit||this.addProduct()}createProductFormGroup(){return this.fb.group({id:[null],productId:["",S.required],quantity:["",[S.required,S.min(1)]],batchNumber:["",[this.noDoubleQuotesValidator()]],unitPrice:["",[S.required,S.min(.01)]],price:[{value:0,disabled:!0}],taxPercentage:[{value:0,disabled:!0}],taxAmount:[{value:0,disabled:!0}],remarks:[null,[]]})}addProduct(){let e=this.createProductFormGroup(),t=this.setupProductCalculations(e);this.productSubscriptions.push(t),this.productsFormArray.push(e)}removeProduct(e){this.productsFormArray.length!==1&&(this.productSubscriptions[e]&&(this.productSubscriptions[e].unsubscribe(),this.productSubscriptions.splice(e,1)),this.productsFormArray.removeAt(e),this.calculateTotalAmount())}setupProductCalculations(e){let t=new Mn,n=e.get("productId")?.valueChanges.pipe(O(this.destroy$),jt()).subscribe(d=>{if(d){let u=this.productMap.get(d);if(u){let g=u.taxPercentage||0;e.patchValue({taxPercentage:g},{emitEvent:!1}),this.calculateProductPrice(e)}}});n&&t.add(n);let s=e.valueChanges.pipe(O(this.destroy$),gt(150)).subscribe(()=>{this.calculateProductPrice(e)});return t.add(s),t}calculateProductPrice(e){if(!e)return;let t=Number(e.get("quantity")?.value||0),n=Number(e.get("unitPrice")?.value||0),s=Number(e.get("taxPercentage")?.value||0),d=Number((t*n).toFixed(2)),u=Number((d*s/100).toFixed(2));e.patchValue({price:d,taxAmount:u},{emitEvent:!1}),this.calculateTotalAmount()}getTotalAmount(){return this.productsFormArray.controls.reduce((e,t)=>e+(t.get("price").value||0),0)}getTotalTaxAmount(){return this.productsFormArray.controls.reduce((e,t)=>e+(t.get("taxAmount").value||0),0)}getTotalFinalPrice(){return this.productsFormArray.controls.reduce((e,t)=>{let n=Number(t.get("price")?.value||0),s=Number(t.get("taxAmount")?.value||0);return e+(n+s)},0)}getGrandTotal(){let e=Number(this.returnForm.get("packagingAndForwadingCharges")?.value||0);return this.getTotalFinalPrice()+e}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e?.success&&e.data&&(this.products=e.data.content||e.data,this.buildProductMap()),this.isLoadingProducts=!1,this.cdr.markForCheck()},error:()=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1,this.cdr.markForCheck()}})}buildProductMap(){this.productMap.clear();for(let e of this.products)this.productMap.set(e.id,e)}refreshProducts(){this.isLoadingProducts=!0,this.productService.refreshProducts().pipe(O(this.destroy$)).subscribe({next:e=>{e?.success&&(this.products=e.data,this.buildProductMap(),this.snackbar.success("Products refreshed successfully")),this.isLoadingProducts=!1,this.cdr.markForCheck()},error:()=>{this.snackbar.error("Failed to refresh products"),this.isLoadingProducts=!1,this.cdr.markForCheck()}})}loadCustomers(){this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e?.success&&(this.customers=e.data),this.isLoadingCustomers=!1,this.cdr.markForCheck()},error:()=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1,this.cdr.markForCheck()}})}refreshCustomers(){this.isLoadingCustomers=!0,this.customerService.refreshCustomers().pipe(O(this.destroy$)).subscribe({next:e=>{e?.success&&(this.customers=e.data,this.snackbar.success("Customers refreshed successfully")),this.isLoadingCustomers=!1,this.cdr.markForCheck()},error:()=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1,this.cdr.markForCheck()}})}isFieldInvalid(e){let t=this.returnForm.get(e);return t?t.invalid&&t.touched:!1}isProductFieldInvalid(e,t){let n=this.productsFormArray.at(e).get(t);if(!n)return!1;if(n.invalid&&(n.dirty||n.touched)){let d=n.errors;if(d&&(d.required||d.min&&t==="quantity"||d.min&&t==="unitPrice"||d.min||d.max||d.min))return!0}return!1}resetForm(){this.initForm()}onSubmit(){if(this.markFormGroupTouched(this.returnForm),this.returnForm.valid){this.loading=!0;let e=this.prepareFormData();(this.isEdit?this.saleService.createSaleReturn(e):this.saleService.createSaleReturn(e)).pipe(O(this.destroy$)).subscribe({next:n=>{n?.success?(this.snackbar.success(n.message||`Sale return ${this.isEdit?"updated":"created"} successfully`),this.router.navigate(["/sale/return"])):this.snackbar.error(n?.message||`Failed to ${this.isEdit?"update":"create"} sale return`),this.loading=!1,this.cdr.markForCheck()},error:n=>{let s=n?.error?.message||`Failed to ${this.isEdit?"update":"create"} sale return`;this.snackbar.error(s),this.loading=!1,this.cdr.markForCheck()}})}else{let e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}}prepareFormData(){let e=this.returnForm.value,t={saleReturnDate:Ct(e.saleReturnDate,"dd-MM-yyyy","en"),customerId:e.customerId,invoiceNumber:e.invoiceNumber,price:this.getTotalAmount(),taxAmount:this.getTotalTaxAmount(),packagingAndForwadingCharges:Number(e.packagingAndForwadingCharges||0),totalAmount:this.getGrandTotal(),products:e.products.map((n,s)=>{let d=this.productsFormArray.at(s).get("id")?.value,u=this.productsFormArray.at(s).get("price")?.value||0,g=this.productsFormArray.at(s).get("taxAmount")?.value||0,h={productId:n.productId,quantity:n.quantity,batchNumber:n.batchNumber,unitPrice:n.unitPrice,price:u,taxPercentage:this.productsFormArray.at(s).get("taxPercentage")?.value,taxAmount:g,finalPrice:u+g,remarks:n.remarks};return this.isEdit&&d&&(h.id=d),h})};return this.isEdit&&e.id&&(t.id=e.id),t}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t instanceof si||t instanceof pi?this.markFormGroupTouched(t):(t.markAsTouched(),t.markAsDirty())})}calculateTotalAmount(){this.totalAmount=this.productsFormArray.controls.reduce((t,n)=>t+(n.get("price").value||0),0),this.totalTaxAmount=this.productsFormArray.controls.reduce((t,n)=>t+(n.get("taxAmount").value||0),0);let e=Number(this.returnForm.get("packagingAndForwadingCharges")?.value||0);this.grandTotal=this.totalAmount+this.totalTaxAmount+e,this.returnForm.patchValue({price:this.totalAmount,taxAmount:this.totalTaxAmount},{emitEvent:!1}),this.cdr.markForCheck()}noDoubleQuotesValidator(){return e=>e.value&&e.value.includes('"')?{doubleQuotes:!0}:null}getFormattedPrice(e){let t=this.productsFormArray.at(e).get("price")?.value;return t?t.toFixed(2):"0.00"}getFormattedTaxAmount(e){let t=this.productsFormArray.at(e).get("taxAmount")?.value;return t?t.toFixed(2):"0.00"}fetchSaleReturnDetails(e){this.loading=!0,this.saleService.getSaleReturnDetail(e).pipe(O(this.destroy$)).subscribe({next:t=>{t&&t.id?this.populateForm(t):this.snackbar.error("Failed to load sale return details"),this.loading=!1,this.cdr.markForCheck()},error:t=>{this.snackbar.error(t?.error?.message||"Failed to load sale return details"),this.loading=!1,this.cdr.markForCheck()}})}populateForm(e){this.productsFormArray.clear(),this.productSubscriptions.forEach(t=>t?.unsubscribe()),this.productSubscriptions=[],this.returnForm.patchValue({id:e.id,customerId:e.customerId,saleReturnDate:Ct(new Date(e.saleReturnDate),"yyyy-MM-dd","en"),invoiceNumber:e.invoiceNumber,packagingAndForwadingCharges:e.packagingAndForwadingCharges||0}),e.items&&e.items.length>0?e.items.forEach(t=>{let n=this.createProductFormGroup(),s=this.setupProductCalculations(n);this.productSubscriptions.push(s),n.patchValue({id:t.id,productId:t.productId,quantity:t.quantity,unitPrice:t.unitPrice,price:t.price||0,taxPercentage:t.taxPercentage||0,taxAmount:t.taxAmount||0,batchNumber:t.batchNumber||"",remarks:t.remarks||""},{emitEvent:!1}),this.productsFormArray.push(n)}):this.addProduct()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(be),b(It),b(mn),b(Pt),b(ct),b(de),b(Xe),b(wt))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-add-sale-return"]],decls:112,vars:36,consts:[[1,"add-sale-container"],["routerLink","/sale/return",1,"btn","btn-sm","btn-secondary","back-btn"],[1,"fas","fa-arrow-left"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-undo-alt"],[1,"sale-form",3,"ngSubmit","formGroup"],[1,"header-section"],[1,"form-row"],[1,"form-group"],["for","customerId"],[1,"fas","fa-user"],[1,"required"],[1,"select-group","inline"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder"],["type","button","title","Refresh Customers",1,"btn","btn-sm","btn-primary","refresh",3,"click","disabled"],[1,"fas",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","saleReturnDate"],[1,"fas","fa-calendar"],["type","date","id","saleReturnDate","formControlName","saleReturnDate",1,"form-control"],["for","invoiceNumber"],[1,"fas","fa-file-invoice"],["type","text","id","invoiceNumber","formControlName","invoiceNumber","readonly","",1,"form-control"],["for","packagingAndForwadingCharges"],[1,"fas","fa-box"],[1,"input-group"],[1,"input-group-text"],["type","number","id","packagingAndForwadingCharges","formControlName","packagingAndForwadingCharges","min","0","step","0.01","placeholder","Enter packaging and forwarding charges",1,"form-control"],["formArrayName","products",1,"products-section"],[1,"products-header"],[1,"fas","fa-boxes"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"table-responsive"],[1,"table","products-table"],[3,"formGroupName",4,"ngFor","ngForOf","ngForTrackBy"],[1,"sale-summary"],[1,"summary-item"],[1,"summary-item","total"],[1,"form-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[3,"show"],[1,"invalid-feedback"],[3,"formGroupName"],[1,"form-field-container"],[1,"select-group"],["formControlName","productId","labelKey","name","valueKey","id",3,"focusWidthPx","options","placeholder","searchPlaceholder"],["type","button","title","Refresh Products",1,"btn","btn-sm","btn-primary","refresh",3,"click","disabled"],["type","number","formControlName","quantity","placeholder","Qty","min","1",1,"form-control"],["type","text","formControlName","batchNumber","placeholder","Batch Number",1,"form-control"],["type","number","formControlName","unitPrice","placeholder","Price","min","0.01","step","0.01",1,"form-control"],["type","number","formControlName","price","readonly","",1,"form-control",3,"value"],["type","number","formControlName","taxAmount","readonly","",1,"form-control",3,"value"],["type","text","formControlName","remarks","placeholder","Remarks",1,"form-control"],["type","button","title","Remove Product",1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"fas","fa-trash"]],template:function(t,n){if(t&1&&(o(0,"div",0)(1,"button",1),m(2,"i",2),c(3," Back to Sale Returns "),a(),o(4,"div",3)(5,"div",4)(6,"h2",5),m(7,"i",6),c(8),a()(),o(9,"form",7),_("ngSubmit",function(){return n.onSubmit()}),o(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),m(14,"i",12),c(15," Select Customer "),o(16,"span",13),c(17,"*"),a()(),o(18,"div",14),m(19,"app-searchable-select",15),o(20,"button",16),_("click",function(){return n.refreshCustomers()}),m(21,"i",17),a()(),M(22,jp,2,0,"div",18),a(),o(23,"div",10)(24,"label",19),m(25,"i",20),c(26," Sale Return Date "),o(27,"span",13),c(28,"*"),a()(),m(29,"input",21),M(30,$p,2,0,"div",18),a(),o(31,"div",10)(32,"label",22),m(33,"i",23),c(34," Return Invoice Number "),a(),m(35,"input",24),a(),o(36,"div",10)(37,"label",25),m(38,"i",26),c(39," Packaging & Forwarding Charges "),o(40,"span",13),c(41,"*"),a()(),o(42,"div",27)(43,"span",28),c(44,"\u20B9"),a(),m(45,"input",29),a(),M(46,qp,2,0,"div",18),a()()(),o(47,"div",30)(48,"div",31)(49,"h3"),m(50,"i",32),c(51," Products"),a(),o(52,"button",33),_("click",function(){return n.addProduct()}),m(53,"i",34),c(54," Add Product "),a()(),o(55,"div",35)(56,"table",36)(57,"thead")(58,"tr")(59,"th"),c(60,"Product Name"),a(),o(61,"th"),c(62,"Quantity"),a(),o(63,"th"),c(64,"Batch Number"),a(),o(65,"th"),c(66,"Sale Rate"),a(),o(67,"th"),c(68,"Price"),a(),o(69,"th"),c(70,"Tax Amount"),a(),o(71,"th"),c(72,"Remarks"),a(),o(73,"th"),c(74,"Actions"),a()()(),o(75,"tbody"),M(76,Qp,35,22,"tr",37),a()()()(),o(77,"button",33),_("click",function(){return n.addProduct()}),m(78,"i",34),c(79," Add Product "),a(),o(80,"div",38)(81,"div",39)(82,"span"),c(83,"Total Products:"),a(),o(84,"strong"),c(85),a()(),o(86,"div",39)(87,"span"),c(88,"Total Final Price (Items):"),a(),o(89,"strong"),c(90),ye(91,"number"),a()(),o(92,"div",39)(93,"span"),c(94,"Packaging & Forwarding Charges:"),a(),o(95,"strong"),c(96),ye(97,"number"),a()(),o(98,"div",40)(99,"span"),c(100,"Grand Total:"),a(),o(101,"strong"),c(102),ye(103,"number"),a()()(),o(104,"div",41)(105,"button",42),_("click",function(){return n.resetForm()}),m(106,"i",43),c(107," Reset "),a(),o(108,"button",44),m(109,"i",17),c(110),a()()()()(),m(111,"app-loader",45)),t&2){let s;l(8),T(" ",n.isEdit?"Edit Sale Return":"Add New Sale Return"," "),l(),p("formGroup",n.returnForm),l(10),F("is-invalid",n.isFieldInvalid("customerId")),p("options",n.customers)("placeholder","Select Customer")("searchPlaceholder","Search customers..."),l(),p("disabled",n.isLoadingCustomers),l(),p("ngClass",n.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt"),l(),p("ngIf",n.isFieldInvalid("customerId")),l(7),F("is-invalid",n.isFieldInvalid("saleReturnDate")),l(),p("ngIf",n.isFieldInvalid("saleReturnDate")),l(15),F("is-invalid",n.isFieldInvalid("packagingAndForwadingCharges")),l(),p("ngIf",n.isFieldInvalid("packagingAndForwadingCharges")),l(30),p("ngForOf",n.productsFormArray.controls)("ngForTrackBy",n.trackByProductIndex),l(9),E(n.productsFormArray.length),l(5),T("\u20B9",Ee(91,27,n.totalAmount+n.totalTaxAmount,"1.2-2"),""),l(6),T("\u20B9",Ee(97,30,((s=n.returnForm.get("packagingAndForwadingCharges"))==null?null:s.value)||0,"1.2-2"),""),l(6),T("\u20B9",Ee(103,33,n.grandTotal,"1.2-2"),""),l(3),p("disabled",n.loading),l(3),p("disabled",n.returnForm.invalid||n.loading),l(),p("ngClass",n.loading?"fa-spinner fa-spin":"fa-save"),l(),T(" ",n.loading?n.isEdit?"Updating...":"Saving...":n.isEdit?"Update Sale Return":"Save Sale Return"," "),l(),p("show",n.loading)}},dependencies:[ce,Oe,K,ee,W,ft,Z,J,ht,te,oe,ci,li,Ve,me,Je,bt],styles:[".add-sale-container[_ngcontent-%COMP%]{padding:2rem;margin:0 auto}@media (max-width: 768px){.add-sale-container[_ngcontent-%COMP%]{padding:1rem}}.form-control[_ngcontent-%COMP%]{height:40px}.back-btn[_ngcontent-%COMP%]{margin-bottom:1rem}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);box-shadow:var(--card-shadow);overflow:hidden}.card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.sale-form[_ngcontent-%COMP%]{padding:2rem}@media (max-width: 768px){.sale-form[_ngcontent-%COMP%]{padding:1rem}}.header-section[_ngcontent-%COMP%]{background-color:var(--background-light);border-radius:var(--border-radius);padding:1.5rem;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.products-section[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius);padding:1.5rem;margin-top:2rem;border:1px solid var(--primary)}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.25rem;display:flex;align-items:center;gap:.5rem}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr 1fr auto;gap:1rem;align-items:start}@media (max-width: 1200px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.remove-product[_ngcontent-%COMP%]{background-color:var(--danger-light);color:var(--danger);border:none;width:36px;height:36px;border-radius:var(--border-radius);display:flex;align-items:center;justify-content:center;transition:all .3s ease}.remove-product[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--danger);color:#fff;transform:translateY(-1px)}.remove-product[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.remove-product[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger);margin-left:4px}.select-group[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.5rem;width:100%;overflow:visible}.select-group.inline[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:.5rem}.select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{display:block;flex:1;position:relative;z-index:100;overflow:visible}.select-group[_ngcontent-%COMP%]   app-searchable-select.custom-width[_ngcontent-%COMP%]{position:absolute;z-index:1000;left:0}.select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]:focus-within{z-index:1000;position:relative}.select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]:focus-within     .select-dropdown{z-index:1001!important;position:absolute!important}.select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-dropdown{z-index:1001!important;position:absolute!important}.select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{flex-shrink:0;margin-top:0;height:40px;min-width:40px;display:flex;align-items:center;justify-content:center;position:relative;z-index:1;border:1px solid var(--supporting);border-radius:8px;background:#fff;transition:all .3s ease;color:var(--primary);touch-action:manipulation}.select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff}.select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.input-group[_ngcontent-%COMP%]{display:flex;align-items:stretch}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background-color:var(--background);border:1px solid var(--border-color);border-right:none;border-radius:var(--border-radius) 0 0 var(--border-radius);height:38px;color:var(--text-secondary);min-width:40px;display:flex;align-items:center;justify-content:center}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:0 var(--border-radius) var(--border-radius) 0;flex:1}.sale-summary[_ngcontent-%COMP%]{background-color:var(--background-light);border-radius:var(--border-radius);padding:1.5rem;margin-top:2rem;display:flex;justify-content:flex-end;gap:2rem;flex-wrap:wrap}.sale-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.sale-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.sale-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.25rem;font-weight:600}.sale-summary[_ngcontent-%COMP%]   .summary-item.total[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--primary)}@media (max-width: 768px){.sale-summary[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-end;gap:1rem}}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid var(--border-color)}@media (max-width: 576px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.table-responsive[_ngcontent-%COMP%]{margin:0 -1.5rem;padding:0 1.5rem;overflow-x:auto;min-height:400px;-webkit-overflow-scrolling:touch}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{margin:0 -1rem;padding:0 1rem}}.products-table[_ngcontent-%COMP%]{width:100%;margin-bottom:0;background:#fff;border-collapse:separate;border-spacing:0}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--background-light);color:var(--text-primary);font-weight:600;padding:1rem;white-space:nowrap;border-bottom:2px solid var(--border-color)}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{width:30%;min-width:300px}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:10%;max-width:120px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;vertical-align:middle;border-bottom:1px solid var(--border-color)}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{min-width:80px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:30%;min-width:300px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   .form-control[_ngcontent-%COMP%]{min-width:300px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4){width:10%;max-width:120px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4)   .form-control[_ngcontent-%COMP%]{min-width:100px;max-width:120px}.products-table[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{flex-wrap:nowrap}.products-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{margin:0 auto}@media (max-width: 768px){.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem}}.form-field-container[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem;overflow:visible}.form-field-container[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%], .form-field-container[_ngcontent-%COMP%]   .input-group.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger);background-image:url(data:image/svg+xml,...)}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:1.5rem;vertical-align:top}.invalid-feedback[_ngcontent-%COMP%]{color:var(--danger);font-size:.75rem;margin-top:.25rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@media (hover: none) and (pointer: coarse){.btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px;touch-action:manipulation}.form-control[_ngcontent-%COMP%]{min-height:44px;font-size:16px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem .5rem}}form[_ngcontent-%COMP%]{touch-action:manipulation}@media (max-width: 768px){app-searchable-select[_ngcontent-%COMP%]{position:relative;z-index:1000}}"],changeDetection:0})}}return i})();var Yp=()=>({label:"All Customers",value:""});function Kp(i,r){if(i&1){let e=N();o(0,"div",5)(1,"div",22),m(2,"app-searchable-select",23),o(3,"button",24),_("click",function(){v(e);let n=f();return x(n.refreshCustomers())}),m(4,"i",25),a()()()}if(i&2){let e=f();l(2),p("options",e.customers)("defaultOption",_t(5,Yp))("searchPlaceholder","Search customers..."),l(),p("disabled",e.isLoadingCustomers),l(),p("ngClass",e.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt")}}function Wp(i,r){i&1&&(o(0,"div",26)(1,"button",27),m(2,"i",28),c(3," Add Sale Return "),a()())}function Zp(i,r){if(i&1){let e=N();o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),ye(9,"date"),a(),o(10,"td"),c(11),a(),o(12,"td",29)(13,"button",30),_("click",function(){let n=v(e).$implicit,s=f();return x(s.generatePdf(n.id,n.invoiceNumber))}),m(14,"i",31),a(),o(15,"button",32),_("click",function(){let n=v(e).$implicit,s=f();return x(s.viewDetails(n==null?null:n.id))}),m(16,"i",33),a(),o(17,"button",34),_("click",function(){let n=v(e).$implicit,s=f();return x(s.deleteSaleReturn(n.id))}),m(18,"i",35),a()()()}if(i&2){let e=r.$implicit,t=r.index,n=f();l(2),E(n.startIndex+t+1),l(2),E(e.invoiceNumber),l(2),E(e.customerName),l(2),E(Ee(9,6,e.saleReturnDate,"dd-MM-yyyy")),l(3),E(e.totalSaleAmount||0),l(4),p("disabled",!(e!=null&&e.id))}}function Xp(i,r){if(i&1){let e=N();o(0,"app-pagination",36),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var Os=(()=>{class i{constructor(e,t,n,s,d,u,g,h){this.saleService=e,this.customerService=t,this.fb=n,this.snackbar=s,this.dateUtils=d,this.encryptionService=u,this.router=g,this.authService=h,this.saleReturns=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.customers=[],this.isLoadingCustomers=!1,this.canManagePurchases=!1,this.destroy$=new G,this.initializeForm()}ngOnInit(){this.canManagePurchases=this.authService.isAdmin()||this.authService.isStaffAdmin(),this.loadSaleReturns(),this.canManagePurchases&&this.loadCustomers()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.searchForm=this.fb.group({search:[""],batchNumber:[""],customerId:[""],startDate:[""],endDate:[""]})}loadSaleReturns(){this.isLoading=!0;let e=this.searchForm.value,t={currentPage:this.currentPage,perPageRecord:this.pageSize,search:e.search?.trim()||void 0,customerId:this.canManagePurchases&&e.customerId?Number(e.customerId):void 0,startDate:e.startDate?this.formatDateForApi(e.startDate):void 0,endDate:e.endDate?this.formatDateForApi(e.endDate):void 0};Object.keys(t).forEach(n=>{t[n]===void 0&&delete t[n]}),this.saleService.searchSaleReturn(t).pipe(O(this.destroy$)).subscribe({next:n=>{this.saleReturns=n.content||[],this.totalPages=n.totalPages||0,this.totalElements=n.totalElements||0,this.updatePaginationIndexes(),this.isLoading=!1},error:n=>{this.snackbar.error(n?.error?.message||"Failed to load sale returns"),this.isLoading=!1}})}formatDateForApi(e){if(!e)return"";let t=new Date(e);if(isNaN(t.getTime()))return"";let n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),d=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${d}`}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements)}onSearch(e){e&&(e.preventDefault(),e.stopPropagation()),this.currentPage=0,this.loadSaleReturns()}resetForm(){this.searchForm.reset(),this.currentPage=0,this.loadSaleReturns()}onPageChange(e){this.currentPage=e,this.loadSaleReturns()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadSaleReturns()}loadCustomers(){this.canManagePurchases&&(this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e?.success&&e.data&&(this.customers=e.data),this.isLoadingCustomers=!1},error:()=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1}}))}refreshCustomers(){this.canManagePurchases&&(this.isLoadingCustomers=!0,this.customerService.refreshCustomers().pipe(O(this.destroy$)).subscribe({next:e=>{e?.success&&e.data&&(this.customers=e.data,this.snackbar.success("Customers refreshed successfully")),this.isLoadingCustomers=!1},error:()=>{this.snackbar.error("Failed to refresh customers"),this.isLoadingCustomers=!1}}))}viewDetails(e){if(!e){this.snackbar.error("Sale return ID is not available");return}let t=this.encryptionService.encrypt(e.toString());this.router.navigate(["/sale/return",t])}deleteSaleReturn(e){confirm("Are you sure you want to delete this sale return? This action cannot be undone.")&&(this.isLoading=!0,this.saleService.deleteSaleReturn(e).pipe(O(this.destroy$)).subscribe({next:t=>{t?.success?(this.snackbar.success(t.message||"Sale return deleted successfully"),this.loadSaleReturns()):(this.snackbar.error(t?.message||"Failed to delete sale return"),this.isLoading=!1)},error:t=>{this.snackbar.error(t?.error?.message||"Failed to delete sale return"),this.isLoading=!1}}))}generatePdf(e,t){this.saleService.generateSaleReturnPdf(e).pipe(O(this.destroy$)).subscribe({next:({blob:n,filename:s})=>{let d="sale-return-"+(t?`${t}.pdf`:s),u=window.URL.createObjectURL(n),g=document.createElement("a");g.href=u,g.download=d,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(u),this.snackbar.success("PDF downloaded successfully")},error:n=>{this.snackbar.error(n?.error?.message||"Failed to generate PDF")}})}static{this.\u0275fac=function(t){return new(t||i)(b(mn),b(ct),b(X),b(de),b(Ft),b(Xe),b(be),b(it))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-sale-return-list"]],decls:45,vars:6,consts:[[1,"purchase-container"],[3,"show"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by invoice number...",1,"form-control"],["type","text","formControlName","batchNumber","placeholder","Search by Batch Number...",1,"form-control"],["class","form-group",4,"ngIf"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],["class","action-buttons",4,"ngIf"],[1,"purchases-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"product-select-group"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","defaultOption","searchPlaceholder"],["type","button","title","Refresh Customers",1,"btn","btn-sm","btn-primary","refresh",2,"margin-top","3px",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"action-buttons"],["routerLink","/sale/return/create",1,"btn","btn-sm","btn-primary"],[1,"fas","fa-plus"],[1,"actions"],["title","Export PDF",1,"btn-icon","pdf",3,"click"],[1,"fas","fa-file-pdf"],["title","View Details",1,"btn-icon","edit",3,"click","disabled"],[1,"fas","fa-eye"],["title","Delete Sale Return",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"h2"),c(4,"Search Sale Returns"),a(),o(5,"form",3),_("ngSubmit",function(d){return n.onSearch(d)}),o(6,"div",4)(7,"div",5),m(8,"input",6)(9,"input",7),a(),M(10,Kp,5,6,"div",8),o(11,"div",5),m(12,"input",9),a(),o(13,"div",5),m(14,"input",10),a(),o(15,"div",11)(16,"button",12),m(17,"i",13),c(18," Search "),a(),o(19,"button",14),_("click",function(){return n.resetForm()}),m(20,"i",15),c(21," Reset "),a()()()()(),M(22,Wp,4,0,"div",16),o(23,"div",17)(24,"h2"),c(25,"Sale Returns"),a(),o(26,"div",18)(27,"table",19)(28,"thead")(29,"tr")(30,"th"),c(31,"No"),a(),o(32,"th"),c(33,"Invoice No."),a(),o(34,"th"),c(35,"Customer Name"),a(),o(36,"th"),c(37,"Sale Return Date"),a(),o(38,"th"),c(39,"Total Amount"),a(),o(40,"th"),c(41,"Actions"),a()()(),o(42,"tbody"),M(43,Zp,19,9,"tr",20),a()()(),M(44,Xp,1,4,"app-pagination",21),a()()),t&2&&(l(),p("show",n.isLoading),l(4),p("formGroup",n.searchForm),l(5),p("ngIf",n.canManagePurchases),l(12),p("ngIf",n.canManagePurchases),l(21),p("ngForOf",n.saleReturns),l(),p("ngIf",n.totalPages>0))},dependencies:[ce,Oe,K,ee,W,Z,J,te,oe,Ve,He,me,Je,ut],styles:[".purchase-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;background-color:var(--background)}.purchase-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.purchase-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;align-items:flex-start}@media (max-width: 768px){.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:40px}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:42px;padding:0;display:flex;align-items:center;justify-content:center;border:1px solid var(--border-color);border-radius:var(--border-radius);background:var(--primary)}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary)}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media (max-width: 768px){.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{grid-column:1/-1}}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:42px;display:flex;align-items:center;justify-content:center;gap:.5rem}.purchase-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.purchase-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;justify-content:flex-start;gap:.5rem}.purchase-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem}@media (max-width: 768px){.purchase-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}.purchase-container[_ngcontent-%COMP%]   .purchases-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.purchase-container[_ngcontent-%COMP%]   .purchases-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}.purchase-container[_ngcontent-%COMP%]   .purchases-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.purchase-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.purchase-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.purchase-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary);white-space:nowrap}.purchase-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{width:auto;min-width:80px;padding:.5rem;margin-bottom:0}@media (max-width: 768px){.purchase-container[_ngcontent-%COMP%]{padding:1rem}.purchase-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.purchase-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .purchase-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.table-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{width:100%}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{flex:1}}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--primary);background-color:#1458811a}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon.return[_ngcontent-%COMP%]{color:#ff9800;background-color:#ff98001a}.actions[_ngcontent-%COMP%]   .btn-icon.return[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#ff9800;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.return[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon.sale[_ngcontent-%COMP%]{color:var(--primary);background-color:#fd78231a}.actions[_ngcontent-%COMP%]   .btn-icon.sale[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.sale[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon.pdf[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a}.actions[_ngcontent-%COMP%]   .btn-icon.pdf[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.pdf[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{padding:6px}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}  .custom-snackbar.success{background-color:var(--accent2)}  .custom-snackbar.error{background-color:#dc3545}  .custom-snackbar .snackbar-message{display:flex;align-items:center;gap:.5rem;color:#fff}  .custom-snackbar .snackbar-message i{font-size:1.2rem}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:1000}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:var(--primary)}.product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]{background-color:var(--background);color:#fff;margin-top:3px;width:42px;height:42px;border-radius:6px;transition:all .2s ease}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:active{transform:translateY(0)}"]})}}return i})();var vs=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${st.apiUrl}/api/batch`}batchDelete(e){return this.http.post(`${this.apiUrl}/delete`,e)}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function eu(i,r){i&1&&(o(0,"div",23),c(1," Start date is required "),a())}function tu(i,r){i&1&&(o(0,"div",23),c(1," End date is required and must be after start date "),a())}function nu(i,r){if(i&1){let e=N();o(0,"div",24)(1,"input",25),_("change",function(n){v(e);let s=f();return x(s.onCheckboxChange(n))}),a(),o(2,"label",26),c(3),a()()}if(i&2){let e=r.$implicit,t=f();l(),p("id",e)("value",e)("checked",t.selectedTypes.includes(e)),l(),p("for",e),l(),T(" ",e," ")}}function iu(i,r){i&1&&(o(0,"div",27),c(1," Please select at least one data type "),a())}var xs=(()=>{class i{constructor(e,t,n,s){this.fb=e,this.batchService=t,this.snackbar=n,this.dateUtils=s,this.isLoading=!1,this.showTypeError=!1,this.selectedTypes=[],this.showConfirmModal=!1,this.dataTypes=["PURCHASE","SALE","QUOTATION","ATTENDANCE"],this.destroy$=new G,this.subscriptions=[]}ngOnInit(){this.initializeForm()}initializeForm(){this.batchDeleteForm=this.fb.group({startDate:["",S.required],endDate:["",S.required]},{validators:this.dateRangeValidator})}isFieldInvalid(e){let t=this.batchDeleteForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}onCheckboxChange(e){let t=e.target.value;e.target.checked?this.selectedTypes.push(t):this.selectedTypes=this.selectedTypes.filter(n=>n!==t),this.showTypeError=this.selectedTypes.length===0}dateRangeValidator(e){let t=e.get("startDate")?.value,n=e.get("endDate")?.value;return t&&n&&new Date(t)>new Date(n)?{dateRange:!0}:null}resetForm(){this.batchDeleteForm.reset(),this.selectedTypes=[],this.showTypeError=!1}onSubmit(){if(this.batchDeleteForm.valid&&this.selectedTypes.length>0){this.isLoading=!0;let e=this.batchDeleteForm.value,t={startDate:this.dateUtils.formatDateDDMMYYYY(e.startDate),endDate:this.dateUtils.formatDateDDMMYYYY(e.endDate),type:this.selectedTypes},n=this.batchService.batchDelete(t).pipe(O(this.destroy$)).subscribe({next:s=>{this.snackbar.success("Data deleted successfully"),this.resetForm(),this.isLoading=!1},error:s=>{this.snackbar.error(s.message||"Failed to delete data"),this.isLoading=!1}});this.subscriptions.push(n)}else this.showTypeError=this.selectedTypes.length===0,this.batchDeleteForm.markAllAsTouched()}onConfirmDelete(){if(this.batchDeleteForm.valid&&this.selectedTypes.length>0){this.isLoading=!0;let e=this.batchDeleteForm.value,t={startDate:this.dateUtils.formatDateDDMMYYYY(e.startDate),endDate:this.dateUtils.formatDateDDMMYYYY(e.endDate),type:this.selectedTypes},n=this.batchService.batchDelete(t).pipe(O(this.destroy$)).subscribe({next:s=>{this.snackbar.success("Data deleted successfully"),this.resetForm(),this.ngOnInit(),this.isLoading=!1},error:s=>{this.snackbar.error(s.message||"Failed to delete data"),this.isLoading=!1}});this.subscriptions.push(n)}this.showConfirmModal=!1}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.selectedTypes=[],this.batchDeleteForm&&this.batchDeleteForm.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(vs),b(de),b(Ft))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-data-center"]],standalone:!0,features:[re],decls:39,vars:16,consts:[[1,"data-center-container"],[3,"show"],[1,"batch-delete-section","card"],[1,"fas","fa-database"],[3,"formGroup"],[1,"date-range-section"],[1,"form-group"],[1,"fas","fa-calendar"],[1,"required"],["type","date","formControlName","startDate",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","date","formControlName","endDate",1,"form-control"],[1,"data-types-section"],[1,"fas","fa-check-square"],[1,"checkbox-group"],["class","form-check",4,"ngFor","ngForOf"],["class","invalid-feedback d-block",4,"ngIf"],[1,"action-buttons"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","submit",1,"btn","btn-danger",3,"click","disabled"],[1,"fas",3,"ngClass"],["title","Confirm Delete",3,"confirm","cancel","show","message"],[1,"invalid-feedback"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","id","value","checked"],[1,"form-check-label",3,"for"],[1,"invalid-feedback","d-block"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"h2"),m(4,"i",3),c(5," Data Center Management"),a(),o(6,"form",4)(7,"div",5)(8,"div",6)(9,"label"),m(10,"i",7),c(11," Start Date "),o(12,"span",8),c(13,"*"),a()(),m(14,"input",9),M(15,eu,2,0,"div",10),a(),o(16,"div",6)(17,"label"),m(18,"i",7),c(19," End Date "),o(20,"span",8),c(21,"*"),a()(),m(22,"input",11),M(23,tu,2,0,"div",10),a()(),o(24,"div",12)(25,"h3"),m(26,"i",13),c(27," Select Data Types"),a(),o(28,"div",14),M(29,nu,4,5,"div",15),a(),M(30,iu,2,0,"div",16),a(),o(31,"div",17)(32,"button",18),_("click",function(){return n.resetForm()}),m(33,"i",19),c(34," Reset "),a(),o(35,"button",20),_("click",function(){return n.showConfirmModal=!0}),m(36,"i",21),c(37),a()()()(),o(38,"app-confirm-modal",22),_("confirm",function(){return n.onConfirmDelete()})("cancel",function(){return n.showConfirmModal=!1}),a()()),t&2&&(l(),p("show",n.isLoading),l(5),p("formGroup",n.batchDeleteForm),l(8),F("is-invalid",n.isFieldInvalid("startDate")),l(),p("ngIf",n.isFieldInvalid("startDate")),l(7),F("is-invalid",n.isFieldInvalid("endDate")),l(),p("ngIf",n.isFieldInvalid("endDate")),l(6),p("ngForOf",n.dataTypes),l(),p("ngIf",n.showTypeError),l(2),p("disabled",n.isLoading),l(3),p("disabled",!n.batchDeleteForm.valid||n.selectedTypes.length===0||n.isLoading),l(),p("ngClass",n.isLoading?"fa-spinner fa-spin":"fa-trash"),l(),T(" ",n.isLoading?"Deleting...":"Delete Selected Data"," "),l(),p("show",n.showConfirmModal)("message","Are you sure you want to delete the selected data? This action will never be recoverable."))},dependencies:[le,ce,Oe,K,ue,ee,W,Z,J,te,oe,me,$i],styles:[".data-center-container[_ngcontent-%COMP%]{padding:20px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;box-shadow:0 2px 4px #0000001a}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:24px;font-size:1.5rem}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;color:#666}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:24px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;transition:border-color .2s}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:4px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]{margin-bottom:24px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:16px;color:#444}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:8px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;cursor:pointer}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:4px;font-weight:500;display:flex;align-items:center;gap:8px;transition:all .2s}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a6268}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333}@media (max-width: 768px){.data-center-container[_ngcontent-%COMP%], .data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]{padding:16px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}}"]})}}return i})();var ze=(()=>{class i{constructor(e,t,n){this.authService=e,this.router=t,this.snackbarService=n}canActivate(e,t){let n=e.data.roles;if(!n||n.length===0)return!0;if(!n.some(d=>this.authService.hasRole(d))){this.snackbarService.error("You do not have permission to access this page.");let d=this.authService.getDefaultRoute();return this.router.navigate([d]),!1}return!0}static{this.\u0275fac=function(t){return new(t||i)(ge(it),ge(be),ge(de))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ru=i=>["/users/edit",i];function ou(i,r){if(i&1&&(o(0,"div",30),c(1),a()),i&2){let e=f();l(),So(" Showing ",e.startIndex+1," - ",e.endIndex," of ",e.totalElements," users ")}}function au(i,r){if(i&1&&(o(0,"span",42),c(1),a()),i&2){let e=r.$implicit;l(),T(" ",e," ")}}function su(i,r){if(i&1&&(o(0,"button",43),m(1,"i",44),a()),i&2){let e=f().$implicit;p("routerLink",yt(1,ru,e.id))}}function cu(i,r){i&1&&(o(0,"span",45),m(1,"i",46),a())}function lu(i,r){if(i&1&&(o(0,"tr",31)(1,"td"),c(2),a(),o(3,"td")(4,"div",32)(5,"strong"),c(6),a()()(),o(7,"td")(8,"div",33),m(9,"i",34),c(10),a()(),o(11,"td")(12,"div",35),M(13,au,2,1,"span",36),a()(),o(14,"td")(15,"div",37),c(16),a()(),o(17,"td")(18,"span",38),m(19,"i",26),c(20),a()(),o(21,"td",39),M(22,su,2,3,"button",40)(23,cu,2,0,"span",41),a()()),i&2){let e=r.$implicit,t=r.index,n=f();l(2),E(n.startIndex+t+1),l(4),Jn("",e.firstName," ",e.lastName,""),l(4),T(" ",e.email," "),l(3),p("ngForOf",e.roles),l(3),T(" ",e.clientName," "),l(2),p("ngClass",n.getStatusBadgeClass(e.status)),l(),p("ngClass",e.status==="A"?"fa-check-circle":"fa-times-circle"),l(),T(" ",n.getStatusText(e.status)," "),l(2),p("ngIf",!e.isSystem),l(),p("ngIf",e.isSystem)}}function du(i,r){i&1&&(o(0,"tr")(1,"td",47),m(2,"i",48),o(3,"p"),c(4,"No users found"),a()()())}function mu(i,r){if(i&1){let e=N();o(0,"app-pagination",49),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var Ss=(()=>{class i{constructor(e,t,n){this.userService=e,this.fb=t,this.snackbar=n,this.users=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.sortBy="id",this.sortDir="desc",this.clientId=1,this.statusFilter="A",this.destroy$=new G,this.initializeForm()}ngOnInit(){this.loadUsers()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.users=[]}initializeForm(){this.searchForm=this.fb.group({search:[""],status:["A"]})}loadUsers(){this.isLoading=!0;let e=this.searchForm.value,t={clientId:this.clientId,search:e.search?.trim()||"",status:this.statusFilter!=="all"?this.statusFilter:void 0,page:this.currentPage,size:this.pageSize,sortBy:this.sortBy,sortDir:this.sortDir};this.userService.searchUsers(t).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.users=n.data.content,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements,this.updatePaginationIndexes()),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load users"),this.isLoading=!1}})}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}onSearch(){this.currentPage=0,this.statusFilter=this.searchForm.value.status||"A",this.loadUsers()}onPageChange(e){this.currentPage=e,this.loadUsers()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadUsers()}onSort(e){this.sortBy===e?this.sortDir=this.sortDir==="asc"?"desc":"asc":(this.sortBy=e,this.sortDir="desc"),this.currentPage=0,this.loadUsers()}resetForm(){this.searchForm.reset({search:"",status:"A"}),this.statusFilter="A",this.currentPage=0,this.sortBy="id",this.sortDir="desc",this.loadUsers()}getStatusBadgeClass(e){return e==="A"?"active":"inactive"}getStatusText(e){return e==="A"?"Active":"Inactive"}getSortIcon(e){return this.sortBy!==e?"fa-sort":this.sortDir==="asc"?"fa-sort-up":"fa-sort-down"}static{this.\u0275fac=function(t){return new(t||i)(b(Wt),b(X),b(de))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-user-list"]],standalone:!0,features:[re],decls:58,vars:11,consts:[[1,"user-container"],[1,"search-section","card"],[1,"fas","fa-users"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by name or email...",1,"form-control",3,"keyup.enter"],[1,"form-group","status-filter"],["formControlName","status",1,"form-control"],["value","A"],["value","I"],["value","all"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"users-list","card"],[1,"card-header"],["class","results-info",4,"ngIf"],[1,"table-wrapper"],[1,"table-container"],[3,"show"],[1,"table-responsive"],[1,"table"],[1,"sortable",3,"click"],[1,"fas",3,"ngClass"],["class","user-row",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"results-info"],[1,"user-row"],[1,"user-name"],[1,"user-email"],[1,"fas","fa-envelope"],[1,"roles"],["class","role-badge",4,"ngFor","ngForOf"],[1,"client-info"],[1,"status-badge",3,"ngClass"],[1,"actions"],["class","btn-icon edit","title","Edit User",3,"routerLink",4,"ngIf"],["class","no-action","title","System users cannot be edited",4,"ngIf"],[1,"role-badge"],["title","Edit User",1,"btn-icon","edit",3,"routerLink"],[1,"fas","fa-edit"],["title","System users cannot be edited",1,"no-action"],[1,"fas","fa-lock"],["colspan","8",1,"text-center","no-data"],[1,"fas","fa-inbox"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),m(3,"i",2),c(4," Search Users"),a(),o(5,"form",3),_("ngSubmit",function(){return n.onSearch()}),o(6,"div",4)(7,"div",5)(8,"input",6),_("keyup.enter",function(){return n.onSearch()}),a()(),o(9,"div",7)(10,"select",8)(11,"option",9),c(12,"Active"),a(),o(13,"option",10),c(14,"Inactive"),a(),o(15,"option",11),c(16,"All"),a()()(),o(17,"div",12)(18,"button",13),m(19,"i",14),c(20," Search "),a(),o(21,"button",15),_("click",function(){return n.resetForm()}),m(22,"i",16),c(23," Reset "),a()()()()(),o(24,"div",17)(25,"div",18)(26,"h2"),m(27,"i",2),c(28," Users"),a(),M(29,ou,2,3,"div",19),a(),o(30,"div",20)(31,"div",21),m(32,"app-loader",22),o(33,"div",23)(34,"table",24)(35,"thead")(36,"tr")(37,"th",25),_("click",function(){return n.onSort("id")}),c(38," Number "),m(39,"i",26),a(),o(40,"th",25),_("click",function(){return n.onSort("firstName")}),c(41," Name "),m(42,"i",26),a(),o(43,"th"),c(44,"Email"),a(),o(45,"th"),c(46,"Roles"),a(),o(47,"th"),c(48,"Client"),a(),o(49,"th",25),_("click",function(){return n.onSort("status")}),c(50," Status "),m(51,"i",26),a(),o(52,"th"),c(53,"Actions"),a()()(),o(54,"tbody"),M(55,lu,24,11,"tr",27)(56,du,5,0,"tr",28),a()()()()(),M(57,mu,1,4,"app-pagination",29),a()()),t&2&&(l(5),p("formGroup",n.searchForm),l(24),p("ngIf",n.totalElements>0),l(3),p("show",n.isLoading),l(),F("loading",n.isLoading),l(6),p("ngClass",n.getSortIcon("id")),l(3),p("ngClass",n.getSortIcon("firstName")),l(9),p("ngClass",n.getSortIcon("status")),l(4),p("ngForOf",n.users),l(),p("ngIf",!n.isLoading&&(!n.users||n.users.length===0)),l(),p("ngIf",n.totalPages>0))},dependencies:[le,ce,Oe,K,ue,ee,ot,at,W,rt,Z,J,te,oe,Ue,Fe,Ve,me,He],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Roboto,sans-serif;background-color:var(--background);color:var(--text-primary)}.container[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width: 576px){.container[_ngcontent-%COMP%]{max-width:540px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:720px}}@media (min-width: 992px){.container[_ngcontent-%COMP%]{max-width:960px}}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{max-width:1140px}}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--secondary-dark)}.form-control[_ngcontent-%COMP%]{width:90%;padding:10px;border:1px solid var(--supporting);border-radius:4px!important;margin-bottom:15px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem;background-color:#fff;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--supporting)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--primary-lightest)}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;margin-bottom:20px}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-2[_ngcontent-%COMP%]{margin-top:1rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:1rem}.p-2[_ngcontent-%COMP%]{padding:1rem}.btn-success[_ngcontent-%COMP%]{background-color:var(--success);color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:#16734c}.btn-warning[_ngcontent-%COMP%]{background-color:var(--warning);color:#fff}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#966100}.btn-error[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{background-color:var(--error);color:#fff}.btn-error[_ngcontent-%COMP%]:hover, .btn-danger[_ngcontent-%COMP%]:hover{background-color:#9b2f2f}.btn-info[_ngcontent-%COMP%]{background-color:var(--info);color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background-color:#218298}.text-success[_ngcontent-%COMP%]{color:var(--success)}.text-warning[_ngcontent-%COMP%]{color:var(--warning)}.text-error[_ngcontent-%COMP%], .text-danger[_ngcontent-%COMP%]{color:var(--error)}.text-info[_ngcontent-%COMP%]{color:var(--info)}.text-accent[_ngcontent-%COMP%]{color:var(--accent)}.bg-success[_ngcontent-%COMP%]{background-color:var(--success)}.bg-warning[_ngcontent-%COMP%]{background-color:var(--warning)}.bg-error[_ngcontent-%COMP%], .bg-danger[_ngcontent-%COMP%]{background-color:var(--error)}.bg-info[_ngcontent-%COMP%]{background-color:var(--info)}.bg-accent[_ngcontent-%COMP%]{background-color:var(--accent)}.custom-dialog-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background-color:#00000080!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{border-radius:12px!important;padding:0!important;box-shadow:0 8px 32px #0000001a!important;background:#fff!important;position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;margin:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]{padding:0!important;position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;margin:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{padding:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dialog-enter .3s ease-out}@keyframes _ngcontent-%COMP%_dialog-enter{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@media (max-width: 576px){.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{margin:16px!important}}.custom-snackbar-container[_ngcontent-%COMP%]{position:fixed!important;z-index:1001!important;transform:none!important;-webkit-transform:none!important;-ms-transform:none!important}.custom-snackbar-container.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{position:fixed!important;margin:0!important;max-width:none!important;inset:20px 20px auto auto!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__surface[_ngcontent-%COMP%]{background:none!important;box-shadow:none!important;min-width:auto!important;min-height:auto!important;padding:0!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-label[_ngcontent-%COMP%], .custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__label[_ngcontent-%COMP%]{padding:0!important}@media (max-width: 576px){.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:10px!important;max-width:calc(100% - 20px)!important}}.search-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:40px;max-width:90px}.refresh[_ngcontent-%COMP%], .calculator[_ngcontent-%COMP%]{width:33px;height:33px;display:flex;justify-content:center;align-items:center}.user-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background);min-height:calc(100vh - 60px)}.user-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.user-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem;display:flex;align-items:center;gap:10px}.user-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary)}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:start;flex-wrap:wrap}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;min-width:200px}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group.status-filter[_ngcontent-%COMP%]{flex:0 0 150px}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:43px}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px}.user-container[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:15px}.user-container[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.user-container[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.user-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.user-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative;min-height:200px;background:#fff}.user-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.user-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;width:100%}.user-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;min-height:200px;overflow-x:auto}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--supporting);border-radius:4px}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#97a3ab}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;padding:15px 12px;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px;background-color:var(--background);color:var(--text-primary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s ease}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px;color:var(--secondary);font-size:.85rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;border-top:1px solid var(--supporting);color:var(--text-primary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]:hover{background-color:rgba(var(--secondary-rgb, 23, 163, 223),.05)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--text-secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary);font-size:.85rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:500;background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1);color:var(--secondary);white-space:nowrap}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:12px;font-size:.85rem;font-weight:500;display:inline-flex;align-items:center;gap:6px}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:500;display:inline-flex;align-items:center;gap:5px;background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1);color:var(--secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .system-badge.user-badge[_ngcontent-%COMP%]{background-color:#8a949c1a;color:var(--text-secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{padding:40px 20px;text-align:center;color:var(--text-secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:15px;opacity:.3}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;justify-content:center}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.actions[_ngcontent-%COMP%]   .no-action[_ngcontent-%COMP%]{color:var(--text-secondary);opacity:.5;padding:8px;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .no-action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 992px){.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1 1 100%}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.user-container[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}@media (max-width: 768px){.user-container[_ngcontent-%COMP%]{padding:10px}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin:0 -15px;padding:0 15px}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;font-size:.85rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{font-size:.7rem;padding:3px 8px}}@media (max-width: 576px){.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px;font-size:.8rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]{font-size:.8rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 8px}}"]})}}return i})();function pu(i,r){if(i&1&&(o(0,"span",51),c(1),a()),i&2){let e=r.$implicit;l(),T(" ",e," ")}}function uu(i,r){if(i&1&&(o(0,"div",40)(1,"div",41)(2,"div",42),m(3,"i",43),o(4,"h3"),c(5,"User Information"),a()(),o(6,"div",44)(7,"div",45)(8,"label"),m(9,"i",46),c(10," Name"),a(),o(11,"span"),c(12),a()(),o(13,"div",45)(14,"label"),m(15,"i",47),c(16," Email"),a(),o(17,"span"),c(18),a()(),o(19,"div",45)(20,"label"),m(21,"i",48),c(22," Roles"),a(),o(23,"span"),M(24,pu,2,1,"span",49),a()(),o(25,"div",45)(26,"label"),m(27,"i",50),c(28," Client"),a(),o(29,"span"),c(30),a()()()()()),i&2){let e=f(2);l(12),Jn("",e.user.firstName," ",e.user.lastName,""),l(6),E(e.user.email),l(6),p("ngForOf",e.user.roles),l(6),E(e.user.clientName)}}function gu(i,r){if(i&1&&(o(0,"span",52),c(1," Password Strength: "),o(2,"strong"),c(3),a()()),i&2){let e=f(2);l(3),E(e.getPasswordStrengthText())}}function fu(i,r){if(i&1&&(o(0,"div",53),c(1),a()),i&2){let e=f(2);l(),T(" ",e.getFieldError("password")," ")}}function hu(i,r){if(i&1&&(o(0,"div",53),c(1),a()),i&2){let e=f(2);l(),T(" ",e.getFieldError("confirmPassword")," ")}}function _u(i,r){if(i&1&&(o(0,"div",53),c(1),a()),i&2){let e=f(2);l(),T(" ",e.getFormError()," ")}}function Cu(i,r){i&1&&(o(0,"div",53),c(1," Status is required "),a())}function bu(i,r){if(i&1&&(o(0,"button",54),m(1,"i",20),c(2),a()),i&2){let e=f(2);p("disabled",e.userForm.invalid||e.isLoading||e.isEditing&&(e.user==null?null:e.user.isSystem)),l(),p("ngClass",e.isLoading?"fa-spinner fa-spin":"fa-save"),l(),T(" ",e.isLoading?"Updating...":"Update User"," ")}}function Pu(i,r){i&1&&(o(0,"div",55),m(1,"i",27),c(2," System users cannot be modified "),a())}function Mu(i,r){if(i&1){let e=N();o(0,"div",8),M(1,uu,31,5,"div",9),o(2,"form",10),_("ngSubmit",function(){v(e);let n=f();return x(n.onSubmit())}),o(3,"div",11)(4,"h3"),m(5,"i",12),c(6," Password Settings"),a(),o(7,"div",13)(8,"label",14),m(9,"i",15),c(10," New Password "),o(11,"span",16),c(12,"*"),a()(),o(13,"div",17)(14,"input",18),_("input",function(){v(e);let n=f();return x(n.onPasswordChange())}),a(),o(15,"button",19),_("click",function(){v(e);let n=f();return x(n.togglePasswordVisibility())}),m(16,"i",20),a()(),o(17,"div",21)(18,"div",22),m(19,"div",23),a(),M(20,gu,4,1,"span",24),a(),M(21,fu,2,1,"div",25),o(22,"div",26),m(23,"i",27),c(24," Password must be at least 3 characters long "),a()(),o(25,"div",13)(26,"label",28),m(27,"i",15),c(28," Confirm Password "),o(29,"span",16),c(30,"*"),a()(),m(31,"input",29),M(32,hu,2,1,"div",25)(33,_u,2,1,"div",25),a()(),o(34,"div",11)(35,"h3"),m(36,"i",30),c(37," Status Settings"),a(),o(38,"div",13)(39,"label",31),m(40,"i",32),c(41," Status "),o(42,"span",16),c(43,"*"),a()(),o(44,"select",33)(45,"option",34),c(46,"Active"),a(),o(47,"option",35),c(48,"Inactive"),a()(),M(49,Cu,2,0,"div",25),o(50,"div",26),m(51,"i",27),c(52," Active users can log in, inactive users cannot "),a()()(),o(53,"div",36)(54,"button",37),_("click",function(){v(e);let n=f();return x(n.onCancel())}),m(55,"i",5),c(56," Cancel "),a(),M(57,bu,3,3,"button",38)(58,Pu,3,0,"div",39),a()()()}if(i&2){let e,t,n,s,d,u,g,h,P=f();l(),p("ngIf",P.isEditing&&P.user),l(),p("formGroup",P.userForm),l(12),F("is-invalid",((e=P.userForm.get("password"))==null?null:e.invalid)&&(((e=P.userForm.get("password"))==null?null:e.touched)||P.isSubmitted)),p("type",P.showPassword?"text":"password"),l(),xo("title","",P.showPassword?"Hide":"Show"," password"),l(),p("ngClass",P.showPassword?"fa-eye-slash":"fa-eye"),l(2),p("ngClass",P.getPasswordStrengthClass()),l(2),p("ngIf",(t=P.userForm.get("password"))==null?null:t.value),l(),p("ngIf",((n=P.userForm.get("password"))==null?null:n.errors)&&(((n=P.userForm.get("password"))==null?null:n.touched)||P.isSubmitted)),l(10),F("is-invalid",(((s=P.userForm.get("confirmPassword"))==null?null:s.invalid)||(P.userForm.errors==null?null:P.userForm.errors.passwordMismatch))&&(((s=P.userForm.get("confirmPassword"))==null?null:s.touched)||P.isSubmitted)),p("type",P.showPassword?"text":"password"),l(),p("ngIf",((d=P.userForm.get("confirmPassword"))==null?null:d.errors)&&(((d=P.userForm.get("confirmPassword"))==null?null:d.touched)||P.isSubmitted)),l(),p("ngIf",(P.userForm.errors==null?null:P.userForm.errors.passwordMismatch)&&(((u=P.userForm.get("confirmPassword"))==null?null:u.touched)||P.isSubmitted)),l(11),F("is-invalid",((g=P.userForm.get("status"))==null?null:g.invalid)&&(((g=P.userForm.get("status"))==null?null:g.touched)||P.isSubmitted)),l(5),p("ngIf",((h=P.userForm.get("status"))==null?null:h.errors)&&(((h=P.userForm.get("status"))==null?null:h.touched)||P.isSubmitted)),l(8),p("ngIf",!P.isEditing||!(P.user!=null&&P.user.isSystem)),l(),p("ngIf",P.isEditing&&(P.user==null?null:P.user.isSystem))}}var ws=(()=>{class i{constructor(e,t,n,s,d){this.fb=e,this.userService=t,this.snackbar=n,this.route=s,this.router=d,this.isLoading=!1,this.isLoadingUser=!1,this.isSubmitted=!1,this.userId=null,this.user=null,this.isEditing=!1,this.showPassword=!1,this.passwordStrength="weak",this.destroy$=new G,this.initForm()}ngOnInit(){this.route.params.pipe(O(this.destroy$)).subscribe(e=>{e.id?(this.userId=+e.id,this.isEditing=!0,this.loadUser()):(this.isEditing=!1,this.userId=null,this.user=null,this.initForm())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.user=null}initForm(){this.userForm=this.fb.group({password:["",[S.required,S.minLength(3),S.maxLength(50)]],confirmPassword:["",[S.required]],status:["A",[S.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(e){let t=e.get("password"),n=e.get("confirmPassword");return t&&n&&t.value!==n.value?{passwordMismatch:!0}:null}loadUser(){if(!this.userId)return;this.isLoadingUser=!0;let e={id:this.userId};this.userService.getUserDetail(e).pipe(O(this.destroy$)).subscribe({next:t=>{t.success&&(this.user=t.data,this.patchForm(t.data)),this.isLoadingUser=!1},error:()=>{this.snackbar.error("Failed to load user details"),this.isLoadingUser=!1,this.router.navigate(["/users"])}})}patchForm(e){e&&this.userForm.patchValue({password:"",confirmPassword:"",status:e.status||"A"})}onPasswordChange(){let e=this.userForm.get("password")?.value||"";this.checkPasswordStrength(e);let t=this.userForm.get("confirmPassword");t&&t.updateValueAndValidity()}checkPasswordStrength(e){if(e.length===0){this.passwordStrength="weak";return}let t=0;e.length>=8&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^a-zA-Z0-9]/.test(e)&&t++,t<=2?this.passwordStrength="weak":t<=4?this.passwordStrength="medium":this.passwordStrength="strong"}togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){if(this.isSubmitted=!0,this.userForm.valid&&this.userId){this.isLoading=!0;let e=this.userForm.value,t={id:this.userId,password:e.password,status:e.status};this.userService.updatePassword(t).pipe(O(this.destroy$)).subscribe({next:n=>{n.success&&(this.snackbar.success(n.message||"User updated successfully"),this.router.navigate(["/users"])),this.isLoading=!1},error:n=>{this.snackbar.error(n.error?.message||"Failed to update user"),this.isLoading=!1}})}else Object.keys(this.userForm.controls).forEach(e=>{this.userForm.get(e)?.markAsTouched()})}onCancel(){this.router.navigate(["/users"])}getFieldError(e){let t=this.userForm.get(e);if(t?.errors&&(t.dirty||t.touched||this.isSubmitted)){if(t.errors.required)return`${e==="confirmPassword"?"Confirm password":"Password"} is required`;if(t.errors.minlength)return`Password must be at least ${t.errors.minlength.requiredLength} characters`;if(t.errors.maxlength)return`Password must not exceed ${t.errors.maxlength.requiredLength} characters`}return""}getFormError(){return this.userForm.errors&&this.userForm.errors.passwordMismatch?"Passwords do not match":""}getPasswordStrengthClass(){return`password-strength ${this.passwordStrength}`}getPasswordStrengthText(){switch(this.passwordStrength){case"weak":return"Weak";case"medium":return"Medium";case"strong":return"Strong";default:return""}}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(Wt),b(de),b(It),b(be))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-add-user"]],standalone:!0,features:[re],decls:11,vars:3,consts:[[1,"user-form-container"],[1,"form-card","card"],[1,"form-header"],[1,"fas","fa-user-edit"],["title","Cancel",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-times"],[3,"show"],["class","form-content",4,"ngIf"],[1,"form-content"],["class","user-info",4,"ngIf"],[1,"user-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"fas","fa-key"],[1,"form-group"],["for","password"],[1,"fas","fa-lock"],[1,"required"],[1,"password-input-wrapper"],["id","password","formControlName","password","placeholder","Enter new password","autocomplete","new-password",1,"form-control",3,"input","type"],["type","button",1,"password-toggle",3,"click","title"],[1,"fas",3,"ngClass"],[1,"password-strength-indicator"],[1,"strength-bar",3,"ngClass"],[1,"strength-fill"],["class","strength-text",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"form-hint"],[1,"fas","fa-info-circle"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm new password","autocomplete","new-password",1,"form-control",3,"type"],[1,"fas","fa-toggle-on"],["for","status"],[1,"fas","fa-circle"],["id","status","formControlName","status",1,"form-control"],["value","A"],["value","I"],[1,"form-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","submit","class","btn btn-sm btn-primary",3,"disabled",4,"ngIf"],["class","system-user-notice",4,"ngIf"],[1,"user-info"],[1,"info-card"],[1,"info-header"],[1,"fas","fa-user-circle"],[1,"info-grid"],[1,"info-item"],[1,"fas","fa-user"],[1,"fas","fa-envelope"],[1,"fas","fa-user-tag"],["class","role-badge",4,"ngFor","ngForOf"],[1,"fas","fa-building"],[1,"role-badge"],[1,"strength-text"],[1,"invalid-feedback"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"system-user-notice"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),m(4,"i",3),c(5),a(),o(6,"button",4),_("click",function(){return n.onCancel()}),m(7,"i",5),c(8," Cancel "),a()(),m(9,"app-loader",6),M(10,Mu,59,21,"div",7),a()()),t&2&&(l(5),T(" ",n.isEditing?"Update User":"Add New User"," "),l(4),p("show",n.isLoadingUser),l(),p("ngIf",!n.isLoadingUser))},dependencies:[le,ce,Oe,K,ue,ee,ot,at,W,rt,Z,J,te,oe,Fe,me],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Roboto,sans-serif;background-color:var(--background);color:var(--text-primary)}.container[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width: 576px){.container[_ngcontent-%COMP%]{max-width:540px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:720px}}@media (min-width: 992px){.container[_ngcontent-%COMP%]{max-width:960px}}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{max-width:1140px}}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--secondary-dark)}.form-control[_ngcontent-%COMP%]{width:90%;padding:10px;border:1px solid var(--supporting);border-radius:4px!important;margin-bottom:15px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem;background-color:#fff;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--supporting)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:var(--primary-lightest)}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;margin-bottom:20px}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-2[_ngcontent-%COMP%]{margin-top:1rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:1rem}.p-2[_ngcontent-%COMP%]{padding:1rem}.btn-success[_ngcontent-%COMP%]{background-color:var(--success);color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background-color:#16734c}.btn-warning[_ngcontent-%COMP%]{background-color:var(--warning);color:#fff}.btn-warning[_ngcontent-%COMP%]:hover{background-color:#966100}.btn-error[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{background-color:var(--error);color:#fff}.btn-error[_ngcontent-%COMP%]:hover, .btn-danger[_ngcontent-%COMP%]:hover{background-color:#9b2f2f}.btn-info[_ngcontent-%COMP%]{background-color:var(--info);color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background-color:#218298}.text-success[_ngcontent-%COMP%]{color:var(--success)}.text-warning[_ngcontent-%COMP%]{color:var(--warning)}.text-error[_ngcontent-%COMP%], .text-danger[_ngcontent-%COMP%]{color:var(--error)}.text-info[_ngcontent-%COMP%]{color:var(--info)}.text-accent[_ngcontent-%COMP%]{color:var(--accent)}.bg-success[_ngcontent-%COMP%]{background-color:var(--success)}.bg-warning[_ngcontent-%COMP%]{background-color:var(--warning)}.bg-error[_ngcontent-%COMP%], .bg-danger[_ngcontent-%COMP%]{background-color:var(--error)}.bg-info[_ngcontent-%COMP%]{background-color:var(--info)}.bg-accent[_ngcontent-%COMP%]{background-color:var(--accent)}.custom-dialog-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background-color:#00000080!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{border-radius:12px!important;padding:0!important;box-shadow:0 8px 32px #0000001a!important;background:#fff!important;position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;margin:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]{padding:0!important;position:fixed!important;top:50%!important;left:50%!important;transform:translate(-50%,-50%)!important;margin:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{padding:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dialog-enter .3s ease-out}@keyframes _ngcontent-%COMP%_dialog-enter{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@media (max-width: 576px){.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{margin:16px!important}}.custom-snackbar-container[_ngcontent-%COMP%]{position:fixed!important;z-index:1001!important;transform:none!important;-webkit-transform:none!important;-ms-transform:none!important}.custom-snackbar-container.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{position:fixed!important;margin:0!important;max-width:none!important;inset:20px 20px auto auto!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__surface[_ngcontent-%COMP%]{background:none!important;box-shadow:none!important;min-width:auto!important;min-height:auto!important;padding:0!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-label[_ngcontent-%COMP%], .custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__label[_ngcontent-%COMP%]{padding:0!important}@media (max-width: 576px){.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:10px!important;max-width:calc(100% - 20px)!important}}.search-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:40px;max-width:90px}.refresh[_ngcontent-%COMP%], .calculator[_ngcontent-%COMP%]{width:33px;height:33px;display:flex;justify-content:center;align-items:center}.user-form-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background);min-height:calc(100vh - 60px)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:30px;margin:0 auto}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid var(--background)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.75rem;display:flex;align-items:center;gap:12px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{position:relative}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{margin-bottom:30px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:var(--background);border-radius:8px;padding:20px;border:1px solid var(--supporting)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid var(--supporting)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary);font-size:1.5rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.2rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);font-weight:500;display:flex;align-items:center;gap:8px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary);font-size:.9rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1rem;font-weight:500}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:500;background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1);color:var(--secondary);margin-right:5px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%], .user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .user-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:500}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%]{background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1);color:var(--secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .user-badge[_ngcontent-%COMP%]{background-color:#8a949c1a;color:var(--text-secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:30px;padding-bottom:25px;border-bottom:1px solid var(--background)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:var(--text-primary);font-size:1.2rem;display:flex;align-items:center;gap:10px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:var(--text-primary);font-weight:500;font-size:.95rem;display:flex;align-items:center;gap:8px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary);font-size:.9rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545;margin-left:4px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:12px 15px;border:1px solid var(--supporting);border-radius:6px;font-size:1rem;transition:all .3s ease;background-color:#fff;color:var(--text-primary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--secondary);box-shadow:0 0 0 3px rgba(var(--secondary-rgb, 23, 163, 223),.1)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary);opacity:.6}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]{position:relative}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-right:45px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:5px;transition:color .2s ease}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:hover{color:var(--secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;gap:8px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]{height:6px;background-color:var(--background);border-radius:3px;overflow:hidden;position:relative}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease,background-color .3s ease;border-radius:3px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar.weak[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{width:33%;background-color:#dc3545}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar.medium[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{width:66%;background-color:#ffc107}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar.strong[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{width:100%;background-color:var(--accent2)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-text[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{display:block;color:#dc3545;font-size:.875rem;margin-top:5px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:8px;font-size:.85rem;color:var(--text-secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-hint[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:30px;padding-top:25px;border-top:2px solid var(--background);flex-wrap:wrap}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .system-user-notice[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 15px;background-color:#ffc1071a;border:1px solid #ffc107;border-radius:6px;color:#856404;font-size:.9rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .system-user-notice[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ffc107}@media (max-width: 768px){.user-form-container[_ngcontent-%COMP%]{padding:10px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:20px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:15px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}}return i})();var Es=(()=>{class i{constructor(e){this.http=e,this.baseUrl=`${st.apiUrl}`}registerDealer(e){return this.http.post(`${this.baseUrl}/api/customers/register`,e)}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function yu(i,r){i&1&&(o(0,"small",37),c(1,"First name is required"),a())}function Ou(i,r){i&1&&(o(0,"small",37),c(1,"Last name is required"),a())}function vu(i,r){i&1&&(o(0,"small",37),c(1,"Valid email is required"),a())}function xu(i,r){i&1&&(o(0,"small",37),c(1,"Password must be at least 8 characters"),a())}function Su(i,r){i&1&&(o(0,"small",37),c(1,"Business name is required"),a())}function wu(i,r){i&1&&(o(0,"small",37),c(1,"Enter a valid GSTIN"),a())}function Eu(i,r){i&1&&(o(0,"small",37),c(1,"Enter a valid 10-digit mobile"),a())}function ku(i,r){i&1&&(o(0,"small",37),c(1,"DL Number is too long"),a())}function Tu(i,r){i&1&&(o(0,"small",37),c(1,"Address is required"),a())}function Iu(i,r){i&1&&(o(0,"span"),c(1,"Pincode is required"),a())}function Fu(i,r){i&1&&(o(0,"span"),c(1,"Enter a valid 6-digit pincode"),a())}function Du(i,r){if(i&1&&(o(0,"small",37),M(1,Iu,2,0,"span",35)(2,Fu,2,0,"span",35),a()),i&2){let e=f();l(),p("ngIf",e.f.pincode.errors==null?null:e.f.pincode.errors.required),l(),p("ngIf",e.f.pincode.errors==null?null:e.f.pincode.errors.pattern)}}function Au(i,r){i&1&&(o(0,"span"),c(1,"Submit registration"),a())}function Nu(i,r){i&1&&m(0,"span",38)}var ks=(()=>{class i{constructor(e,t,n,s,d){this.formBuilder=e,this.dealersService=t,this.toastr=n,this.title=s,this.meta=d,this.isSubmitting=!1,this.destroy$=new G,this.subscriptions=[]}ngOnInit(){this.title.setTitle("Register Dealer "),this.meta.updateTag({name:"description",content:"Register as a dealer to partner with Medonix. Quick, secure, and mobile-friendly registration with pending approval workflow."}),this.form=this.formBuilder.group({email:["",[S.required,S.email]],password:["",[S.required,S.minLength(8)]],firstName:["",[S.required,S.maxLength(50)]],lastName:["",[S.required,S.maxLength(50)]],customerName:["",[S.required,S.maxLength(120)]],gst:["",[S.required,S.pattern(/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}Z[0-9A-Z]{1}$/)]],dlNumber:["",[S.maxLength(32)]],address:["",[S.required,S.maxLength(250)]],pincode:["",[S.required,S.pattern(/^\d{6}$/)]],mobile:["",[S.required,S.pattern(/^[6-9]\d{9}$/)]],remarks:["",[S.maxLength(250)]]})}get f(){return this.form.controls}submit(){if(this.form.invalid||this.isSubmitting){this.form.markAllAsTouched();return}let e=this.form.value;this.isSubmitting=!0;let t=this.dealersService.registerDealer(e).pipe(O(this.destroy$)).subscribe({next:n=>{n?.success?(this.toastr.success("Dealer registered successfully. Pending for approval.","Success"),this.form.reset()):this.toastr.info(n?.message||"Request submitted.")},error:n=>{let s=n?.error?.message||"Failed to register dealer. Please try again.";this.toastr.error(s,"Error")},complete:()=>{this.isSubmitting=!1}});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.form&&this.form.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(Es),b(un),b(Ao),b(Do))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-add-dealer"]],decls:76,vars:14,consts:[[1,"register-wrapper"],[1,"container"],[1,"card"],[1,"card-header"],[1,"title"],[1,"subtitle"],["novalidate","",1,"form-grid",3,"ngSubmit","keydown.enter","formGroup"],[1,"grid","two"],[1,"field"],["for","firstName"],["id","firstName","type","text","formControlName","firstName","placeholder","John"],["class","error",4,"ngIf"],["for","lastName"],["id","lastName","type","text","formControlName","lastName","placeholder","Doe"],["for","email"],["id","email","type","email","formControlName","email","placeholder","dealer@example.com","autocomplete","email"],["for","password"],["id","password","type","password","formControlName","password","placeholder","Min 8 characters","autocomplete","new-password"],[1,"hint"],["for","customerName"],["id","customerName","type","text","formControlName","customerName","placeholder","John Doe Trading Co."],["for","gst"],["id","gst","type","text","formControlName","gst","placeholder","29ABCDE1234F1Z5"],["for","mobile"],["id","mobile","type","tel","formControlName","mobile","placeholder","9876543210","autocomplete","tel"],["for","dlNumber"],["id","dlNumber","type","text","formControlName","dlNumber","placeholder","License number"],["for","address"],["id","address","rows","3","formControlName","address","placeholder","123 Main Street, City"],["for","pincode"],["id","pincode","type","text","formControlName","pincode","placeholder","123456","maxlength","6"],["for","remarks"],["id","remarks","rows","2","formControlName","remarks","placeholder","VIP Customer"],[1,"actions"],["type","submit",1,"primary",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"error"],[1,"spinner"]],template:function(t,n){t&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),c(5,"Register Dealer"),a(),o(6,"p",5),c(7,"Create your dealer account. Quick approval follows verification."),a()(),o(8,"form",6),_("ngSubmit",function(){return n.submit()})("keydown.enter",function(d){return d.preventDefault()}),o(9,"div",7)(10,"div",8)(11,"label",9),c(12,"First name"),a(),m(13,"input",10),M(14,yu,2,0,"small",11),a(),o(15,"div",8)(16,"label",12),c(17,"Last name"),a(),m(18,"input",13),M(19,Ou,2,0,"small",11),a()(),o(20,"div",7)(21,"div",8)(22,"label",14),c(23,"Account email"),a(),m(24,"input",15),M(25,vu,2,0,"small",11),a(),o(26,"div",8)(27,"label",16),c(28,"Password"),a(),m(29,"input",17),o(30,"small",18),c(31,"Use at least 8 characters."),a(),M(32,xu,2,0,"small",11),a()(),o(33,"div",8)(34,"label",19),c(35,"Business name"),a(),m(36,"input",20),M(37,Su,2,0,"small",11),a(),o(38,"div",7)(39,"div",8)(40,"label",21),c(41,"GSTIN"),a(),m(42,"input",22),o(43,"small",18),c(44,"Format: 29ABCDE1234F1Z5"),a(),M(45,wu,2,0,"small",11),a(),o(46,"div",8)(47,"label",23),c(48,"Mobile"),a(),m(49,"input",24),M(50,Eu,2,0,"small",11),a()(),o(51,"div",8)(52,"label",25),c(53,"DL Number"),a(),m(54,"input",26),M(55,ku,2,0,"small",11),a(),o(56,"div",8)(57,"label",27),c(58,"Business address"),a(),m(59,"textarea",28),M(60,Tu,2,0,"small",11),a(),o(61,"div",8)(62,"label",29),c(63,"Pincode"),a(),m(64,"input",30),o(65,"small",18),c(66,"Enter 6-digit pincode"),a(),M(67,Du,3,2,"small",11),a(),o(68,"div",8)(69,"label",31),c(70,"Remarks (optional)"),a(),m(71,"textarea",32),a(),o(72,"div",33)(73,"button",34),M(74,Au,2,0,"span",35)(75,Nu,1,0,"span",36),a()()()()()()),t&2&&(l(8),p("formGroup",n.form),l(6),p("ngIf",n.f.firstName.touched&&n.f.firstName.invalid),l(5),p("ngIf",n.f.lastName.touched&&n.f.lastName.invalid),l(6),p("ngIf",n.f.email.touched&&n.f.email.invalid),l(7),p("ngIf",n.f.password.touched&&n.f.password.invalid),l(5),p("ngIf",n.f.customerName.touched&&n.f.customerName.invalid),l(8),p("ngIf",n.f.gst.touched&&n.f.gst.invalid),l(5),p("ngIf",n.f.mobile.touched&&n.f.mobile.invalid),l(5),p("ngIf",n.f.dlNumber.touched&&n.f.dlNumber.invalid),l(5),p("ngIf",n.f.address.touched&&n.f.address.invalid),l(7),p("ngIf",n.f.pincode.touched&&n.f.pincode.invalid),l(6),p("disabled",n.isSubmitting||n.form.invalid),l(),p("ngIf",!n.isSubmitting),l(),p("ngIf",n.isSubmitting))},dependencies:[K,ee,W,Z,J,mi,te,oe],styles:[".register-wrapper[_ngcontent-%COMP%]{padding:24px 12px}.container[_ngcontent-%COMP%]{margin:0 auto}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 24px #00000014;overflow:hidden}.card-header[_ngcontent-%COMP%]{padding:20px 24px;background:linear-gradient(135deg,#0f66c3,#3cb2ff);color:#fff}.title[_ngcontent-%COMP%]{margin:0 0 6px;font-size:22px;font-weight:700}.subtitle[_ngcontent-%COMP%]{margin:0;opacity:.9}.form-grid[_ngcontent-%COMP%]{padding:22px 24px}.grid.two[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media (max-width: 768px){.grid.two[_ngcontent-%COMP%]{grid-template-columns:1fr}}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:14px}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:8px;padding:10px 12px;outline:none;transition:border-color .2s ease,box-shadow .2s ease}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#0f66c3;box-shadow:0 0 0 3px #0f66c326}.hint[_ngcontent-%COMP%]{color:#7a7a7a;margin-top:6px}.error[_ngcontent-%COMP%]{color:#c0392b;margin-top:6px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:6px}button.primary[_ngcontent-%COMP%]{background:#0f66c3;color:#fff;border:none;border-radius:10px;padding:10px 18px;font-weight:600;cursor:pointer;transition:transform .08s ease,box-shadow .2s ease,background .2s ease}button.primary[_ngcontent-%COMP%]:disabled{background:#a8c7ea;cursor:not-allowed}button.primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 16px #0f66c359;transform:translateY(-1px)}.spinner[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:50%;border:2px solid rgba(255,255,255,.5);border-top-color:#fff;display:inline-block;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})}}return i})();var Vu=()=>["/transport-master/edit"];function zu(i,r){if(i&1){let e=N();o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),a(),o(9,"td"),c(10),a(),o(11,"td")(12,"span"),c(13),a()(),o(14,"td",25)(15,"button",26),_("click",function(n){let s=v(e).$implicit,d=f();return n.preventDefault(),x(d.onEdit(s.id))})("touchstart",function(n){return v(e),x(n.preventDefault())})("touchend",function(n){let s=v(e).$implicit,d=f();return n.preventDefault(),x(d.onEdit(s.id))}),m(16,"i",27),a(),o(17,"button",28),_("click",function(){let n=v(e).$implicit,s=f();return x(s.delete(n.id))})("touchstart",function(n){return v(e),x(n.preventDefault())})("touchend",function(n){let s=v(e).$implicit,d=f();return n.preventDefault(),x(d.delete(s.id))}),m(18,"i",29),a()()()}if(i&2){let e=r.$implicit,t=r.index,n=f();l(2),E(n.startIndex+t+1),l(2),E(e.name),l(2),E(e.mobile),l(2),E(e.gst),l(2),E(e.remarks),l(2),Mt("status-badge "+(e.status==="A"?"active":"inactive")),l(),T(" ",e.status==="A"?"Active":"Inactive"," "),l(2),p("routerLink",_t(11,Vu)),cn("aria-label","Edit transport master "+e.name),l(2),cn("aria-label","Delete transport master "+e.name)}}function Ru(i,r){i&1&&(o(0,"tr")(1,"td",30)(2,"p",31),c(3,"No transports found"),a()()())}function ju(i,r){if(i&1){let e=N();o(0,"app-pagination",32),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var Ts=(()=>{class i{constructor(e,t,n,s,d){this.fb=e,this.service=t,this.snackbar=n,this.router=s,this.encryption=d,this.isLoading=!1,this.transports=[],this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.destroy$=new G,this.subscriptions=[],this.searchForm=this.fb.group({search:[""]})}ngOnInit(){this.loadData()}loadData(){this.isLoading=!0;let e={search:this.searchForm.value.search||"",page:this.currentPage,size:this.pageSize,sortBy:"id",sortDir:"desc"},t=this.service.search(e).pipe(O(this.destroy$)).subscribe({next:n=>{n?.data?.content?(this.transports=n.data.content,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements,this.updateIndexes()):Array.isArray(n?.data)?(this.transports=n.data,this.totalPages=1,this.totalElements=n.data.length,this.updateIndexes()):(this.transports=[],this.totalPages=0,this.totalElements=0,this.updateIndexes()),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load transports"),this.isLoading=!1}});this.subscriptions.push(t)}onSearch(e){e&&(e.preventDefault(),e.stopPropagation()),this.currentPage=0,this.pageSize=10,this.loadData()}reset(e){e&&(e.preventDefault(),e.stopPropagation()),this.searchForm.reset(),this.currentPage=0,this.pageSize=10,this.loadData()}onPageChange(e){this.currentPage=e,this.loadData()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadData()}delete(e){if(!confirm("Delete this transport?"))return;this.isLoading=!0;let t=this.service.delete(e).pipe(O(this.destroy$)).subscribe({next:()=>{this.snackbar.success("Transport deleted"),this.loadData()},error:()=>{this.snackbar.error("Failed to delete transport"),this.isLoading=!1}});this.subscriptions.push(t)}updateIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}onEdit(e){let t=this.encryption.encrypt(e.toString());localStorage.setItem("transportMasterId",t),this.router.navigate(["/transport-master/edit"])}goToCreateTransport(){localStorage.removeItem("transportMasterId"),this.router.navigate(["/transport-master/create"])}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.transports=[],this.searchForm&&this.searchForm.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(ui),b(de),b(be),b(Xe))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-transport-master-list"]],standalone:!0,features:[re],decls:54,vars:7,consts:[[1,"transport-master-list"],[1,"search-section","card"],[1,"page-title"],["novalidate","",3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"search-input-wrapper"],["for","transport-search",1,"sr-only"],["id","transport-search","type","text","placeholder","Search by name, GST, mobile","formControlName","search","aria-label","Search transport masters by name, GST, or mobile number","autocomplete","off",1,"form-control"],[1,"button-group"],["type","submit","aria-label","Search transport masters",1,"btn","btn-primary",3,"touchstart","touchend"],["aria-hidden","true",1,"fas","fa-search"],[1,"btn-text"],["type","button","aria-label","Reset search filters",1,"btn","btn-secondary",3,"click","touchstart","touchend"],["aria-hidden","true",1,"fas","fa-undo"],[1,"action-buttons"],["type","button","aria-label","Add new transport master",1,"btn","btn-sm","btn-primary",3,"click","touchstart","touchend"],["aria-hidden","true",1,"fas","fa-plus"],[1,"card"],[3,"show"],[1,"table-responsive"],["role","table","aria-label","Transport Masters List",1,"table"],["scope","col"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"actions"],["title","Edit Transport Master",1,"btn-icon","edit",3,"click","touchstart","touchend","routerLink"],["aria-hidden","true",1,"fas","fa-edit"],["title","Delete Transport Master",1,"btn-icon","delete",3,"click","touchstart","touchend"],["aria-hidden","true",1,"fas","fa-trash"],["colspan","7",1,"text-center"],[1,"no-results"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),c(3,"Transport Masters"),a(),o(4,"form",3),_("ngSubmit",function(d){return n.onSearch(d)}),o(5,"div",4)(6,"div",5)(7,"label",6),c(8,"Search Transport Masters"),a(),m(9,"input",7),a(),o(10,"div",8)(11,"button",9),_("touchstart",function(d){return d.preventDefault()})("touchend",function(d){return n.onSearch(d)}),m(12,"i",10),o(13,"span",11),c(14,"Search"),a()(),o(15,"button",12),_("click",function(d){return n.reset(d)})("touchstart",function(d){return d.preventDefault()})("touchend",function(d){return n.reset(d)}),m(16,"i",13),o(17,"span",11),c(18,"Reset"),a()()()()()(),o(19,"div",14)(20,"button",15),_("click",function(){return n.goToCreateTransport()})("touchstart",function(d){return d.preventDefault()})("touchend",function(d){return n.goToCreateTransport(),d.preventDefault()}),m(21,"i",16),o(22,"span",11),c(23,"Add Transport"),a()()(),o(24,"div",17),m(25,"app-loader",18),o(26,"div",19)(27,"table",20)(28,"thead")(29,"tr")(30,"th",21),c(31,"#"),a(),o(32,"th",21)(33,"strong"),c(34,"Name"),a()(),o(35,"th",21)(36,"strong"),c(37,"Mobile"),a()(),o(38,"th",21)(39,"strong"),c(40,"GST"),a()(),o(41,"th",21)(42,"strong"),c(43,"Remarks"),a()(),o(44,"th",21)(45,"strong"),c(46,"Status"),a()(),o(47,"th",21)(48,"strong"),c(49,"Actions"),a()()()(),o(50,"tbody"),M(51,zu,19,12,"tr",22)(52,Ru,4,0,"tr",23),a()()(),M(53,ju,1,4,"app-pagination",24),a()()),t&2&&(l(4),p("formGroup",n.searchForm),l(21),p("show",n.isLoading),l(),F("loading",n.isLoading),l(25),p("ngForOf",n.transports),l(),p("ngIf",!n.isLoading&&n.transports.length===0),l(),p("ngIf",n.totalPages>0))},dependencies:[le,Oe,K,ue,ee,W,Z,J,te,oe,Fe,Ve,me,He],styles:[".transport-master-list[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:12px}.transport-master-list[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin:0 0 1.25rem;font-size:1.75rem;font-weight:600;color:var(--text-primary);line-height:1.3}@media (max-width: 768px){.transport-master-list[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 576px){.transport-master-list[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.25rem}}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{flex:1;min-width:200px}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:.95rem;border:1px solid var(--supporting);border-radius:6px;transition:all .2s ease;margin-bottom:0}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #003a581a}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary)}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:10px;flex-shrink:0;align-items:center}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1.5rem;font-size:.95rem;font-weight:500;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease;touch-action:manipulation;white-space:nowrap;min-height:44px;min-width:100px}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed;pointer-events:none}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem;flex-shrink:0}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-weight:500}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;box-shadow:0 2px 4px #003a5833}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary-dark);transform:translateY(-1px);box-shadow:0 4px 8px #003a584d}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 2px 4px #003a5833}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #003a584d}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff;box-shadow:0 2px 4px #00999c33}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--secondary-dark);transform:translateY(-1px);box-shadow:0 4px 8px #00999c4d}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0);box-shadow:0 2px 4px #00999c33}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #00999c4d}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;transition:all .2s ease;touch-action:manipulation;min-width:36px;min-height:36px;display:inline-flex;align-items:center;justify-content:center}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #003a5833}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:#00999c1a}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px)}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:var(--error);background-color:#c23b3b1a}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:var(--error);color:#fff;transform:translateY(-1px)}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:active{transform:translateY(0)}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.transport-master-list[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin:8px 1rem 12px}.transport-master-list[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.625rem 1.25rem;font-size:.9rem;min-height:40px;touch-action:manipulation}.transport-master-list[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.transport-master-list[_ngcontent-%COMP%]   .no-results[_ngcontent-%COMP%]{margin:2rem 0;color:var(--text-secondary);font-size:1rem}.transport-master-list[_ngcontent-%COMP%]   .sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}@media (max-width: 992px) and (min-width: 769px){.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{min-width:250px}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.7rem 1.25rem;font-size:.9rem;min-width:90px}}@media (max-width: 768px){.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{min-width:100%;width:100%}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{width:100%;justify-content:stretch;gap:10px}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;min-width:0;padding:.875rem 1rem;font-size:.9rem}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:inline}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.transport-master-list[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin:8px 0 12px}.transport-master-list[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 576px){.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:column}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{gap:6px}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:10px}}@media (min-width: 1200px){.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.8rem 1.75rem}}"]})}}return i})();function $u(i,r){if(i&1&&(o(0,"div",20),c(1),a()),i&2){let e=f();l(),T(" ",e.getFieldError("mobile")," ")}}var eo=(()=>{class i{constructor(e,t,n,s,d,u){this.fb=e,this.service=t,this.router=n,this.route=s,this.snackbar=d,this.encryption=u,this.isLoading=!1,this.isEditMode=!1,this.destroy$=new G,this.subscriptions=[],this.initializeForm()}ngOnInit(){let e=localStorage.getItem("transportMasterId");if(e){let t=this.encryption.decrypt(e);t&&(this.transportId=Number(t),this.isEditMode=!0,this.loadDetails(this.transportId))}}getFieldError(e){let t=this.form.get(e);return!t||!t.errors?"":t.errors.required?`${this.getPrettyLabel(e)} is required`:t.errors.email?"Invalid email format":t.errors.maxlength?`${this.getPrettyLabel(e)} is too long`:t.errors.pattern?e==="mobile"?"Enter a valid 10-digit mobile number":"Invalid format":"Invalid value"}isFieldInvalid(e){let t=this.form.get(e);return!!(t&&t.invalid&&(t.dirty||t.touched))}isFieldValid(e){let t=this.form.get(e);return!!(t&&t.valid&&(t.dirty||t.touched))}getPrettyLabel(e){switch(e){case"name":return"Name";case"mobile":return"Mobile";case"gst":return"GST";case"remarks":return"Remarks";default:return e}}initializeForm(){this.form=this.fb.group({name:[null,[S.required,S.maxLength(100)]],mobile:[null,[S.pattern("^\\d{10}$")]],gst:[null,[S.maxLength(15)]],remarks:[null,[S.maxLength(200)]],status:["A"]})}onSubmit(){if(this.form.invalid){Object.values(this.form.controls).forEach(s=>s.markAsTouched());return}this.isLoading=!0;let e=Me({id:this.transportId},this.form.value),n=(this.isEditMode?this.service.update(e):this.service.create(e)).pipe(O(this.destroy$)).subscribe({next:s=>{if(s?.success===!1){this.snackbar.error(s?.message||"Operation failed"),this.isLoading=!1;return}this.snackbar.success(`Transport ${this.isEditMode?"updated":"created"} successfully`),localStorage.removeItem("transportMasterId"),this.router.navigate(["/transport-master"])},error:s=>{this.snackbar.error(s?.error?.message||`Failed to ${this.isEditMode?"update":"create"} transport`),this.isLoading=!1}});this.subscriptions.push(n)}loadDetails(e){this.isLoading=!0;let t=this.service.details(e).pipe(O(this.destroy$)).subscribe({next:n=>{let s=n?.data||n;s&&this.form.patchValue({name:s.name,mobile:s.mobile,gst:s.gst,remarks:s.remarks,status:s.status}),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load transport details"),this.isLoading=!1}});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.subscriptions=[],this.destroy$.next(),this.destroy$.complete(),this.form&&this.form.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(ui),b(be),b(It),b(de),b(Xe))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-add-transport-master"]],standalone:!0,features:[re],decls:40,vars:11,consts:[[1,"transport-master-form-container"],[1,"card"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],[1,"req"],["type","text","formControlName","name","placeholder","Transport name",1,"form-control"],["type","text","formControlName","mobile","placeholder","10-digit mobile",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","gst","placeholder","GST number",1,"form-control"],["formControlName","status",1,"form-control"],["value","A"],["value","I"],[1,"form-group","span-2"],["rows","3","formControlName","remarks","placeholder","Notes...",1,"form-control"],[1,"actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],["routerLink","/transport-master",1,"btn","btn-secondary"],[3,"show"],[1,"invalid-feedback"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),c(3),a(),o(4,"form",2),_("ngSubmit",function(){return n.onSubmit()}),o(5,"div",3)(6,"div",4)(7,"label"),c(8,"Name "),o(9,"span",5),c(10,"*"),a()(),m(11,"input",6),a(),o(12,"div",4)(13,"label"),c(14,"Mobile"),a(),m(15,"input",7),M(16,$u,2,1,"div",8),a(),o(17,"div",4)(18,"label"),c(19,"GST"),a(),m(20,"input",9),a(),o(21,"div",4)(22,"label"),c(23,"Status"),a(),o(24,"select",10)(25,"option",11),c(26,"Active"),a(),o(27,"option",12),c(28,"Inactive"),a()()(),o(29,"div",13)(30,"label"),c(31,"Remarks"),a(),m(32,"textarea",14),a()(),o(33,"div",15)(34,"button",16),m(35,"i",17),c(36),a(),o(37,"a",18),c(38,"Cancel"),a()()()(),m(39,"app-loader",19),a()),t&2&&(l(3),E(n.isEditMode?"Edit Transport":"Add Transport"),l(),p("formGroup",n.form),l(11),F("is-invalid",n.isFieldInvalid("mobile"))("is-valid",n.isFieldValid("mobile")),l(),p("ngIf",n.isFieldInvalid("mobile")),l(18),p("disabled",n.isLoading),l(),p("ngClass",n.isLoading?"fa-spinner fa-spin":"fa-save"),l(),T(" ",n.isEditMode?"Update":"Save"," "),l(3),p("show",n.isLoading))},dependencies:[le,ce,K,ue,ee,ot,at,W,rt,Z,J,te,oe,me,Ve],styles:[".transport-master-form-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:16px}.transport-master-form-container[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.transport-master-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.transport-master-form-container[_ngcontent-%COMP%]   .span-2[_ngcontent-%COMP%]{grid-column:span 2}.transport-master-form-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px}@media (max-width: 768px){.transport-master-form-container[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.transport-master-form-container[_ngcontent-%COMP%]   .span-2[_ngcontent-%COMP%]{grid-column:span 1}}"]})}}return i})();var Is=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${st.apiUrl}/api/ledger`}generatePdf(e){return this.http.post(`${this.apiUrl}/generate-pdf`,e,{responseType:"blob",observe:"response"}).pipe(yn(t=>{let s=t.headers.get("Content-Disposition")?.split("filename=")[1]?.replace(/"/g,"")||"ledger_report.pdf";return{blob:new Blob([t.body],{type:"application/pdf"}),filename:s}}))}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Uu(i,r){i&1&&(o(0,"div",42),c(1," Please select a customer "),a())}function Hu(i,r){if(i&1){let e=N();o(0,"div",36)(1,"label",37),m(2,"i",38),c(3," Select Customer "),o(4,"span",16),c(5,"*"),a()(),o(6,"div",39),m(7,"app-searchable-select",40),o(8,"button",41),_("click",function(){v(e);let n=f();return x(n.refreshCustomers())}),m(9,"i",26),a()(),M(10,Uu,2,0,"div",18),a()}if(i&2){let e=f();l(7),F("is-invalid",e.isFieldInvalid("customerId")),p("options",e.customers)("placeholder","Select Customer")("searchPlaceholder","Search customers..."),l(),p("disabled",e.isLoadingCustomers),l(),p("ngClass",e.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt"),l(),p("ngIf",e.isFieldInvalid("customerId"))}}function Bu(i,r){i&1&&(o(0,"div",42),c(1," Start date is required "),a())}function Gu(i,r){i&1&&(o(0,"div",42),c(1," End date is required "),a())}function Qu(i,r){i&1&&(o(0,"div",32)(1,"div",33),c(2,"1"),a(),o(3,"div",34),c(4,"Select a customer from the dropdown"),a()())}function Yu(i,r){i&1&&(o(0,"div",32)(1,"div",33),c(2,"1"),a(),o(3,"div",34),c(4,"Your ledger will be generated automatically"),a()())}function Ku(i,r){if(i&1&&(o(0,"div",43)(1,"div",44),m(2,"i",45),o(3,"h3"),c(4,"Report Preview"),a()(),o(5,"div",46)(6,"div",47)(7,"span",48),c(8,"Customer"),a(),o(9,"span",49),c(10),a()(),o(11,"div",47)(12,"span",48),c(13,"Date Range"),a(),o(14,"span",49),c(15),ye(16,"date"),m(17,"i",50),c(18),ye(19,"date"),a()()()()),i&2){let e,t,n=f();l(10),E(n.getSelectedCustomerName()),l(5),T(" ",Ee(16,3,(e=n.ledgerForm.get("startDate"))==null?null:e.value,"dd MMM yyyy")," "),l(3),T(" ",Ee(19,6,(t=n.ledgerForm.get("endDate"))==null?null:t.value,"dd MMM yyyy")," ")}}var Fs=(()=>{class i{constructor(e,t,n,s,d,u){this.fb=e,this.ledgerService=t,this.customerService=n,this.snackbar=s,this.authService=d,this.userService=u,this.customers=[],this.isLoading=!1,this.isLoadingCustomers=!1,this.isGeneratingPdf=!1,this.isDealer=!1,this.destroy$=new G,this.isDealer=this.authService.hasRole("DEALER"),this.initForm()}ngOnInit(){this.isDealer?this.loadDealerCustomerId():this.loadCustomers()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initForm(){let e=new Date,t=new Date(e.getFullYear(),0,1);this.ledgerForm=this.fb.group({customerId:[this.isDealer?null:"",this.isDealer?[]:S.required],startDate:[this.formatDateForInput(t),S.required],endDate:[this.formatDateForInput(e),S.required]})}loadDealerCustomerId(){this.userService.getCurrentUser().pipe(O(this.destroy$)).subscribe({next:e=>{if(e?.success&&e?.data?.clientId){let t=e.data.clientId;this.ledgerForm.patchValue({customerId:t.toString()}),this.customers=[{id:t,name:e.data.client?.name||"Current User"}]}else if(e?.data?.clientId){let t=e.data.clientId;this.ledgerForm.patchValue({customerId:t.toString()}),this.customers=[{id:t,name:e.data.client?.name||"Current User"}]}},error:()=>{this.snackbar.error("Failed to load user information")}})}formatDateForInput(e){return e.toISOString().split("T")[0]}formatDateForApi(e){let t=new Date(e),n=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),d=t.getFullYear();return`${n}-${s}-${d}`}loadCustomers(){this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e?.success&&e.data&&(this.customers=e.data),this.isLoadingCustomers=!1},error:()=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1}})}refreshCustomers(){this.isLoadingCustomers=!0,this.customerService.refreshCustomers().pipe(O(this.destroy$)).subscribe({next:e=>{e?.success&&e.data&&(this.customers=e.data,this.snackbar.success("Customers refreshed successfully")),this.isLoadingCustomers=!1},error:()=>{this.snackbar.error("Failed to refresh customers"),this.isLoadingCustomers=!1}})}isFieldInvalid(e){let t=this.ledgerForm.get(e);return t?t.invalid&&t.touched:!1}resetForm(){let e=new Date,t=new Date(e.getFullYear(),0,1),n={startDate:this.formatDateForInput(t),endDate:this.formatDateForInput(e)};this.isDealer||(n.customerId=""),this.ledgerForm.patchValue(n),this.ledgerForm.markAsUntouched()}generatePdf(e){if(e&&(e.preventDefault(),e.stopPropagation()),Object.keys(this.ledgerForm.controls).forEach(u=>{this.ledgerForm.get(u)?.markAsTouched()}),this.ledgerForm.invalid){this.snackbar.error("Please fill all required fields");return}let t=this.ledgerForm.value;if(this.isDealer&&!t.customerId){this.snackbar.error("Customer information not available. Please refresh the page.");return}let n=new Date(t.startDate),s=new Date(t.endDate);if(n>s){this.snackbar.error("Start date cannot be after end date");return}this.isGeneratingPdf=!0;let d={customerId:Number(t.customerId),startDate:this.formatDateForApi(t.startDate),endDate:this.formatDateForApi(t.endDate)};this.ledgerService.generatePdf(d).pipe(O(this.destroy$)).subscribe({next:({blob:u,filename:g})=>{let h=window.URL.createObjectURL(u),P=document.createElement("a");P.href=h,P.download=g,document.body.appendChild(P),P.click(),document.body.removeChild(P),window.URL.revokeObjectURL(h),this.snackbar.success("Ledger report downloaded successfully"),this.isGeneratingPdf=!1},error:u=>{this.snackbar.error(u?.error?.message||"Failed to generate ledger report"),this.isGeneratingPdf=!1}})}getSelectedCustomerName(){let e=this.ledgerForm.get("customerId")?.value;return e&&this.customers.find(n=>n.id===Number(e))?.name||""}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(Is),b(ct),b(de),b(it),b(Wt))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-ledger"]],decls:61,vars:16,consts:[[1,"ledger-container"],[3,"show"],[1,"page-header"],[1,"header-content"],[1,"header-icon"],[1,"fas","fa-file-invoice-dollar"],[1,"header-text"],[1,"filter-card","card"],[1,"card-header"],[1,"fas","fa-filter"],[1,"filter-form",3,"ngSubmit","formGroup"],[1,"filter-grid"],["class","form-group customer-group",4,"ngIf"],[1,"form-group"],["for","startDate"],[1,"fas","fa-calendar-alt"],[1,"required"],["type","date","id","startDate","formControlName","startDate",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","endDate"],[1,"fas","fa-calendar-check"],["type","date","id","endDate","formControlName","endDate",1,"form-control"],[1,"action-buttons"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","submit",1,"btn","btn-primary","generate-btn",3,"disabled"],[1,"fas",3,"ngClass"],[1,"info-card","card"],[1,"info-header"],[1,"fas","fa-info-circle"],[1,"info-content"],["class","info-step",4,"ngIf"],[1,"info-step"],[1,"step-number"],[1,"step-text"],["class","preview-card card",4,"ngIf"],[1,"form-group","customer-group"],["for","customerId"],[1,"fas","fa-user"],[1,"select-group","inline"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder"],["type","button","title","Refresh Customers",1,"btn","btn-sm","btn-primary","refresh-btn",3,"click","disabled"],[1,"invalid-feedback"],[1,"preview-card","card"],[1,"preview-header"],[1,"fas","fa-eye"],[1,"preview-content"],[1,"preview-item"],[1,"preview-label"],[1,"preview-value"],[1,"fas","fa-arrow-right"]],template:function(t,n){if(t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"div",3)(4,"div",4),m(5,"i",5),a(),o(6,"div",6)(7,"h1"),c(8,"Ledger Report"),a(),o(9,"p"),c(10,"Generate customer ledger reports with custom date ranges"),a()()()(),o(11,"div",7)(12,"div",8)(13,"h2"),m(14,"i",9),c(15," Report Filters"),a()(),o(16,"form",10),_("ngSubmit",function(d){return n.generatePdf(d)}),o(17,"div",11),M(18,Hu,11,8,"div",12),o(19,"div",13)(20,"label",14),m(21,"i",15),c(22," Start Date "),o(23,"span",16),c(24,"*"),a()(),m(25,"input",17),M(26,Bu,2,0,"div",18),a(),o(27,"div",13)(28,"label",19),m(29,"i",20),c(30," End Date "),o(31,"span",16),c(32,"*"),a()(),m(33,"input",21),M(34,Gu,2,0,"div",18),a()(),o(35,"div",22)(36,"button",23),_("click",function(){return n.resetForm()}),m(37,"i",24),c(38," Reset "),a(),o(39,"button",25),m(40,"i",26),c(41),a()()()(),o(42,"div",27)(43,"div",28),m(44,"i",29),o(45,"h3"),c(46,"How to Generate Report"),a()(),o(47,"div",30),M(48,Qu,5,0,"div",31)(49,Yu,5,0,"div",31),o(50,"div",32)(51,"div",33),c(52,"2"),a(),o(53,"div",34),c(54,"Choose the start and end date for the report period"),a()(),o(55,"div",32)(56,"div",33),c(57,"3"),a(),o(58,"div",34),c(59,'Click "Generate PDF" to download the ledger report'),a()()()(),M(60,Ku,20,9,"div",35),a()),t&2){let s;l(),p("show",n.isLoading||n.isGeneratingPdf),l(15),p("formGroup",n.ledgerForm),l(2),p("ngIf",!n.isDealer),l(7),F("is-invalid",n.isFieldInvalid("startDate")),l(),p("ngIf",n.isFieldInvalid("startDate")),l(7),F("is-invalid",n.isFieldInvalid("endDate")),l(),p("ngIf",n.isFieldInvalid("endDate")),l(2),p("disabled",n.isGeneratingPdf),l(3),p("disabled",n.ledgerForm.invalid||n.isGeneratingPdf),l(),p("ngClass",n.isGeneratingPdf?"fa-spinner fa-spin":"fa-file-pdf"),l(),T(" ",n.isGeneratingPdf?"Generating...":"Generate PDF"," "),l(7),p("ngIf",!n.isDealer),l(),p("ngIf",n.isDealer),l(11),p("ngIf",(s=n.ledgerForm.get("customerId"))==null?null:s.value)}},dependencies:[ce,K,ee,W,Z,J,te,oe,me,Je,ut],styles:[".ledger-container[_ngcontent-%COMP%]{padding:2rem;background-color:var(--background);min-height:calc(100vh - 60px)}@media (max-width: 768px){.ledger-container[_ngcontent-%COMP%]{padding:1rem}}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:1.5rem 2rem;background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);border-radius:var(--border-radius);box-shadow:0 4px 15px #14588140}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{padding:1.25rem;gap:1rem}}.page-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:60px;height:60px;background:#fff3;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.page-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.75rem;color:#fff}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:48px;height:48px}.page-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}}.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 .25rem;color:#fff;font-size:1.75rem;font-weight:600}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.35rem}}.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#ffffffd9;font-size:.95rem}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.85rem}}.card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);box-shadow:0 2px 8px #00000014;margin-bottom:1.5rem;overflow:hidden}.filter-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--background-light);padding:1rem 1.5rem;border-bottom:1px solid var(--border-color)}.filter-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:600;color:var(--text-primary);display:flex;align-items:center;gap:.5rem}.filter-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.filter-form[_ngcontent-%COMP%]{padding:1.5rem}@media (max-width: 768px){.filter-form[_ngcontent-%COMP%]{padding:1rem}}.filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}@media (max-width: 992px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.filter-grid[_ngcontent-%COMP%]   .customer-group[_ngcontent-%COMP%]{grid-column:1/-1}}@media (max-width: 576px){.filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;font-weight:500;color:var(--text-primary);font-size:.9rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary);font-size:.85rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger)}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;height:42px;padding:.5rem 1rem;border:1px solid var(--border-color);border-radius:var(--border-radius);font-size:.95rem;color:var(--text-primary);transition:border-color .2s,box-shadow .2s}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px #14588126}.form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger)}.form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:var(--danger);font-size:.75rem;margin-top:.35rem}.select-group.inline[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem}.select-group.inline[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.select-group.inline[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{height:42px;min-width:42px;display:flex;align-items:center;justify-content:center;padding:0}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem;border-top:1px solid var(--border-color)}@media (max-width: 576px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column-reverse}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1.5rem;font-size:.95rem;font-weight:500;border:none;border-radius:var(--border-radius);cursor:pointer;transition:all .2s ease;touch-action:manipulation}.btn[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.btn.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--secondary);transform:translateY(-1px)}.btn.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn.btn-secondary[_ngcontent-%COMP%]{background-color:var(--background-light);color:var(--text-primary);border:1px solid var(--border-color)}.btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--background)}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.generate-btn[_ngcontent-%COMP%]{min-width:160px}.info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);border-left:4px solid var(--primary)}.info-card[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.5rem;border-bottom:1px solid rgba(0,0,0,.05)}.info-card[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary);font-size:1.25rem}.info-card[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:var(--text-primary)}.info-card[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;display:flex;flex-wrap:wrap;gap:1.5rem}@media (max-width: 768px){.info-card[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}.info-card[_ngcontent-%COMP%]   .info-step[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1;min-width:200px}.info-card[_ngcontent-%COMP%]   .info-step[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{width:28px;height:28px;background:var(--primary);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.85rem;flex-shrink:0}.info-card[_ngcontent-%COMP%]   .info-step[_ngcontent-%COMP%]   .step-text[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.preview-card[_ngcontent-%COMP%]{border:2px dashed var(--border-color);background:#fafbfc}.preview-card[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.5rem;border-bottom:1px solid var(--border-color);background:#fff}.preview-card[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary);font-size:1.1rem}.preview-card[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:var(--text-primary)}.preview-card[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;display:flex;gap:2rem;flex-wrap:wrap}@media (max-width: 576px){.preview-card[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}.preview-card[_ngcontent-%COMP%]   .preview-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem}.preview-card[_ngcontent-%COMP%]   .preview-item[_ngcontent-%COMP%]   .preview-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px}.preview-card[_ngcontent-%COMP%]   .preview-item[_ngcontent-%COMP%]   .preview-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);display:flex;align-items:center;gap:.5rem}.preview-card[_ngcontent-%COMP%]   .preview-item[_ngcontent-%COMP%]   .preview-value[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary);font-size:.8rem}@media (hover: none) and (pointer: coarse){.btn[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.form-control[_ngcontent-%COMP%]{min-height:44px;font-size:16px}.refresh-btn[_ngcontent-%COMP%]{min-width:44px;min-height:44px}}form[_ngcontent-%COMP%]{touch-action:manipulation}@media (max-width: 768px){app-searchable-select[_ngcontent-%COMP%]{position:relative;z-index:100}}.generating-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#ffffffe6;display:flex;align-items:center;justify-content:center;z-index:1000}.generating-overlay[_ngcontent-%COMP%]   .generating-content[_ngcontent-%COMP%]{text-align:center}.generating-overlay[_ngcontent-%COMP%]   .generating-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:var(--primary);margin-bottom:1rem}.generating-overlay[_ngcontent-%COMP%]   .generating-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.1rem;font-weight:500}"]})}}return i})();var qi=(()=>{class i{constructor(e){this.http=e,this.apiUrl=`${st.apiUrl}`}createPaymentHistory(e){return this.http.post(`${this.apiUrl}/api/payment-history/save`,e)}updatePaymentHistory(e){return this.http.post(`${this.apiUrl}/api/payment-history/update`,e)}updatePaymentHistoryById(e,t){return this.http.put(`${this.apiUrl}/api/payment-history/${e}`,t)}deletePaymentHistory(e){return this.http.post(`${this.apiUrl}/api/payment-history/delete`,{id:e})}getPaymentHistories(e){let t={search:"",currentPage:e.currentPage,perPageRecord:e.perPageRecord};return this.http.post(`${this.apiUrl}/api/payment-history/search`,t)}searchPaymentHistories(e){return this.http.post(`${this.apiUrl}/api/payment-history/search`,e)}getPaymentHistoryDetails(e){return this.http.post(`${this.apiUrl}/api/payment-history/get-detail`,{id:e})}getPaymentHistoryDetailsById(e){return this.http.get(`${this.apiUrl}/api/payment-history/${e}`)}static{this.\u0275fac=function(t){return new(t||i)(ge(nt))}}static{this.\u0275prov=Se({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Wu(i,r){if(i&1){let e=N();o(0,"button",38),_("click",function(){v(e);let n=f();return x(n.resetSearchForm())}),m(1,"i",39),o(2,"span"),c(3,"Clear"),a()()}}function Zu(i,r){if(i&1){let e=N();o(0,"tr",40)(1,"td")(2,"span",41),c(3),a()(),o(4,"td")(5,"span",42),c(6),a()(),o(7,"td")(8,"span",43),c(9),ye(10,"number"),a()(),o(11,"td")(12,"span",44),m(13,"i",21),c(14),a()(),o(15,"td")(16,"span",45),m(17,"i",21),c(18),a()(),o(19,"td")(20,"span",46),c(21),a()(),o(22,"td")(23,"div",47)(24,"button",48),_("click",function(){let n=v(e).$implicit,s=f();return x(s.onEdit(n))}),m(25,"i",49),a(),o(26,"button",50),_("click",function(){let n=v(e).$implicit,s=f();return x(s.onDelete(n))}),m(27,"i",51),a()()()()}if(i&2){let e=r.$implicit,t=f();l(3),E(e.date),l(3),E(e.customerName),l(3),T("\u20B9",Ee(10,10,e.amount,"1.2-2"),""),l(3),p("ngClass",e.type==="C"?"cash":"bank"),l(),p("ngClass",e.type==="C"?"fa-money-bill-wave":"fa-university"),l(),T(" ",t.getTypeLabel(e.type)," "),l(2),p("ngClass",e.isReceived?"received":"paid"),l(),p("ngClass",e.isReceived?"fa-arrow-down":"fa-arrow-up"),l(),T(" ",t.getTransactionTypeLabel(e.isReceived)," "),l(3),E(e.remarks||"-")}}function Xu(i,r){i&1&&(o(0,"tr",52)(1,"td",53)(2,"div",54),m(3,"i",55),o(4,"p"),c(5,"No payment histories found"),a(),o(6,"span"),c(7,"Try adjusting your search or add a new payment"),a()()()())}function Ju(i,r){if(i&1){let e=N();o(0,"app-pagination",56),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.perPageRecord)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var As=(()=>{class i{constructor(e,t,n,s,d,u){this.paymentHistoryService=e,this.customerService=t,this.snackbar=n,this.router=s,this.encryptionService=d,this.fb=u,this.paymentHistories=[],this.customers=[],this.loading=!1,this.currentPage=0,this.totalPages=0,this.totalElements=0,this.perPageRecord=10,this.pageSizeOptions=[5,10,25,50],this.destroy$=new G,this.isLoadingCustomers=!1}ngOnInit(){this.initSearchForm(),this.loadPaymentHistories(),this.loadCustomers()}initSearchForm(){this.searchForm=this.fb.group({search:[""],customerId:[null],startDate:[null],endDate:[null]})}loadPaymentHistories(){this.loading=!0;let e=this.searchForm?.value||{},t={search:e.search||"",customerId:e.customerId||void 0,startDate:e.startDate?this.formatDateForApi(e.startDate):void 0,endDate:e.endDate?this.formatDateForApi(e.endDate):void 0,currentPage:this.currentPage,perPageRecord:this.perPageRecord};this.paymentHistoryService.getPaymentHistories(t).pipe(O(this.destroy$)).subscribe({next:n=>{n.success?(this.paymentHistories=n.data.content||[],this.totalPages=n.data.totalPages||0,this.totalElements=n.data.totalElements||0):this.snackbar.error(n.message||"Failed to load payment histories")},error:n=>{console.error("Error loading payment histories:",n),this.snackbar.error("Failed to load payment histories")},complete:()=>{this.loading=!1}})}loadCustomers(){this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).subscribe({next:e=>{e.success&&(this.customers=e.data),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1}})}refreshCustomers(){this.isLoadingCustomers=!0,this.customerService.refreshCustomers().subscribe({next:e=>{e.success&&(this.customers=e.data,this.snackbar.success("Customers refreshed successfully")),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to refresh customers"),this.isLoadingCustomers=!1}})}onPageChange(e){this.currentPage=e,this.loadPaymentHistories()}onPageSizeChange(e){this.perPageRecord=e,this.currentPage=0,this.loadPaymentHistories()}onSearch(){this.currentPage=0,this.loadPaymentHistories()}resetSearchForm(){this.searchForm.reset(),this.currentPage=0,this.loadPaymentHistories()}isSearchActive(){let e=this.searchForm.value;return e.search||e.customerId||e.startDate||e.endDate}formatDateForApi(e){if(!e)return"";let[t,n,s]=e.split("-");return`${s}-${n}-${t}`}onAddNew(){this.router.navigate(["/payment-history/add"])}onEdit(e){let t=this.encryptionService.encrypt(JSON.stringify(e.id));this.router.navigate(["/payment-history/edit",t])}onDelete(e){confirm(`Are you sure you want to delete payment history for ${e.customerName}?`)&&this.paymentHistoryService.deletePaymentHistory(e.id).subscribe({next:t=>{t.success?(this.snackbar.success("Payment history deleted successfully"),this.loadPaymentHistories()):this.snackbar.error(t.message||"Failed to delete payment history")},error:t=>{console.error("Error deleting payment history:",t),this.snackbar.error("Failed to delete payment history")}})}getTypeLabel(e){return e==="C"?"Cash":"Bank"}getTransactionTypeLabel(e){return e?"Received":"Paid"}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(b(qi),b(ct),b(de),b(be),b(Xe),b(X))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-payment-history-list"]],standalone:!0,features:[re],decls:78,vars:11,consts:[[1,"payment-history-container"],[3,"show"],[1,"page-header"],[1,"title-section"],[1,"icon-wrapper"],[1,"fas","fa-history"],[1,"page-title"],[1,"btn","btn-primary","add-btn",3,"click"],[1,"fas","fa-plus"],[1,"filter-card"],[3,"ngSubmit","formGroup"],[1,"filter-grid"],[1,"filter-item"],[1,"input-wrapper"],[1,"fas","fa-search","input-icon"],["type","text","formControlName","search","placeholder","Search payment history...",1,"form-input","with-icon"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-input","date-input"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-input","date-input"],[1,"filter-item","filter-actions"],["type","submit",1,"btn","btn-search",3,"disabled"],[1,"fas",3,"ngClass"],["type","button","class","btn btn-clear",3,"click",4,"ngIf"],[1,"table-card"],[1,"table-wrapper"],[1,"data-table"],[1,"th-content"],[1,"fas","fa-calendar-alt"],[1,"fas","fa-user"],[1,"fas","fa-rupee-sign"],[1,"fas","fa-credit-card"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-comment"],[1,"fas","fa-cogs"],["class","data-row",4,"ngFor","ngForOf"],["class","empty-row",4,"ngIf"],[1,"pagination-wrapper"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],["type","button",1,"btn","btn-clear",3,"click"],[1,"fas","fa-times"],[1,"data-row"],[1,"date-badge"],[1,"customer-name"],[1,"amount-value"],[1,"type-badge",3,"ngClass"],[1,"transaction-badge",3,"ngClass"],[1,"remarks-text"],[1,"action-buttons"],["title","Edit Payment",1,"btn-icon","btn-edit",3,"click"],[1,"fas","fa-edit"],["title","Delete Payment",1,"btn-icon","btn-delete",3,"click"],[1,"fas","fa-trash-alt"],[1,"empty-row"],["colspan","7"],[1,"empty-state"],[1,"fas","fa-inbox"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"div",3)(4,"div",4),m(5,"i",5),a(),o(6,"h1",6),c(7,"Payment History"),a()(),o(8,"button",7),_("click",function(){return n.onAddNew()}),m(9,"i",8),o(10,"span"),c(11,"Add Payment"),a()()(),o(12,"div",9)(13,"form",10),_("ngSubmit",function(){return n.onSearch()}),o(14,"div",11)(15,"div",12)(16,"div",13),m(17,"i",14)(18,"input",15),a()(),o(19,"div",12),m(20,"app-searchable-select",16),a(),o(21,"div",12)(22,"div",13),m(23,"input",17),a()(),o(24,"div",12)(25,"div",13),m(26,"input",18),a()(),o(27,"div",19)(28,"button",20),m(29,"i",21),o(30,"span"),c(31,"Search"),a()(),M(32,Wu,4,0,"button",22),a()()()(),o(33,"div",23)(34,"div",24)(35,"table",25)(36,"thead")(37,"tr")(38,"th")(39,"div",26),m(40,"i",27),o(41,"span"),c(42,"Date"),a()()(),o(43,"th")(44,"div",26),m(45,"i",28),o(46,"span"),c(47,"Customer"),a()()(),o(48,"th")(49,"div",26),m(50,"i",29),o(51,"span"),c(52,"Amount"),a()()(),o(53,"th")(54,"div",26),m(55,"i",30),o(56,"span"),c(57,"Type"),a()()(),o(58,"th")(59,"div",26),m(60,"i",31),o(61,"span"),c(62,"Transaction"),a()()(),o(63,"th")(64,"div",26),m(65,"i",32),o(66,"span"),c(67,"Remarks"),a()()(),o(68,"th")(69,"div",26),m(70,"i",33),o(71,"span"),c(72,"Actions"),a()()()()(),o(73,"tbody"),M(74,Zu,28,13,"tr",34)(75,Xu,8,0,"tr",35),a()()()(),o(76,"div",36),M(77,Ju,1,4,"app-pagination",37),a()()),t&2&&(l(),p("show",n.loading),l(12),p("formGroup",n.searchForm),l(7),p("options",n.customers)("placeholder","Select Customer")("searchPlaceholder","Search customers..."),l(8),p("disabled",n.loading),l(),p("ngClass",n.loading?"fa-spinner fa-spin":"fa-search"),l(3),p("ngIf",n.isSearchActive()),l(42),p("ngForOf",n.paymentHistories),l(),p("ngIf",n.paymentHistories.length===0&&!n.loading),l(2),p("ngIf",n.totalPages>0))},dependencies:[le,ce,Oe,K,bt,Fe,me,He,ue,ee,W,Z,J,te,oe,Je],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.payment-history-container[_ngcontent-%COMP%]{padding:24px;margin:0 auto;min-height:calc(100vh - 100px)}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;flex-wrap:wrap;gap:16px}.page-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px}.page-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#003a58,#2a5f79);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #003a584d}.page-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem;color:#fff}.page-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;color:#003a58;letter-spacing:-.5px}.page-header[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px;background:linear-gradient(135deg,#00999c,#007275);border:none;border-radius:10px;color:#fff;font-weight:600;font-size:.95rem;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #00999c4d}.page-header[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00999c66}.page-header[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.page-header[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.filter-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:20px 24px;margin-bottom:24px;box-shadow:0 2px 12px #3b424814;border:1px solid #d7dee2}.filter-card[_ngcontent-%COMP%]   .filter-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.5fr 1.2fr 1fr 1fr auto;gap:16px;align-items:center}@media (max-width: 1200px){.filter-card[_ngcontent-%COMP%]   .filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}}@media (max-width: 768px){.filter-card[_ngcontent-%COMP%]   .filter-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:#8a949c;font-size:.9rem}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{width:100%;padding:12px 14px;border:1.5px solid #d7dee2;border-radius:10px;font-size:.95rem;color:#3b4248;background:#f4f7f9;transition:all .2s ease}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::placeholder{color:#8a949c}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00999c;background:#fff;box-shadow:0 0 0 3px #00999c1a}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-input.with-icon[_ngcontent-%COMP%]{padding-left:42px}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-input.date-input[_ngcontent-%COMP%]{cursor:pointer}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-input.date-input[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{cursor:pointer;filter:opacity(.6);transition:filter .2s}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .form-input.date-input[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator:hover{filter:opacity(1)}.filter-card[_ngcontent-%COMP%]   .filter-item[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{display:block}.filter-card[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{display:flex;gap:10px}@media (max-width: 768px){.filter-card[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{justify-content:stretch}.filter-card[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}}.filter-card[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 20px;background:#003a58;border:none;border-radius:10px;color:#fff;font-weight:600;font-size:.9rem;cursor:pointer;transition:all .2s ease}.filter-card[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:hover:not(:disabled){background:#00263a}.filter-card[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]:disabled{opacity:.65;cursor:not-allowed}.filter-card[_ngcontent-%COMP%]   .btn-search[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.filter-card[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;background:transparent;border:1.5px solid #b3bcc2;border-radius:10px;color:#3b4248;font-weight:500;font-size:.9rem;cursor:pointer;transition:all .2s ease}.filter-card[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]:hover{background:#f4f7f9;border-color:#8a949c}.filter-card[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.table-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px #3b424814;border:1px solid #d7dee2}.table-card[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00999c,#007275)}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px 18px;text-align:left;font-weight:600;font-size:.85rem;color:#fff;text-transform:uppercase;letter-spacing:.5px;white-space:nowrap}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .th-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .th-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;opacity:.85}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{transition:all .2s ease;border-bottom:1px solid #d7dee2}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:hover{background:#b9ebec4d}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 18px;vertical-align:middle;color:#3b4248;font-size:.95rem}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .date-badge[_ngcontent-%COMP%]{display:inline-flex;padding:6px 12px;background:#f4f7f9;border-radius:6px;font-size:.9rem;font-weight:500;color:#003a58}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-weight:600;color:#003a58}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .amount-value[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;color:#264b55}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:600}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .type-badge.cash[_ngcontent-%COMP%]{background:#1e9e681f;color:#1a895a}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .type-badge.bank[_ngcontent-%COMP%]{background:#2aa6c21f;color:#218298}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .type-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .transaction-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;border-radius:20px;font-size:.85rem;font-weight:600}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .transaction-badge.received[_ngcontent-%COMP%]{background:#1e9e681f;color:#1a895a}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .transaction-badge.received[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1e9e68}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .transaction-badge.paid[_ngcontent-%COMP%]{background:#c23b3b1a;color:#ae3535}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .transaction-badge.paid[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#c23b3b}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .transaction-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .remarks-text[_ngcontent-%COMP%]{color:#8a949c;font-size:.9rem;max-width:180px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border:none;border-radius:8px;cursor:pointer;transition:all .2s ease}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .btn-icon.btn-edit[_ngcontent-%COMP%]{background:#2aa6c21a;color:#2aa6c2}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .btn-icon.btn-edit[_ngcontent-%COMP%]:hover{background:#2aa6c2;color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #2aa6c24d}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .btn-icon.btn-delete[_ngcontent-%COMP%]{background:#c23b3b1a;color:#c23b3b}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .btn-icon.btn-delete[_ngcontent-%COMP%]:hover{background:#c23b3b;color:#fff;transform:translateY(-2px);box-shadow:0 4px 12px #c23b3b4d}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]:hover{background:transparent}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:0}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3.5rem;color:#b3bcc2;margin-bottom:16px}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.1rem;font-weight:600;color:#3b4248}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:#8a949c}.pagination-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:24px;padding:16px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #3b42480f}@media (max-width: 576px){.payment-history-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:40px;height:40px}.page-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.page-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.4rem}.page-header[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:.9rem}.filter-card[_ngcontent-%COMP%]{padding:16px}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 14px;font-size:.8rem}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .th-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:none}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 14px;font-size:.9rem}}"]})}}return i})();function eg(i,r){i&1&&(o(0,"div",48),m(1,"i",49),c(2," Date is required "),a())}function tg(i,r){i&1&&(o(0,"div",48),m(1,"i",49),c(2," Customer is required "),a())}function ng(i,r){i&1&&(o(0,"div",48),m(1,"i",49),c(2," Amount is required "),a())}function ig(i,r){i&1&&(o(0,"div",48),m(1,"i",49),c(2," Amount must be greater than 0 "),a())}function rg(i,r){if(i&1&&(o(0,"option",50),c(1),a()),i&2){let e=r.$implicit;p("value",e.value),l(),T(" ",e.label," ")}}function og(i,r){i&1&&(o(0,"div",48),m(1,"i",49),c(2," Payment type is required "),a())}function ag(i,r){i&1&&m(0,"app-loader")}var to=(()=>{class i{constructor(e,t,n,s,d,u,g){this.fb=e,this.paymentHistoryService=t,this.customerService=n,this.snackbar=s,this.router=d,this.route=u,this.encryptionService=g,this.isEdit=!1,this.loading=!1,this.isLoadingCustomers=!1,this.submitted=!1,this.currentId=null,this.destroy$=new G,this.customers=[],this.typeOptions=[{label:"Cash",value:"C"},{label:"Bank",value:"B"}]}ngOnInit(){this.initForm(),this.loadCustomers(),this.setupCustomerSync();let e=this.route.snapshot.paramMap.get("encryptedId");if(e){let t=this.encryptionService.decrypt(e);if(t){this.isEdit=!0,this.currentId=Number(t),this.fetchPaymentHistoryDetails(this.currentId);return}else{this.snackbar.error("Invalid payment history ID. Redirecting to payment history list."),this.router.navigate(["/payment-history"]);return}}this.isEdit=!1,this.currentId=null,this.resetFormToDefaults()}initForm(){let t=new Date().toISOString().split("T")[0];this.form=this.fb.group({id:new Tt(null),amount:new Tt(0,{nonNullable:!0,validators:[S.required,S.min(.01)]}),customerId:new Tt(null,{nonNullable:!0,validators:[S.required]}),customerName:new Tt({value:"",disabled:!0}),type:new Tt("C",{nonNullable:!0,validators:[S.required]}),remarks:new Tt("",{nonNullable:!0,validators:[]}),isReceived:new Tt(!0,{nonNullable:!0,validators:[]}),date:new Tt(t,{nonNullable:!0,validators:[S.required]})})}setupCustomerSync(){this.form.get("customerId")?.valueChanges.pipe(O(this.destroy$)).subscribe(e=>{if(e){let t=this.customers.find(n=>n.id===e);t&&this.form.patchValue({customerName:t.name})}else this.form.patchValue({customerName:""})})}resetFormToDefaults(){let t=new Date().toISOString().split("T")[0];this.form.patchValue({id:null,amount:0,customerId:null,customerName:"",type:"C",remarks:"",isReceived:!0,date:t}),this.form.markAsUntouched(),this.form.markAsPristine(),this.submitted=!1}fetchPaymentHistoryDetails(e){if(!e){this.snackbar.error("Payment history ID is required");return}this.loading=!0,this.paymentHistoryService.getPaymentHistoryDetails(e).pipe(O(this.destroy$)).subscribe({next:t=>{let n=t.data,[s,d,u]=n.date.split("-"),g=`${u}-${d}-${s}`;this.form.patchValue({id:n.id,amount:n.amount,customerId:n.customerId,customerName:n.customerName,type:n.type,remarks:n.remarks,isReceived:n.isReceived,date:g})},error:()=>{this.snackbar.error("Failed to load payment history details")},complete:()=>{this.loading=!1}})}loadCustomers(){this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1}})}refreshCustomers(){this.isLoadingCustomers=!0,this.customerService.refreshCustomers().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data,this.snackbar.success("Customers refreshed successfully")),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to refresh customers"),this.isLoadingCustomers=!1}})}convertDateFormat(e){let[t,n,s]=e.split("-");return`${s}-${n}-${t}`}submit(){if(this.submitted=!0,this.form.invalid){this.form.markAllAsTouched(),this.snackbar.error("Please fill all required fields correctly");return}let e=this.form.getRawValue(),t={id:this.isEdit?this.currentId:void 0,amount:e.amount,customerId:e.customerId,customerName:e.customerName,type:e.type,remarks:e.remarks,isReceived:e.isReceived,date:this.convertDateFormat(e.date)};this.loading=!0,(this.isEdit?this.paymentHistoryService.updatePaymentHistory(t):this.paymentHistoryService.createPaymentHistory(t)).pipe(O(this.destroy$)).subscribe({next:s=>{this.snackbar.success(this.isEdit?"Payment history updated successfully":"Payment history created successfully"),this.router.navigate(["/payment-history"])},error:s=>{this.snackbar.error("Failed to save payment history")},complete:()=>{this.loading=!1}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.customers=[],this.form&&this.form.reset()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(qi),b(ct),b(de),b(be),b(It),b(Xe))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-add-payment-history"]],standalone:!0,features:[re],decls:98,vars:32,consts:[[1,"add-payment-container"],["routerLink","/payment-history",1,"back-btn"],[1,"fas","fa-arrow-left"],[1,"form-card"],[1,"card-header"],[1,"header-icon"],[1,"fas",3,"ngClass"],[1,"header-text"],[1,"form-title"],[1,"form-subtitle"],[1,"payment-form",3,"ngSubmit","keydown.enter","formGroup"],[1,"form-grid"],[1,"form-group"],[1,"form-label"],[1,"fas","fa-calendar-alt"],[1,"required"],[1,"input-wrapper"],["type","date","formControlName","date",1,"form-input"],["class","error-message",4,"ngIf"],[1,"fas","fa-user"],[1,"input-with-action"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder"],["type","button","title","Refresh Customers",1,"btn-refresh",3,"click","disabled"],[1,"fas","fa-rupee-sign"],[1,"input-wrapper","currency-input"],[1,"currency-symbol"],["type","number","formControlName","amount","min","0.01","step","0.01","placeholder","0.00",1,"form-input","with-prefix"],[1,"fas","fa-credit-card"],["formControlName","type",1,"form-input","form-select"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"fas","fa-exchange-alt"],[1,"toggle-wrapper"],[1,"toggle-label"],[1,"fas","fa-arrow-up"],[1,"toggle-switch"],["type","checkbox","formControlName","isReceived","id","isReceived"],[1,"toggle-slider"],[1,"fas","fa-arrow-down"],[1,"form-group","full-width"],[1,"fas","fa-comment-alt"],[1,"optional"],["formControlName","remarks","rows","3","placeholder","Add any additional notes or remarks...",1,"form-input","form-textarea"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","submit",1,"btn","btn-primary",3,"disabled"],[4,"ngIf"],[1,"error-message"],[1,"fas","fa-exclamation-circle"],[3,"value"]],template:function(t,n){if(t&1&&(o(0,"div",0)(1,"button",1),m(2,"i",2),o(3,"span"),c(4,"Back to Payment History"),a()(),o(5,"div",3)(6,"div",4)(7,"div",5),m(8,"i",6),a(),o(9,"div",7)(10,"h1",8),c(11),a(),o(12,"p",9),c(13),a()()(),o(14,"form",10),_("ngSubmit",function(){return n.submit()})("keydown.enter",function(d){return d.preventDefault()}),o(15,"div",11)(16,"div",12)(17,"label",13),m(18,"i",14),o(19,"span"),c(20,"Date"),a(),o(21,"span",15),c(22,"*"),a()(),o(23,"div",16),m(24,"input",17),a(),M(25,eg,3,0,"div",18),a(),o(26,"div",12)(27,"label",13),m(28,"i",19),o(29,"span"),c(30,"Customer"),a(),o(31,"span",15),c(32,"*"),a()(),o(33,"div",20),m(34,"app-searchable-select",21),o(35,"button",22),_("click",function(){return n.refreshCustomers()}),m(36,"i",6),a()(),M(37,tg,3,0,"div",18),a(),o(38,"div",12)(39,"label",13),m(40,"i",23),o(41,"span"),c(42,"Amount"),a(),o(43,"span",15),c(44,"*"),a()(),o(45,"div",24)(46,"span",25),c(47,"\u20B9"),a(),m(48,"input",26),a(),M(49,ng,3,0,"div",18)(50,ig,3,0,"div",18),a(),o(51,"div",12)(52,"label",13),m(53,"i",27),o(54,"span"),c(55,"Payment Type"),a(),o(56,"span",15),c(57,"*"),a()(),o(58,"div",16)(59,"select",28)(60,"option",29),c(61,"Select Type"),a(),M(62,rg,2,2,"option",30),a()(),M(63,og,3,0,"div",18),a(),o(64,"div",12)(65,"label",13),m(66,"i",31),o(67,"span"),c(68,"Transaction Type"),a()(),o(69,"div",32)(70,"span",33),m(71,"i",34),c(72," Paid "),a(),o(73,"label",35),m(74,"input",36)(75,"span",37),a(),o(76,"span",33),m(77,"i",38),c(78," Received "),a()()(),o(79,"div",39)(80,"label",13),m(81,"i",40),o(82,"span"),c(83,"Remarks"),a(),o(84,"span",41),c(85,"(Optional)"),a()(),o(86,"div",16),m(87,"textarea",42),a()()(),o(88,"div",43)(89,"button",44),_("click",function(){return n.resetFormToDefaults()}),m(90,"i",45),o(91,"span"),c(92,"Reset"),a()(),o(93,"button",46),m(94,"i",6),o(95,"span"),c(96),a()()()()()(),M(97,ag,1,0,"app-loader",47)),t&2){let s,d,u,g,h,P,k,L,$,V,U;l(8),p("ngClass",n.isEdit?"fa-edit":"fa-plus-circle"),l(3),T("",n.isEdit?"Edit":"Create New"," Payment"),l(2),E(n.isEdit?"Update the payment details below":"Fill in the payment details below"),l(),p("formGroup",n.form),l(10),F("is-invalid",n.submitted&&((s=n.form.get("date"))==null?null:s.invalid)),l(),p("ngIf",n.submitted&&((d=n.form.get("date"))==null?null:d.hasError("required"))),l(9),F("is-invalid",n.submitted&&((u=n.form.get("customerId"))==null?null:u.invalid)),p("options",n.customers)("placeholder","Select Customer")("searchPlaceholder","Search customers..."),l(),p("disabled",n.isLoadingCustomers),l(),p("ngClass",n.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt"),l(),p("ngIf",n.submitted&&((g=n.form.get("customerId"))==null?null:g.hasError("required"))),l(11),F("is-invalid",n.submitted&&((h=n.form.get("amount"))==null?null:h.invalid)),l(),p("ngIf",n.submitted&&((P=n.form.get("amount"))==null?null:P.hasError("required"))),l(),p("ngIf",n.submitted&&((k=n.form.get("amount"))==null?null:k.hasError("min"))),l(9),F("is-invalid",n.submitted&&((L=n.form.get("type"))==null?null:L.invalid)),l(3),p("ngForOf",n.typeOptions),l(),p("ngIf",n.submitted&&(($=n.form.get("type"))==null?null:$.hasError("required"))),l(7),F("active",!((V=n.form.get("isReceived"))!=null&&V.value)),l(6),F("active",(U=n.form.get("isReceived"))==null?null:U.value),l(13),p("disabled",n.loading),l(4),p("disabled",n.form.invalid||n.loading),l(),p("ngClass",n.loading?"fa-spinner fa-spin":"fa-save"),l(2),E(n.isEdit?n.loading?"Updating...":"Update Payment":n.loading?"Saving...":"Save Payment"),l(),p("ngIf",n.loading)}},dependencies:[le,ce,Oe,K,ue,ee,ot,at,W,ft,Lo,rt,Z,J,ht,te,oe,Fe,Ve,me,Je],styles:[`[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.add-payment-container[_ngcontent-%COMP%]{padding:24px;margin:0 auto;min-height:calc(100vh - 100px)}.back-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:10px 18px;background:#fff;border:1.5px solid #d7dee2;border-radius:10px;color:#003a58;font-weight:600;font-size:.9rem;cursor:pointer;transition:all .2s ease;margin-bottom:24px;text-decoration:none}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.back-btn[_ngcontent-%COMP%]:hover{background:#003a58;border-color:#003a58;color:#fff;transform:translate(-4px)}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;box-shadow:0 4px 24px #3b424814;border:1px solid #d7dee2;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:24px 32px;background:linear-gradient(135deg,#003a58,#2a5f79);border-bottom:none}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:56px;height:56px;background:#ffffff26;border-radius:14px;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#fff}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.5rem;font-weight:700;color:#fff;letter-spacing:-.3px}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .form-subtitle[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#fffc}.payment-form[_ngcontent-%COMP%]{padding:32px}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px;margin-bottom:32px}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:10px;font-weight:600;font-size:.9rem;color:#3b4248}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00999c;font-size:.85rem}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#c23b3b;font-weight:700}.form-group[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   .optional[_ngcontent-%COMP%]{color:#8a949c;font-weight:400;font-size:.8rem}.input-wrapper[_ngcontent-%COMP%]{position:relative}.input-wrapper.currency-input[_ngcontent-%COMP%]{display:flex;align-items:center}.input-wrapper.currency-input[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{position:absolute;left:14px;font-weight:600;color:#00999c;font-size:1rem;z-index:1}.form-input[_ngcontent-%COMP%]{width:100%;padding:14px 16px;border:1.5px solid #d7dee2;border-radius:12px;font-size:.95rem;color:#3b4248;background:#f4f7f9;transition:all .2s ease}.form-input[_ngcontent-%COMP%]::placeholder{color:#8a949c}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00999c;background:#fff;box-shadow:0 0 0 4px #00999c1a}.form-input.is-invalid[_ngcontent-%COMP%]{border-color:#c23b3b;background:#c23b3b08}.form-input.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #c23b3b1a}.form-input.with-prefix[_ngcontent-%COMP%]{padding-left:36px}.form-input.form-select[_ngcontent-%COMP%]{cursor:pointer;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%238a949c'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;background-size:24px;padding-right:44px}.form-input.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px;line-height:1.5}.input-with-action[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-start}.input-with-action[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.input-with-action[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{width:44px;height:44px;display:flex;align-items:center;justify-content:center;background:#f4f7f9;border:1.5px solid #d7dee2;border-radius:12px;color:#00999c;cursor:pointer;transition:all .2s ease;flex-shrink:0}.input-with-action[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:#00999c;border-color:#00999c;color:#fff}.input-with-action[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.input-with-action[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.toggle-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:14px;padding:12px 16px;background:#f4f7f9;border-radius:12px;border:1.5px solid #d7dee2}.toggle-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.9rem;font-weight:500;color:#8a949c;transition:all .3s ease}.toggle-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem}.toggle-label.active[_ngcontent-%COMP%]{color:#00999c;font-weight:600}.toggle-label.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00999c}.toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:56px;height:30px;flex-shrink:0}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.toggle-switch[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background:#c23b3b;border-radius:30px;transition:all .3s ease;box-shadow:inset 0 2px 4px #0000001a}.toggle-switch[_ngcontent-%COMP%]   .toggle-slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:24px;width:24px;left:3px;bottom:3px;background:#fff;border-radius:50%;transition:all .3s ease;box-shadow:0 2px 6px #0003}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-slider[_ngcontent-%COMP%]{background:#1e9e68}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .toggle-slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .toggle-slider[_ngcontent-%COMP%]{box-shadow:inset 0 2px 4px #0000001a,0 0 0 3px #00999c33}.toggle-switch[_ngcontent-%COMP%]:hover   .toggle-slider[_ngcontent-%COMP%]{filter:brightness(1.05)}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:8px;font-size:.8rem;color:#c23b3b;font-weight:500}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.75rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding-top:24px;border-top:1px solid #d7dee2}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:14px 24px;border-radius:12px;font-weight:600;font-size:.95rem;cursor:pointer;transition:all .2s ease;border:none}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#f4f7f9;color:#3b4248;border:1.5px solid #d7dee2}.form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#d7dee2;border-color:#b3bcc2}.form-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00999c,#007275);color:#fff;box-shadow:0 4px 12px #00999c4d}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #00999c66}.form-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}@media (max-width: 576px){.add-payment-container[_ngcontent-%COMP%]{padding:16px}.back-btn[_ngcontent-%COMP%]{padding:8px 14px;font-size:.85rem}.card-header[_ngcontent-%COMP%]{padding:20px;flex-direction:column;text-align:center}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:48px;height:48px}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{font-size:1.25rem}.payment-form[_ngcontent-%COMP%]{padding:20px}.form-grid[_ngcontent-%COMP%]{gap:16px}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}`]})}}return i})();var cg=()=>({label:"All Customers",value:""}),lg=()=>({label:"All Products",value:""});function dg(i,r){if(i&1){let e=N();o(0,"tr")(1,"td"),c(2),a(),o(3,"td"),c(4),a(),o(5,"td"),c(6),a(),o(7,"td"),c(8),ye(9,"number"),a(),o(10,"td"),c(11),a(),o(12,"td"),c(13),a(),o(14,"td",27)(15,"button",28),_("click",function(){let n=v(e).$implicit,s=f();return x(s.deleteCustomerPrice(n))})("touchstart",function(n){return v(e),x(n.preventDefault())}),m(16,"i",10),a()()()}if(i&2){let e=r.$implicit,t=r.index,n=f();l(2),E(n.startIndex+t+1),l(2),E(e.customerName),l(2),E(e.productName),l(2),E(Ee(9,8,e.price,"1.2-2")),l(3),E(e.createdAt),l(2),E(e.updatedAt),l(2),p("disabled",n.deletingPrices[e.id]),l(),p("ngClass",n.deletingPrices[e.id]?"fa-spinner fa-spin":"fa-trash")}}function mg(i,r){i&1&&(o(0,"tr")(1,"td",29),c(2,"No customer prices found."),a()())}function pg(i,r){if(i&1){let e=N();o(0,"app-pagination",30),_("pageChange",function(n){v(e);let s=f();return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f();return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f();p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var Ns=(()=>{class i{constructor(e,t,n,s,d,u){this.priceService=e,this.customerService=t,this.productService=n,this.fb=s,this.snackbar=d,this.router=u,this.customerPrices=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.customers=[],this.products=[],this.isLoadingCustomers=!1,this.isLoadingProducts=!1,this.deletingPrices={},this.destroy$=new G,this.initializeForm()}ngOnInit(){this.loadCustomerPrices(),this.loadCustomers(),this.loadProducts()}initializeForm(){this.searchForm=this.fb.group({search:[""],customerId:[""],productId:[""]})}loadCustomerPrices(){this.isLoading=!0;let e=this.searchForm.value,t={page:this.currentPage,size:this.pageSize};e.customerId&&(t.customerId=e.customerId),e.productId&&(t.productId=e.productId),e.search&&(t.search=e.search),this.priceService.searchCustomerPrices(t).pipe(O(this.destroy$)).subscribe({next:n=>{n.success?(this.customerPrices=n.data.content||[],this.totalPages=n.data.totalPages||0,this.totalElements=n.data.totalElements||0,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements)):(this.snackbar.error(n.message||"Failed to load customer prices"),this.customerPrices=[],this.totalPages=0,this.totalElements=0),this.isLoading=!1},error:n=>{this.snackbar.error(n?.error?.message||"Failed to load customer prices"),this.customerPrices=[],this.totalPages=0,this.totalElements=0,this.isLoading=!1}})}onSearch(){this.currentPage=0,this.loadCustomerPrices()}onPageChange(e){this.currentPage=e,this.loadCustomerPrices()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadCustomerPrices()}resetForm(){this.searchForm.reset(),this.currentPage=0,this.loadCustomerPrices()}loadCustomers(){this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1}})}refreshCustomers(){this.isLoadingCustomers=!0,this.customerService.refreshCustomers().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data,this.snackbar.success("Customers refreshed successfully")),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to refresh customers"),this.isLoadingCustomers=!1}})}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data),this.isLoadingProducts=!1},error:e=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1}})}refreshProducts(){this.isLoadingProducts=!0,this.productService.refreshProducts().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data,this.snackbar.success("Products refreshed successfully")),this.isLoadingProducts=!1},error:e=>{this.snackbar.error("Failed to refresh products"),this.isLoadingProducts=!1}})}navigateToAdd(){this.router.navigate(["/customer-price/add"])}deleteCustomerPrice(e){if(!e||!e.id){this.snackbar.error("No customer price found to delete");return}this.deletingPrices[e.id]||confirm(`Are you sure you want to delete the customer price for ${e.customerName} - ${e.productName}?`)&&(this.deletingPrices[e.id]=!0,this.priceService.deleteCustomerPrice(e.id).pipe(O(this.destroy$)).subscribe({next:t=>{t.success?(this.snackbar.success(t.message||"Customer price deleted successfully"),this.loadCustomerPrices()):this.snackbar.error(t.message||"Failed to delete customer price"),this.deletingPrices[e.id]=!1},error:t=>{this.snackbar.error(t?.error?.message||"Failed to delete customer price"),this.deletingPrices[e.id]=!1}}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||i)(b(gi),b(ct),b(Pt),b(X),b(de),b(be))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-customer-price-list"]],standalone:!0,features:[re],decls:54,vars:21,consts:[[1,"customer-price-container"],[3,"show"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by customer name or product name...",1,"form-control"],[1,"product-select-group"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","defaultOption","searchPlaceholder"],["type","button","title","Refresh Customers",1,"btn","btn-sm","btn-primary","refresh",2,"margin-top","3px",3,"click","touchstart","disabled"],[1,"fas",3,"ngClass"],[1,"select-group"],["formControlName","productId",3,"options","labelKey","valueKey","placeholder","searchPlaceholder","defaultOption","focusWidthPx"],["type","button","title","Refresh Products",1,"btn","btn-sm","btn-primary","refresh",3,"click","touchstart","disabled"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"btn","btn-sm","btn-primary","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"customer-prices-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"actions"],["type","button","title","Delete Customer Price",1,"btn-icon","delete",3,"click","touchstart","disabled"],["colspan","7",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(o(0,"div",0),m(1,"app-loader",1),o(2,"div",2)(3,"h2"),c(4,"Search Customer Prices"),a(),o(5,"form",3),_("ngSubmit",function(){return n.onSearch()}),o(6,"div",4)(7,"div",5),m(8,"input",6),a(),o(9,"div",5)(10,"div",7),m(11,"app-searchable-select",8),o(12,"button",9),_("click",function(){return n.refreshCustomers()})("touchstart",function(d){return d.preventDefault()}),m(13,"i",10),a()()(),o(14,"div",5)(15,"div",11),m(16,"app-searchable-select",12),o(17,"button",13),_("click",function(){return n.refreshProducts()})("touchstart",function(d){return d.preventDefault()}),m(18,"i",10),a()()(),o(19,"div",14)(20,"button",15),m(21,"i",16),c(22," Search "),a(),o(23,"button",17),_("click",function(){return n.resetForm()}),m(24,"i",18),c(25," Reset "),a()()()()(),o(26,"button",19),_("click",function(){return n.navigateToAdd()}),m(27,"i",20),c(28," Add Customer Price "),a(),o(29,"div",21)(30,"h2"),c(31,"Customer Prices"),a(),o(32,"div",22)(33,"table",23)(34,"thead")(35,"tr")(36,"th"),c(37,"No"),a(),o(38,"th"),c(39,"Customer Name"),a(),o(40,"th"),c(41,"Product Name"),a(),o(42,"th"),c(43,"Price"),a(),o(44,"th"),c(45,"Created At"),a(),o(46,"th"),c(47,"Updated At"),a(),o(48,"th"),c(49,"Actions"),a()()(),o(50,"tbody"),M(51,dg,17,11,"tr",24)(52,mg,3,0,"tr",25),a()()(),M(53,pg,1,4,"app-pagination",26),a()()),t&2&&(l(),p("show",n.isLoading),l(4),p("formGroup",n.searchForm),l(6),p("options",n.customers)("defaultOption",_t(19,cg))("searchPlaceholder","Search customers..."),l(),p("disabled",n.isLoadingCustomers),l(),p("ngClass",n.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt"),l(3),p("options",n.products)("labelKey","name")("valueKey","id")("placeholder","All Products")("searchPlaceholder","Search products...")("defaultOption",_t(20,lg))("focusWidthPx",400),l(),p("disabled",n.isLoadingProducts),l(),p("ngClass",n.isLoadingProducts?"fa-spinner fa-spin":"fa-sync-alt"),l(33),p("ngForOf",n.customerPrices),l(),p("ngIf",n.customerPrices.length===0&&!n.isLoading),l(),p("ngIf",n.totalPages>0))},dependencies:[le,ce,Oe,K,bt,ue,ee,W,Z,J,te,oe,Ue,Fe,me,Je,He],styles:[".customer-price-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;background-color:var(--background)}.customer-price-container[_ngcontent-%COMP%]   .btn.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem;display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;font-weight:500;transition:all .2s ease}.customer-price-container[_ngcontent-%COMP%]   .btn.mb-2[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 8px #00000026}.customer-price-container[_ngcontent-%COMP%]   .btn.mb-2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.875rem}.customer-price-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.customer-price-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;align-items:flex-start}@media (max-width: 768px){.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:40px}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:42px;padding:0;display:flex;align-items:center;justify-content:center;border:1px solid var(--border-color);border-radius:var(--border-radius);background:var(--primary)}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary)}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;width:100%;position:relative}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1;position:relative;z-index:1}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]{width:42px;height:42px;padding:0;display:flex;align-items:center;justify-content:center;border:1px solid var(--border-color);border-radius:var(--border-radius);background:var(--primary);color:#fff;margin-top:0;transition:all .2s ease}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff;transform:translateY(-1px)}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]:active{transform:translateY(0)}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media (max-width: 768px){.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{grid-column:1/-1}}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:42px;display:flex;align-items:center;justify-content:center;gap:.5rem}.customer-price-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;background-color:var(--background);color:var(--text-primary);font-weight:600;padding:12px;text-align:left;border-bottom:2px solid var(--border-color)}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;padding:12px;border-bottom:1px solid var(--border-color);color:var(--text-secondary)}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td.text-center[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-style:italic}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000005}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{padding:6px}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 768px){.customer-price-container[_ngcontent-%COMP%]{padding:1rem}.customer-price-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.customer-price-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .customer-price-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{font-size:.875rem}.customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customer-price-container[_ngcontent-%COMP%]   .customer-prices-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}}.product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.product-select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;margin-top:3px;width:42px;height:42px;border-radius:6px;transition:all .2s ease;border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;padding:0}.product-select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.product-select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.product-select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]:active{transform:translateY(0)}.product-select-group[_ngcontent-%COMP%]   .btn.refresh[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}"]})}}return i})();var Ls=()=>({standalone:!0}),ug=()=>[10,25,50,100];function gg(i,r){i&1&&(o(0,"span",59),m(1,"i",60),a())}function fg(i,r){if(i&1){let e=N();o(0,"button",61),_("click",function(){v(e);let n=f().$implicit,s=f(3);return x(s.deleteCustomerPrice(n))})("touchstart",function(n){return v(e),x(n.preventDefault())}),m(1,"i",21),a()}if(i&2){let e=f().$implicit,t=f(3);p("disabled",t.deletingPrices[e.productId]||t.updatingPrices[e.productId]),l(),p("ngClass",t.deletingPrices[e.productId]?"fa-spinner fa-spin":"fa-trash")}}function hg(i,r){if(i&1){let e=N();o(0,"tr",44)(1,"td",35)(2,"div",45),c(3),a()(),o(4,"td",36)(5,"div",46),c(6),a()(),o(7,"td",37)(8,"div",47),c(9),a()(),o(10,"td",38)(11,"div",48)(12,"span",49),c(13,"\u20B9"),a(),o(14,"span",50),c(15),ye(16,"number"),a()()(),o(17,"td",39)(18,"div",51)(19,"span",52),c(20,"\u20B9"),a(),o(21,"input",53),_("blur",function(n){let s=v(e).$implicit,d=f(3);return x(d.updateEffectivePrice(s,n.target.value))})("keyup.enter",function(n){let s=v(e).$implicit,d=f(3);return x(d.updateEffectivePrice(s,n.target.value))}),a(),M(22,gg,2,0,"span",54),a()(),o(23,"td",40)(24,"span",55),m(25,"i",21),c(26),a()(),o(27,"td",41)(28,"div",56)(29,"button",57),_("click",function(){let n=v(e).$implicit,s=f(3);return x(s.updateEffectivePrice(n,n.effectivePrice))})("touchstart",function(n){return v(e),x(n.preventDefault())}),m(30,"i",21),a(),M(31,fg,2,2,"button",58),a()()()}if(i&2){let e=r.$implicit,t=f(3);p("ngClass",t.getPriceSourceColor(e.priceSource)),l(3),E(e.productName),l(3),E(e.productCode),l(3),E(e.hsnCode),l(6),E(Ee(16,14,e.saleAmount,"1.2-2")),l(6),p("value",e.effectivePrice)("disabled",t.updatingPrices[e.productId]),l(),p("ngIf",t.updatingPrices[e.productId]),l(2),p("ngClass",t.getPriceSourceColor(e.priceSource)),l(),p("ngClass",e.priceSource==="customer_price"?"fa-user-check":"fa-box"),l(),T(" ",t.getPriceSourceLabel(e.priceSource)," "),l(3),p("disabled",t.updatingPrices[e.productId]||t.deletingPrices[e.productId]),l(),p("ngClass",t.updatingPrices[e.productId]?"fa-spinner fa-spin":"fa-save"),l(),p("ngIf",e.customerPriceId&&e.priceSource==="customer_price")}}function _g(i,r){i&1&&(o(0,"tr",62)(1,"td",63)(2,"div",64),m(3,"i",65),o(4,"p"),c(5,"No products found"),a()()()())}function Cg(i,r){if(i&1&&(o(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th",35),c(5,"Product Name"),a(),o(6,"th",36),c(7,"Product Code"),a(),o(8,"th",37),c(9,"HSN Code"),a(),o(10,"th",38),c(11,"Sale Amount"),a(),o(12,"th",39),c(13,"Effective Price"),a(),o(14,"th",40),c(15,"Price Source"),a(),o(16,"th",41),c(17,"Action"),a()()(),o(18,"tbody"),M(19,hg,32,17,"tr",42)(20,_g,6,0,"tr",43),a()()()),i&2){let e=f(2);l(19),p("ngForOf",e.productsWithPrices),l(),p("ngIf",e.productsWithPrices.length===0)}}function bg(i,r){if(i&1){let e=N();o(0,"app-pagination",66),_("pageChange",function(n){v(e);let s=f(2);return x(s.onPageChange(n))})("pageSizeChange",function(n){v(e);let s=f(2);return x(s.onPageSizeChange(n))}),a()}if(i&2){let e=f(2);p("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",_t(4,ug))}}function Pg(i,r){i&1&&(o(0,"div",67)(1,"div",68),m(2,"i",60),o(3,"p"),c(4,"Loading products with prices..."),a()()())}function Mg(i,r){if(i&1){let e=N();o(0,"div",24)(1,"div",14)(2,"h3"),m(3,"i",25),c(4," Products with Prices"),a(),o(5,"div",26)(6,"div",27),m(7,"i",28),o(8,"input",29),Xi("ngModelChange",function(n){v(e);let s=f();return Zi(s.searchTerm,n)||(s.searchTerm=n),x(n)}),_("ngModelChange",function(n){v(e);let s=f();return x(s.onSearchChange(n))}),a()()()(),M(9,Cg,21,2,"div",30)(10,bg,1,5,"app-pagination",31)(11,Pg,5,0,"div",32),a()}if(i&2){let e=f();l(8),Wi("ngModel",e.searchTerm),p("ngModelOptions",_t(5,Ls)),l(),p("ngIf",!e.isLoadingProductsWithPrices),l(),p("ngIf",e.totalPages>0&&!e.isLoadingProductsWithPrices),l(),p("ngIf",e.isLoadingProductsWithPrices)}}function yg(i,r){i&1&&m(0,"app-loader")}var Vs=(()=>{class i{get itemsFormArray(){return this.quotationForm.get("items")}constructor(e,t,n,s,d,u,g,h,P,k,L){this.fb=e,this.quotationService=t,this.productService=n,this.priceService=s,this.customerService=d,this.authService=u,this.userService=g,this.encryptionService=h,this.snackbar=P,this.router=k,this.cdr=L,this.products=[],this.loading=!1,this.isLoadingProducts=!1,this.destroy$=new G,this.isLoading=!1,this.isLoadingPrices={},this.currentUser=null,this.customerId=null,this.customers=[],this.selectedCustomerId=null,this.isLoadingCustomers=!1,this.productsWithPrices=[],this.isLoadingProductsWithPrices=!1,this.currentPage=0,this.pageSize=10,this.totalElements=0,this.totalPages=0,this.searchTerm="",this.sortBy="",this.sortDir="ASC",this.updatingPrices={},this.deletingPrices={},this.searchSubject=new G,this.totals={price:0,tax:0,finalPrice:0,taxPercentage:0},this.itemSubscriptions=[],this.Math=Math,this.touchStartTime=0,this.touchStartX=0,this.touchStartY=0,this.isTouchScrolling=!1,this.initForm()}ngOnInit(){this.loadCurrentUser(),this.loadCustomers(),this.loadProducts(),this.setupItemSubscriptions(),this.setupSearchDebounce()}setupSearchDebounce(){this.searchSubject.pipe(gt(500),jt(),O(this.destroy$)).subscribe(e=>{this.searchTerm=e,this.currentPage=0,this.loadProductsWithPrices()})}loadCurrentUser(){let e=localStorage.getItem("encryptedUserData");if(e)try{let t=this.encryptionService.decrypt(e);if(t){let n=null;typeof t=="object"&&t!==null?n=t:typeof t=="string"&&(n=JSON.parse(t)),n&&n.data&&(this.currentUser=n.data,!this.authService.hasRole("DEALER")&&n.data.client?.id&&(this.customerId=n.data.client.id))}}catch{}this.currentUser||this.userService.getCurrentUser().pipe(O(this.destroy$)).subscribe({next:t=>{t.success&&t.data&&(this.currentUser=t.data,!this.authService.hasRole("DEALER")&&t.data.client?.id&&(this.customerId=t.data.client.id))},error:t=>{}})}ngOnDestroy(){this.itemSubscriptions.forEach(e=>{e&&!e.closed&&e.unsubscribe()}),this.itemSubscriptions=[],this.searchSubject.complete(),this.destroy$.next(),this.destroy$.complete(),this.products=[],this.customers=[],this.productsWithPrices=[],this.currentUser=null,this.updatingPrices={},this.deletingPrices={},this.isLoadingPrices={},this.quotationForm&&this.quotationForm.reset()}initForm(){let e=new Date,t=new Date;t.setDate(e.getDate()+7),this.quotationForm=this.fb.group({quoteDate:[Ct(e,"yyyy-MM-dd","en")],validUntil:[Ct(t,"yyyy-MM-dd","en")],remarks:[""],items:this.fb.array([])}),this.addItem(!0)}addItem(e=!1){let t=this.fb.group({id:[null],productId:["",S.required],productType:[""],quantity:[1,[S.required,S.min(.001)]],unitPrice:[0],remarks:[""],price:[0],taxPercentage:[5],taxAmount:[0],finalPrice:[0],calculations:[[]]});this.itemsFormArray.push(t);let n=this.itemsFormArray.length-1;this.setupItemCalculations(t,n),this.subscribeToItemChanges(this.itemsFormArray.at(n),n),this.calculateItemPrice(n,e),this.calculateTotalAmount()}removeItem(e){this.itemSubscriptions[e]&&(this.itemSubscriptions[e].unsubscribe(),this.itemSubscriptions.splice(e,1)),this.isLoadingPrices[e]&&delete this.isLoadingPrices[e],this.itemsFormArray.removeAt(e);let t={};Object.keys(this.isLoadingPrices).forEach(n=>{let s=Number(n);s>e?t[s-1]=this.isLoadingPrices[s]:s<e&&(t[s]=this.isLoadingPrices[s])}),this.isLoadingPrices=t,this.itemsFormArray.controls.forEach((n,s)=>{this.itemSubscriptions[s]&&this.itemSubscriptions[s].unsubscribe(),this.subscribeToItemChanges(n,s)}),this.calculateTotalAmount(),this.cdr.detectChanges()}setupItemCalculations(e,t){e.get("productId")?.valueChanges.pipe(O(this.destroy$),mo(n=>!!n),gt(100),jt()).subscribe(n=>{let s=this.products.find(d=>d.id===n);s&&this.setProductPrice(t,s)}),e.get("quantity")?.valueChanges.pipe(O(this.destroy$),gt(50)).subscribe(()=>this.calculateItemPrice(t)),e.get("taxPercentage")?.valueChanges.pipe(O(this.destroy$),gt(50)).subscribe(()=>this.calculateItemPrice(t))}setProductPrice(e,t){let n=this.itemsFormArray.at(e),s=t.taxPercentage!==void 0?t.taxPercentage:5;n.patchValue({productType:t.type,taxPercentage:s,quantity:t.quantity||1},{emitEvent:!1}),this.fetchCustomerPrice(e,t.id)}fetchCustomerPrice(e,t){this.isLoadingPrices[e]=!0;let n={productId:t};!this.authService.hasRole("DEALER")&&this.customerId&&(n.customerId=this.customerId),this.priceService.getCustomerPrice(n).pipe(O(this.destroy$)).subscribe({next:s=>{if(this.isLoadingPrices[e]=!1,s.success&&s.data){let d=s.data.price||0;this.itemsFormArray.at(e).patchValue({unitPrice:d},{emitEvent:!1}),this.calculateItemPrice(e),this.cdr.detectChanges()}else this.setFallbackPrice(e)},error:s=>{this.isLoadingPrices[e]=!1,this.setFallbackPrice(e)}})}setFallbackPrice(e){let t=this.itemsFormArray.at(e),n=t.get("productId")?.value,s=this.products.find(d=>d.id===n);if(s){let d=s.saleAmount??s.sale_amount??0;t.patchValue({unitPrice:d},{emitEvent:!1}),this.calculateItemPrice(e),this.cdr.detectChanges()}}calculateItemPrice(e,t=!1){let n=this.itemsFormArray.at(e),s={quantity:Number(Number(n.get("quantity")?.value||0).toFixed(3)),unitPrice:Number(Number(n.get("unitPrice")?.value||0).toFixed(2)),taxPercentage:Number(n.get("taxPercentage")?.value??5)},d=Number((s.quantity*s.unitPrice).toFixed(2)),u=Number((d*s.taxPercentage/100).toFixed(2)),g=Number((d+u).toFixed(2));n.patchValue({price:d,taxAmount:u,finalPrice:g},{emitEvent:!1}),this.calculateTotalAmount(),t||this.cdr.detectChanges()}getTotalAmount(){let e=this.itemsFormArray.controls.reduce((t,n)=>t+(Number(n.get("finalPrice").value)||0),0);return Math.round(e)}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data),this.isLoadingProducts=!1},error:()=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1}})}refreshProducts(){this.isLoadingProducts=!0,this.productService.refreshProducts().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.products=e.data,this.snackbar.success("Products refreshed successfully")),this.isLoadingProducts=!1},error:()=>{this.snackbar.error("Failed to refresh products"),this.isLoadingProducts=!1}})}calculateTotalAmount(){let e={price:0,tax:0,finalPrice:0,taxPercentage:0};this.itemsFormArray.controls.forEach(t=>{let n=Number(Number(t.get("price")?.value||0).toFixed(2)),s=Number(Number(t.get("finalPrice")?.value||0).toFixed(2)),d=Number(Number(t.get("taxAmount")?.value||0).toFixed(2)),u=Number(t.get("taxPercentage")?.value||5);e.price=Number((e.price+n).toFixed(2)),e.tax=Number((e.tax+d).toFixed(2)),e.finalPrice=Number((e.finalPrice+s).toFixed(2)),e.taxPercentage=Number(u)}),this.totals=e}resetForm(){let e=new Date,t=new Date;for(t.setDate(e.getDate()+7),this.quotationForm.reset({quoteDate:Ct(e,"yyyy-MM-dd","en"),validUntil:Ct(t,"yyyy-MM-dd","en"),remarks:""});this.itemsFormArray.length;)this.itemsFormArray.removeAt(0);this.addItem(),this.calculateTotalAmount(),this.cdr.detectChanges()}isItemFieldInvalid(e,t){let n=this.itemsFormArray.at(e).get(t);if(!n)return!1;if(n.invalid&&(n.dirty||n.touched)){let d=n.errors;if(d&&(d.required||d.min&&t==="quantity"))return!0}return!1}onProductSelect(e,t){let n=this.products.find(u=>u.id===t.value);if(!n)return;let s=this.itemsFormArray.at(e),d=this.itemSubscriptions[e];d&&(d.unsubscribe(),this.itemSubscriptions[e]=new Mn),s.patchValue({productId:n.id},{emitEvent:!0}),this.itemSubscriptions[e]||this.subscribeToItemChanges(s,e)}onSubmit(){if(this.quotationForm.valid){this.isLoading=!0;let e=this.prepareFormData();this.quotationService.createQuotation(e).pipe(O(this.destroy$)).subscribe({next:t=>{t.success&&(this.snackbar.success("Dealer order created successfully"),this.quotationForm.reset(),this.router.navigate(["/quotation"])),this.isLoading=!1},error:t=>{this.snackbar.error(t?.error?.message||"Failed to create dealer order"),this.isLoading=!1}})}}prepareFormData(){let e=this.quotationForm.value,t=this.itemsFormArray.controls.map(n=>({id:n.get("id")?.value,productId:n.get("productId")?.value,productType:n.get("productType")?.value,quantity:n.get("quantity")?.value,unitPrice:n.get("unitPrice")?.value,remarks:n.get("remarks")?.value,price:n.get("price")?.value,taxPercentage:n.get("taxPercentage")?.value,taxAmount:n.get("taxAmount")?.value,finalPrice:n.get("finalPrice")?.value,quotationDiscountAmount:0,calculations:n.get("calculations")?.value||[]}));return{quoteDate:Ct(e.quoteDate,"yyyy-MM-dd","en"),validUntil:Ct(e.validUntil,"yyyy-MM-dd","en"),remarks:e.remarks,termsConditions:"",quotationDiscountPercentage:0,packagingAndForwadingCharges:0,items:t}}setupItemSubscriptions(){this.itemsFormArray.controls.forEach((e,t)=>{this.subscribeToItemChanges(e,t)})}subscribeToItemChanges(e,t){this.itemSubscriptions[t]&&this.itemSubscriptions[t].unsubscribe();let n=e.valueChanges.pipe(O(this.destroy$),gt(100)).subscribe(()=>{this.calculateItemPrice(t)});this.itemSubscriptions[t]=n}loadCustomers(){this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data||[]),this.isLoadingCustomers=!1},error:()=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1}})}refreshCustomers(){this.isLoadingCustomers=!0,this.customerService.refreshCustomers().pipe(O(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data||[],this.snackbar.success("Customers refreshed successfully")),this.isLoadingCustomers=!1},error:()=>{this.snackbar.error("Failed to refresh customers"),this.isLoadingCustomers=!1}})}onCustomerSelect(e){let t=e.value;t?(this.selectedCustomerId=t,this.customerId=t,this.currentPage=0,this.loadProductsWithPrices()):(this.selectedCustomerId=null,this.customerId=null,this.productsWithPrices=[])}loadProductsWithPrices(){if(!this.selectedCustomerId)return;this.isLoadingProductsWithPrices=!0;let e={customerId:this.selectedCustomerId,page:this.currentPage,size:this.pageSize,sortBy:this.sortBy,sortDir:this.sortDir};this.searchTerm&&(e.search=this.searchTerm),this.priceService.getProductsWithPrices(e).pipe(O(this.destroy$)).subscribe({next:t=>{t.success&&t.data?(this.productsWithPrices=t.data.content||[],this.totalElements=t.data.totalElements||0,this.totalPages=t.data.totalPages||0,this.currentPage=t.data.currentPage||0):(this.productsWithPrices=[],this.totalElements=0,this.totalPages=0),this.isLoadingProductsWithPrices=!1,this.cdr.detectChanges()},error:t=>{this.snackbar.error(t?.error?.message||"Failed to load products with prices"),this.productsWithPrices=[],this.isLoadingProductsWithPrices=!1,this.cdr.detectChanges()}})}onSearchChange(e){this.searchSubject.next(e)}onPageChange(e){this.currentPage=e,this.loadProductsWithPrices()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadProductsWithPrices()}onSortChange(e,t){this.sortBy=e,this.sortDir=t,this.currentPage=0,this.loadProductsWithPrices()}updateEffectivePrice(e,t){if(!e||!this.selectedCustomerId)return;let n=e.productId;if(this.updatingPrices[n])return;let s=parseFloat(t);if(isNaN(s)||s<0){this.snackbar.error("Please enter a valid price (must be a positive number)"),e.effectivePrice=e.effectivePrice,this.cdr.detectChanges();return}if(e.effectivePrice===s)return;this.updatingPrices[n]=!0;let d=e.effectivePrice,u={id:null,customerId:this.selectedCustomerId,productId:n,price:s};this.priceService.saveCustomerPrice(u).pipe(O(this.destroy$)).subscribe({next:g=>{g.success?(e.effectivePrice=s,e.priceSource="customer_price",g.data?.id&&(e.customerPriceId=g.data.id),this.snackbar.success(g.message||`Price updated from \u20B9${d.toFixed(2)} to \u20B9${s.toFixed(2)}`)):(e.effectivePrice=d,this.snackbar.error(g.message||"Failed to update price")),this.updatingPrices[n]=!1,this.cdr.detectChanges()},error:g=>{e.effectivePrice=d,this.snackbar.error(g?.error?.message||"Failed to update price"),this.updatingPrices[n]=!1,this.cdr.detectChanges()}})}getPriceSourceColor(e){return e==="customer_price"?"customer-price":e==="product_sale_amount"?"product-sale-price":""}getPriceSourceLabel(e){return e==="customer_price"?"Customer Price":e==="product_sale_amount"?"Product Sale Price":"Default Price"}deleteCustomerPrice(e){if(!e||!e.customerPriceId){this.snackbar.error("No customer price found to delete");return}let t=e.productId;this.deletingPrices[t]||confirm("Are you sure you want to delete this customer price? The price will revert to the product sale amount.")&&(this.deletingPrices[t]=!0,this.priceService.deleteCustomerPrice(e.customerPriceId).pipe(O(this.destroy$)).subscribe({next:n=>{n.success?(e.effectivePrice=e.saleAmount,e.priceSource="product_sale_amount",e.customerPriceId=null,this.snackbar.success(n.message||"Customer price deleted successfully"),this.loadProductsWithPrices()):this.snackbar.error(n.message||"Failed to delete customer price"),this.deletingPrices[t]=!1,this.cdr.detectChanges()},error:n=>{this.snackbar.error(n?.error?.message||"Failed to delete customer price"),this.deletingPrices[t]=!1,this.cdr.detectChanges()}}))}handleTouchStart(e){this.touchStartTime=Date.now(),this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY,this.isTouchScrolling=!1}handleTouchMove(e){let t=e.touches[0].clientX,n=e.touches[0].clientY,s=Math.abs(t-this.touchStartX),d=Math.abs(n-this.touchStartY);(s>10||d>10)&&(this.isTouchScrolling=!0)}handleTouchEnd(e){Date.now()-this.touchStartTime<200&&!this.isTouchScrolling&&e.preventDefault()}static{this.\u0275fac=function(t){return new(t||i)(b(X),b(Yo),b(Pt),b(gi),b(ct),b(it),b(Wt),b(Xe),b(de),b(be),b(wt))}}static{this.\u0275cmp=Q({type:i,selectors:[["app-add-customer-price"]],standalone:!0,features:[re],decls:29,vars:13,consts:[[1,"dealer-quotation-container"],[1,"form-card"],[1,"card-header"],[1,"header-content"],[1,"title-section"],[1,"fas","fa-shopping-cart"],[1,"form-title"],[1,"header-actions"],["routerLink","/quotation",1,"btn","btn-sm","btn-secondary","back-btn"],[1,"fas","fa-arrow-left"],[1,"dealer-badge"],[1,"fas","fa-store"],[1,"quotation-form",3,"ngSubmit","keydown.enter","touchstart","touchmove","touchend","formGroup"],[1,"customer-selection-section"],[1,"section-header"],[1,"fas","fa-user-tie"],[1,"customer-select-wrapper"],[1,"form-field-container"],[1,"select-group"],[3,"ngModelChange","selectionChange","options","labelKey","valueKey","placeholder","searchPlaceholder","ngModel","ngModelOptions"],["type","button","title","Refresh Customers",1,"btn","btn-sm","btn-icon","refresh",3,"click","touchstart","disabled"],[1,"fas",3,"ngClass"],["class","products-prices-section",4,"ngIf"],[4,"ngIf"],[1,"products-prices-section"],[1,"fas","fa-tags"],[1,"search-controls"],[1,"search-input-wrapper"],[1,"fas","fa-search"],["type","text","placeholder","Search products...",1,"form-control","search-input",3,"ngModelChange","ngModel","ngModelOptions"],["class","table-responsive",4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"table-responsive"],[1,"table","products-prices-table"],[1,"product-name-col"],[1,"product-code-col"],[1,"hsn-code-col"],[1,"sale-amount-col"],[1,"effective-price-col"],[1,"price-source-col"],[1,"action-col"],["class","product-price-row",3,"ngClass",4,"ngFor","ngForOf"],["class","no-data-row",4,"ngIf"],[1,"product-price-row",3,"ngClass"],[1,"product-name"],[1,"product-code"],[1,"hsn-code"],[1,"sale-amount"],[1,"currency"],[1,"value"],[1,"effective-price-input-wrapper"],[1,"currency-symbol"],["type","number","step","0.01","min","0",1,"form-control","effective-price-input",3,"blur","keyup.enter","value","disabled"],["class","price-update-loader",4,"ngIf"],[1,"price-source-badge",3,"ngClass"],[1,"action-buttons"],["type","button","title","Update Price",1,"btn","btn-sm","btn-primary","update-btn",3,"click","touchstart","disabled"],["type","button","class","btn btn-sm btn-danger delete-btn","title","Delete Customer Price",3,"disabled","click","touchstart",4,"ngIf"],[1,"price-update-loader"],[1,"fas","fa-spinner","fa-spin"],["type","button","title","Delete Customer Price",1,"btn","btn-sm","btn-danger","delete-btn",3,"click","touchstart","disabled"],[1,"no-data-row"],["colspan","7",1,"no-data-cell"],[1,"no-data-message"],[1,"fas","fa-inbox"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"],[1,"loading-state"],[1,"loading-spinner"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m(5,"i",5),o(6,"h2",6),c(7,"Dealer Direct Order"),a()(),o(8,"div",7)(9,"button",8),m(10,"i",9),c(11," Back "),a(),o(12,"span",10),m(13,"i",11),c(14," Dealer Portal "),a()()()(),o(15,"form",12),_("ngSubmit",function(){return n.onSubmit()})("keydown.enter",function(d){return d.preventDefault()})("touchstart",function(d){return n.handleTouchStart(d)})("touchmove",function(d){return n.handleTouchMove(d)})("touchend",function(d){return n.handleTouchEnd(d)}),o(16,"div",13)(17,"div",14)(18,"h3"),m(19,"i",15),c(20," Select Customer"),a()(),o(21,"div",16)(22,"div",17)(23,"div",18)(24,"app-searchable-select",19),Xi("ngModelChange",function(d){return Zi(n.selectedCustomerId,d)||(n.selectedCustomerId=d),d}),_("selectionChange",function(d){return n.onCustomerSelect(d)}),a(),o(25,"button",20),_("click",function(){return n.refreshCustomers()})("touchstart",function(d){return d.preventDefault()}),m(26,"i",21),a()()()()(),M(27,Mg,12,6,"div",22),a()()(),M(28,yg,1,0,"app-loader",23)),t&2&&(l(15),p("formGroup",n.quotationForm),l(9),p("options",n.customers)("labelKey","name")("valueKey","id")("placeholder","Select Customer")("searchPlaceholder","Search customers..."),Wi("ngModel",n.selectedCustomerId),p("ngModelOptions",_t(12,Ls)),l(),p("disabled",n.isLoadingCustomers),l(),p("ngClass",n.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt"),l(),p("ngIf",n.selectedCustomerId),l(),p("ngIf",n.isLoading))},dependencies:[le,ce,Oe,K,bt,ue,ee,W,Z,J,te,Ue,Vo,Fe,Ve,Je,me,He],styles:["[_ngcontent-%COMP%]:root{--primary: #003a58;--primary-light: #2a5f79;--primary-lighter: #4f7f94;--primary-lightest: #a6c0cd;--primary-dark: #00263a;--secondary: #00999c;--secondary-light: #26b3b5;--secondary-lighter: #6bcfd1;--secondary-lightest: #b9ebec;--secondary-dark: #007275;--neutral-dark: #3b4248;--neutral-medium: #8a949c;--neutral-light: #b3bcc2;--neutral-lighter: #d7dee2;--neutral-lightest: #f4f7f9;--accent: #264b55;--success: #1e9e68;--warning: #c98200;--error: #c23b3b;--info: #2aa6c2;--background: #f4f7f9;--text-primary: #3b4248;--text-secondary: #8a949c;--supporting: #b3bcc2}.btn[_ngcontent-%COMP%]{padding:10px 18px;border:none;border-radius:8px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);font-weight:500;font-size:14px;display:inline-flex;align-items:center;justify-content:center;gap:8px;touch-action:manipulation}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#003a58,#00263a);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 15px #003a5866}.btn-secondary[_ngcontent-%COMP%]{background:#ffffff26;color:#fff;border:1px solid rgba(255,255,255,.3);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff40;border-color:#ffffff80}.btn-danger[_ngcontent-%COMP%]{background:#c23b3b1a;color:#c23b3b;border:1px solid rgba(194,59,59,.3)}.btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#c23b3b;color:#fff;border-color:#c23b3b}.btn-icon[_ngcontent-%COMP%]{width:38px;height:38px;padding:0;border-radius:8px}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}@media (max-width: 768px){.btn[_ngcontent-%COMP%]{min-height:44px;padding:12px 20px;font-size:15px}}.dealer-quotation-container[_ngcontent-%COMP%]{width:100%;min-height:100vh;padding:0;margin:0;background:#f4f7f9;-webkit-overflow-scrolling:touch;touch-action:pan-y}.form-card[_ngcontent-%COMP%]{width:100%;min-height:100vh;background:#fff;border-radius:0;box-shadow:none;display:flex;flex-direction:column}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#003a58,#00263a);padding:16px 24px;position:sticky;top:0;z-index:100}.card-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}@media (max-width: 576px){.card-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:flex-start}}.card-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.card-header[_ngcontent-%COMP%]   .title-section[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#ffffffe6}.card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:600;letter-spacing:-.02em}@media (max-width: 576px){.card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{font-size:1.25rem}}.card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}@media (max-width: 576px){.card-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}.card-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.card-header[_ngcontent-%COMP%]   .dealer-badge[_ngcontent-%COMP%]{background:#00999c;color:#fff;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:500;display:flex;align-items:center;gap:6px;box-shadow:0 2px 8px #00999c4d}.card-header[_ngcontent-%COMP%]   .dealer-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}@media (max-width: 768px){.card-header[_ngcontent-%COMP%]{padding:12px 16px}}.quotation-form[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:20px;gap:20px}@media (max-width: 768px){.quotation-form[_ngcontent-%COMP%]{padding:12px;gap:16px}}.customer-selection-section[_ngcontent-%COMP%]{background:#f4f7f9;border-radius:12px;padding:20px;border:2px solid #00999c}.customer-selection-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:16px}.customer-selection-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#3b4248;display:flex;align-items:center;gap:8px}.customer-selection-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00999c;font-size:18px}.customer-selection-section[_ngcontent-%COMP%]   .customer-select-wrapper[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px}.customer-selection-section[_ngcontent-%COMP%]   .customer-select-wrapper[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1;z-index:10}@media (max-width: 768px){.customer-selection-section[_ngcontent-%COMP%]   .customer-select-wrapper[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .dropdown-menu{position:fixed!important;left:12px!important;right:12px!important;width:calc(100vw - 24px)!important;max-width:none!important;z-index:1000!important;box-shadow:0 8px 30px #00000026!important;border-radius:12px!important;max-height:50vh!important;overflow-y:auto!important}}.customer-selection-section[_ngcontent-%COMP%]   .customer-select-wrapper[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{width:38px;height:38px;padding:0;background:#fff;border:1px solid #b3bcc2;color:#003a58;flex-shrink:0}.customer-selection-section[_ngcontent-%COMP%]   .customer-select-wrapper[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:#003a58;color:#fff;border-color:#003a58}@media (max-width: 768px){.customer-selection-section[_ngcontent-%COMP%]   .customer-select-wrapper[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{width:44px;height:44px}}@media (max-width: 768px){.customer-selection-section[_ngcontent-%COMP%]{padding:12px}}.products-prices-section[_ngcontent-%COMP%]{background:#f4f7f9;border-radius:12px;padding:20px;border:2px solid #00999c}.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:12px}.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#3b4248;display:flex;align-items:center;gap:8px}.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00999c;font-size:18px}.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;min-width:250px}.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#8a949c;z-index:1}.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding-left:40px;width:100%}@media (max-width: 768px){.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{width:100%}.products-prices-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{min-width:auto;width:100%}}@media (max-width: 768px){.products-prices-section[_ngcontent-%COMP%]{padding:12px}}.products-prices-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;min-width:900px}.products-prices-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f4f7f9,#d7dee2);color:#3b4248;font-weight:600;font-size:12px;padding:12px 10px;text-align:left;white-space:nowrap;border-bottom:2px solid #d7dee2;text-transform:uppercase;letter-spacing:.03em}.products-prices-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0}.products-prices-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-radius:0 8px 0 0}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-price-row[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-price-row[_ngcontent-%COMP%]:hover{background:#b9ebec4d}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-price-row[_ngcontent-%COMP%]:nth-child(2n){background:#f4f7f980}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-price-row[_ngcontent-%COMP%]:nth-child(2n):hover{background:#b9ebec66}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-price-row.customer-price[_ngcontent-%COMP%]{background:#1e9e680d}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-price-row.customer-price[_ngcontent-%COMP%]:hover{background:#1e9e681a}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-price-row.product-sale-price[_ngcontent-%COMP%]{background:#c982000d}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-price-row.product-sale-price[_ngcontent-%COMP%]:hover{background:#c982001a}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-price-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;vertical-align:middle;border-bottom:1px solid #d7dee2}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]   .no-data-cell[_ngcontent-%COMP%]{padding:40px 20px;text-align:center}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]   .no-data-cell[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;color:#8a949c}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]   .no-data-cell[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;opacity:.5}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .no-data-row[_ngcontent-%COMP%]   .no-data-cell[_ngcontent-%COMP%]   .no-data-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.products-prices-table[_ngcontent-%COMP%]   .product-name-col[_ngcontent-%COMP%]{min-width:200px}.products-prices-table[_ngcontent-%COMP%]   .product-code-col[_ngcontent-%COMP%]{min-width:120px}.products-prices-table[_ngcontent-%COMP%]   .hsn-code-col[_ngcontent-%COMP%]{min-width:100px}.products-prices-table[_ngcontent-%COMP%]   .sale-amount-col[_ngcontent-%COMP%]{min-width:120px}.products-prices-table[_ngcontent-%COMP%]   .effective-price-col[_ngcontent-%COMP%], .products-prices-table[_ngcontent-%COMP%]   .price-source-col[_ngcontent-%COMP%]{min-width:150px}.products-prices-table[_ngcontent-%COMP%]   .action-col[_ngcontent-%COMP%]{min-width:80px;width:80px;text-align:center}.products-prices-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:500;color:#3b4248;font-size:14px}.products-prices-table[_ngcontent-%COMP%]   .product-code[_ngcontent-%COMP%], .products-prices-table[_ngcontent-%COMP%]   .hsn-code[_ngcontent-%COMP%]{color:#8a949c;font-size:13px;font-family:Courier New,monospace}.products-prices-table[_ngcontent-%COMP%]   .sale-amount[_ngcontent-%COMP%]{display:flex;align-items:center;gap:3px;font-weight:500;color:#3b4248;padding:6px 10px;background:#d7dee2;border-radius:6px;white-space:nowrap;font-size:13px}.products-prices-table[_ngcontent-%COMP%]   .sale-amount[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{color:#8a949c;font-size:12px}.products-prices-table[_ngcontent-%COMP%]   .effective-price-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.products-prices-table[_ngcontent-%COMP%]   .effective-price-input-wrapper[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{position:absolute;left:10px;color:#8a949c;font-weight:500;z-index:1}.products-prices-table[_ngcontent-%COMP%]   .effective-price-input-wrapper[_ngcontent-%COMP%]   .effective-price-input[_ngcontent-%COMP%]{padding-left:24px;width:100%;font-weight:600;color:#003a58;border:2px solid #2a5f79}.products-prices-table[_ngcontent-%COMP%]   .effective-price-input-wrapper[_ngcontent-%COMP%]   .effective-price-input[_ngcontent-%COMP%]:focus{border-color:#003a58;box-shadow:0 0 0 3px #003a581a}.products-prices-table[_ngcontent-%COMP%]   .effective-price-input-wrapper[_ngcontent-%COMP%]   .effective-price-input[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.products-prices-table[_ngcontent-%COMP%]   .effective-price-input-wrapper[_ngcontent-%COMP%]   .price-update-loader[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#003a58;z-index:2}.products-prices-table[_ngcontent-%COMP%]   .price-source-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border-radius:20px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.03em}.products-prices-table[_ngcontent-%COMP%]   .price-source-badge.customer-price[_ngcontent-%COMP%]{background:#1e9e6826;color:#125e3e;border:1px solid rgba(30,158,104,.3)}.products-prices-table[_ngcontent-%COMP%]   .price-source-badge.customer-price[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1e9e68}.products-prices-table[_ngcontent-%COMP%]   .price-source-badge.product-sale-price[_ngcontent-%COMP%]{background:#c9820026;color:#7d5100;border:1px solid rgba(201,130,0,.3)}.products-prices-table[_ngcontent-%COMP%]   .price-source-badge.product-sale-price[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#c98200}.products-prices-table[_ngcontent-%COMP%]   .price-source-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px}.products-prices-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.products-prices-table[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%], .products-prices-table[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{width:36px;height:36px;padding:0;border-radius:6px}@media (max-width: 768px){.products-prices-table[_ngcontent-%COMP%]{font-size:12px;min-width:800px}.products-prices-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 8px;font-size:10px}.products-prices-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px}.products-prices-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:12px}.products-prices-table[_ngcontent-%COMP%]   .product-code[_ngcontent-%COMP%], .products-prices-table[_ngcontent-%COMP%]   .hsn-code[_ngcontent-%COMP%]{font-size:11px}.products-prices-table[_ngcontent-%COMP%]   .sale-amount[_ngcontent-%COMP%]{font-size:11px;padding:5px 8px}.products-prices-table[_ngcontent-%COMP%]   .effective-price-input-wrapper[_ngcontent-%COMP%]   .effective-price-input[_ngcontent-%COMP%]{font-size:12px;padding-left:20px}.products-prices-table[_ngcontent-%COMP%]   .price-source-badge[_ngcontent-%COMP%]{font-size:10px;padding:4px 8px}.products-prices-table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{gap:6px}.products-prices-table[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%], .products-prices-table[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{width:32px;height:32px}}.pagination-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:16px;padding-top:16px;border-top:1px solid #d7dee2;flex-wrap:wrap;gap:12px}.pagination-wrapper[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{font-size:13px;color:#8a949c}.pagination-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.pagination-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:13px;color:#3b4248;font-weight:500;padding:0 8px}.pagination-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:100px}@media (max-width: 768px){.pagination-wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.pagination-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.pagination-wrapper[_ngcontent-%COMP%]   .pagination-controls[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:60px 20px;min-height:200px}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px;color:#8a949c}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px;color:#003a58}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.products-section[_ngcontent-%COMP%]{flex:1;background:#f4f7f9;border-radius:12px;padding:20px;border:2px solid #00999c}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:12px}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#3b4248;display:flex;align-items:center;gap:8px}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00999c;font-size:18px}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   .add-product-btn[_ngcontent-%COMP%]{background:#00999c}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   .add-product-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#007275;box-shadow:0 4px 15px #00999c66}@media (max-width: 576px){.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   .add-product-btn[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.products-section[_ngcontent-%COMP%]{padding:12px}}.table-responsive[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;touch-action:pan-x}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f4f7f9;border-radius:3px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#b3bcc2;border-radius:3px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#8a949c}.products-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;min-width:850px}.products-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f4f7f9,#d7dee2);color:#3b4248;font-weight:600;font-size:12px;padding:12px 10px;text-align:left;white-space:nowrap;border-bottom:2px solid #d7dee2;text-transform:uppercase;letter-spacing:.03em}.products-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0}.products-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-radius:0 8px 0 0}.products-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-row[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.products-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-row[_ngcontent-%COMP%]:hover{background:#b9ebec4d}.products-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-row[_ngcontent-%COMP%]:nth-child(2n){background:#f4f7f980}.products-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-row[_ngcontent-%COMP%]:nth-child(2n):hover{background:#b9ebec66}.products-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .product-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 10px;vertical-align:middle;border-bottom:1px solid #d7dee2}.products-table[_ngcontent-%COMP%]   .product-col[_ngcontent-%COMP%]{min-width:220px}.products-table[_ngcontent-%COMP%]   .qty-col[_ngcontent-%COMP%]{min-width:90px;width:100px}.products-table[_ngcontent-%COMP%]   .price-col[_ngcontent-%COMP%]{min-width:110px;width:120px}.products-table[_ngcontent-%COMP%]   .remarks-col[_ngcontent-%COMP%]{min-width:130px;width:150px}.products-table[_ngcontent-%COMP%]   .calc-col[_ngcontent-%COMP%]{min-width:110px;width:120px}.products-table[_ngcontent-%COMP%]   .action-col[_ngcontent-%COMP%]{min-width:70px;width:70px;text-align:center}.products-table[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.products-table[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:8px 10px;border:1px solid #b3bcc2;border-radius:6px;font-size:14px;margin-bottom:0}.products-table[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#003a58;box-shadow:0 0 0 2px #003a581a}@media (max-width: 768px){.products-table[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;padding:10px}}.products-table[_ngcontent-%COMP%]   .input-group.readonly-field[_ngcontent-%COMP%]{position:relative}.products-table[_ngcontent-%COMP%]   .input-group.readonly-field[_ngcontent-%COMP%]   .currency-symbol[_ngcontent-%COMP%]{position:absolute;left:10px;color:#8a949c;font-weight:500;z-index:1}.products-table[_ngcontent-%COMP%]   .input-group.readonly-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:24px;background:#f4f7f9;color:#3b4248;font-weight:500;border-color:#d7dee2}.products-table[_ngcontent-%COMP%]   .input-group.readonly-field[_ngcontent-%COMP%]   input.loading[_ngcontent-%COMP%]{opacity:.6}.products-table[_ngcontent-%COMP%]   .input-group.readonly-field[_ngcontent-%COMP%]   .price-loader[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);color:#003a58;z-index:2;display:flex;align-items:center;justify-content:center}.products-table[_ngcontent-%COMP%]   .input-group.readonly-field[_ngcontent-%COMP%]   .price-loader[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.products-table[_ngcontent-%COMP%]   .calculated-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:3px;font-weight:500;color:#3b4248;padding:6px 10px;background:#d7dee2;border-radius:6px;white-space:nowrap;font-size:13px}.products-table[_ngcontent-%COMP%]   .calculated-value[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{color:#8a949c;font-size:12px}.products-table[_ngcontent-%COMP%]   .calculated-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:13px}.products-table[_ngcontent-%COMP%]   .calculated-value[_ngcontent-%COMP%]   .percentage[_ngcontent-%COMP%]{font-size:10px;color:#8a949c}.products-table[_ngcontent-%COMP%]   .calculated-value.tax-value[_ngcontent-%COMP%]{background:#c9820026;color:#7d5100}.products-table[_ngcontent-%COMP%]   .calculated-value.tax-value[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{color:#c98200}.products-table[_ngcontent-%COMP%]   .calculated-value.final-value[_ngcontent-%COMP%]{background:#b9ebec;color:#007275;font-weight:600}.products-table[_ngcontent-%COMP%]   .calculated-value.final-value[_ngcontent-%COMP%]   .currency[_ngcontent-%COMP%]{color:#00999c}.products-table[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]{position:relative;min-width:200px}.products-table[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:6px}.products-table[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1;z-index:10}@media (max-width: 768px){.products-table[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .dropdown-menu{position:fixed!important;left:12px!important;right:12px!important;width:calc(100vw - 24px)!important;max-width:none!important;z-index:1000!important;box-shadow:0 8px 30px #00000026!important;border-radius:12px!important;max-height:50vh!important;overflow-y:auto!important}}.products-table[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{width:34px;height:34px;padding:0;background:#fff;border:1px solid #b3bcc2;color:#003a58;flex-shrink:0}.products-table[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:#003a58;color:#fff;border-color:#003a58}@media (max-width: 768px){.products-table[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%]   .select-group[_ngcontent-%COMP%]   .refresh[_ngcontent-%COMP%]{width:44px;height:44px}}.products-table[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{margin:0 auto;width:32px;height:32px;padding:0}.products-table[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:disabled{opacity:.3;background:#f4f7f9;color:#b3bcc2;border-color:#d7dee2}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background:linear-gradient(180deg,#f4f7f9,#d7dee2)}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px 10px;border-top:2px solid #d7dee2;border-bottom:none}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .totals-label[_ngcontent-%COMP%]{text-align:right;color:#3b4248}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .totals-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#003a58;margin-right:6px}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;padding:6px 10px;background:#fff;border-radius:6px;border:1px solid #d7dee2}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:10px;color:#8a949c;text-transform:uppercase;letter-spacing:.03em}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .total-value[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#3b4248}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .total-value.grand-total[_ngcontent-%COMP%]{background:#00999c;border-color:#00999c}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .total-value.grand-total[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#fffc}.products-table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   .total-value.grand-total[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#fff;font-size:15px}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #b3bcc2;border-radius:6px;font-size:14px;transition:all .3s cubic-bezier(.4,0,.2,1);background:#fff;margin-bottom:0}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#003a58;box-shadow:0 0 0 3px #003a581a}@media (max-width: 768px){.form-control[_ngcontent-%COMP%]{font-size:16px;padding:12px;min-height:44px}}textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.bottom-section[_ngcontent-%COMP%]{display:flex;gap:20px;margin-top:20px;padding:20px;background:#f4f7f9;border-radius:12px;border:1px solid #d7dee2;align-items:flex-end}@media (max-width: 992px){.bottom-section[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}@media (max-width: 768px){.bottom-section[_ngcontent-%COMP%]{padding:12px;margin-top:12px;gap:16px}}.remarks-wrapper[_ngcontent-%COMP%]{flex:1}.remarks-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.remarks-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-bottom:6px;color:#3b4248;font-weight:500;font-size:13px}.remarks-wrapper[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#003a58;font-size:13px}.summary-actions-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}@media (max-width: 768px){.summary-actions-wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:16px}}.order-summary-inline[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:12px 20px;background:linear-gradient(135deg,#003a58,#00263a);border-radius:8px;color:#fff}.order-summary-inline[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.order-summary-inline[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#ffffffb3}.order-summary-inline[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:12px;color:#fffc}.order-summary-inline[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#fff}.order-summary-inline[_ngcontent-%COMP%]   .summary-item.highlight[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#26b3b5}.order-summary-inline[_ngcontent-%COMP%]   .summary-item.highlight[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{color:#6bcfd1}.order-summary-inline[_ngcontent-%COMP%]   .summary-divider[_ngcontent-%COMP%]{width:1px;height:30px;background:#fff3}@media (max-width: 768px){.order-summary-inline[_ngcontent-%COMP%]{justify-content:space-between;padding:12px 16px}.order-summary-inline[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:16px}}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.form-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#f4f7f9;color:#3b4248;border:1px solid #d7dee2}.form-actions[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#d7dee2;border-color:#b3bcc2}.form-actions[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{min-width:140px;padding:12px 24px;font-size:14px;font-weight:600;background:#00999c}.form-actions[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#007275;box-shadow:0 4px 20px #00999c66}@media (max-width: 768px){.form-actions[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;justify-content:center}.form-actions[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{min-width:auto}}@media (max-width: 768px){.dealer-quotation-container[_ngcontent-%COMP%]{overflow-x:hidden;touch-action:pan-y}.products-table[_ngcontent-%COMP%]{font-size:12px;min-width:750px}.products-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 8px;font-size:10px}.products-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px}.products-table[_ngcontent-%COMP%]   .calculated-value[_ngcontent-%COMP%]{padding:5px 8px;font-size:12px}.products-table[_ngcontent-%COMP%]   .calculated-value[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:12px}.products-table[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px}.products-table[_ngcontent-%COMP%]   .form-field-container[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   .product-col[_ngcontent-%COMP%]{min-width:180px}.products-table[_ngcontent-%COMP%]   .qty-col[_ngcontent-%COMP%]{min-width:80px;width:85px}.products-table[_ngcontent-%COMP%]   .price-col[_ngcontent-%COMP%]{min-width:95px;width:100px}.products-table[_ngcontent-%COMP%]   .remarks-col[_ngcontent-%COMP%]{min-width:110px;width:120px}.products-table[_ngcontent-%COMP%]   .calc-col[_ngcontent-%COMP%]{min-width:95px;width:100px}.products-table[_ngcontent-%COMP%]   .action-col[_ngcontent-%COMP%]{min-width:55px;width:55px}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.product-row[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}@media (prefers-contrast: high){.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{border-width:2px}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;transition-duration:.01ms!important}}"]})}}return i})();var Og=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Ka,canActivate:[ts]},{path:"category",component:Ja,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"product",component:es,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"purchase",loadChildren:()=>import("./chunk-O4LF4RQ4.js").then(i=>i.PurchaseModule),canActivate:[De,ze],data:{preload:!0,roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"purchase-challan",loadChildren:()=>import("./chunk-6MNPO7IA.js").then(i=>i.PurchaseChallanModule),canActivate:[De,ze],data:{preload:!0,roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"purchase-order",loadChildren:()=>import("./chunk-ZE7VGGXX.js").then(i=>i.PurchaseOrderModule),canActivate:[De,ze],data:{preload:!0,roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"sale",component:is,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"sale/create",component:Ps,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"sale/return/create",component:Jr,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"sale/return/:id",component:Jr,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"sale/return",component:Os,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"profit",component:as,canActivate:[De]},{path:"customer",component:cs,canActivate:[De]},{path:"combined-purchase-sale",component:ds,canActivate:[De]},{path:"transport-master",component:Ts,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN","SALES_AND_MARKETING","DISPATCH"]}},{path:"transport-master/create",component:eo,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN","SALES_AND_MARKETING","DISPATCH"]}},{path:"transport-master/edit",component:eo,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN","SALES_AND_MARKETING","DISPATCH"]}},{path:"employee",component:ms,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"employee/create",component:Zr,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"employee/edit/:id",component:Zr,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"employee-order",component:us,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"employee-order/create",component:Xr,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"employee-order/edit/:id",component:Xr,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"attendance",component:_s,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"attendance/create",component:hs,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"attendance/details",component:bs,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"daily-profit",component:gs,canActivate:[De]},{path:"ledger",component:Fs,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"quotation",loadChildren:()=>import("./chunk-FIWW6J7V.js").then(i=>i.QuotationModule),canActivate:[De,ze],data:{preload:!0,roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"payment-history",component:As,canActivate:[De,ze],data:{roles:["ADMIN","SALES_AND_MARKETING"]}},{path:"payment-history/add",component:to,canActivate:[De,ze],data:{roles:["ADMIN","SALES_AND_MARKETING"]}},{path:"payment-history/edit/:encryptedId",component:to,canActivate:[De,ze],data:{roles:["ADMIN","SALES_AND_MARKETING"]}},{path:"data-center",component:xs,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"users",component:Ss,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"users/edit/:id",component:ws,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"dealers/register",component:ks,data:{roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"customer-price",component:Ns,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"customer-price/add",component:Vs,canActivate:[De,ze],data:{roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"chart",loadChildren:()=>import("./chunk-ZDFLKLS4.js").then(i=>i.ChartModule),canActivate:[De,ze],data:{preload:!0,roles:["ADMIN","STAFF_ADMIN"]}},{path:"**",redirectTo:"/purchase",pathMatch:"full"}],zs=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=sn({type:i})}static{this.\u0275inj=on({imports:[Fe.forRoot(Og,{useHash:!0,preloadingStrategy:qo}),Fe]})}}return i})();var Rs=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=sn({type:i,bootstrap:[Ya]})}static{this.\u0275inj=on({providers:[{provide:Ji,useClass:Wa,multi:!0},{provide:Ji,useClass:Za,multi:!0}],imports:[ii,$a,To,Ue,ue,Fe,zs,Ba.forRoot(),He,me,Je]})}}return i})();Fo().bootstrapModule(Rs).catch(i=>console.error(i));
