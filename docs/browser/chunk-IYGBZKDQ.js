import{$a as m,$b as f,A as c,_b as g,h as u,v as h,wc as l,x as s}from"./chunk-3WKA5TJN.js";var v=(()=>{class i{constructor(r,t,e){this.http=r,this.cacheService=t,this.encryptionService=e,this.CACHE_KEY="active_customers",this.apiUrl=`${g.apiUrl}/api/customers`}searchCustomers(r){return this.http.post(`${this.apiUrl}/search`,r)}createCustomer(r){return this.http.post(`${this.apiUrl}`,r)}updateCustomer(r,t){return t.nextActionDate==""&&(t.nextActionDate=null),this.http.put(`${this.apiUrl}/${r}`,t)}getCustomers(r){if(r.status==="A"){let t=localStorage.getItem(this.CACHE_KEY);if(t){let e=this.encryptionService.decrypt(t);if(e)return u(e)}}return this.http.post(`${this.apiUrl}/getCustomers`,{search:r.search}).pipe(h(t=>{if(r.status==="A"&&t.success){let e=this.encryptionService.encrypt(t);localStorage.setItem(this.CACHE_KEY,e)}}))}refreshCustomers(){return localStorage.removeItem(this.CACHE_KEY),this.getCustomers({status:"A"})}getCustomerCoatingPrice(r){return this.http.post(`${this.apiUrl}/coating-price`,{id:r})}static{this.\u0275fac=function(t){return new(t||i)(c(m),c(l),c(f))}}static{this.\u0275prov=s({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var E=(()=>{class i{formatDate(r){if(!r)return"";try{return new Date(r).toLocaleString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-").replace(",","")}catch(t){return console.error("Error formatting date:",t),r}}formatDateForApi(r,t=!1){if(!r)return"";try{let e=new Date(r),o=new Date(e.getTime()-5.5*60*60*1e3);if(isNaN(o.getTime()))return"";let n=o.getDate().toString().padStart(2,"0"),a=(o.getMonth()+1).toString().padStart(2,"0"),p=o.getFullYear();return`${n}-${a}-${p} ${t?"00:00:00":"23:59:59"}`}catch(e){return console.error("Error formatting date for API:",e),""}}formatDateDDMMYYYY(r){if(!r)return"";try{let t=new Date(r);return isNaN(t.getTime())?"":`${String(t.getDate()).padStart(2,"0")}-${String(t.getMonth()+1).padStart(2,"0")}-${t.getFullYear()}`}catch(t){return console.error("Error formatting date DD-MM-YYYY:",t),""}}formatDateTimeForApi(r){let t=new Date(r),e=t.getDate().toString().padStart(2,"0"),o=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getFullYear(),a=t.getHours().toString().padStart(2,"0"),p=t.getMinutes().toString().padStart(2,"0");return`${e}-${o}-${n} ${a}:${p}:00`}formatDateTimeForInput(r){let t=r.getFullYear(),e=String(r.getMonth()+1).padStart(2,"0"),o=String(r.getDate()).padStart(2,"0"),n=String(r.getHours()).padStart(2,"0"),a=String(r.getMinutes()).padStart(2,"0");return`${t}-${e}-${o}T${n}:${a}`}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=s({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{v as a,E as b};
