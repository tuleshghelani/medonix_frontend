import{A as s,Yb as c,Zb as h,_a as n,h as o,v as a,x as p}from"./chunk-5TXFCLAM.js";var y=(()=>{class e{constructor(t,r){this.http=t,this.encryptionService=r,this.apiUrl=`${c.apiUrl}/api/transports`,this.CACHE_KEY="active_transports"}create(t){return this.http.post(this.apiUrl,t)}update(t){return this.http.put(this.apiUrl,t)}delete(t){return this.http.request("DELETE",this.apiUrl,{body:{id:t}})}getTransports(t){if(t?.status==="A"){let r=localStorage.getItem(this.CACHE_KEY);if(r){let i=this.encryptionService.decrypt(r);if(i)return o(i)}}return this.http.post(`${this.apiUrl}/getTransports`,{search:t?.search}).pipe(a(r=>{if(t?.status==="A"&&r?.success){let i=this.encryptionService.encrypt(r);localStorage.setItem(this.CACHE_KEY,i)}}))}refreshTransports(){return localStorage.removeItem(this.CACHE_KEY),this.getTransports({status:"A"})}search(t){return this.http.post(`${this.apiUrl}/search`,t)}details(t){return this.http.post(`${this.apiUrl}/details`,{id:t})}static{this.\u0275fac=function(r){return new(r||e)(s(n),s(h))}}static{this.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{y as a};
