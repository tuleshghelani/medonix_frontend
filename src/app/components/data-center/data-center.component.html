<div class="data-center-container">
  <app-loader [show]="isLoading"></app-loader>

  <div class="batch-delete-section card">
    <h2><i class="fas fa-database"></i> Data Center Management</h2>
    
    <form [formGroup]="batchDeleteForm" >
      <div class="date-range-section">
        <div class="form-group">
          <label>
            <i class="fas fa-calendar"></i> Start Date <span class="required">*</span>
          </label>
          <input 
            type="date" 
            formControlName="startDate" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('startDate')"
          >
          <div class="invalid-feedback" *ngIf="isFieldInvalid('startDate')">
            Start date is required
          </div>
        </div>

        <div class="form-group">
          <label>
            <i class="fas fa-calendar"></i> End Date <span class="required">*</span>
          </label>
          <input 
            type="date" 
            formControlName="endDate" 
            class="form-control"
            [class.is-invalid]="isFieldInvalid('endDate')"
          >
          <div class="invalid-feedback" *ngIf="isFieldInvalid('endDate')">
            End date is required and must be after start date
          </div>
        </div>
      </div>

      <div class="data-types-section">
        <h3><i class="fas fa-check-square"></i> Select Data Types</h3>
        <div class="checkbox-group">
          <div class="form-check" *ngFor="let type of dataTypes">
            <input 
              type="checkbox" 
              [id]="type"
              [value]="type"
              [checked]="selectedTypes.includes(type)"
              (change)="onCheckboxChange($event)"
              class="form-check-input"
            >
            <label [for]="type" class="form-check-label">
              {{ type }}
            </label>
          </div>
        </div>
        <div class="invalid-feedback d-block" *ngIf="showTypeError">
          Please select at least one data type
        </div>
      </div>

      <div class="action-buttons">
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="resetForm()"
          [disabled]="isLoading"
        >
          <i class="fas fa-undo"></i> Reset
        </button>
        <button 
          type="submit" 
          class="btn btn-danger"
          [disabled]="!batchDeleteForm.valid || selectedTypes.length === 0 || isLoading"
          (click)="showConfirmModal = true"
        >
          <i class="fas" [ngClass]="isLoading ? 'fa-spinner fa-spin' : 'fa-trash'"></i>
          {{ isLoading ? 'Deleting...' : 'Delete Selected Data' }}
        </button>
      </div>
    </form>
  </div>

  <app-confirm-modal
    [show]="showConfirmModal"
    title="Confirm Delete"
    [message]="'Are you sure you want to delete the selected data? This action will never be recoverable.'"
    (confirm)="onConfirmDelete()"
    (cancel)="showConfirmModal = false"
  ></app-confirm-modal>
</div>
