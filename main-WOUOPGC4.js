import{a as Er}from"./chunk-Z6BE65DS.js";import{a as Jt,b as mt,c as Jn}from"./chunk-JHPLLOAA.js";import{a as Ze,b as Yt,d as wr,e as kr,f as Xn,g as mn,h as Tr}from"./chunk-ZYEOV2ER.js";import{$ as u,$a as Ai,A as he,Ab as me,B as Ht,Ba as cr,Bb as bt,C as Q,Ca as W,Cb as Cr,D as Gt,Da as cn,Db as Pr,Ea as ut,Eb as pe,F as Zo,Fa as _t,Fb as br,G as Wo,Ga as Un,Gb as yr,H as k,Ha as ze,Hb as ue,I as T,Ia as Bn,Ib as et,J as $n,Ja as He,Jb as tt,Kb as nt,L as vn,La as Hn,Lb as Wn,M as Xo,Mb as yt,N as Di,Na as kn,Nb as vr,O as Jo,Ob as re,P as Mn,Pa as Gn,Pb as $e,Q as er,Qa as ye,Qb as ge,R as l,Ra as Fe,Rb as Kt,S as y,Sa as Y,Sb as Mr,Ta as lr,Tb as Ne,U as tr,Ua as lt,Ub as Ge,V as nr,Va as ln,Vb as Or,W as ir,Wb as xr,X as On,Xa as ne,Xb as Le,Ya as dr,Yb as ct,Z as O,Zb as dt,_ as xn,_a as Je,a as le,aa as Sn,ab as mr,b as Xe,ba as L,bb as pr,c as Uo,ca as pt,cb as ur,da as or,db as Qn,ea as r,eb as gr,f as Ve,fa as a,fb as fr,ga as m,gb as Kn,h as Bo,ha as En,hb as ke,i as ki,ia as wn,ib as Dt,j as jn,ja as U,jb as Qt,kb as Ct,l as Ho,la as rr,lb as hr,ma as b,mb as ot,n as Ti,na as P,nb as Yn,o as Go,oa as ar,ob as Pt,pb as dn,qb as Fi,r as Qo,rb as Zn,sc as ve,t as Ko,ta as c,tb as ie,tc as xe,u as Pe,ua as I,ub as x,uc as Sr,v as Ii,va as w,vb as oe,vc as At,w as Te,wa as qn,wb as de,wc as Zt,x as Ee,xa as sr,xb as _r,xc as Ft,y as Bt,yb as Ni,z as Yo}from"./chunk-SOOHBEPN.js";var Nt=globalThis;function vt(o){return(Nt.__Zone_symbol_prefix||"__zone_symbol__")+o}function us(){let o=Nt.performance;function i(E){o&&o.mark&&o.mark(E)}function e(E,S){o&&o.measure&&o.measure(E,S)}i("Zone");let t=(()=>{class E{static{this.__symbol__=vt}static assertZonePatched(){if(Nt.Promise!==ee.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let f=E.current;for(;f.parent;)f=f.parent;return f}static get current(){return H.zone}static get currentTask(){return te}static __load_patch(f,_,j=!1){if(ee.hasOwnProperty(f)){let G=Nt[vt("forceDuplicateZoneCheck")]===!0;if(!j&&G)throw Error("Already loaded patch: "+f)}else if(!Nt["__Zone_disable_"+f]){let G="Zone:"+f;i(G),ee[f]=_(Nt,E,J),e(G,G)}}get parent(){return this._parent}get name(){return this._name}constructor(f,_){this._parent=f,this._name=_?_.name||"unnamed":"<root>",this._properties=_&&_.properties||{},this._zoneDelegate=new s(this,this._parent&&this._parent._zoneDelegate,_)}get(f){let _=this.getZoneWith(f);if(_)return _._properties[f]}getZoneWith(f){let _=this;for(;_;){if(_._properties.hasOwnProperty(f))return _;_=_._parent}return null}fork(f){if(!f)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,f)}wrap(f,_){if(typeof f!="function")throw new Error("Expecting function got: "+f);let j=this._zoneDelegate.intercept(this,f,_),G=this;return function(){return G.runGuarded(j,this,arguments,_)}}run(f,_,j,G){H={parent:H,zone:this};try{return this._zoneDelegate.invoke(this,f,_,j,G)}finally{H=H.parent}}runGuarded(f,_=null,j,G){H={parent:H,zone:this};try{try{return this._zoneDelegate.invoke(this,f,_,j,G)}catch(Se){if(this._zoneDelegate.handleError(this,Se))throw Se}}finally{H=H.parent}}runTask(f,_,j){if(f.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(f.zone||ae).name+"; Execution: "+this.name+")");let G=f,{type:Se,data:{isPeriodic:fe=!1,isRefreshable:Ae=!1}={}}=f;if(f.state===Ce&&(Se===De||Se===q))return;let ht=f.state!=X;ht&&G._transitionTo(X,N);let St=te;te=G,H={parent:H,zone:this};try{Se==q&&f.data&&!fe&&!Ae&&(f.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,G,_,j)}catch(je){if(this._zoneDelegate.handleError(this,je))throw je}}finally{let je=f.state;if(je!==Ce&&je!==Ie)if(Se==De||fe||Ae&&je===$)ht&&G._transitionTo(N,X,$);else{let A=G._zoneDelegates;this._updateTaskCount(G,-1),ht&&G._transitionTo(Ce,X,Ce),Ae&&(G._zoneDelegates=A)}H=H.parent,te=St}}scheduleTask(f){if(f.zone&&f.zone!==this){let j=this;for(;j;){if(j===f.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${f.zone.name}`);j=j.parent}}f._transitionTo($,Ce);let _=[];f._zoneDelegates=_,f._zone=this;try{f=this._zoneDelegate.scheduleTask(this,f)}catch(j){throw f._transitionTo(Ie,$,Ce),this._zoneDelegate.handleError(this,j),j}return f._zoneDelegates===_&&this._updateTaskCount(f,1),f.state==$&&f._transitionTo(N,$),f}scheduleMicroTask(f,_,j,G){return this.scheduleTask(new d(_e,f,_,j,G,void 0))}scheduleMacroTask(f,_,j,G,Se){return this.scheduleTask(new d(q,f,_,j,G,Se))}scheduleEventTask(f,_,j,G,Se){return this.scheduleTask(new d(De,f,_,j,G,Se))}cancelTask(f){if(f.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(f.zone||ae).name+"; Execution: "+this.name+")");if(!(f.state!==N&&f.state!==X)){f._transitionTo(we,N,X);try{this._zoneDelegate.cancelTask(this,f)}catch(_){throw f._transitionTo(Ie,we),this._zoneDelegate.handleError(this,_),_}return this._updateTaskCount(f,-1),f._transitionTo(Ce,we),f.runCount=-1,f}}_updateTaskCount(f,_){let j=f._zoneDelegates;_==-1&&(f._zoneDelegates=null);for(let G=0;G<j.length;G++)j[G]._updateTaskCount(f.type,_)}}return E})(),n={name:"",onHasTask:(E,S,f,_)=>E.hasTask(f,_),onScheduleTask:(E,S,f,_)=>E.scheduleTask(f,_),onInvokeTask:(E,S,f,_,j,G)=>E.invokeTask(f,_,j,G),onCancelTask:(E,S,f,_)=>E.cancelTask(f,_)};class s{get zone(){return this._zone}constructor(S,f,_){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=S,this._parentDelegate=f,this._forkZS=_&&(_&&_.onFork?_:f._forkZS),this._forkDlgt=_&&(_.onFork?f:f._forkDlgt),this._forkCurrZone=_&&(_.onFork?this._zone:f._forkCurrZone),this._interceptZS=_&&(_.onIntercept?_:f._interceptZS),this._interceptDlgt=_&&(_.onIntercept?f:f._interceptDlgt),this._interceptCurrZone=_&&(_.onIntercept?this._zone:f._interceptCurrZone),this._invokeZS=_&&(_.onInvoke?_:f._invokeZS),this._invokeDlgt=_&&(_.onInvoke?f:f._invokeDlgt),this._invokeCurrZone=_&&(_.onInvoke?this._zone:f._invokeCurrZone),this._handleErrorZS=_&&(_.onHandleError?_:f._handleErrorZS),this._handleErrorDlgt=_&&(_.onHandleError?f:f._handleErrorDlgt),this._handleErrorCurrZone=_&&(_.onHandleError?this._zone:f._handleErrorCurrZone),this._scheduleTaskZS=_&&(_.onScheduleTask?_:f._scheduleTaskZS),this._scheduleTaskDlgt=_&&(_.onScheduleTask?f:f._scheduleTaskDlgt),this._scheduleTaskCurrZone=_&&(_.onScheduleTask?this._zone:f._scheduleTaskCurrZone),this._invokeTaskZS=_&&(_.onInvokeTask?_:f._invokeTaskZS),this._invokeTaskDlgt=_&&(_.onInvokeTask?f:f._invokeTaskDlgt),this._invokeTaskCurrZone=_&&(_.onInvokeTask?this._zone:f._invokeTaskCurrZone),this._cancelTaskZS=_&&(_.onCancelTask?_:f._cancelTaskZS),this._cancelTaskDlgt=_&&(_.onCancelTask?f:f._cancelTaskDlgt),this._cancelTaskCurrZone=_&&(_.onCancelTask?this._zone:f._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let j=_&&_.onHasTask,G=f&&f._hasTaskZS;(j||G)&&(this._hasTaskZS=j?_:n,this._hasTaskDlgt=f,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,_.onScheduleTask||(this._scheduleTaskZS=n,this._scheduleTaskDlgt=f,this._scheduleTaskCurrZone=this._zone),_.onInvokeTask||(this._invokeTaskZS=n,this._invokeTaskDlgt=f,this._invokeTaskCurrZone=this._zone),_.onCancelTask||(this._cancelTaskZS=n,this._cancelTaskDlgt=f,this._cancelTaskCurrZone=this._zone))}fork(S,f){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,S,f):new t(S,f)}intercept(S,f,_){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,S,f,_):f}invoke(S,f,_,j,G){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,S,f,_,j,G):f.apply(_,j)}handleError(S,f){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,S,f):!0}scheduleTask(S,f){let _=f;if(this._scheduleTaskZS)this._hasTaskZS&&_._zoneDelegates.push(this._hasTaskDlgtOwner),_=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,S,f),_||(_=f);else if(f.scheduleFn)f.scheduleFn(f);else if(f.type==_e)V(f);else throw new Error("Task is missing scheduleFn.");return _}invokeTask(S,f,_,j){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,S,f,_,j):f.callback.apply(_,j)}cancelTask(S,f){let _;if(this._cancelTaskZS)_=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,S,f);else{if(!f.cancelFn)throw Error("Task is not cancelable");_=f.cancelFn(f)}return _}hasTask(S,f){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,S,f)}catch(_){this.handleError(S,_)}}_updateTaskCount(S,f){let _=this._taskCounts,j=_[S],G=_[S]=j+f;if(G<0)throw new Error("More tasks executed then were scheduled.");if(j==0||G==0){let Se={microTask:_.microTask>0,macroTask:_.macroTask>0,eventTask:_.eventTask>0,change:S};this.hasTask(this._zone,Se)}}}class d{constructor(S,f,_,j,G,Se){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=S,this.source=f,this.data=j,this.scheduleFn=G,this.cancelFn=Se,!_)throw new Error("callback is not defined");this.callback=_;let fe=this;S===De&&j&&j.useG?this.invoke=d.invokeTask:this.invoke=function(){return d.invokeTask.call(Nt,fe,this,arguments)}}static invokeTask(S,f,_){S||(S=this),st++;try{return S.runCount++,S.zone.runTask(S,f,_)}finally{st==1&&B(),st--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(Ce,$)}_transitionTo(S,f,_){if(this._state===f||this._state===_)this._state=S,S==Ce&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${S}', expecting state '${f}'${_?" or '"+_+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let p=vt("setTimeout"),g=vt("Promise"),h=vt("then"),C=[],v=!1,R;function z(E){if(R||Nt[g]&&(R=Nt[g].resolve(0)),R){let S=R[h];S||(S=R.then),S.call(R,E)}else Nt[p](E,0)}function V(E){st===0&&C.length===0&&z(B),E&&C.push(E)}function B(){if(!v){for(v=!0;C.length;){let E=C;C=[];for(let S=0;S<E.length;S++){let f=E[S];try{f.zone.runTask(f,null,null)}catch(_){J.onUnhandledError(_)}}}J.microtaskDrainDone(),v=!1}}let ae={name:"NO ZONE"},Ce="notScheduled",$="scheduling",N="scheduled",X="running",we="canceling",Ie="unknown",_e="microTask",q="macroTask",De="eventTask",ee={},J={symbol:vt,currentZoneFrame:()=>H,onUnhandledError:Qe,microtaskDrainDone:Qe,scheduleMicroTask:V,showUncaughtError:()=>!t[vt("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:Qe,patchMethod:()=>Qe,bindArguments:()=>[],patchThen:()=>Qe,patchMacroTask:()=>Qe,patchEventPrototype:()=>Qe,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>Qe,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>Qe,wrapWithCurrentZone:()=>Qe,filterProperties:()=>[],attachOriginToPatched:()=>Qe,_redefineProperty:()=>Qe,patchCallbacks:()=>Qe,nativeScheduleMicroTask:z},H={parent:null,zone:new t(null,null)},te=null,st=0;function Qe(){}return e("Zone","Zone"),t}function gs(){let o=globalThis,i=o[vt("forceDuplicateZoneCheck")]===!0;if(o.Zone&&(i||typeof o.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return o.Zone??=us(),o.Zone}var In=Object.getOwnPropertyDescriptor,ji=Object.defineProperty,$i=Object.getPrototypeOf,fs=Object.create,hs=Array.prototype.slice,qi="addEventListener",Ui="removeEventListener",Li=vt(qi),Vi=vt(Ui),Vt="true",Rt="false",Dn=vt("");function Bi(o,i){return Zone.current.wrap(o,i)}function Hi(o,i,e,t,n){return Zone.current.scheduleMacroTask(o,i,e,t,n)}var Re=vt,ni=typeof window<"u",gn=ni?window:void 0,rt=ni&&gn||globalThis,_s="removeAttribute";function Gi(o,i){for(let e=o.length-1;e>=0;e--)typeof o[e]=="function"&&(o[e]=Bi(o[e],i+"_"+e));return o}function Cs(o,i){let e=o.constructor.name;for(let t=0;t<i.length;t++){let n=i[t],s=o[n];if(s){let d=In(o,n);if(!Vr(d))continue;o[n]=(p=>{let g=function(){return p.apply(this,Gi(arguments,e+"."+n))};return jt(g,p),g})(s)}}}function Vr(o){return o?o.writable===!1?!1:!(typeof o.get=="function"&&typeof o.set>"u"):!0}var Rr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ii=!("nw"in rt)&&typeof rt.process<"u"&&rt.process.toString()==="[object process]",Qi=!ii&&!Rr&&!!(ni&&gn.HTMLElement),zr=typeof rt.process<"u"&&rt.process.toString()==="[object process]"&&!Rr&&!!(ni&&gn.HTMLElement),ti={},Ps=Re("enable_beforeunload"),Ir=function(o){if(o=o||rt.event,!o)return;let i=ti[o.type];i||(i=ti[o.type]=Re("ON_PROPERTY"+o.type));let e=this||o.target||rt,t=e[i],n;if(Qi&&e===gn&&o.type==="error"){let s=o;n=t&&t.call(this,s.message,s.filename,s.lineno,s.colno,s.error),n===!0&&o.preventDefault()}else n=t&&t.apply(this,arguments),o.type==="beforeunload"&&rt[Ps]&&typeof n=="string"?o.returnValue=n:n!=null&&!n&&o.preventDefault();return n};function Dr(o,i,e){let t=In(o,i);if(!t&&e&&In(e,i)&&(t={enumerable:!0,configurable:!0}),!t||!t.configurable)return;let n=Re("on"+i+"patched");if(o.hasOwnProperty(n)&&o[n])return;delete t.writable,delete t.value;let s=t.get,d=t.set,p=i.slice(2),g=ti[p];g||(g=ti[p]=Re("ON_PROPERTY"+p)),t.set=function(h){let C=this;if(!C&&o===rt&&(C=rt),!C)return;typeof C[g]=="function"&&C.removeEventListener(p,Ir),d&&d.call(C,null),C[g]=h,typeof h=="function"&&C.addEventListener(p,Ir,!1)},t.get=function(){let h=this;if(!h&&o===rt&&(h=rt),!h)return null;let C=h[g];if(C)return C;if(s){let v=s.call(this);if(v)return t.set.call(this,v),typeof h[_s]=="function"&&h.removeAttribute(i),v}return null},ji(o,i,t),o[n]=!0}function jr(o,i,e){if(i)for(let t=0;t<i.length;t++)Dr(o,"on"+i[t],e);else{let t=[];for(let n in o)n.slice(0,2)=="on"&&t.push(n);for(let n=0;n<t.length;n++)Dr(o,t[n],e)}}var wt=Re("originalInstance");function Tn(o){let i=rt[o];if(!i)return;rt[Re(o)]=i,rt[o]=function(){let n=Gi(arguments,o);switch(n.length){case 0:this[wt]=new i;break;case 1:this[wt]=new i(n[0]);break;case 2:this[wt]=new i(n[0],n[1]);break;case 3:this[wt]=new i(n[0],n[1],n[2]);break;case 4:this[wt]=new i(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},jt(rt[o],i);let e=new i(function(){}),t;for(t in e)o==="XMLHttpRequest"&&t==="responseBlob"||function(n){typeof e[n]=="function"?rt[o].prototype[n]=function(){return this[wt][n].apply(this[wt],arguments)}:ji(rt[o].prototype,n,{set:function(s){typeof s=="function"?(this[wt][n]=Bi(s,o+"."+n),jt(this[wt][n],s)):this[wt][n]=s},get:function(){return this[wt][n]}})}(t);for(t in i)t!=="prototype"&&i.hasOwnProperty(t)&&(rt[o][t]=i[t])}function zt(o,i,e){let t=o;for(;t&&!t.hasOwnProperty(i);)t=$i(t);!t&&o[i]&&(t=o);let n=Re(i),s=null;if(t&&(!(s=t[n])||!t.hasOwnProperty(n))){s=t[n]=t[i];let d=t&&In(t,i);if(Vr(d)){let p=e(s,n,i);t[i]=function(){return p(this,arguments)},jt(t[i],s)}}return s}function bs(o,i,e){let t=null;function n(s){let d=s.data;return d.args[d.cbIdx]=function(){s.invoke.apply(this,arguments)},t.apply(d.target,d.args),s}t=zt(o,i,s=>function(d,p){let g=e(d,p);return g.cbIdx>=0&&typeof p[g.cbIdx]=="function"?Hi(g.name,p[g.cbIdx],g,n):s.apply(d,p)})}function jt(o,i){o[Re("OriginalDelegate")]=i}var Ar=!1,Ri=!1;function ys(){try{let o=gn.navigator.userAgent;if(o.indexOf("MSIE ")!==-1||o.indexOf("Trident/")!==-1)return!0}catch{}return!1}function vs(){if(Ar)return Ri;Ar=!0;try{let o=gn.navigator.userAgent;(o.indexOf("MSIE ")!==-1||o.indexOf("Trident/")!==-1||o.indexOf("Edge/")!==-1)&&(Ri=!0)}catch{}return Ri}function Fr(o){return typeof o=="function"}function Nr(o){return typeof o=="number"}var un=!1;if(typeof window<"u")try{let o=Object.defineProperty({},"passive",{get:function(){un=!0}});window.addEventListener("test",o,o),window.removeEventListener("test",o,o)}catch{un=!1}var Ms={useG:!0},Mt={},$r={},qr=new RegExp("^"+Dn+"(\\w+)(true|false)$"),Ur=Re("propagationStopped");function Br(o,i){let e=(i?i(o):o)+Rt,t=(i?i(o):o)+Vt,n=Dn+e,s=Dn+t;Mt[o]={},Mt[o][Rt]=n,Mt[o][Vt]=s}function Os(o,i,e,t){let n=t&&t.add||qi,s=t&&t.rm||Ui,d=t&&t.listeners||"eventListeners",p=t&&t.rmAll||"removeAllListeners",g=Re(n),h="."+n+":",C="prependListener",v="."+C+":",R=function($,N,X){if($.isRemoved)return;let we=$.callback;typeof we=="object"&&we.handleEvent&&($.callback=q=>we.handleEvent(q),$.originalDelegate=we);let Ie;try{$.invoke($,N,[X])}catch(q){Ie=q}let _e=$.options;if(_e&&typeof _e=="object"&&_e.once){let q=$.originalDelegate?$.originalDelegate:$.callback;N[s].call(N,X.type,q,_e)}return Ie};function z($,N,X){if(N=N||o.event,!N)return;let we=$||N.target||o,Ie=we[Mt[N.type][X?Vt:Rt]];if(Ie){let _e=[];if(Ie.length===1){let q=R(Ie[0],we,N);q&&_e.push(q)}else{let q=Ie.slice();for(let De=0;De<q.length&&!(N&&N[Ur]===!0);De++){let ee=R(q[De],we,N);ee&&_e.push(ee)}}if(_e.length===1)throw _e[0];for(let q=0;q<_e.length;q++){let De=_e[q];i.nativeScheduleMicroTask(()=>{throw De})}}}let V=function($){return z(this,$,!1)},B=function($){return z(this,$,!0)};function ae($,N){if(!$)return!1;let X=!0;N&&N.useG!==void 0&&(X=N.useG);let we=N&&N.vh,Ie=!0;N&&N.chkDup!==void 0&&(Ie=N.chkDup);let _e=!1;N&&N.rt!==void 0&&(_e=N.rt);let q=$;for(;q&&!q.hasOwnProperty(n);)q=$i(q);if(!q&&$[n]&&(q=$),!q||q[g])return!1;let De=N&&N.eventNameToString,ee={},J=q[g]=q[n],H=q[Re(s)]=q[s],te=q[Re(d)]=q[d],st=q[Re(p)]=q[p],Qe;N&&N.prepend&&(Qe=q[Re(N.prepend)]=q[N.prepend]);function E(M,F){return!un&&typeof M=="object"&&M?!!M.capture:!un||!F?M:typeof M=="boolean"?{capture:M,passive:!0}:M?typeof M=="object"&&M.passive!==!1?Xe(le({},M),{passive:!0}):M:{passive:!0}}let S=function(M){if(!ee.isExisting)return J.call(ee.target,ee.eventName,ee.capture?B:V,ee.options)},f=function(M){if(!M.isRemoved){let F=Mt[M.eventName],Z;F&&(Z=F[M.capture?Vt:Rt]);let se=Z&&M.target[Z];if(se){for(let K=0;K<se.length;K++)if(se[K]===M){se.splice(K,1),M.isRemoved=!0,M.removeAbortListener&&(M.removeAbortListener(),M.removeAbortListener=null),se.length===0&&(M.allRemoved=!0,M.target[Z]=null);break}}}if(M.allRemoved)return H.call(M.target,M.eventName,M.capture?B:V,M.options)},_=function(M){return J.call(ee.target,ee.eventName,M.invoke,ee.options)},j=function(M){return Qe.call(ee.target,ee.eventName,M.invoke,ee.options)},G=function(M){return H.call(M.target,M.eventName,M.invoke,M.options)},Se=X?S:_,fe=X?f:G,Ae=function(M,F){let Z=typeof F;return Z==="function"&&M.callback===F||Z==="object"&&M.originalDelegate===F},ht=N&&N.diff?N.diff:Ae,St=Zone[Re("UNPATCHED_EVENTS")],je=o[Re("PASSIVE_EVENTS")];function A(M){if(typeof M=="object"&&M!==null){let F=le({},M);return M.signal&&(F.signal=M.signal),F}return M}let D=function(M,F,Z,se,K=!1,be=!1){return function(){let Me=this||o,Oe=arguments[0];N&&N.transferEventName&&(Oe=N.transferEventName(Oe));let Ue=arguments[1];if(!Ue)return M.apply(this,arguments);if(ii&&Oe==="uncaughtException")return M.apply(this,arguments);let Be=!1;if(typeof Ue!="function"){if(!Ue.handleEvent)return M.apply(this,arguments);Be=!0}if(we&&!we(M,Ue,Me,arguments))return;let Ut=un&&!!je&&je.indexOf(Oe)!==-1,Tt=A(E(arguments[2],Ut)),an=Tt?.signal;if(an?.aborted)return;if(St){for(let It=0;It<St.length;It++)if(Oe===St[It])return Ut?M.call(Me,Oe,Ue,Tt):M.apply(this,arguments)}let Ei=Tt?typeof Tt=="boolean"?!0:Tt.capture:!1,Ro=Tt&&typeof Tt=="object"?Tt.once:!1,ps=Zone.current,wi=Mt[Oe];wi||(Br(Oe,De),wi=Mt[Oe]);let zo=wi[Ei?Vt:Rt],sn=Me[zo],jo=!1;if(sn){if(jo=!0,Ie){for(let It=0;It<sn.length;It++)if(ht(sn[It],Ue))return}}else sn=Me[zo]=[];let zn,$o=Me.constructor.name,qo=$r[$o];qo&&(zn=qo[Oe]),zn||(zn=$o+F+(De?De(Oe):Oe)),ee.options=Tt,Ro&&(ee.options.once=!1),ee.target=Me,ee.capture=Ei,ee.eventName=Oe,ee.isExisting=jo;let yn=X?Ms:void 0;yn&&(yn.taskData=ee),an&&(ee.options.signal=void 0);let Et=ps.scheduleEventTask(zn,Ue,yn,Z,se);if(an){ee.options.signal=an;let It=()=>Et.zone.cancelTask(Et);M.call(an,"abort",It,{once:!0}),Et.removeAbortListener=()=>an.removeEventListener("abort",It)}if(ee.target=null,yn&&(yn.taskData=null),Ro&&(ee.options.once=!0),!un&&typeof Et.options=="boolean"||(Et.options=Tt),Et.target=Me,Et.capture=Ei,Et.eventName=Oe,Be&&(Et.originalDelegate=Ue),be?sn.unshift(Et):sn.push(Et),K)return Me}};return q[n]=D(J,h,Se,fe,_e),Qe&&(q[C]=D(Qe,v,j,fe,_e,!0)),q[s]=function(){let M=this||o,F=arguments[0];N&&N.transferEventName&&(F=N.transferEventName(F));let Z=arguments[2],se=Z?typeof Z=="boolean"?!0:Z.capture:!1,K=arguments[1];if(!K)return H.apply(this,arguments);if(we&&!we(H,K,M,arguments))return;let be=Mt[F],Me;be&&(Me=be[se?Vt:Rt]);let Oe=Me&&M[Me];if(Oe)for(let Ue=0;Ue<Oe.length;Ue++){let Be=Oe[Ue];if(ht(Be,K)){if(Oe.splice(Ue,1),Be.isRemoved=!0,Oe.length===0&&(Be.allRemoved=!0,M[Me]=null,!se&&typeof F=="string")){let Ut=Dn+"ON_PROPERTY"+F;M[Ut]=null}return Be.zone.cancelTask(Be),_e?M:void 0}}return H.apply(this,arguments)},q[d]=function(){let M=this||o,F=arguments[0];N&&N.transferEventName&&(F=N.transferEventName(F));let Z=[],se=Hr(M,De?De(F):F);for(let K=0;K<se.length;K++){let be=se[K],Me=be.originalDelegate?be.originalDelegate:be.callback;Z.push(Me)}return Z},q[p]=function(){let M=this||o,F=arguments[0];if(F){N&&N.transferEventName&&(F=N.transferEventName(F));let Z=Mt[F];if(Z){let se=Z[Rt],K=Z[Vt],be=M[se],Me=M[K];if(be){let Oe=be.slice();for(let Ue=0;Ue<Oe.length;Ue++){let Be=Oe[Ue],Ut=Be.originalDelegate?Be.originalDelegate:Be.callback;this[s].call(this,F,Ut,Be.options)}}if(Me){let Oe=Me.slice();for(let Ue=0;Ue<Oe.length;Ue++){let Be=Oe[Ue],Ut=Be.originalDelegate?Be.originalDelegate:Be.callback;this[s].call(this,F,Ut,Be.options)}}}}else{let Z=Object.keys(M);for(let se=0;se<Z.length;se++){let K=Z[se],be=qr.exec(K),Me=be&&be[1];Me&&Me!=="removeListener"&&this[p].call(this,Me)}this[p].call(this,"removeListener")}if(_e)return this},jt(q[n],J),jt(q[s],H),st&&jt(q[p],st),te&&jt(q[d],te),!0}let Ce=[];for(let $=0;$<e.length;$++)Ce[$]=ae(e[$],t);return Ce}function Hr(o,i){if(!i){let s=[];for(let d in o){let p=qr.exec(d),g=p&&p[1];if(g&&(!i||g===i)){let h=o[d];if(h)for(let C=0;C<h.length;C++)s.push(h[C])}}return s}let e=Mt[i];e||(Br(i),e=Mt[i]);let t=o[e[Rt]],n=o[e[Vt]];return t?n?t.concat(n):t.slice():n?n.slice():[]}function xs(o,i){let e=o.Event;e&&e.prototype&&i.patchMethod(e.prototype,"stopImmediatePropagation",t=>function(n,s){n[Ur]=!0,t&&t.apply(n,s)})}function Ss(o,i){i.patchMethod(o,"queueMicrotask",e=>function(t,n){Zone.current.scheduleMicroTask("queueMicrotask",n[0])})}var ei=Re("zoneTask");function pn(o,i,e,t){let n=null,s=null;i+=t,e+=t;let d={};function p(h){let C=h.data;C.args[0]=function(){return h.invoke.apply(this,arguments)};let v=n.apply(o,C.args);return Nr(v)?C.handleId=v:(C.handle=v,C.isRefreshable=Fr(v.refresh)),h}function g(h){let{handle:C,handleId:v}=h.data;return s.call(o,C??v)}n=zt(o,i,h=>function(C,v){if(Fr(v[0])){let R={isRefreshable:!1,isPeriodic:t==="Interval",delay:t==="Timeout"||t==="Interval"?v[1]||0:void 0,args:v},z=v[0];v[0]=function(){try{return z.apply(this,arguments)}finally{let{handle:X,handleId:we,isPeriodic:Ie,isRefreshable:_e}=R;!Ie&&!_e&&(we?delete d[we]:X&&(X[ei]=null))}};let V=Hi(i,v[0],R,p,g);if(!V)return V;let{handleId:B,handle:ae,isRefreshable:Ce,isPeriodic:$}=V.data;if(B)d[B]=V;else if(ae&&(ae[ei]=V,Ce&&!$)){let N=ae.refresh;ae.refresh=function(){let{zone:X,state:we}=V;return we==="notScheduled"?(V._state="scheduled",X._updateTaskCount(V,1)):we==="running"&&(V._state="scheduling"),N.call(this)}}return ae??B??V}else return h.apply(o,v)}),s=zt(o,e,h=>function(C,v){let R=v[0],z;Nr(R)?(z=d[R],delete d[R]):(z=R?.[ei],z?R[ei]=null:z=R),z?.type?z.cancelFn&&z.zone.cancelTask(z):h.apply(o,v)})}function Es(o,i){let{isBrowser:e,isMix:t}=i.getGlobalObjects();if(!e&&!t||!o.customElements||!("customElements"in o))return;let n=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];i.patchCallbacks(i,o.customElements,"customElements","define",n)}function ws(o,i){if(Zone[i.symbol("patchEventTarget")])return;let{eventNames:e,zoneSymbolEventNames:t,TRUE_STR:n,FALSE_STR:s,ZONE_SYMBOL_PREFIX:d}=i.getGlobalObjects();for(let g=0;g<e.length;g++){let h=e[g],C=h+s,v=h+n,R=d+C,z=d+v;t[h]={},t[h][s]=R,t[h][n]=z}let p=o.EventTarget;if(!(!p||!p.prototype))return i.patchEventTarget(o,i,[p&&p.prototype]),!0}function ks(o,i){i.patchEventPrototype(o,i)}function Gr(o,i,e){if(!e||e.length===0)return i;let t=e.filter(s=>s.target===o);if(!t||t.length===0)return i;let n=t[0].ignoreProperties;return i.filter(s=>n.indexOf(s)===-1)}function Lr(o,i,e,t){if(!o)return;let n=Gr(o,i,e);jr(o,n,t)}function zi(o){return Object.getOwnPropertyNames(o).filter(i=>i.startsWith("on")&&i.length>2).map(i=>i.substring(2))}function Ts(o,i){if(ii&&!zr||Zone[o.symbol("patchEvents")])return;let e=i.__Zone_ignore_on_properties,t=[];if(Qi){let n=window;t=t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let s=ys()?[{target:n,ignoreProperties:["error"]}]:[];Lr(n,zi(n),e&&e.concat(s),$i(n))}t=t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let n=0;n<t.length;n++){let s=i[t[n]];s&&s.prototype&&Lr(s.prototype,zi(s.prototype),e)}}function Is(o){o.__load_patch("legacy",i=>{let e=i[o.__symbol__("legacyPatch")];e&&e()}),o.__load_patch("timers",i=>{let e="set",t="clear";pn(i,e,t,"Timeout"),pn(i,e,t,"Interval"),pn(i,e,t,"Immediate")}),o.__load_patch("requestAnimationFrame",i=>{pn(i,"request","cancel","AnimationFrame"),pn(i,"mozRequest","mozCancel","AnimationFrame"),pn(i,"webkitRequest","webkitCancel","AnimationFrame")}),o.__load_patch("blocking",(i,e)=>{let t=["alert","prompt","confirm"];for(let n=0;n<t.length;n++){let s=t[n];zt(i,s,(d,p,g)=>function(h,C){return e.current.run(d,i,C,g)})}}),o.__load_patch("EventTarget",(i,e,t)=>{ks(i,t),ws(i,t);let n=i.XMLHttpRequestEventTarget;n&&n.prototype&&t.patchEventTarget(i,t,[n.prototype])}),o.__load_patch("MutationObserver",(i,e,t)=>{Tn("MutationObserver"),Tn("WebKitMutationObserver")}),o.__load_patch("IntersectionObserver",(i,e,t)=>{Tn("IntersectionObserver")}),o.__load_patch("FileReader",(i,e,t)=>{Tn("FileReader")}),o.__load_patch("on_property",(i,e,t)=>{Ts(t,i)}),o.__load_patch("customElements",(i,e,t)=>{Es(i,t)}),o.__load_patch("XHR",(i,e)=>{h(i);let t=Re("xhrTask"),n=Re("xhrSync"),s=Re("xhrListener"),d=Re("xhrScheduled"),p=Re("xhrURL"),g=Re("xhrErrorBeforeScheduled");function h(C){let v=C.XMLHttpRequest;if(!v)return;let R=v.prototype;function z(J){return J[t]}let V=R[Li],B=R[Vi];if(!V){let J=C.XMLHttpRequestEventTarget;if(J){let H=J.prototype;V=H[Li],B=H[Vi]}}let ae="readystatechange",Ce="scheduled";function $(J){let H=J.data,te=H.target;te[d]=!1,te[g]=!1;let st=te[s];V||(V=te[Li],B=te[Vi]),st&&B.call(te,ae,st);let Qe=te[s]=()=>{if(te.readyState===te.DONE)if(!H.aborted&&te[d]&&J.state===Ce){let S=te[e.__symbol__("loadfalse")];if(te.status!==0&&S&&S.length>0){let f=J.invoke;J.invoke=function(){let _=te[e.__symbol__("loadfalse")];for(let j=0;j<_.length;j++)_[j]===J&&_.splice(j,1);!H.aborted&&J.state===Ce&&f.call(J)},S.push(J)}else J.invoke()}else!H.aborted&&te[d]===!1&&(te[g]=!0)};return V.call(te,ae,Qe),te[t]||(te[t]=J),De.apply(te,H.args),te[d]=!0,J}function N(){}function X(J){let H=J.data;return H.aborted=!0,ee.apply(H.target,H.args)}let we=zt(R,"open",()=>function(J,H){return J[n]=H[2]==!1,J[p]=H[1],we.apply(J,H)}),Ie="XMLHttpRequest.send",_e=Re("fetchTaskAborting"),q=Re("fetchTaskScheduling"),De=zt(R,"send",()=>function(J,H){if(e.current[q]===!0||J[n])return De.apply(J,H);{let te={target:J,url:J[p],isPeriodic:!1,args:H,aborted:!1},st=Hi(Ie,N,te,$,X);J&&J[g]===!0&&!te.aborted&&st.state===Ce&&st.invoke()}}),ee=zt(R,"abort",()=>function(J,H){let te=z(J);if(te&&typeof te.type=="string"){if(te.cancelFn==null||te.data&&te.data.aborted)return;te.zone.cancelTask(te)}else if(e.current[_e]===!0)return ee.apply(J,H)})}}),o.__load_patch("geolocation",i=>{i.navigator&&i.navigator.geolocation&&Cs(i.navigator.geolocation,["getCurrentPosition","watchPosition"])}),o.__load_patch("PromiseRejectionEvent",(i,e)=>{function t(n){return function(s){Hr(i,n).forEach(p=>{let g=i.PromiseRejectionEvent;if(g){let h=new g(n,{promise:s.promise,reason:s.rejection});p.invoke(h)}})}}i.PromiseRejectionEvent&&(e[Re("unhandledPromiseRejectionHandler")]=t("unhandledrejection"),e[Re("rejectionHandledHandler")]=t("rejectionhandled"))}),o.__load_patch("queueMicrotask",(i,e,t)=>{Ss(i,t)})}function Ds(o){o.__load_patch("ZoneAwarePromise",(i,e,t)=>{let n=Object.getOwnPropertyDescriptor,s=Object.defineProperty;function d(A){if(A&&A.toString===Object.prototype.toString){let D=A.constructor&&A.constructor.name;return(D||"")+": "+JSON.stringify(A)}return A?A.toString():Object.prototype.toString.call(A)}let p=t.symbol,g=[],h=i[p("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,C=p("Promise"),v=p("then"),R="__creationTrace__";t.onUnhandledError=A=>{if(t.showUncaughtError()){let D=A&&A.rejection;D?console.error("Unhandled Promise rejection:",D instanceof Error?D.message:D,"; Zone:",A.zone.name,"; Task:",A.task&&A.task.source,"; Value:",D,D instanceof Error?D.stack:void 0):console.error(A)}},t.microtaskDrainDone=()=>{for(;g.length;){let A=g.shift();try{A.zone.runGuarded(()=>{throw A.throwOriginal?A.rejection:A})}catch(D){V(D)}}};let z=p("unhandledPromiseRejectionHandler");function V(A){t.onUnhandledError(A);try{let D=e[z];typeof D=="function"&&D.call(this,A)}catch{}}function B(A){return A&&A.then}function ae(A){return A}function Ce(A){return fe.reject(A)}let $=p("state"),N=p("value"),X=p("finally"),we=p("parentPromiseValue"),Ie=p("parentPromiseState"),_e="Promise.then",q=null,De=!0,ee=!1,J=0;function H(A,D){return M=>{try{E(A,D,M)}catch(F){E(A,!1,F)}}}let te=function(){let A=!1;return function(M){return function(){A||(A=!0,M.apply(null,arguments))}}},st="Promise resolved with itself",Qe=p("currentTaskTrace");function E(A,D,M){let F=te();if(A===M)throw new TypeError(st);if(A[$]===q){let Z=null;try{(typeof M=="object"||typeof M=="function")&&(Z=M&&M.then)}catch(se){return F(()=>{E(A,!1,se)})(),A}if(D!==ee&&M instanceof fe&&M.hasOwnProperty($)&&M.hasOwnProperty(N)&&M[$]!==q)f(M),E(A,M[$],M[N]);else if(D!==ee&&typeof Z=="function")try{Z.call(M,F(H(A,D)),F(H(A,!1)))}catch(se){F(()=>{E(A,!1,se)})()}else{A[$]=D;let se=A[N];if(A[N]=M,A[X]===X&&D===De&&(A[$]=A[Ie],A[N]=A[we]),D===ee&&M instanceof Error){let K=e.currentTask&&e.currentTask.data&&e.currentTask.data[R];K&&s(M,Qe,{configurable:!0,enumerable:!1,writable:!0,value:K})}for(let K=0;K<se.length;)_(A,se[K++],se[K++],se[K++],se[K++]);if(se.length==0&&D==ee){A[$]=J;let K=M;try{throw new Error("Uncaught (in promise): "+d(M)+(M&&M.stack?`
`+M.stack:""))}catch(be){K=be}h&&(K.throwOriginal=!0),K.rejection=M,K.promise=A,K.zone=e.current,K.task=e.currentTask,g.push(K),t.scheduleMicroTask()}}}return A}let S=p("rejectionHandledHandler");function f(A){if(A[$]===J){try{let D=e[S];D&&typeof D=="function"&&D.call(this,{rejection:A[N],promise:A})}catch{}A[$]=ee;for(let D=0;D<g.length;D++)A===g[D].promise&&g.splice(D,1)}}function _(A,D,M,F,Z){f(A);let se=A[$],K=se?typeof F=="function"?F:ae:typeof Z=="function"?Z:Ce;D.scheduleMicroTask(_e,()=>{try{let be=A[N],Me=!!M&&X===M[X];Me&&(M[we]=be,M[Ie]=se);let Oe=D.run(K,void 0,Me&&K!==Ce&&K!==ae?[]:[be]);E(M,!0,Oe)}catch(be){E(M,!1,be)}},M)}let j="function ZoneAwarePromise() { [native code] }",G=function(){},Se=i.AggregateError;class fe{static toString(){return j}static resolve(D){return D instanceof fe?D:E(new this(null),De,D)}static reject(D){return E(new this(null),ee,D)}static withResolvers(){let D={};return D.promise=new fe((M,F)=>{D.resolve=M,D.reject=F}),D}static any(D){if(!D||typeof D[Symbol.iterator]!="function")return Promise.reject(new Se([],"All promises were rejected"));let M=[],F=0;try{for(let K of D)F++,M.push(fe.resolve(K))}catch{return Promise.reject(new Se([],"All promises were rejected"))}if(F===0)return Promise.reject(new Se([],"All promises were rejected"));let Z=!1,se=[];return new fe((K,be)=>{for(let Me=0;Me<M.length;Me++)M[Me].then(Oe=>{Z||(Z=!0,K(Oe))},Oe=>{se.push(Oe),F--,F===0&&(Z=!0,be(new Se(se,"All promises were rejected")))})})}static race(D){let M,F,Z=new this((be,Me)=>{M=be,F=Me});function se(be){M(be)}function K(be){F(be)}for(let be of D)B(be)||(be=this.resolve(be)),be.then(se,K);return Z}static all(D){return fe.allWithCallback(D)}static allSettled(D){return(this&&this.prototype instanceof fe?this:fe).allWithCallback(D,{thenCallback:F=>({status:"fulfilled",value:F}),errorCallback:F=>({status:"rejected",reason:F})})}static allWithCallback(D,M){let F,Z,se=new this((Oe,Ue)=>{F=Oe,Z=Ue}),K=2,be=0,Me=[];for(let Oe of D){B(Oe)||(Oe=this.resolve(Oe));let Ue=be;try{Oe.then(Be=>{Me[Ue]=M?M.thenCallback(Be):Be,K--,K===0&&F(Me)},Be=>{M?(Me[Ue]=M.errorCallback(Be),K--,K===0&&F(Me)):Z(Be)})}catch(Be){Z(Be)}K++,be++}return K-=2,K===0&&F(Me),se}constructor(D){let M=this;if(!(M instanceof fe))throw new Error("Must be an instanceof Promise.");M[$]=q,M[N]=[];try{let F=te();D&&D(F(H(M,De)),F(H(M,ee)))}catch(F){E(M,!1,F)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return fe}then(D,M){let F=this.constructor?.[Symbol.species];(!F||typeof F!="function")&&(F=this.constructor||fe);let Z=new F(G),se=e.current;return this[$]==q?this[N].push(se,Z,D,M):_(this,se,Z,D,M),Z}catch(D){return this.then(null,D)}finally(D){let M=this.constructor?.[Symbol.species];(!M||typeof M!="function")&&(M=fe);let F=new M(G);F[X]=X;let Z=e.current;return this[$]==q?this[N].push(Z,F,D,D):_(this,Z,F,D,D),F}}fe.resolve=fe.resolve,fe.reject=fe.reject,fe.race=fe.race,fe.all=fe.all;let Ae=i[C]=i.Promise;i.Promise=fe;let ht=p("thenPatched");function St(A){let D=A.prototype,M=n(D,"then");if(M&&(M.writable===!1||!M.configurable))return;let F=D.then;D[v]=F,A.prototype.then=function(Z,se){return new fe((be,Me)=>{F.call(this,be,Me)}).then(Z,se)},A[ht]=!0}t.patchThen=St;function je(A){return function(D,M){let F=A.apply(D,M);if(F instanceof fe)return F;let Z=F.constructor;return Z[ht]||St(Z),F}}return Ae&&(St(Ae),zt(i,"fetch",A=>je(A))),Promise[e.__symbol__("uncaughtPromiseErrors")]=g,fe})}function As(o){o.__load_patch("toString",i=>{let e=Function.prototype.toString,t=Re("OriginalDelegate"),n=Re("Promise"),s=Re("Error"),d=function(){if(typeof this=="function"){let C=this[t];if(C)return typeof C=="function"?e.call(C):Object.prototype.toString.call(C);if(this===Promise){let v=i[n];if(v)return e.call(v)}if(this===Error){let v=i[s];if(v)return e.call(v)}}return e.call(this)};d[t]=e,Function.prototype.toString=d;let p=Object.prototype.toString,g="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?g:p.call(this)}})}function Fs(o,i,e,t,n){let s=Zone.__symbol__(t);if(i[s])return;let d=i[s]=i[t];i[t]=function(p,g,h){return g&&g.prototype&&n.forEach(function(C){let v=`${e}.${t}::`+C,R=g.prototype;try{if(R.hasOwnProperty(C)){let z=o.ObjectGetOwnPropertyDescriptor(R,C);z&&z.value?(z.value=o.wrapWithCurrentZone(z.value,v),o._redefineProperty(g.prototype,C,z)):R[C]&&(R[C]=o.wrapWithCurrentZone(R[C],v))}else R[C]&&(R[C]=o.wrapWithCurrentZone(R[C],v))}catch{}}),d.call(i,p,g,h)},o.attachOriginToPatched(i[t],d)}function Ns(o){o.__load_patch("util",(i,e,t)=>{let n=zi(i);t.patchOnProperties=jr,t.patchMethod=zt,t.bindArguments=Gi,t.patchMacroTask=bs;let s=e.__symbol__("BLACK_LISTED_EVENTS"),d=e.__symbol__("UNPATCHED_EVENTS");i[d]&&(i[s]=i[d]),i[s]&&(e[s]=e[d]=i[s]),t.patchEventPrototype=xs,t.patchEventTarget=Os,t.isIEOrEdge=vs,t.ObjectDefineProperty=ji,t.ObjectGetOwnPropertyDescriptor=In,t.ObjectCreate=fs,t.ArraySlice=hs,t.patchClass=Tn,t.wrapWithCurrentZone=Bi,t.filterProperties=Gr,t.attachOriginToPatched=jt,t._redefineProperty=Object.defineProperty,t.patchCallbacks=Fs,t.getGlobalObjects=()=>({globalSources:$r,zoneSymbolEventNames:Mt,eventNames:n,isBrowser:Qi,isMix:zr,isNode:ii,TRUE_STR:Vt,FALSE_STR:Rt,ZONE_SYMBOL_PREFIX:Dn,ADD_EVENT_LISTENER_STR:qi,REMOVE_EVENT_LISTENER_STR:Ui})})}function Ls(o){Ds(o),As(o),Ns(o)}var Qr=gs();Ls(Qr);Is(Qr);function Kr(o){return new Te(3e3,!1)}function Vs(){return new Te(3100,!1)}function Rs(){return new Te(3101,!1)}function zs(o){return new Te(3001,!1)}function js(o){return new Te(3003,!1)}function $s(o){return new Te(3004,!1)}function qs(o,i){return new Te(3005,!1)}function Us(){return new Te(3006,!1)}function Bs(){return new Te(3007,!1)}function Hs(o,i){return new Te(3008,!1)}function Gs(o){return new Te(3002,!1)}function Qs(o,i,e,t,n){return new Te(3010,!1)}function Ks(){return new Te(3011,!1)}function Ys(){return new Te(3012,!1)}function Zs(){return new Te(3200,!1)}function Ws(){return new Te(3202,!1)}function Xs(){return new Te(3013,!1)}function Js(o){return new Te(3014,!1)}function ec(o){return new Te(3015,!1)}function tc(o){return new Te(3016,!1)}function nc(o,i){return new Te(3404,!1)}function ic(o){return new Te(3502,!1)}function oc(o){return new Te(3503,!1)}function rc(){return new Te(3300,!1)}function ac(o){return new Te(3504,!1)}function sc(o){return new Te(3301,!1)}function cc(o,i){return new Te(3302,!1)}function lc(o){return new Te(3303,!1)}function dc(o,i){return new Te(3400,!1)}function mc(o){return new Te(3401,!1)}function pc(o){return new Te(3402,!1)}function uc(o,i){return new Te(3505,!1)}function Wt(o){switch(o.length){case 0:return new dn;case 1:return o[0];default:return new Fi(o)}}function ca(o,i,e=new Map,t=new Map){let n=[],s=[],d=-1,p=null;if(i.forEach(g=>{let h=g.get("offset"),C=h==d,v=C&&p||new Map;g.forEach((R,z)=>{let V=z,B=R;if(z!=="offset")switch(V=o.normalizePropertyName(V,n),B){case Zn:B=e.get(z);break;case Dt:B=t.get(z);break;default:B=o.normalizeStyleValue(z,V,B,n);break}v.set(V,B)}),C||s.push(v),p=v,d=h}),n.length)throw ic(n);return s}function _o(o,i,e,t){switch(i){case"start":o.onStart(()=>t(e&&Ki(e,"start",o)));break;case"done":o.onDone(()=>t(e&&Ki(e,"done",o)));break;case"destroy":o.onDestroy(()=>t(e&&Ki(e,"destroy",o)));break}}function Ki(o,i,e){let t=e.totalTime,n=!!e.disabled,s=Co(o.element,o.triggerName,o.fromState,o.toState,i||o.phaseName,t??o.totalTime,n),d=o._data;return d!=null&&(s._data=d),s}function Co(o,i,e,t,n="",s=0,d){return{element:o,triggerName:i,fromState:e,toState:t,phaseName:n,totalTime:s,disabled:!!d}}function ft(o,i,e){let t=o.get(i);return t||o.set(i,t=e),t}function Yr(o){let i=o.indexOf(":"),e=o.substring(1,i),t=o.slice(i+1);return[e,t]}var gc=typeof document>"u"?null:document.documentElement;function Po(o){let i=o.parentNode||o.host||null;return i===gc?null:i}function fc(o){return o.substring(1,6)=="ebkit"}var en=null,Zr=!1;function hc(o){en||(en=_c()||{},Zr=en.style?"WebkitAppearance"in en.style:!1);let i=!0;return en.style&&!fc(o)&&(i=o in en.style,!i&&Zr&&(i="Webkit"+o.charAt(0).toUpperCase()+o.slice(1)in en.style)),i}function _c(){return typeof document<"u"?document.body:null}function la(o,i){for(;i;){if(i===o)return!0;i=Po(i)}return!1}function da(o,i,e){if(e)return Array.from(o.querySelectorAll(i));let t=o.querySelector(i);return t?[t]:[]}var bo=(()=>{class o{validateStyleProperty(e){return hc(e)}matchesElement(e,t){return!1}containsElement(e,t){return la(e,t)}getParentElement(e){return Po(e)}query(e,t,n){return da(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,s,d,p=[],g){return new dn(n,s)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac})}}return o})(),on=class{static{this.NOOP=new bo}},rn=class{};var Cc=1e3,ma="{{",Pc="}}",pa="ng-enter",eo="ng-leave",oi="ng-trigger",li=".ng-trigger",Wr="ng-animating",to=".ng-animating";function $t(o){if(typeof o=="number")return o;let i=o.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:no(parseFloat(i[1]),i[2])}function no(o,i){switch(i){case"s":return o*Cc;default:return o}}function di(o,i,e){return o.hasOwnProperty("duration")?o:bc(o,i,e)}function bc(o,i,e){let t=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,n,s=0,d="";if(typeof o=="string"){let p=o.match(t);if(p===null)return i.push(Kr(o)),{duration:0,delay:0,easing:""};n=no(parseFloat(p[1]),p[2]);let g=p[3];g!=null&&(s=no(parseFloat(g),p[4]));let h=p[5];h&&(d=h)}else n=o;if(!e){let p=!1,g=i.length;n<0&&(i.push(Vs()),p=!0),s<0&&(i.push(Rs()),p=!0),p&&i.splice(g,0,Kr(o))}return{duration:n,delay:s,easing:d}}function yc(o){return o.length?o[0]instanceof Map?o:o.map(i=>new Map(Object.entries(i))):[]}function Lt(o,i,e){i.forEach((t,n)=>{let s=yo(n);e&&!e.has(n)&&e.set(n,o.style[s]),o.style[s]=t})}function nn(o,i){i.forEach((e,t)=>{let n=yo(t);o.style[n]=""})}function An(o){return Array.isArray(o)?o.length==1?o[0]:hr(o):o}function vc(o,i,e){let t=i.params||{},n=ua(o);n.length&&n.forEach(s=>{t.hasOwnProperty(s)||e.push(zs(s))})}var io=new RegExp(`${ma}\\s*(.+?)\\s*${Pc}`,"g");function ua(o){let i=[];if(typeof o=="string"){let e;for(;e=io.exec(o);)i.push(e[1]);io.lastIndex=0}return i}function Nn(o,i,e){let t=`${o}`,n=t.replace(io,(s,d)=>{let p=i[d];return p==null&&(e.push(js(d)),p=""),p.toString()});return n==t?o:n}var Mc=/-+([a-z0-9])/g;function yo(o){return o.replace(Mc,(...i)=>i[1].toUpperCase())}function Oc(o,i){return o===0||i===0}function xc(o,i,e){if(e.size&&i.length){let t=i[0],n=[];if(e.forEach((s,d)=>{t.has(d)||n.push(d),t.set(d,s)}),n.length)for(let s=1;s<i.length;s++){let d=i[s];n.forEach(p=>d.set(p,vo(o,p)))}}return i}function gt(o,i,e){switch(i.type){case ke.Trigger:return o.visitTrigger(i,e);case ke.State:return o.visitState(i,e);case ke.Transition:return o.visitTransition(i,e);case ke.Sequence:return o.visitSequence(i,e);case ke.Group:return o.visitGroup(i,e);case ke.Animate:return o.visitAnimate(i,e);case ke.Keyframes:return o.visitKeyframes(i,e);case ke.Style:return o.visitStyle(i,e);case ke.Reference:return o.visitReference(i,e);case ke.AnimateChild:return o.visitAnimateChild(i,e);case ke.AnimateRef:return o.visitAnimateRef(i,e);case ke.Query:return o.visitQuery(i,e);case ke.Stagger:return o.visitStagger(i,e);default:throw $s(i.type)}}function vo(o,i){return window.getComputedStyle(o)[i]}var Sc=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),mi=class extends rn{normalizePropertyName(i,e){return yo(i)}normalizeStyleValue(i,e,t,n){let s="",d=t.toString().trim();if(Sc.has(e)&&t!==0&&t!=="0")if(typeof t=="number")s="px";else{let p=t.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&p[1].length==0&&n.push(qs(i,t))}return d+s}};var pi="*";function Ec(o,i){let e=[];return typeof o=="string"?o.split(/\s*,\s*/).forEach(t=>wc(t,e,i)):e.push(o),e}function wc(o,i,e){if(o[0]==":"){let g=kc(o,e);if(typeof g=="function"){i.push(g);return}o=g}let t=o.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return e.push(ec(o)),i;let n=t[1],s=t[2],d=t[3];i.push(Xr(n,d));let p=n==pi&&d==pi;s[0]=="<"&&!p&&i.push(Xr(d,n))}function kc(o,i){switch(o){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return i.push(tc(o)),"* => *"}}var ri=new Set(["true","1"]),ai=new Set(["false","0"]);function Xr(o,i){let e=ri.has(o)||ai.has(o),t=ri.has(i)||ai.has(i);return(n,s)=>{let d=o==pi||o==n,p=i==pi||i==s;return!d&&e&&typeof n=="boolean"&&(d=n?ri.has(o):ai.has(o)),!p&&t&&typeof s=="boolean"&&(p=s?ri.has(i):ai.has(i)),d&&p}}var ga=":self",Tc=new RegExp(`s*${ga}s*,?`,"g");function fa(o,i,e,t){return new oo(o).build(i,e,t)}var Jr="",oo=class{constructor(i){this._driver=i}build(i,e,t){let n=new ro(e);return this._resetContextStyleTimingState(n),gt(this,An(i),n)}_resetContextStyleTimingState(i){i.currentQuerySelector=Jr,i.collectedStyles=new Map,i.collectedStyles.set(Jr,new Map),i.currentTime=0}visitTrigger(i,e){let t=e.queryCount=0,n=e.depCount=0,s=[],d=[];return i.name.charAt(0)=="@"&&e.errors.push(Us()),i.definitions.forEach(p=>{if(this._resetContextStyleTimingState(e),p.type==ke.State){let g=p,h=g.name;h.toString().split(/\s*,\s*/).forEach(C=>{g.name=C,s.push(this.visitState(g,e))}),g.name=h}else if(p.type==ke.Transition){let g=this.visitTransition(p,e);t+=g.queryCount,n+=g.depCount,d.push(g)}else e.errors.push(Bs())}),{type:ke.Trigger,name:i.name,states:s,transitions:d,queryCount:t,depCount:n,options:null}}visitState(i,e){let t=this.visitStyle(i.styles,e),n=i.options&&i.options.params||null;if(t.containsDynamicStyles){let s=new Set,d=n||{};t.styles.forEach(p=>{p instanceof Map&&p.forEach(g=>{ua(g).forEach(h=>{d.hasOwnProperty(h)||s.add(h)})})}),s.size&&e.errors.push(Hs(i.name,[...s.values()]))}return{type:ke.State,name:i.name,style:t,options:n?{params:n}:null}}visitTransition(i,e){e.queryCount=0,e.depCount=0;let t=gt(this,An(i.animation),e),n=Ec(i.expr,e.errors);return{type:ke.Transition,matchers:n,animation:t,queryCount:e.queryCount,depCount:e.depCount,options:tn(i.options)}}visitSequence(i,e){return{type:ke.Sequence,steps:i.steps.map(t=>gt(this,t,e)),options:tn(i.options)}}visitGroup(i,e){let t=e.currentTime,n=0,s=i.steps.map(d=>{e.currentTime=t;let p=gt(this,d,e);return n=Math.max(n,e.currentTime),p});return e.currentTime=n,{type:ke.Group,steps:s,options:tn(i.options)}}visitAnimate(i,e){let t=Fc(i.timings,e.errors);e.currentAnimateTimings=t;let n,s=i.styles?i.styles:ot({});if(s.type==ke.Keyframes)n=this.visitKeyframes(s,e);else{let d=i.styles,p=!1;if(!d){p=!0;let h={};t.easing&&(h.easing=t.easing),d=ot(h)}e.currentTime+=t.duration+t.delay;let g=this.visitStyle(d,e);g.isEmptyStep=p,n=g}return e.currentAnimateTimings=null,{type:ke.Animate,timings:t,style:n,options:null}}visitStyle(i,e){let t=this._makeStyleAst(i,e);return this._validateStyleAst(t,e),t}_makeStyleAst(i,e){let t=[],n=Array.isArray(i.styles)?i.styles:[i.styles];for(let p of n)typeof p=="string"?p===Dt?t.push(p):e.errors.push(Gs(p)):t.push(new Map(Object.entries(p)));let s=!1,d=null;return t.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(d=p.get("easing"),p.delete("easing")),!s)){for(let g of p.values())if(g.toString().indexOf(ma)>=0){s=!0;break}}}),{type:ke.Style,styles:t,easing:d,offset:i.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(i,e){let t=e.currentAnimateTimings,n=e.currentTime,s=e.currentTime;t&&s>0&&(s-=t.duration+t.delay),i.styles.forEach(d=>{typeof d!="string"&&d.forEach((p,g)=>{let h=e.collectedStyles.get(e.currentQuerySelector),C=h.get(g),v=!0;C&&(s!=n&&s>=C.startTime&&n<=C.endTime&&(e.errors.push(Qs(g,C.startTime,C.endTime,s,n)),v=!1),s=C.startTime),v&&h.set(g,{startTime:s,endTime:n}),e.options&&vc(p,e.options,e.errors)})})}visitKeyframes(i,e){let t={type:ke.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(Ks()),t;let n=1,s=0,d=[],p=!1,g=!1,h=0,C=i.steps.map(Ce=>{let $=this._makeStyleAst(Ce,e),N=$.offset!=null?$.offset:Ac($.styles),X=0;return N!=null&&(s++,X=$.offset=N),g=g||X<0||X>1,p=p||X<h,h=X,d.push(X),$});g&&e.errors.push(Ys()),p&&e.errors.push(Zs());let v=i.steps.length,R=0;s>0&&s<v?e.errors.push(Ws()):s==0&&(R=n/(v-1));let z=v-1,V=e.currentTime,B=e.currentAnimateTimings,ae=B.duration;return C.forEach((Ce,$)=>{let N=R>0?$==z?1:R*$:d[$],X=N*ae;e.currentTime=V+B.delay+X,B.duration=X,this._validateStyleAst(Ce,e),Ce.offset=N,t.styles.push(Ce)}),t}visitReference(i,e){return{type:ke.Reference,animation:gt(this,An(i.animation),e),options:tn(i.options)}}visitAnimateChild(i,e){return e.depCount++,{type:ke.AnimateChild,options:tn(i.options)}}visitAnimateRef(i,e){return{type:ke.AnimateRef,animation:this.visitReference(i.animation,e),options:tn(i.options)}}visitQuery(i,e){let t=e.currentQuerySelector,n=i.options||{};e.queryCount++,e.currentQuery=i;let[s,d]=Ic(i.selector);e.currentQuerySelector=t.length?t+" "+s:s,ft(e.collectedStyles,e.currentQuerySelector,new Map);let p=gt(this,An(i.animation),e);return e.currentQuery=null,e.currentQuerySelector=t,{type:ke.Query,selector:s,limit:n.limit||0,optional:!!n.optional,includeSelf:d,animation:p,originalSelector:i.selector,options:tn(i.options)}}visitStagger(i,e){e.currentQuery||e.errors.push(Xs());let t=i.timings==="full"?{duration:0,delay:0,easing:"full"}:di(i.timings,e.errors,!0);return{type:ke.Stagger,animation:gt(this,An(i.animation),e),timings:t,options:null}}};function Ic(o){let i=!!o.split(/\s*,\s*/).find(e=>e==ga);return i&&(o=o.replace(Tc,"")),o=o.replace(/@\*/g,li).replace(/@\w+/g,e=>li+"-"+e.slice(1)).replace(/:animating/g,to),[o,i]}function Dc(o){return o?le({},o):null}var ro=class{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function Ac(o){if(typeof o=="string")return null;let i=null;if(Array.isArray(o))o.forEach(e=>{if(e instanceof Map&&e.has("offset")){let t=e;i=parseFloat(t.get("offset")),t.delete("offset")}});else if(o instanceof Map&&o.has("offset")){let e=o;i=parseFloat(e.get("offset")),e.delete("offset")}return i}function Fc(o,i){if(o.hasOwnProperty("duration"))return o;if(typeof o=="number"){let s=di(o,i).duration;return Yi(s,0,"")}let e=o;if(e.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Yi(0,0,"");return s.dynamic=!0,s.strValue=e,s}let n=di(e,i);return Yi(n.duration,n.delay,n.easing)}function tn(o){return o?(o=le({},o),o.params&&(o.params=Dc(o.params))):o={},o}function Yi(o,i,e){return{duration:o,delay:i,easing:e}}function Mo(o,i,e,t,n,s,d=null,p=!1){return{type:1,element:o,keyframes:i,preStyleProps:e,postStyleProps:t,duration:n,delay:s,totalTime:n+s,easing:d,subTimeline:p}}var Ln=class{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,e){let t=this._map.get(i);t||this._map.set(i,t=[]),t.push(...e)}has(i){return this._map.has(i)}clear(){this._map.clear()}},Nc=1,Lc=":enter",Vc=new RegExp(Lc,"g"),Rc=":leave",zc=new RegExp(Rc,"g");function ha(o,i,e,t,n,s=new Map,d=new Map,p,g,h=[]){return new ao().buildKeyframes(o,i,e,t,n,s,d,p,g,h)}var ao=class{buildKeyframes(i,e,t,n,s,d,p,g,h,C=[]){h=h||new Ln;let v=new so(i,e,h,n,s,C,[]);v.options=g;let R=g.delay?$t(g.delay):0;v.currentTimeline.delayNextStep(R),v.currentTimeline.setStyles([d],null,v.errors,g),gt(this,t,v);let z=v.timelines.filter(V=>V.containsAnimation());if(z.length&&p.size){let V;for(let B=z.length-1;B>=0;B--){let ae=z[B];if(ae.element===e){V=ae;break}}V&&!V.allowOnlyTimelineStyles()&&V.setStyles([p],null,v.errors,g)}return z.length?z.map(V=>V.buildKeyframes()):[Mo(e,[],[],[],0,R,"",!1)]}visitTrigger(i,e){}visitState(i,e){}visitTransition(i,e){}visitAnimateChild(i,e){let t=e.subInstructions.get(e.element);if(t){let n=e.createSubContext(i.options),s=e.currentTimeline.currentTime,d=this._visitSubInstructions(t,n,n.options);s!=d&&e.transformIntoNewTimeline(d)}e.previousNode=i}visitAnimateRef(i,e){let t=e.createSubContext(i.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([i.options,i.animation.options],e,t),this.visitReference(i.animation,t),e.transformIntoNewTimeline(t.currentTimeline.currentTime),e.previousNode=i}_applyAnimationRefDelays(i,e,t){for(let n of i){let s=n?.delay;if(s){let d=typeof s=="number"?s:$t(Nn(s,n?.params??{},e.errors));t.delayNextStep(d)}}}_visitSubInstructions(i,e,t){let s=e.currentTimeline.currentTime,d=t.duration!=null?$t(t.duration):null,p=t.delay!=null?$t(t.delay):null;return d!==0&&i.forEach(g=>{let h=e.appendInstructionToTimeline(g,d,p);s=Math.max(s,h.duration+h.delay)}),s}visitReference(i,e){e.updateOptions(i.options,!0),gt(this,i.animation,e),e.previousNode=i}visitSequence(i,e){let t=e.subContextCount,n=e,s=i.options;if(s&&(s.params||s.delay)&&(n=e.createSubContext(s),n.transformIntoNewTimeline(),s.delay!=null)){n.previousNode.type==ke.Style&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=ui);let d=$t(s.delay);n.delayNextStep(d)}i.steps.length&&(i.steps.forEach(d=>gt(this,d,n)),n.currentTimeline.applyStylesToKeyframe(),n.subContextCount>t&&n.transformIntoNewTimeline()),e.previousNode=i}visitGroup(i,e){let t=[],n=e.currentTimeline.currentTime,s=i.options&&i.options.delay?$t(i.options.delay):0;i.steps.forEach(d=>{let p=e.createSubContext(i.options);s&&p.delayNextStep(s),gt(this,d,p),n=Math.max(n,p.currentTimeline.currentTime),t.push(p.currentTimeline)}),t.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(n),e.previousNode=i}_visitTiming(i,e){if(i.dynamic){let t=i.strValue,n=e.params?Nn(t,e.params,e.errors):t;return di(n,e.errors)}else return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,e){let t=e.currentAnimateTimings=this._visitTiming(i.timings,e),n=e.currentTimeline;t.delay&&(e.incrementTime(t.delay),n.snapshotCurrentStyles());let s=i.style;s.type==ke.Keyframes?this.visitKeyframes(s,e):(e.incrementTime(t.duration),this.visitStyle(s,e),n.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=i}visitStyle(i,e){let t=e.currentTimeline,n=e.currentAnimateTimings;!n&&t.hasCurrentStyleProperties()&&t.forwardFrame();let s=n&&n.easing||i.easing;i.isEmptyStep?t.applyEmptyStep(s):t.setStyles(i.styles,s,e.errors,e.options),e.previousNode=i}visitKeyframes(i,e){let t=e.currentAnimateTimings,n=e.currentTimeline.duration,s=t.duration,p=e.createSubContext().currentTimeline;p.easing=t.easing,i.styles.forEach(g=>{let h=g.offset||0;p.forwardTime(h*s),p.setStyles(g.styles,g.easing,e.errors,e.options),p.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(p),e.transformIntoNewTimeline(n+s),e.previousNode=i}visitQuery(i,e){let t=e.currentTimeline.currentTime,n=i.options||{},s=n.delay?$t(n.delay):0;s&&(e.previousNode.type===ke.Style||t==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ui);let d=t,p=e.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!n.optional,e.errors);e.currentQueryTotal=p.length;let g=null;p.forEach((h,C)=>{e.currentQueryIndex=C;let v=e.createSubContext(i.options,h);s&&v.delayNextStep(s),h===e.element&&(g=v.currentTimeline),gt(this,i.animation,v),v.currentTimeline.applyStylesToKeyframe();let R=v.currentTimeline.currentTime;d=Math.max(d,R)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),g&&(e.currentTimeline.mergeTimelineCollectedStyles(g),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=i}visitStagger(i,e){let t=e.parentContext,n=e.currentTimeline,s=i.timings,d=Math.abs(s.duration),p=d*(e.currentQueryTotal-1),g=d*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":g=p-g;break;case"full":g=t.currentStaggerTime;break}let C=e.currentTimeline;g&&C.delayNextStep(g);let v=C.currentTime;gt(this,i.animation,e),e.previousNode=i,t.currentStaggerTime=n.currentTime-v+(n.startTime-t.currentTimeline.startTime)}},ui={},so=class o{constructor(i,e,t,n,s,d,p,g){this._driver=i,this.element=e,this.subInstructions=t,this._enterClassName=n,this._leaveClassName=s,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ui,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new gi(this._driver,e,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,e){if(!i)return;let t=i,n=this.options;t.duration!=null&&(n.duration=$t(t.duration)),t.delay!=null&&(n.delay=$t(t.delay));let s=t.params;if(s){let d=n.params;d||(d=this.options.params={}),Object.keys(s).forEach(p=>{(!e||!d.hasOwnProperty(p))&&(d[p]=Nn(s[p],d,this.errors))})}}_copyOptions(){let i={};if(this.options){let e=this.options.params;if(e){let t=i.params={};Object.keys(e).forEach(n=>{t[n]=e[n]})}}return i}createSubContext(i=null,e,t){let n=e||this.element,s=new o(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,t||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(i),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(i){return this.previousNode=ui,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,e,t){let n={duration:e??i.duration,delay:this.currentTimeline.currentTime+(t??0)+i.delay,easing:""},s=new co(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,n,i.stretchStartingKeyframe);return this.timelines.push(s),n}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,e,t,n,s,d){let p=[];if(n&&p.push(this.element),i.length>0){i=i.replace(Vc,"."+this._enterClassName),i=i.replace(zc,"."+this._leaveClassName);let g=t!=1,h=this._driver.query(this.element,i,g);t!==0&&(h=t<0?h.slice(h.length+t,h.length):h.slice(0,t)),p.push(...h)}return!s&&p.length==0&&d.push(Js(e)),p}},gi=class o{constructor(i,e,t,n){this._driver=i,this.element=e,this.startTime=t,this._elementTimelineStylesLookup=n,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+i),e&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,e){return this.applyStylesToKeyframe(),new o(this._driver,i,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Nc,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,e){this._localTimelineStyles.set(i,e),this._globalTimelineStyles.set(i,e),this._styleSummary.set(i,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[e,t]of this._globalTimelineStyles)this._backFill.set(e,t||Dt),this._currentKeyframe.set(e,Dt);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,e,t,n){e&&this._previousKeyframe.set("easing",e);let s=n&&n.params||{},d=jc(i,this._globalTimelineStyles);for(let[p,g]of d){let h=Nn(g,s,t);this._pendingStyles.set(p,h),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??Dt),this._updateStyle(p,h)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((i,e)=>{this._currentKeyframe.set(e,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,i)}))}snapshotCurrentStyles(){for(let[i,e]of this._localTimelineStyles)this._pendingStyles.set(i,e),this._updateStyle(i,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let i=[];for(let e in this._currentKeyframe)i.push(e);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((e,t)=>{let n=this._styleSummary.get(t);(!n||e.time>n.time)&&this._updateStyle(t,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let i=new Set,e=new Set,t=this._keyframes.size===1&&this.duration===0,n=[];this._keyframes.forEach((p,g)=>{let h=new Map([...this._backFill,...p]);h.forEach((C,v)=>{C===Zn?i.add(v):C===Dt&&e.add(v)}),t||h.set("offset",g/this.duration),n.push(h)});let s=[...i.values()],d=[...e.values()];if(t){let p=n[0],g=new Map(p);p.set("offset",0),g.set("offset",1),n=[p,g]}return Mo(this.element,n,s,d,this.duration,this.startTime,this.easing,!1)}},co=class extends gi{constructor(i,e,t,n,s,d,p=!1){super(i,e,d.delay),this.keyframes=t,this.preStyleProps=n,this.postStyleProps=s,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:e,duration:t,easing:n}=this.timings;if(this._stretchStartingKeyframe&&e){let s=[],d=t+e,p=e/d,g=new Map(i[0]);g.set("offset",0),s.push(g);let h=new Map(i[0]);h.set("offset",ea(p)),s.push(h);let C=i.length-1;for(let v=1;v<=C;v++){let R=new Map(i[v]),z=R.get("offset"),V=e+z*t;R.set("offset",ea(V/d)),s.push(R)}t=d,e=0,n="",i=s}return Mo(this.element,i,this.preStyleProps,this.postStyleProps,t,e,n,!0)}};function ea(o,i=3){let e=Math.pow(10,i-1);return Math.round(o*e)/e}function jc(o,i){let e=new Map,t;return o.forEach(n=>{if(n==="*"){t??=i.keys();for(let s of t)e.set(s,Dt)}else for(let[s,d]of n)e.set(s,d)}),e}function ta(o,i,e,t,n,s,d,p,g,h,C,v,R){return{type:0,element:o,triggerName:i,isRemovalTransition:n,fromState:e,fromStyles:s,toState:t,toStyles:d,timelines:p,queriedElements:g,preStyleProps:h,postStyleProps:C,totalTime:v,errors:R}}var Zi={},fi=class{constructor(i,e,t){this._triggerName=i,this.ast=e,this._stateStyles=t}match(i,e,t,n){return $c(this.ast.matchers,i,e,t,n)}buildStyles(i,e,t){let n=this._stateStyles.get("*");return i!==void 0&&(n=this._stateStyles.get(i?.toString())||n),n?n.buildStyles(e,t):new Map}build(i,e,t,n,s,d,p,g,h,C){let v=[],R=this.ast.options&&this.ast.options.params||Zi,z=p&&p.params||Zi,V=this.buildStyles(t,z,v),B=g&&g.params||Zi,ae=this.buildStyles(n,B,v),Ce=new Set,$=new Map,N=new Map,X=n==="void",we={params:_a(B,R),delay:this.ast.options?.delay},Ie=C?[]:ha(i,e,this.ast.animation,s,d,V,ae,we,h,v),_e=0;return Ie.forEach(q=>{_e=Math.max(q.duration+q.delay,_e)}),v.length?ta(e,this._triggerName,t,n,X,V,ae,[],[],$,N,_e,v):(Ie.forEach(q=>{let De=q.element,ee=ft($,De,new Set);q.preStyleProps.forEach(H=>ee.add(H));let J=ft(N,De,new Set);q.postStyleProps.forEach(H=>J.add(H)),De!==e&&Ce.add(De)}),ta(e,this._triggerName,t,n,X,V,ae,Ie,[...Ce.values()],$,N,_e))}};function $c(o,i,e,t,n){return o.some(s=>s(i,e,t,n))}function _a(o,i){let e=le({},i);return Object.entries(o).forEach(([t,n])=>{n!=null&&(e[t]=n)}),e}var lo=class{constructor(i,e,t){this.styles=i,this.defaultParams=e,this.normalizer=t}buildStyles(i,e){let t=new Map,n=_a(i,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((d,p)=>{d&&(d=Nn(d,n,e));let g=this.normalizer.normalizePropertyName(p,e);d=this.normalizer.normalizeStyleValue(p,g,d,e),t.set(p,d)})}),t}};function qc(o,i,e){return new mo(o,i,e)}var mo=class{constructor(i,e,t){this.name=i,this.ast=e,this._normalizer=t,this.transitionFactories=[],this.states=new Map,e.states.forEach(n=>{let s=n.options&&n.options.params||{};this.states.set(n.name,new lo(n.style,s,t))}),na(this.states,"true","1"),na(this.states,"false","0"),e.transitions.forEach(n=>{this.transitionFactories.push(new fi(i,n,this.states))}),this.fallbackTransition=Uc(i,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,e,t,n){return this.transitionFactories.find(d=>d.match(i,e,t,n))||null}matchStyles(i,e,t){return this.fallbackTransition.buildStyles(i,e,t)}};function Uc(o,i,e){let t=[(d,p)=>!0],n={type:ke.Sequence,steps:[],options:null},s={type:ke.Transition,animation:n,matchers:t,options:null,queryCount:0,depCount:0};return new fi(o,s,i)}function na(o,i,e){o.has(i)?o.has(e)||o.set(e,o.get(i)):o.has(e)&&o.set(i,o.get(e))}var Bc=new Ln,po=class{constructor(i,e,t){this.bodyNode=i,this._driver=e,this._normalizer=t,this._animations=new Map,this._playersById=new Map,this.players=[]}register(i,e){let t=[],n=[],s=fa(this._driver,e,t,n);if(t.length)throw oc(t);n.length&&void 0,this._animations.set(i,s)}_buildPlayer(i,e,t){let n=i.element,s=ca(this._normalizer,i.keyframes,e,t);return this._driver.animate(n,s,i.duration,i.delay,i.easing,[],!0)}create(i,e,t={}){let n=[],s=this._animations.get(i),d,p=new Map;if(s?(d=ha(this._driver,e,s,pa,eo,new Map,new Map,t,Bc,n),d.forEach(C=>{let v=ft(p,C.element,new Map);C.postStyleProps.forEach(R=>v.set(R,null))})):(n.push(rc()),d=[]),n.length)throw ac(n);p.forEach((C,v)=>{C.forEach((R,z)=>{C.set(z,this._driver.computeStyle(v,z,Dt))})});let g=d.map(C=>{let v=p.get(C.element);return this._buildPlayer(C,new Map,v)}),h=Wt(g);return this._playersById.set(i,h),h.onDestroy(()=>this.destroy(i)),this.players.push(h),h}destroy(i){let e=this._getPlayer(i);e.destroy(),this._playersById.delete(i);let t=this.players.indexOf(e);t>=0&&this.players.splice(t,1)}_getPlayer(i){let e=this._playersById.get(i);if(!e)throw sc(i);return e}listen(i,e,t,n){let s=Co(e,"","","");return _o(this._getPlayer(i),t,s,n),()=>{}}command(i,e,t,n){if(t=="register"){this.register(i,n[0]);return}if(t=="create"){let d=n[0]||{};this.create(i,e,d);return}let s=this._getPlayer(i);switch(t){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(n[0]));break;case"destroy":this.destroy(i);break}}},ia="ng-animate-queued",Hc=".ng-animate-queued",Wi="ng-animate-disabled",Gc=".ng-animate-disabled",Qc="ng-star-inserted",Kc=".ng-star-inserted",Yc=[],Ca={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Zc={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},kt="__ng_removed",Vn=class{get params(){return this.options.params}constructor(i,e=""){this.namespaceId=e;let t=i&&i.hasOwnProperty("value"),n=t?i.value:i;if(this.value=Xc(n),t){let s=i,{value:d}=s,p=Uo(s,["value"]);this.options=p}else this.options={};this.options.params||(this.options.params={})}absorbOptions(i){let e=i.params;if(e){let t=this.options.params;Object.keys(e).forEach(n=>{t[n]==null&&(t[n]=e[n])})}}},Fn="void",Xi=new Vn(Fn),uo=class{constructor(i,e,t){this.id=i,this.hostElement=e,this._engine=t,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,Ot(e,this._hostClassName)}listen(i,e,t,n){if(!this._triggers.has(e))throw cc(t,e);if(t==null||t.length==0)throw lc(e);if(!Jc(t))throw dc(t,e);let s=ft(this._elementListeners,i,[]),d={name:e,phase:t,callback:n};s.push(d);let p=ft(this._engine.statesByElement,i,new Map);return p.has(e)||(Ot(i,oi),Ot(i,oi+"-"+e),p.set(e,Xi)),()=>{this._engine.afterFlush(()=>{let g=s.indexOf(d);g>=0&&s.splice(g,1),this._triggers.has(e)||p.delete(e)})}}register(i,e){return this._triggers.has(i)?!1:(this._triggers.set(i,e),!0)}_getTrigger(i){let e=this._triggers.get(i);if(!e)throw mc(i);return e}trigger(i,e,t,n=!0){let s=this._getTrigger(e),d=new Rn(this.id,e,i),p=this._engine.statesByElement.get(i);p||(Ot(i,oi),Ot(i,oi+"-"+e),this._engine.statesByElement.set(i,p=new Map));let g=p.get(e),h=new Vn(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&g&&h.absorbOptions(g.options),p.set(e,h),g||(g=Xi),!(h.value===Fn)&&g.value===h.value){if(!nl(g.params,h.params)){let B=[],ae=s.matchStyles(g.value,g.params,B),Ce=s.matchStyles(h.value,h.params,B);B.length?this._engine.reportError(B):this._engine.afterFlush(()=>{nn(i,ae),Lt(i,Ce)})}return}let R=ft(this._engine.playersByElement,i,[]);R.forEach(B=>{B.namespaceId==this.id&&B.triggerName==e&&B.queued&&B.destroy()});let z=s.matchTransition(g.value,h.value,i,h.params),V=!1;if(!z){if(!n)return;z=s.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:e,transition:z,fromState:g,toState:h,player:d,isFallbackTransition:V}),V||(Ot(i,ia),d.onStart(()=>{fn(i,ia)})),d.onDone(()=>{let B=this.players.indexOf(d);B>=0&&this.players.splice(B,1);let ae=this._engine.playersByElement.get(i);if(ae){let Ce=ae.indexOf(d);Ce>=0&&ae.splice(Ce,1)}}),this.players.push(d),R.push(d),d}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(e=>e.delete(i)),this._elementListeners.forEach((e,t)=>{this._elementListeners.set(t,e.filter(n=>n.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);let e=this._engine.playersByElement.get(i);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,e){let t=this._engine.driver.query(i,li,!0);t.forEach(n=>{if(n[kt])return;let s=this._engine.fetchNamespacesByElement(n);s.size?s.forEach(d=>d.triggerLeaveAnimation(n,e,!1,!0)):this.clearElementCache(n)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(n=>this.clearElementCache(n)))}triggerLeaveAnimation(i,e,t,n){let s=this._engine.statesByElement.get(i),d=new Map;if(s){let p=[];if(s.forEach((g,h)=>{if(d.set(h,g.value),this._triggers.has(h)){let C=this.trigger(i,h,Fn,n);C&&p.push(C)}}),p.length)return this._engine.markElementAsRemoved(this.id,i,!0,e,d),t&&Wt(p).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){let e=this._elementListeners.get(i),t=this._engine.statesByElement.get(i);if(e&&t){let n=new Set;e.forEach(s=>{let d=s.name;if(n.has(d))return;n.add(d);let g=this._triggers.get(d).fallbackTransition,h=t.get(d)||Xi,C=new Vn(Fn),v=new Rn(this.id,d,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:d,transition:g,fromState:h,toState:C,player:v,isFallbackTransition:!0})})}}removeNode(i,e){let t=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,e),this.triggerLeaveAnimation(i,e,!0))return;let n=!1;if(t.totalAnimations){let s=t.players.length?t.playersByQueriedElement.get(i):[];if(s&&s.length)n=!0;else{let d=i;for(;d=d.parentNode;)if(t.statesByElement.get(d)){n=!0;break}}}if(this.prepareLeaveAnimationListeners(i),n)t.markElementAsRemoved(this.id,i,!1,e);else{let s=i[kt];(!s||s===Ca)&&(t.afterFlush(()=>this.clearElementCache(i)),t.destroyInnerAnimations(i),t._onRemovalComplete(i,e))}}insertNode(i,e){Ot(i,this._hostClassName)}drainQueuedTransitions(i){let e=[];return this._queue.forEach(t=>{let n=t.player;if(n.destroyed)return;let s=t.element,d=this._elementListeners.get(s);d&&d.forEach(p=>{if(p.name==t.triggerName){let g=Co(s,t.triggerName,t.fromState.value,t.toState.value);g._data=i,_o(t.player,p.phase,g,p.callback)}}),n.markedForDestroy?this._engine.afterFlush(()=>{n.destroy()}):e.push(t)}),this._queue=[],e.sort((t,n)=>{let s=t.transition.ast.depCount,d=n.transition.ast.depCount;return s==0||d==0?s-d:this._engine.driver.containsElement(t.element,n.element)?1:-1})}destroy(i){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}},go=class{_onRemovalComplete(i,e){this.onRemovalComplete(i,e)}constructor(i,e,t,n){this.bodyNode=i,this.driver=e,this._normalizer=t,this.scheduler=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,d)=>{}}get queuedPlayers(){let i=[];return this._namespaceList.forEach(e=>{e.players.forEach(t=>{t.queued&&i.push(t)})}),i}createNamespace(i,e){let t=new uo(i,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(t,e):(this.newHostElements.set(e,t),this.collectEnterElement(e)),this._namespaceLookup[i]=t}_balanceNamespaceList(i,e){let t=this._namespaceList,n=this.namespacesByHostElement;if(t.length-1>=0){let d=!1,p=this.driver.getParentElement(e);for(;p;){let g=n.get(p);if(g){let h=t.indexOf(g);t.splice(h+1,0,i),d=!0;break}p=this.driver.getParentElement(p)}d||t.unshift(i)}else t.push(i);return n.set(e,i),i}register(i,e){let t=this._namespaceLookup[i];return t||(t=this.createNamespace(i,e)),t}registerTrigger(i,e,t){let n=this._namespaceLookup[i];n&&n.register(e,t)&&this.totalAnimations++}destroy(i,e){i&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(i);this.namespacesByHostElement.delete(t.hostElement);let n=this._namespaceList.indexOf(t);n>=0&&this._namespaceList.splice(n,1),t.destroy(e),delete this._namespaceLookup[i]}))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){let e=new Set,t=this.statesByElement.get(i);if(t){for(let n of t.values())if(n.namespaceId){let s=this._fetchNamespace(n.namespaceId);s&&e.add(s)}}return e}trigger(i,e,t,n){if(si(e)){let s=this._fetchNamespace(i);if(s)return s.trigger(e,t,n),!0}return!1}insertNode(i,e,t,n){if(!si(e))return;let s=e[kt];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(i){let d=this._fetchNamespace(i);d&&d.insertNode(e,t)}n&&this.collectEnterElement(e)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,e){e?this.disabledNodes.has(i)||(this.disabledNodes.add(i),Ot(i,Wi)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),fn(i,Wi))}removeNode(i,e,t){if(si(e)){this.scheduler?.notify();let n=i?this._fetchNamespace(i):null;n?n.removeNode(e,t):this.markElementAsRemoved(i,e,!1,t);let s=this.namespacesByHostElement.get(e);s&&s.id!==i&&s.removeNode(e,t)}else this._onRemovalComplete(e,t)}markElementAsRemoved(i,e,t,n,s){this.collectedLeaveElements.push(e),e[kt]={namespaceId:i,setForRemoval:n,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:s}}listen(i,e,t,n,s){return si(e)?this._fetchNamespace(i).listen(e,t,n,s):()=>{}}_buildInstruction(i,e,t,n,s){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,t,n,i.fromState.options,i.toState.options,e,s)}destroyInnerAnimations(i){let e=this.driver.query(i,li,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(i,to,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(i){let e=this.playersByElement.get(i);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(i){let e=this.playersByQueriedElement.get(i);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return Wt(this.players).onDone(()=>i());i()})}processLeaveNode(i){let e=i[kt];if(e&&e.setForRemoval){if(i[kt]=Ca,e.namespaceId){this.destroyInnerAnimations(i);let t=this._fetchNamespace(e.namespaceId);t&&t.clearElementCache(i)}this._onRemovalComplete(i,e.setForRemoval)}i.classList?.contains(Wi)&&this.markElementAsDisabled(i,!1),this.driver.query(i,Gc,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(i=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,n)=>this._balanceNamespaceList(t,n)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let n=this.collectedEnterElements[t];Ot(n,Qc)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{e=this._flushAnimations(t,i)}finally{for(let n=0;n<t.length;n++)t[n]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let n=this.collectedLeaveElements[t];this.processLeaveNode(n)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],e.length?Wt(e).onDone(()=>{t.forEach(n=>n())}):t.forEach(n=>n())}}reportError(i){throw pc(i)}_flushAnimations(i,e){let t=new Ln,n=[],s=new Map,d=[],p=new Map,g=new Map,h=new Map,C=new Set;this.disabledNodes.forEach(E=>{C.add(E);let S=this.driver.query(E,Hc,!0);for(let f=0;f<S.length;f++)C.add(S[f])});let v=this.bodyNode,R=Array.from(this.statesByElement.keys()),z=aa(R,this.collectedEnterElements),V=new Map,B=0;z.forEach((E,S)=>{let f=pa+B++;V.set(S,f),E.forEach(_=>Ot(_,f))});let ae=[],Ce=new Set,$=new Set;for(let E=0;E<this.collectedLeaveElements.length;E++){let S=this.collectedLeaveElements[E],f=S[kt];f&&f.setForRemoval&&(ae.push(S),Ce.add(S),f.hasAnimation?this.driver.query(S,Kc,!0).forEach(_=>Ce.add(_)):$.add(S))}let N=new Map,X=aa(R,Array.from(Ce));X.forEach((E,S)=>{let f=eo+B++;N.set(S,f),E.forEach(_=>Ot(_,f))}),i.push(()=>{z.forEach((E,S)=>{let f=V.get(S);E.forEach(_=>fn(_,f))}),X.forEach((E,S)=>{let f=N.get(S);E.forEach(_=>fn(_,f))}),ae.forEach(E=>{this.processLeaveNode(E)})});let we=[],Ie=[];for(let E=this._namespaceList.length-1;E>=0;E--)this._namespaceList[E].drainQueuedTransitions(e).forEach(f=>{let _=f.player,j=f.element;if(we.push(_),this.collectedEnterElements.length){let je=j[kt];if(je&&je.setForMove){if(je.previousTriggersValues&&je.previousTriggersValues.has(f.triggerName)){let A=je.previousTriggersValues.get(f.triggerName),D=this.statesByElement.get(f.element);if(D&&D.has(f.triggerName)){let M=D.get(f.triggerName);M.value=A,D.set(f.triggerName,M)}}_.destroy();return}}let G=!v||!this.driver.containsElement(v,j),Se=N.get(j),fe=V.get(j),Ae=this._buildInstruction(f,t,fe,Se,G);if(Ae.errors&&Ae.errors.length){Ie.push(Ae);return}if(G){_.onStart(()=>nn(j,Ae.fromStyles)),_.onDestroy(()=>Lt(j,Ae.toStyles)),n.push(_);return}if(f.isFallbackTransition){_.onStart(()=>nn(j,Ae.fromStyles)),_.onDestroy(()=>Lt(j,Ae.toStyles)),n.push(_);return}let ht=[];Ae.timelines.forEach(je=>{je.stretchStartingKeyframe=!0,this.disabledNodes.has(je.element)||ht.push(je)}),Ae.timelines=ht,t.append(j,Ae.timelines);let St={instruction:Ae,player:_,element:j};d.push(St),Ae.queriedElements.forEach(je=>ft(p,je,[]).push(_)),Ae.preStyleProps.forEach((je,A)=>{if(je.size){let D=g.get(A);D||g.set(A,D=new Set),je.forEach((M,F)=>D.add(F))}}),Ae.postStyleProps.forEach((je,A)=>{let D=h.get(A);D||h.set(A,D=new Set),je.forEach((M,F)=>D.add(F))})});if(Ie.length){let E=[];Ie.forEach(S=>{E.push(uc(S.triggerName,S.errors))}),we.forEach(S=>S.destroy()),this.reportError(E)}let _e=new Map,q=new Map;d.forEach(E=>{let S=E.element;t.has(S)&&(q.set(S,S),this._beforeAnimationBuild(E.player.namespaceId,E.instruction,_e))}),n.forEach(E=>{let S=E.element;this._getPreviousPlayers(S,!1,E.namespaceId,E.triggerName,null).forEach(_=>{ft(_e,S,[]).push(_),_.destroy()})});let De=ae.filter(E=>sa(E,g,h)),ee=new Map;ra(ee,this.driver,$,h,Dt).forEach(E=>{sa(E,g,h)&&De.push(E)});let H=new Map;z.forEach((E,S)=>{ra(H,this.driver,new Set(E),g,Zn)}),De.forEach(E=>{let S=ee.get(E),f=H.get(E);ee.set(E,new Map([...S?.entries()??[],...f?.entries()??[]]))});let te=[],st=[],Qe={};d.forEach(E=>{let{element:S,player:f,instruction:_}=E;if(t.has(S)){if(C.has(S)){f.onDestroy(()=>Lt(S,_.toStyles)),f.disabled=!0,f.overrideTotalTime(_.totalTime),n.push(f);return}let j=Qe;if(q.size>1){let Se=S,fe=[];for(;Se=Se.parentNode;){let Ae=q.get(Se);if(Ae){j=Ae;break}fe.push(Se)}fe.forEach(Ae=>q.set(Ae,j))}let G=this._buildAnimation(f.namespaceId,_,_e,s,H,ee);if(f.setRealPlayer(G),j===Qe)te.push(f);else{let Se=this.playersByElement.get(j);Se&&Se.length&&(f.parentPlayer=Wt(Se)),n.push(f)}}else nn(S,_.fromStyles),f.onDestroy(()=>Lt(S,_.toStyles)),st.push(f),C.has(S)&&n.push(f)}),st.forEach(E=>{let S=s.get(E.element);if(S&&S.length){let f=Wt(S);E.setRealPlayer(f)}}),n.forEach(E=>{E.parentPlayer?E.syncPlayerEvents(E.parentPlayer):E.destroy()});for(let E=0;E<ae.length;E++){let S=ae[E],f=S[kt];if(fn(S,eo),f&&f.hasAnimation)continue;let _=[];if(p.size){let G=p.get(S);G&&G.length&&_.push(...G);let Se=this.driver.query(S,to,!0);for(let fe=0;fe<Se.length;fe++){let Ae=p.get(Se[fe]);Ae&&Ae.length&&_.push(...Ae)}}let j=_.filter(G=>!G.destroyed);j.length?el(this,S,j):this.processLeaveNode(S)}return ae.length=0,te.forEach(E=>{this.players.push(E),E.onDone(()=>{E.destroy();let S=this.players.indexOf(E);this.players.splice(S,1)}),E.play()}),te}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,e,t,n,s){let d=[];if(e){let p=this.playersByQueriedElement.get(i);p&&(d=p)}else{let p=this.playersByElement.get(i);if(p){let g=!s||s==Fn;p.forEach(h=>{h.queued||!g&&h.triggerName!=n||d.push(h)})}}return(t||n)&&(d=d.filter(p=>!(t&&t!=p.namespaceId||n&&n!=p.triggerName))),d}_beforeAnimationBuild(i,e,t){let n=e.triggerName,s=e.element,d=e.isRemovalTransition?void 0:i,p=e.isRemovalTransition?void 0:n;for(let g of e.timelines){let h=g.element,C=h!==s,v=ft(t,h,[]);this._getPreviousPlayers(h,C,d,p,e.toState).forEach(z=>{let V=z.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),z.destroy(),v.push(z)})}nn(s,e.fromStyles)}_buildAnimation(i,e,t,n,s,d){let p=e.triggerName,g=e.element,h=[],C=new Set,v=new Set,R=e.timelines.map(V=>{let B=V.element;C.add(B);let ae=B[kt];if(ae&&ae.removedBeforeQueried)return new dn(V.duration,V.delay);let Ce=B!==g,$=tl((t.get(B)||Yc).map(_e=>_e.getRealPlayer())).filter(_e=>{let q=_e;return q.element?q.element===B:!1}),N=s.get(B),X=d.get(B),we=ca(this._normalizer,V.keyframes,N,X),Ie=this._buildPlayer(V,we,$);if(V.subTimeline&&n&&v.add(B),Ce){let _e=new Rn(i,p,B);_e.setRealPlayer(Ie),h.push(_e)}return Ie});h.forEach(V=>{ft(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>Wc(this.playersByQueriedElement,V.element,V))}),C.forEach(V=>Ot(V,Wr));let z=Wt(R);return z.onDestroy(()=>{C.forEach(V=>fn(V,Wr)),Lt(g,e.toStyles)}),v.forEach(V=>{ft(n,V,[]).push(z)}),z}_buildPlayer(i,e,t){return e.length>0?this.driver.animate(i.element,e,i.duration,i.delay,i.easing,t):new dn(i.duration,i.delay)}},Rn=class{constructor(i,e,t){this.namespaceId=i,this.triggerName=e,this.element=t,this._player=new dn,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((e,t)=>{e.forEach(n=>_o(i,t,void 0,n))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){let e=this._player;e.triggerCallback&&i.onStart(()=>e.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,e){ft(this._queuedCallbacks,i,[]).push(e)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){let e=this._player;e.triggerCallback&&e.triggerCallback(i)}};function Wc(o,i,e){let t=o.get(i);if(t){if(t.length){let n=t.indexOf(e);t.splice(n,1)}t.length==0&&o.delete(i)}return t}function Xc(o){return o??null}function si(o){return o&&o.nodeType===1}function Jc(o){return o=="start"||o=="done"}function oa(o,i){let e=o.style.display;return o.style.display=i??"none",e}function ra(o,i,e,t,n){let s=[];e.forEach(g=>s.push(oa(g)));let d=[];t.forEach((g,h)=>{let C=new Map;g.forEach(v=>{let R=i.computeStyle(h,v,n);C.set(v,R),(!R||R.length==0)&&(h[kt]=Zc,d.push(h))}),o.set(h,C)});let p=0;return e.forEach(g=>oa(g,s[p++])),d}function aa(o,i){let e=new Map;if(o.forEach(p=>e.set(p,[])),i.length==0)return e;let t=1,n=new Set(i),s=new Map;function d(p){if(!p)return t;let g=s.get(p);if(g)return g;let h=p.parentNode;return e.has(h)?g=h:n.has(h)?g=t:g=d(h),s.set(p,g),g}return i.forEach(p=>{let g=d(p);g!==t&&e.get(g).push(p)}),e}function Ot(o,i){o.classList?.add(i)}function fn(o,i){o.classList?.remove(i)}function el(o,i,e){Wt(e).onDone(()=>o.processLeaveNode(i))}function tl(o){let i=[];return Pa(o,i),i}function Pa(o,i){for(let e=0;e<o.length;e++){let t=o[e];t instanceof Fi?Pa(t.players,i):i.push(t)}}function nl(o,i){let e=Object.keys(o),t=Object.keys(i);if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let s=e[n];if(!i.hasOwnProperty(s)||o[s]!==i[s])return!1}return!0}function sa(o,i,e){let t=e.get(o);if(!t)return!1;let n=i.get(o);return n?t.forEach(s=>n.add(s)):i.set(o,t),e.delete(o),!0}var hn=class{constructor(i,e,t,n){this._driver=e,this._normalizer=t,this._triggerCache={},this.onRemovalComplete=(s,d)=>{},this._transitionEngine=new go(i.body,e,t,n),this._timelineEngine=new po(i.body,e,t),this._transitionEngine.onRemovalComplete=(s,d)=>this.onRemovalComplete(s,d)}registerTrigger(i,e,t,n,s){let d=i+"-"+n,p=this._triggerCache[d];if(!p){let g=[],h=[],C=fa(this._driver,s,g,h);if(g.length)throw nc(n,g);h.length&&void 0,p=qc(n,C,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(e,n,p)}register(i,e){this._transitionEngine.register(i,e)}destroy(i,e){this._transitionEngine.destroy(i,e)}onInsert(i,e,t,n){this._transitionEngine.insertNode(i,e,t,n)}onRemove(i,e,t){this._transitionEngine.removeNode(i,e,t)}disableAnimations(i,e){this._transitionEngine.markElementAsDisabled(i,e)}process(i,e,t,n){if(t.charAt(0)=="@"){let[s,d]=Yr(t),p=n;this._timelineEngine.command(s,e,d,p)}else this._transitionEngine.trigger(i,e,t,n)}listen(i,e,t,n,s){if(t.charAt(0)=="@"){let[d,p]=Yr(t);return this._timelineEngine.listen(d,e,p,s)}return this._transitionEngine.listen(i,e,t,n,s)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(i){this._transitionEngine.afterFlushAnimationsDone(i)}};function il(o,i){let e=null,t=null;return Array.isArray(i)&&i.length?(e=Ji(i[0]),i.length>1&&(t=Ji(i[i.length-1]))):i instanceof Map&&(e=Ji(i)),e||t?new fo(o,e,t):null}var fo=class o{static{this.initialStylesByElement=new WeakMap}constructor(i,e,t){this._element=i,this._startStyles=e,this._endStyles=t,this._state=0;let n=o.initialStylesByElement.get(i);n||o.initialStylesByElement.set(i,n=new Map),this._initialStyles=n}start(){this._state<1&&(this._startStyles&&Lt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Lt(this._element,this._initialStyles),this._endStyles&&(Lt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(o.initialStylesByElement.delete(this._element),this._startStyles&&(nn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(nn(this._element,this._endStyles),this._endStyles=null),Lt(this._element,this._initialStyles),this._state=3)}};function Ji(o){let i=null;return o.forEach((e,t)=>{ol(t)&&(i=i||new Map,i.set(t,e))}),i}function ol(o){return o==="display"||o==="position"}var hi=class{constructor(i,e,t,n){this.element=i,this.keyframes=e,this.options=t,this._specialStyles=n,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){let e=[];return i.forEach(t=>{e.push(Object.fromEntries(t))}),e}_triggerWebAnimation(i,e,t){return i.animate(this._convertKeyframesToObject(e),t)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,n)=>{n!=="offset"&&i.set(n,this._finished?t:vo(this.element,n))}),this.currentSnapshot=i}triggerCallback(i){let e=i==="start"?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}},_i=class{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}matchesElement(i,e){return!1}containsElement(i,e){return la(i,e)}getParentElement(i){return Po(i)}query(i,e,t){return da(i,e,t)}computeStyle(i,e,t){return vo(i,e)}animate(i,e,t,n,s,d=[]){let p=n==0?"both":"forwards",g={duration:t,delay:n,fill:p};s&&(g.easing=s);let h=new Map,C=d.filter(z=>z instanceof hi);Oc(t,n)&&C.forEach(z=>{z.currentSnapshot.forEach((V,B)=>h.set(B,V))});let v=yc(e).map(z=>new Map(z));v=xc(i,v,h);let R=il(i,v);return new hi(i,v,g,R)}};var ci="@",ba="@.disabled",Ci=class{constructor(i,e,t,n){this.namespaceId=i,this.delegate=e,this.engine=t,this._onDestroy=n,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(i){this.delegate.destroyNode?.(i)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,e){this.delegate.appendChild(i,e),this.engine.onInsert(this.namespaceId,e,i,!1)}insertBefore(i,e,t,n=!0){this.delegate.insertBefore(i,e,t),this.engine.onInsert(this.namespaceId,e,i,n)}removeChild(i,e,t){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,t,n){this.delegate.setAttribute(i,e,t,n)}removeAttribute(i,e,t){this.delegate.removeAttribute(i,e,t)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,t,n){this.delegate.setStyle(i,e,t,n)}removeStyle(i,e,t){this.delegate.removeStyle(i,e,t)}setProperty(i,e,t){e.charAt(0)==ci&&e==ba?this.disableAnimations(i,!!t):this.delegate.setProperty(i,e,t)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,t){return this.delegate.listen(i,e,t)}disableAnimations(i,e){this.engine.disableAnimations(i,e)}},ho=class extends Ci{constructor(i,e,t,n,s){super(e,t,n,s),this.factory=i,this.namespaceId=e}setProperty(i,e,t){e.charAt(0)==ci?e.charAt(1)=="."&&e==ba?(t=t===void 0?!0:!!t,this.disableAnimations(i,t)):this.engine.process(this.namespaceId,i,e.slice(1),t):this.delegate.setProperty(i,e,t)}listen(i,e,t){if(e.charAt(0)==ci){let n=rl(i),s=e.slice(1),d="";return s.charAt(0)!=ci&&([s,d]=al(s)),this.engine.listen(this.namespaceId,n,s,d,p=>{let g=p._data||-1;this.factory.scheduleListenerCallback(g,t,p)})}return this.delegate.listen(i,e,t)}};function rl(o){switch(o){case"body":return document.body;case"document":return document;case"window":return window;default:return o}}function al(o){let i=o.indexOf("."),e=o.substring(0,i),t=o.slice(i+1);return[e,t]}var Pi=class{constructor(i,e,t){this.delegate=i,this.engine=e,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(n,s)=>{let d=s?.parentNode(n);d&&s.removeChild(d,n)}}createRenderer(i,e){let t="",n=this.delegate.createRenderer(i,e);if(!i||!e?.data?.animation){let h=this._rendererCache,C=h.get(n);if(!C){let v=()=>h.delete(n);C=new Ci(t,n,this.engine,v),h.set(n,C)}return C}let s=e.id,d=e.id+"-"+this._currentId;this._currentId++,this.engine.register(d,i);let p=h=>{Array.isArray(h)?h.forEach(p):this.engine.registerTrigger(s,d,i,h.name,h)};return e.data.animation.forEach(p),new ho(this,d,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(i,e,t){if(i>=0&&i<this._microtaskId){this._zone.run(()=>e(t));return}let n=this._animationCallbacksBuffer;n.length==0&&queueMicrotask(()=>{this._zone.run(()=>{n.forEach(s=>{let[d,p]=s;d(p)}),this._animationCallbacksBuffer=[]})}),n.push([e,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var cl=(()=>{class o extends hn{constructor(e,t,n){super(e,t,n,Ht(tr,{optional:!0}))}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(t){return new(t||o)(he(kn),he(on),he(rn))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac})}}return o})();function ll(){return new mi}function dl(o,i,e){return new Pi(o,i,e)}var va=[{provide:rn,useFactory:ll},{provide:hn,useClass:cl},{provide:ir,useFactory:dl,deps:[pr,hn,On]}],ya=[{provide:on,useFactory:()=>new _i},{provide:Di,useValue:"BrowserAnimations"},...va],ml=[{provide:on,useClass:bo},{provide:Di,useValue:"NoopAnimations"},...va],Ma=(()=>{class o{static withConfig(e){return{ngModule:o,providers:e.disableAnimations?ml:ya}}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=Gt({type:o})}static{this.\u0275inj=Bt({providers:ya,imports:[Qn]})}}return o})();var Oa=["toast-component",""];function pl(o,i){if(o&1){let e=U();r(0,"button",5),b("click",function(){k(e);let n=P();return T(n.remove())}),r(1,"span",6),c(2,"\xD7"),a()()}}function ul(o,i){if(o&1&&(En(0),c(1),wn()),o&2){let e=P(2);l(),w("[",e.duplicatesCount+1,"]")}}function gl(o,i){if(o&1&&(r(0,"div"),c(1),O(2,ul,2,1,"ng-container",4),a()),o&2){let e=P();pt(e.options.titleClass),xn("aria-label",e.title),l(),w(" ",e.title," "),l(),u("ngIf",e.duplicatesCount)}}function fl(o,i){if(o&1&&m(0,"div",7),o&2){let e=P();pt(e.options.messageClass),u("innerHTML",e.message,Mn)}}function hl(o,i){if(o&1&&(r(0,"div",8),c(1),a()),o&2){let e=P();pt(e.options.messageClass),xn("aria-label",e.message),l(),w(" ",e.message," ")}}function _l(o,i){if(o&1&&(r(0,"div"),m(1,"div",9),a()),o&2){let e=P();l(),Sn("width",e.width+"%")}}function Cl(o,i){if(o&1){let e=U();r(0,"button",5),b("click",function(){k(e);let n=P();return T(n.remove())}),r(1,"span",6),c(2,"\xD7"),a()()}}function Pl(o,i){if(o&1&&(En(0),c(1),wn()),o&2){let e=P(2);l(),w("[",e.duplicatesCount+1,"]")}}function bl(o,i){if(o&1&&(r(0,"div"),c(1),O(2,Pl,2,1,"ng-container",4),a()),o&2){let e=P();pt(e.options.titleClass),xn("aria-label",e.title),l(),w(" ",e.title," "),l(),u("ngIf",e.duplicatesCount)}}function yl(o,i){if(o&1&&m(0,"div",7),o&2){let e=P();pt(e.options.messageClass),u("innerHTML",e.message,Mn)}}function vl(o,i){if(o&1&&(r(0,"div",8),c(1),a()),o&2){let e=P();pt(e.options.messageClass),xn("aria-label",e.message),l(),w(" ",e.message," ")}}function Ml(o,i){if(o&1&&(r(0,"div"),m(1,"div",9),a()),o&2){let e=P();l(),Sn("width",e.width+"%")}}var Oo=class{_attachedHost;component;viewContainerRef;injector;constructor(i,e){this.component=i,this.injector=e}attach(i,e){return this._attachedHost=i,i.attach(this,e)}detach(){let i=this._attachedHost;if(i)return this._attachedHost=void 0,i.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(i){this._attachedHost=i}},xo=class{_attachedPortal;_disposeFn;attach(i,e){return this._attachedPortal=i,this.attachComponentPortal(i,e)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(i){this._disposeFn=i}},So=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Ve;_activate=new Ve;_manualClose=new Ve;_resetTimeout=new Ve;_countDuplicate=new Ve;constructor(i){this._overlayRef=i}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(i,e){i&&this._resetTimeout.next(),e&&this._countDuplicate.next(++this.duplicatesCount)}},_n=class{toastId;config;message;title;toastType;toastRef;_onTap=new Ve;_onAction=new Ve;constructor(i,e,t,n,s,d){this.toastId=i,this.config=e,this.message=t,this.title=n,this.toastType=s,this.toastRef=d,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(i){this._onAction.next(i)}onAction(){return this._onAction.asObservable()}},xa={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Sa=new Yo("ToastConfig"),Eo=class extends xo{_hostDomElement;_componentFactoryResolver;_appRef;constructor(i,e,t){super(),this._hostDomElement=i,this._componentFactoryResolver=e,this._appRef=t}attachComponentPortal(i,e){let t=this._componentFactoryResolver.resolveComponentFactory(i.component),n;return n=t.create(i.injector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()}),e?this._hostDomElement.insertBefore(this._getComponentRootNode(n),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(n)),n}_getComponentRootNode(i){return i.hostView.rootNodes[0]}},Ol=(()=>{class o{_document=Ht(kn);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e=this._document.createElement("div");e.classList.add("overlay-container"),e.setAttribute("aria-live","polite"),this._document.body.appendChild(e),this._containerElement=e}static \u0275fac=function(t){return new(t||o)};static \u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),wo=class{_portalHost;constructor(i){this._portalHost=i}attach(i,e=!0){return this._portalHost.attach(i,e)}detach(){return this._portalHost.detach()}},xl=(()=>{class o{_overlayContainer=Ht(Ol);_componentFactoryResolver=Ht(nr);_appRef=Ht(Hn);_document=Ht(kn);_paneElements=new Map;create(e,t){return this._createOverlayRef(this.getPaneElement(e,t))}getPaneElement(e="",t){return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[e]||(this._paneElements.get(t)[e]=this._createPaneElement(e,t)),this._paneElements.get(t)[e]}_createPaneElement(e,t){let n=this._document.createElement("div");return n.id="toast-container",n.classList.add(e),n.classList.add("toast-container"),t?t.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(e){return new Eo(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new wo(this._createPortalHost(e))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Xt=(()=>{class o{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(e,t,n,s,d){this.overlay=t,this._injector=n,this.sanitizer=s,this.ngZone=d,this.toastrConfig=le(le({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=le(le({},e.default.iconClasses),e.config.iconClasses))}show(e,t,n={},s=""){return this._preBuildNotification(s,e,t,this.applyConfig(n))}success(e,t,n={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,e,t,this.applyConfig(n))}error(e,t,n={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,e,t,this.applyConfig(n))}info(e,t,n={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,e,t,this.applyConfig(n))}warning(e,t,n={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,e,t,this.applyConfig(n))}clear(e){for(let t of this.toasts)if(e!==void 0){if(t.toastId===e){t.toastRef.manualClose();return}}else t.toastRef.manualClose()}remove(e){let t=this._findToast(e);if(!t||(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let n=this.toasts[this.currentlyActive].toastRef;n.isInactive()||(this.currentlyActive=this.currentlyActive+1,n.activate())}return!0}findDuplicate(e="",t="",n,s){let{includeTitleDuplicates:d}=this.toastrConfig;for(let p of this.toasts){let g=d&&p.title===e;if((!d||g)&&p.message===t)return p.toastRef.onDuplicate(n,s),p}return null}applyConfig(e={}){return le(le({},this.toastrConfig),e)}_findToast(e){for(let t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===e)return{index:t,activeToast:this.toasts[t]};return null}_preBuildNotification(e,t,n,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,t,n,s)):this._buildNotification(e,t,n,s)}_buildNotification(e,t,n,s){if(!s.toastComponent)throw new Error("toastComponent required");let d=this.findDuplicate(n,t,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||t)&&this.toastrConfig.preventDuplicates&&d!==null)return d;this.previousToastMessage=t;let p=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(p=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let g=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let h=t;t&&s.enableHtml&&(h=this.sanitizer.sanitize(Jo.HTML,t));let C=new So(g),v=new _n(this.index,s,h,n,e,C),R=[{provide:_n,useValue:v}],z=$n.create({providers:R,parent:this._injector}),V=new Oo(s.toastComponent,z),B=g.attach(V,s.newestOnTop);C.componentInstance=B.instance;let ae={toastId:this.index,title:n||"",message:t||"",toastRef:C,onShown:C.afterActivate(),onHidden:C.afterClosed(),onTap:v.onTap(),onAction:v.onAction(),portal:B};return p||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ae.toastRef.activate()})),this.toasts.push(ae),ae}static \u0275fac=function(t){return new(t||o)(he(Sa),he(xl),he($n),he(Kn),he(On))};static \u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Sl=(()=>{class o{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.ngZone=n,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Xe(le({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let e=new Date().getTime(),t=this.hideTime-e;this.width=t/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Xe(le({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=Xe(le({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),t)):this.timeout=setTimeout(()=>e(),t)}outsideInterval(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),t)):this.intervalId=setInterval(()=>e(),t)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}static \u0275fac=function(t){return new(t||o)(y(Xt),y(_n),y(On))};static \u0275cmp=Q({type:o,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,n){t&1&&b("click",function(){return n.tapToast()})("mouseenter",function(){return n.stickAround()})("mouseleave",function(){return n.delayedHideToast()}),t&2&&(rr("@flyInOut",n.state),pt(n.toastClasses),Sn("display",n.displayStyle))},standalone:!0,features:[W],attrs:Oa,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,n){t&1&&O(0,pl,3,0,"button",0)(1,gl,3,5,"div",1)(2,fl,1,3,"div",2)(3,hl,2,4,"div",3)(4,_l,2,2,"div",4),t&2&&(u("ngIf",n.options.closeButton),l(),u("ngIf",n.title),l(),u("ngIf",n.message&&n.options.enableHtml),l(),u("ngIf",n.message&&!n.options.enableHtml),l(),u("ngIf",n.options.progressBar))},dependencies:[Y],encapsulation:2,data:{animation:[Qt("flyInOut",[Yn("inactive",ot({opacity:0})),Yn("active",ot({opacity:1})),Yn("removed",ot({opacity:0})),Pt("inactive => active",Ct("{{ easeTime }}ms {{ easing }}")),Pt("active => removed",Ct("{{ easeTime }}ms {{ easing }}"))])]}})}return o})(),El=Xe(le({},xa),{toastComponent:Sl}),wl=(o={})=>Zo([{provide:Sa,useValue:{default:El,config:o}}]),Ea=(()=>{class o{static forRoot(e={}){return{ngModule:o,providers:[wl(e)]}}static \u0275fac=function(t){return new(t||o)};static \u0275mod=Gt({type:o});static \u0275inj=Bt({})}return o})();var kl=(()=>{class o{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.appRef=n,this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let e=new Date().getTime(),t=this.hideTime-e;this.width=t/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(t){return new(t||o)(y(Xt),y(_n),y(Hn))};static \u0275cmp=Q({type:o,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,n){t&1&&b("click",function(){return n.tapToast()})("mouseenter",function(){return n.stickAround()})("mouseleave",function(){return n.delayedHideToast()}),t&2&&(pt(n.toastClasses),Sn("display",n.displayStyle))},standalone:!0,features:[W],attrs:Oa,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,n){t&1&&O(0,Cl,3,0,"button",0)(1,bl,3,5,"div",1)(2,yl,1,3,"div",2)(3,vl,2,4,"div",3)(4,Ml,2,2,"div",4),t&2&&(u("ngIf",n.options.closeButton),l(),u("ngIf",n.title),l(),u("ngIf",n.message&&n.options.enableHtml),l(),u("ngIf",n.message&&!n.options.enableHtml),l(),u("ngIf",n.options.progressBar))},dependencies:[Y],encapsulation:2})}return o})(),tu=Xe(le({},xa),{toastComponent:kl});var wa=(()=>{class o{constructor(e){this.authService=e}getMenuPermissions(){let e=this.authService.getUserRoles(),t={canViewCategory:!1,canViewProduct:!1,canViewCustomer:!1,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewSale:!1,canViewQuotation:!1,canViewDispatchQuotation:!1,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!1};return e.includes(Jt.ADMIN)?{canViewCategory:!0,canViewProduct:!0,canViewCustomer:!0,canViewEmployee:!0,canViewMachine:!0,canViewTransport:!0,canViewBrand:!0,canViewUser:!0,canViewEnquiry:!0,canViewFollowup:!0,canViewPayment:!0,canViewPurchase:!0,canViewSale:!0,canViewQuotation:!0,canViewDispatchQuotation:!0,canViewEmployeeWithdraw:!0,canViewAttendance:!0,canViewAllAttendance:!0,canViewEmployeeOrder:!0,canViewBatch:!0}:e.includes(Jt.SALES_AND_MARKETING)?{canViewCategory:!0,canViewProduct:!0,canViewCustomer:!0,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!0,canViewBrand:!0,canViewUser:!1,canViewEnquiry:!0,canViewFollowup:!0,canViewPayment:!0,canViewPurchase:!0,canViewSale:!0,canViewQuotation:!0,canViewDispatchQuotation:!0,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!0}:e.includes(Jt.DEALER)?{canViewCategory:!1,canViewProduct:!1,canViewCustomer:!1,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewSale:!1,canViewQuotation:!0,canViewDispatchQuotation:!0,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!1}:e.includes(Jt.DISPATCH)?{canViewCategory:!0,canViewProduct:!0,canViewCustomer:!0,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!0,canViewBrand:!0,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewSale:!1,canViewQuotation:!1,canViewDispatchQuotation:!0,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!0}:e.includes(Jt.HR)?{canViewCategory:!1,canViewProduct:!1,canViewCustomer:!1,canViewEmployee:!0,canViewMachine:!1,canViewTransport:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewSale:!1,canViewQuotation:!1,canViewDispatchQuotation:!1,canViewEmployeeWithdraw:!0,canViewAttendance:!0,canViewAllAttendance:!0,canViewEmployeeOrder:!1,canViewBatch:!1}:e.includes(Jt.REPORTER)?{canViewCategory:!0,canViewProduct:!0,canViewCustomer:!0,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewSale:!1,canViewQuotation:!1,canViewDispatchQuotation:!1,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!1}:t}hasMasterMenuItems(){let e=this.getMenuPermissions();return e.canViewCategory||e.canViewProduct||e.canViewCustomer||e.canViewEmployee||e.canViewMachine||e.canViewTransport||e.canViewBrand||e.canViewUser||e.canViewEnquiry||e.canViewFollowup||e.canViewPayment}hasTransactionMenuItems(){let e=this.getMenuPermissions();return e.canViewPurchase||e.canViewSale}hasDispatchQuotationMenuItems(){let e=this.getMenuPermissions();return e.canViewQuotation||e.canViewDispatchQuotation}hasEmployeeMenuItems(){let e=this.getMenuPermissions();return e.canViewEmployeeWithdraw||e.canViewAttendance||e.canViewAllAttendance}static{this.\u0275fac=function(t){return new(t||o)(he(mt))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Il(o,i){if(o&1&&(r(0,"div",7)(1,"span",8),c(2),a()()),o&2){let e=P();l(2),I(e.getUserRoles())}}function Dl(o,i){if(o&1){let e=U();r(0,"button",9),b("click",function(){k(e);let n=P();return T(n.toggleMobileMenu())}),m(1,"i",10),a()}if(o&2){let e=P();l(),L("fa-bars",!e.isMobileMenuOpen)("fa-times",e.isMobileMenuOpen)}}function Al(o,i){if(o&1){let e=U();r(0,"li")(1,"a",23),b("click",function(){k(e);let n=P(3);return T(n.closeAllMenus())}),m(2,"i",24),c(3," Category "),a()()}}function Fl(o,i){if(o&1){let e=U();r(0,"li")(1,"a",25),b("click",function(){k(e);let n=P(3);return T(n.closeAllMenus())}),m(2,"i",26),c(3," Product "),a()()}}function Nl(o,i){if(o&1){let e=U();r(0,"li")(1,"a",27),b("click",function(){k(e);let n=P(3);return T(n.closeAllMenus())}),m(2,"i",28),c(3," Customer / Dealer "),a()()}}function Ll(o,i){if(o&1){let e=U();r(0,"li")(1,"a",29),b("click",function(){k(e);let n=P(3);return T(n.closeAllMenus())}),m(2,"i",30),c(3," Transport "),a()()}}function Vl(o,i){if(o&1){let e=U();r(0,"li",17)(1,"a",18),b("click",function(n){k(e);let s=P(2);return T(s.toggleMasterMenu(n))}),m(2,"i",19),c(3," Master "),m(4,"i",20),a(),r(5,"ul",21),O(6,Al,4,0,"li",22)(7,Fl,4,0,"li",22)(8,Nl,4,0,"li",22)(9,Ll,4,0,"li",22),a()()}if(o&2){let e=P(2);l(),L("active",e.isMasterActive()),l(4),L("show",e.showMasterMenu),l(),u("ngIf",e.permissions.canViewCategory),l(),u("ngIf",e.permissions.canViewProduct),l(),u("ngIf",e.permissions.canViewCustomer),l(),u("ngIf",e.permissions.canViewTransport)}}function Rl(o,i){if(o&1){let e=U();r(0,"li")(1,"a",32),b("click",function(){k(e);let n=P(3);return T(n.closeAllMenus())}),m(2,"i",33),c(3," Purchase "),a()()}}function zl(o,i){if(o&1){let e=U();r(0,"li")(1,"a",34),b("click",function(){k(e);let n=P(3);return T(n.closeAllMenus())}),m(2,"i",35),c(3," Sale "),a()()}}function jl(o,i){if(o&1){let e=U();r(0,"li",17)(1,"a",18),b("click",function(n){k(e);let s=P(2);return T(s.toggleTransactionMenu(n))}),m(2,"i",31),c(3," Transaction "),m(4,"i",20),a(),r(5,"ul",21),O(6,Rl,4,0,"li",22)(7,zl,4,0,"li",22),a()()}if(o&2){let e=P(2);l(),L("active",e.isTransactionActive()),l(4),L("show",e.showTransactionMenu),l(),u("ngIf",e.permissions.canViewPurchase),l(),u("ngIf",e.permissions.canViewSale)}}function $l(o,i){if(o&1){let e=U();r(0,"li")(1,"a",36),b("click",function(){k(e);let n=P(3);return T(n.closeAllMenus())}),m(2,"i",35),c(3," Order "),a()()}}function ql(o,i){if(o&1){let e=U();r(0,"li")(1,"a",37),b("click",function(){k(e);let n=P(3);return T(n.closeAllMenus())}),m(2,"i",33),c(3," Dispatch Quotation "),a()()}}function Ul(o,i){if(o&1){let e=U();r(0,"li",17)(1,"a",18),b("click",function(n){k(e);let s=P(2);return T(s.toggleDispatchQuotationMenu(n))}),m(2,"i",31),c(3," Dispatch Order "),m(4,"i",20),a(),r(5,"ul",21),O(6,$l,4,0,"li",22)(7,ql,4,0,"li",22),a()()}if(o&2){let e=P(2);l(),L("active",e.isDispatchQuotationActive()),l(4),L("show",e.showDispatchQuotationMenu),l(),u("ngIf",e.permissions.canViewQuotation),l(),u("ngIf",e.permissions.canViewDispatchQuotation)}}function Bl(o,i){if(o&1){let e=U();r(0,"div",11)(1,"ul",12),O(2,Vl,10,8,"li",13)(3,jl,8,6,"li",13)(4,Ul,8,6,"li",13),a(),r(5,"div",14)(6,"button",15),b("click",function(){k(e);let n=P();return T(n.logout())}),m(7,"i",16),c(8," Logout "),a()()()}if(o&2){let e=P();L("show",e.isMobileMenuOpen),l(2),u("ngIf",e.hasMasterMenuItems()),l(),u("ngIf",e.hasTransactionMenuItems()),l(),u("ngIf",e.hasDispatchQuotationMenuItems())}}var ka=(()=>{class o{constructor(e,t,n){this.authService=e,this.roleService=t,this.router=n,this.isAuthenticated=!1,this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1,this.isMobileMenuOpen=!1,this.permissions={canViewCategory:!1,canViewProduct:!1,canViewCustomer:!1,canViewEmployee:!1,canViewMachine:!1,canViewTransport:!1,canViewBrand:!1,canViewUser:!1,canViewEnquiry:!1,canViewFollowup:!1,canViewPayment:!1,canViewPurchase:!1,canViewSale:!1,canViewQuotation:!1,canViewDispatchQuotation:!1,canViewEmployeeWithdraw:!1,canViewAttendance:!1,canViewAllAttendance:!1,canViewEmployeeOrder:!1,canViewBatch:!1},this.authSubscription=this.authService.authState$.subscribe(s=>{this.isAuthenticated=s,s&&(this.permissions=this.roleService.getMenuPermissions())})}ngOnInit(){this.authService.authState$.subscribe(e=>{this.isAuthenticated=e,e&&(this.permissions=this.roleService.getMenuPermissions()),this.isAuthenticated&&!localStorage.getItem("userRoles")&&this.authService.logout()})}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()}onDocumentClick(e){let t=e.target;!t.closest(".dropdown")&&!t.closest(".mobile-menu-toggle")&&(this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1,t.closest(".nav-links")||(this.isMobileMenuOpen=!1))}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}toggleMasterMenu(e){e.preventDefault(),e.stopPropagation(),this.showMasterMenu=!this.showMasterMenu,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1}toggleTransactionMenu(e){e.preventDefault(),e.stopPropagation(),this.showTransactionMenu=!this.showTransactionMenu,this.showMasterMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1}toggleQuotationMenu(e){e.preventDefault(),e.stopPropagation(),this.showQuotationMenu=!this.showQuotationMenu,this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1}toggleDispatchQuotationMenu(e){e.preventDefault(),e.stopPropagation(),this.showDispatchQuotationMenu=!this.showDispatchQuotationMenu,this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showEmployeeMenu=!1}toggleEmployeeMenu(e){e.preventDefault(),e.stopPropagation(),this.showEmployeeMenu=!this.showEmployeeMenu,this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1}isMasterActive(){let e=this.router.url;return["/category","/product","/customer","/employee"].some(t=>e.includes(t))}isTransactionActive(){let e=this.router.url;return["/purchase","/sale","/profit","/daily-profit"].some(t=>e.includes(t))}isQuotationActive(){let e=this.router.url;return["/quotation","/quotation/order"].some(t=>e.includes(t))}isDispatchQuotationActive(){let e=this.router.url;return["/quotation/dispatch-list"].some(t=>e.includes(t))}isEmployeeActive(){let e=this.router.url;return["/attendance","/attendance/all","/employee-withdraw"].some(t=>e.includes(t))}closeAllMenus(){this.showMasterMenu=!1,this.showTransactionMenu=!1,this.showQuotationMenu=!1,this.showDispatchQuotationMenu=!1,this.showEmployeeMenu=!1}hasMasterMenuItems(){return this.roleService.hasMasterMenuItems()}hasTransactionMenuItems(){return this.roleService.hasTransactionMenuItems()}hasDispatchQuotationMenuItems(){return this.roleService.hasDispatchQuotationMenuItems()}hasEmployeeMenuItems(){return this.roleService.hasEmployeeMenuItems()}getUserDisplayName(){let e=JSON.parse(localStorage.getItem("user")||"{}");return`${e.firstName||""} ${e.lastName||""}`.trim()||"User"}getUserRoles(){return this.authService.getUserRoles().join(", ")||"No roles"}logout(){this.authService.logout(),window.location.href=window.location.origin+"/login?_t="+new Date().getTime()}isAdmin(){return this.authService.isAdmin()}isProductManager(){return this.authService.isProductManager()}canViewMenu(e){if(this.isAdmin())return!0;if(this.isProductManager())switch(e){case"category":case"product":case"quotation":case"attendance":return!0;default:return!1}return!1}static{this.\u0275fac=function(t){return new(t||o)(y(mt),y(wa),y(Ne))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-header"]],hostBindings:function(t,n){t&1&&b("click",function(d){return n.onDocumentClick(d)},!1,er)},decls:9,vars:3,consts:[[1,"header"],[1,"nav-container"],[1,"nav-top"],[1,"logo"],["class","user-info",4,"ngIf"],["class","mobile-menu-toggle",3,"click",4,"ngIf"],["class","nav-content",3,"show",4,"ngIf"],[1,"user-info"],[1,"user-roles"],[1,"mobile-menu-toggle",3,"click"],[1,"fas"],[1,"nav-content"],[1,"nav-links"],["class","dropdown",4,"ngIf"],[1,"nav-actions"],[1,"btn","btn-logout",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"dropdown"],[3,"click"],[1,"fas","fa-th-large"],[1,"fas","fa-chevron-down"],[1,"dropdown-menu"],[4,"ngIf"],["routerLink","/category","routerLinkActive","active",3,"click"],[1,"fas","fa-tags"],["routerLink","/product","routerLinkActive","active",3,"click"],[1,"fas","fa-box"],["routerLink","/customer","routerLinkActive","active",3,"click"],[1,"fas","fa-users"],["routerLink","/transport-master","routerLinkActive","active",3,"click"],[1,"fas","fa-truck"],[1,"fas","fa-exchange-alt"],["routerLink","/purchase","routerLinkActive","active",3,"click"],[1,"fas","fa-shopping-cart"],["routerLink","/sale","routerLinkActive","active",3,"click"],[1,"fas","fa-hand-holding-usd"],["routerLink","/quotation","routerLinkActive","active",3,"click"],["routerLink","/quotation/dispatch-list","routerLinkActive","active",3,"click"]],template:function(t,n){t&1&&(r(0,"header",0)(1,"nav",1)(2,"div",2)(3,"div",3)(4,"span"),c(5,"Several Polymers"),a()(),O(6,Il,3,1,"div",4)(7,Dl,2,4,"button",5),a(),O(8,Bl,9,5,"div",6),a()()),t&2&&(l(6),u("ngIf",n.isAuthenticated),l(),u("ngIf",n.isAuthenticated),l(),u("ngIf",n.isAuthenticated))},dependencies:[Y,Ge,Or],styles:[".header[_ngcontent-%COMP%]{background-color:var(--secondary);padding:0;box-shadow:0 2px 4px #0000001a;position:sticky;top:0;z-index:1000}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:5px 1rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]{display:none;justify-content:space-between;align-items:center;padding:1rem 0}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:700}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]   .mobile-menu-toggle[_ngcontent-%COMP%]{display:none}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{display:flex;gap:1rem;list-style:none;margin:0;padding:0;align-items:center}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;color:#fff;text-decoration:none;cursor:pointer;border-radius:4px;transition:all .3s ease}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   i.fa-chevron-down[_ngcontent-%COMP%]{font-size:.8rem;transition:transform .3s}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]{background-color:var(--primary)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;background:#fff;min-width:200px;border-radius:4px;box-shadow:0 4px 6px #0000001a;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease;z-index:1001}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:.75rem 1rem;color:var(--text-primary);text-decoration:none;transition:all .3s ease}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:var(--background);color:var(--primary)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;padding:.75rem 1rem;border-radius:4px;transition:all .3s ease}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]{background-color:var(--primary)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{background:transparent;color:#fff;border:1px solid white;padding:.5rem 1rem;border-radius:4px;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:.5rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background:#fff;color:var(--secondary)}@media (max-width: 1024px){.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]{padding:0px auto}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{gap:.25rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding:.5rem;font-size:.9rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{min-width:180px}}@media (max-width: 768px){.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-top[_ngcontent-%COMP%]   .mobile-menu-toggle[_ngcontent-%COMP%]{display:block;background:transparent;border:none;color:#fff;font-size:1.5rem;cursor:pointer;padding:.5rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-content[_ngcontent-%COMP%]{display:none;position:fixed;inset:64px 0 0;background-color:var(--secondary);padding:1rem;overflow-y:auto;transition:transform .3s ease;transform:translate(-100%)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-content.show[_ngcontent-%COMP%]{display:block;transform:translate(0)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{flex-direction:column;width:100%;gap:.5rem}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{justify-content:space-between;background-color:#ffffff1a;margin-bottom:2px}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]   i.fa-chevron-down[_ngcontent-%COMP%]{transform:rotate(0);transition:transform .3s}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]   i.fa-chevron-down[_ngcontent-%COMP%]{transform:rotate(180deg)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:static;background:transparent;box-shadow:none;opacity:1;visibility:visible;transform:none;padding-left:1rem;display:none}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu.show[_ngcontent-%COMP%]{display:block}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;padding:.75rem 1rem;background-color:#ffffff0d;margin-bottom:2px}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{background-color:#ffffff1a;margin-bottom:2px}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid rgba(255,255,255,.2)}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]{width:100%;justify-content:center;background-color:#ffffff1a}.header[_ngcontent-%COMP%]   .nav-container[_ngcontent-%COMP%]   .nav-actions[_ngcontent-%COMP%]   .btn-logout[_ngcontent-%COMP%]:hover{background-color:var(--primary);border-color:var(--primary);color:#fff}}"]})}}return o})();var Ta=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=Q({type:o,selectors:[["app-root"]],decls:2,vars:0,template:function(t,n){t&1&&m(0,"app-header")(1,"router-outlet")},dependencies:[Mr,ka],encapsulation:2})}}return o})();function Gl(o,i){o&1&&(r(0,"span"),c(1,"Email is required"),a())}function Ql(o,i){o&1&&(r(0,"span"),c(1,"Invalid email format"),a())}function Kl(o,i){if(o&1&&(r(0,"div",10),O(1,Gl,2,0,"span",11)(2,Ql,2,0,"span",11),a()),o&2){let e,t,n=P();l(),u("ngIf",(e=n.loginForm.get("email"))==null||e.errors==null?null:e.errors.required),l(),u("ngIf",(t=n.loginForm.get("email"))==null||t.errors==null?null:t.errors.email)}}function Yl(o,i){o&1&&(r(0,"span"),c(1,"Password is required"),a())}function Zl(o,i){if(o&1&&(r(0,"div",10),O(1,Yl,2,0,"span",11),a()),o&2){let e,t=P();l(),u("ngIf",(e=t.loginForm.get("password"))==null||e.errors==null?null:e.errors.required)}}var Ia=(()=>{class o{constructor(e,t,n,s,d){this.fb=e,this.authService=t,this.router=n,this.snackbar=s,this.platformId=d,this.isLoading=!1,this.destroy$=new Ve,this.loginForm=this.fb.group({email:["",[x.required,x.email]],password:["",x.required]})}onSubmit(){this.loginForm.valid?(this.isLoading=!0,this.authService.login(this.loginForm.value).pipe(Pe(this.destroy$)).subscribe({next:e=>{dr(this.platformId)&&(localStorage.setItem("token",e.accessToken),localStorage.setItem("user",JSON.stringify(e.user))),this.snackbar.success("Login successful"),this.router.navigate(["/category"])},error:e=>{this.snackbar.error(e?.error?.message||"Login failed"),this.isLoading=!1}})):this.snackbar.warning("Please fill in all required fields correctly")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(mt),y(Ne),y(ve),y(Xo))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-login"]],decls:17,vars:5,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"error-message"],[4,"ngIf"]],template:function(t,n){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Login"),a(),r(4,"form",2),b("ngSubmit",function(){return n.onSubmit()}),r(5,"div",3)(6,"label",4),c(7,"Email"),a(),m(8,"input",5),O(9,Kl,3,2,"div",6),a(),r(10,"div",3)(11,"label",7),c(12,"Password"),a(),m(13,"input",8),O(14,Zl,2,1,"div",6),a(),r(15,"button",9),c(16),a()()()()),t&2){let s,d;l(4),u("formGroup",n.loginForm),l(5),u("ngIf",((s=n.loginForm.get("email"))==null?null:s.touched)&&((s=n.loginForm.get("email"))==null?null:s.invalid)),l(5),u("ngIf",((d=n.loginForm.get("password"))==null?null:d.touched)&&((d=n.loginForm.get("password"))==null?null:d.invalid)),l(),u("disabled",n.loginForm.invalid||n.isLoading),l(),w(" ",n.isLoading?"Logging in...":"Login"," ")}},dependencies:[Y,me,ie,oe,de,pe,ue],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Roboto,sans-serif;background-color:var(--background);color:var(--text-primary)}.container[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width: 576px){.container[_ngcontent-%COMP%]{max-width:540px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:720px}}@media (min-width: 992px){.container[_ngcontent-%COMP%]{max-width:960px}}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{max-width:1140px}}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0a9fe2}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#102539}.form-control[_ngcontent-%COMP%]{width:90%;padding:10px;border:1px solid var(--supporting);border-radius:4px!important;margin-bottom:15px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem;background-color:#fff;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--supporting)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#aec6cf1a}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;margin-bottom:20px}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-2[_ngcontent-%COMP%]{margin-top:1rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:1rem}.p-2[_ngcontent-%COMP%]{padding:1rem}.custom-dialog-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background-color:#00000080!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{border-radius:12px!important;padding:0!important;box-shadow:0 8px 32px #0000001a!important;background:#fff!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%], .custom-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{padding:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dialog-enter .3s ease-out}@keyframes _ngcontent-%COMP%_dialog-enter{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@media (max-width: 576px){.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{margin:16px!important}}.custom-snackbar-container[_ngcontent-%COMP%]{position:fixed!important;z-index:1001!important;transform:none!important;-webkit-transform:none!important;-ms-transform:none!important}.custom-snackbar-container.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{position:fixed!important;margin:0!important;max-width:none!important;inset:20px 20px auto auto!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__surface[_ngcontent-%COMP%]{background:none!important;box-shadow:none!important;min-width:auto!important;min-height:auto!important;padding:0!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-label[_ngcontent-%COMP%], .custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__label[_ngcontent-%COMP%]{padding:0!important}@media (max-width: 576px){.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:10px!important;max-width:calc(100% - 20px)!important}}.search-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:40px;max-width:90px}.refresh[_ngcontent-%COMP%], .calculator[_ngcontent-%COMP%]{width:33px;height:33px;display:flex;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center;background-color:#e1f5fe}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 4px 6px #0000001a;width:100%;max-width:400px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1c3f60;text-align:center;margin-bottom:2rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#333}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:1rem;margin-top:1rem;background-color:#17a3de;color:#fff}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   .btn-block[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}@media (max-width: 576px){.login-container[_ngcontent-%COMP%]{padding:1rem}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})}}return o})();var Da=(()=>{class o{constructor(e){this.authService=e}intercept(e,t){if(e.url.includes("/api/refresh-token/new"))return t.handle(e);let n=this.authService.getToken();return n&&(e=e.clone({setHeaders:{Authorization:`Bearer ${n}`}})),t.handle(e)}static{this.\u0275fac=function(t){return new(t||o)(he(mt))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac})}}return o})();var Aa=(()=>{class o{constructor(e,t){this.authService=e,this.router=t,this.isRefreshing=!1}intercept(e,t){return t.handle(e).pipe(Ti(n=>n.status===401&&!e.url.includes("refresh-token")?this.handle401Error(e,t):ki(()=>n)))}handle401Error(e,t){return this.isRefreshing?t.handle(e):(this.isRefreshing=!0,this.authService.refreshToken().pipe(Ko(n=>{this.isRefreshing=!1;let s=e.clone({setHeaders:{Authorization:`Bearer ${n.data.token}`}});return t.handle(s)}),Ti(n=>(this.isRefreshing=!1,this.authService.logout(),window.location.href=window.location.origin+"/login?_t="+new Date().getTime(),ki(()=>n)))))}static{this.\u0275fac=function(t){return new(t||o)(he(mt),he(Ne))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac})}}return o})();var bi=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${ct.apiUrl}/api/categories`}getCategories(e){return this.http.post(`${this.apiUrl}/getCategories`,e)}searchCategories(e){return this.http.post(`${this.apiUrl}/search`,e)}createCategory(e){return this.http.post(`${this.apiUrl}`,e)}updateCategory(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}deleteCategory(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(t){return new(t||o)(he(Je))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function Wl(o,i){if(o&1){let e=U();r(0,"tr")(1,"td"),c(2),a(),r(3,"td")(4,"span"),c(5),a()(),r(6,"td")(7,"button",22),b("click",function(){let n=k(e).$implicit,s=P();return T(s.editCategory(n))}),m(8,"i",23),a(),r(9,"button",24),b("click",function(){let n=k(e).$implicit,s=P();return T(s.deleteCategory(n.id))}),m(10,"i",25),a()()()}if(o&2){let e=i.$implicit;l(2),I(e.name),l(2),pt("status-badge "+(e.status==="A"?"active":"inactive")),l(),w(" ",e.status==="A"?"Active":"Inactive"," ")}}function Xl(o,i){o&1&&(r(0,"tr")(1,"td",26),c(2,"No categories found"),a()())}function Jl(o,i){if(o&1){let e=U();r(0,"app-pagination",27),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}function ed(o,i){if(o&1){let e=U();r(0,"div",28),b("click",function(){k(e);let n=P();return T(n.closeDialog())}),a()}}function td(o,i){o&1&&(r(0,"div",44),c(1," Category name is required "),a())}function nd(o,i){o&1&&m(0,"span",45)}function id(o,i){if(o&1){let e=U();r(0,"div",29)(1,"div",30)(2,"h2"),c(3),a(),r(4,"button",31),b("click",function(){k(e);let n=P();return T(n.closeDialog())}),c(5,"\xD7"),a()(),r(6,"div",32)(7,"form",33),b("ngSubmit",function(){k(e);let n=P();return T(n.onSubmit())}),r(8,"div",34)(9,"label",35),c(10,"Category Name"),a(),m(11,"input",36),O(12,td,2,0,"div",37),a(),r(13,"div",34)(14,"label",38),c(15,"Status"),a(),r(16,"select",39)(17,"option",8),c(18,"Active"),a(),r(19,"option",9),c(20,"Inactive"),a()()(),r(21,"div",40)(22,"button",41),b("click",function(){k(e);let n=P();return T(n.closeDialog())}),c(23,"Cancel"),a(),r(24,"button",42),O(25,nd,1,0,"span",43),c(26),a()()()()()}if(o&2){let e,t,n=P();u("@dialogAnimation",void 0),l(3),w("",n.isEditing?"Edit":"Create"," Category"),l(4),u("formGroup",n.categoryForm),l(4),L("is-invalid",((e=n.categoryForm.get("name"))==null?null:e.invalid)&&((e=n.categoryForm.get("name"))==null?null:e.touched)),l(),u("ngIf",((t=n.categoryForm.get("name"))==null?null:t.invalid)&&((t=n.categoryForm.get("name"))==null?null:t.touched)),l(12),u("disabled",n.categoryForm.invalid||n.isLoading),l(),u("ngIf",n.isLoading),l(),w(" ",n.isEditing?"Update":"Create"," ")}}var Na=(()=>{class o{constructor(e,t,n){this.categoryService=e,this.fb=t,this.snackbar=n,this.categories=[],this.isLoading=!1,this.isEditing=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.isDialogOpen=!1,this.destroy$=new Ve,this.categoryForm=this.fb.group({name:["",x.required],status:["A",x.required]}),this.searchForm=this.fb.group({search:[""],status:["A"]})}ngOnInit(){this.loadCategories()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.categories=[]}openCreateDialog(){this.isEditing=!1,this.editingId=void 0,this.categoryForm.reset({status:"A"}),this.isDialogOpen=!0}closeDialog(){this.categoryForm.dirty||(this.isLoading=!1),this.isDialogOpen=!1,this.resetForm()}loadCategories(){this.isLoading=!0;let e=Xe(le({},this.searchForm.value),{size:this.pageSize,page:this.currentPage});this.categoryService.searchCategories(e).pipe(Pe(this.destroy$),Qo(()=>this.isLoading=!1)).subscribe({next:t=>{this.categories=t.data.content,this.totalPages=t.data.totalPages,this.totalElements=t.data.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements),this.isLoading=!1},error:t=>{let n=t?.error?.message||"Failed to load categories";this.snackbar.error(n),this.isLoading=!1}})}onSubmit(){if(this.categoryForm.valid){this.isLoading=!0;let e=this.categoryForm.value;(this.isEditing&&this.editingId?this.categoryService.updateCategory(this.editingId,e):this.categoryService.createCategory(e)).pipe(Pe(this.destroy$)).subscribe({next:n=>{n?.success?(this.snackbar.success(n.message||"Category saved successfully"),this.closeDialog(),this.loadCategories()):(this.snackbar.error(n.message||"Operation failed"),this.isLoading=!1)},error:n=>{let s=n?.error?.message||"Operation failed";this.snackbar.error(s),this.isLoading=!1}})}else Object.keys(this.categoryForm.controls).forEach(e=>{let t=this.categoryForm.get(e);t?.invalid&&t.markAsTouched()})}editCategory(e){if(!e.id){this.snackbar.error("Invalid category ID");return}this.isEditing=!0,this.editingId=e.id,this.categoryForm.patchValue({name:e.name,status:e.status}),this.isDialogOpen=!0}deleteCategory(e){this.isLoading=!0,confirm("Are you sure you want to delete this category?")&&this.categoryService.deleteCategory(e).pipe(Pe(this.destroy$)).subscribe({next:t=>{t?.success?(this.snackbar.success(t.message||"Category deleted successfully"),this.loadCategories()):this.snackbar.error(t.message||"Failed to delete category")},error:t=>{let n=t?.error?.message||"Failed to delete category";this.snackbar.error(n),this.isLoading=!1}})}resetForm(){this.isEditing=!1,this.editingId=void 0,this.categoryForm.reset({status:"A"}),this.categoryForm.markAsPristine(),this.categoryForm.markAsUntouched()}onSearch(){this.loadCategories()}onPageChange(e){this.currentPage=e,this.loadCategories()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadCategories()}static{this.\u0275fac=function(t){return new(t||o)(y(bi),y(re),y(ve))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-category"]],standalone:!0,features:[W],decls:39,vars:7,consts:[[1,"category-container"],[3,"show"],[1,"search-section","card"],[1,"search-container"],[1,"search-form",3,"formGroup"],[1,"search-inputs"],["type","text","placeholder","Search categories...","formControlName","search",1,"form-control"],["formControlName","status",1,"form-control"],["value","A"],["value","I"],[1,"search-btn","btn","btn-primary",3,"click"],[1,"fas","fa-search","me-2"],[1,"btn","btn-sm","btn-primary","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"categories-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],["class","dialog-backdrop",3,"click",4,"ngIf"],["class","dialog",4,"ngIf"],["title","Edit",1,"btn","btn-icon",3,"click"],[1,"fas","fa-edit"],["title","Delete",1,"btn","btn-icon",3,"click"],[1,"fas","fa-trash"],["colspan","3",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"],[1,"dialog-backdrop",3,"click"],[1,"dialog"],[1,"dialog-header"],[1,"close-button",3,"click"],[1,"dialog-content"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","status"],["id","status","formControlName","status",1,"form-control"],[1,"dialog-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"h3"),c(4,"Search Categories"),a(),r(5,"div",3)(6,"form",4)(7,"div",5),m(8,"input",6),r(9,"select",7)(10,"option",8),c(11,"Active"),a(),r(12,"option",9),c(13,"Inactive"),a()(),r(14,"button",10),b("click",function(){return n.onSearch()}),m(15,"i",11),c(16," Search "),a()()()()(),r(17,"button",12),b("click",function(){return n.openCreateDialog()}),m(18,"i",13),c(19," Create Category "),a(),r(20,"div",14)(21,"h2"),c(22,"Categories"),a(),r(23,"div",15)(24,"table",16)(25,"thead")(26,"tr")(27,"th"),c(28,"Name"),a(),r(29,"th"),c(30,"Status"),a(),r(31,"th"),c(32,"Actions"),a()()(),r(33,"tbody"),O(34,Wl,11,4,"tr",17)(35,Xl,3,0,"tr",18),a()()(),O(36,Jl,1,4,"app-pagination",19),a()(),O(37,ed,1,0,"div",20)(38,id,27,9,"div",21)),t&2&&(l(),u("show",n.isLoading),l(5),u("formGroup",n.searchForm),l(28),u("ngForOf",n.categories),l(),u("ngIf",n.categories.length===0),l(),u("ngIf",n.totalPages>0),l(),u("ngIf",n.isDialogOpen),l(),u("ngIf",n.isDialogOpen))},dependencies:[ne,Fe,Y,ge,me,tt,nt,ie,et,oe,de,pe,ue,Le,xe,$e,Ze],styles:[".category-container[_ngcontent-%COMP%]{position:relative;min-height:200px;padding:2rem;margin:0 auto}.category-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:2rem}.category-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-end}.category-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.category-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:42px}.category-container[_ngcontent-%COMP%]   .category-form[_ngcontent-%COMP%]{margin-bottom:2rem}.category-container[_ngcontent-%COMP%]   .category-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .badge-active[_ngcontent-%COMP%]{background-color:var(--accent2);color:#fff;padding:.25rem .5rem;border-radius:4px}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .badge-inactive[_ngcontent-%COMP%]{background-color:var(--text-secondary);color:#fff;padding:.25rem .5rem;border-radius:4px}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:4px;transition:background-color .3s}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background-color:#0000001a}.category-container[_ngcontent-%COMP%]   .categories-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary);white-space:nowrap}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{width:auto;min-width:80px;padding:.5rem;margin-bottom:0;border-color:var(--supporting);background-color:#fff;cursor:pointer}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 2px #fd78231a}.category-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:.5rem}@media (max-width: 768px){.category-container[_ngcontent-%COMP%]{padding:1rem}.category-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column}.category-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.table-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{width:100%}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{flex:1}}.search-container[_ngcontent-%COMP%]{margin-bottom:1rem}.search-container[_ngcontent-%COMP%]   .search-form[_ngcontent-%COMP%]{display:flex;gap:1rem}.search-container[_ngcontent-%COMP%]   .search-inputs[_ngcontent-%COMP%]{display:flex;gap:1rem;width:100%;max-height:57px}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]   .search-inputs[_ngcontent-%COMP%]{flex-direction:column}}.create-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:1rem}.dialog-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000}.dialog[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:12px;min-width:400px;max-width:90%;width:500px;z-index:1001;box-shadow:0 8px 32px #0000001a}@media (max-width: 576px){.dialog[_ngcontent-%COMP%]{min-width:90%;margin:0 16px}}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--supporting)}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--text-primary)}.dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:var(--text-secondary);cursor:pointer;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease}.dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:var(--text-primary)}.dialog-content[_ngcontent-%COMP%]{padding:1.5rem}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem}.table-responsive[_ngcontent-%COMP%]{margin:1rem 0}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:50px;font-size:.875rem;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#7676761a;color:var(--text-secondary)}.btn-icon[_ngcontent-%COMP%]{width:32px;height:32px;padding:0;display:inline-flex;align-items:center;justify-content:center;border-radius:4px;margin:0 .25rem;background:none;border:none;color:var(--text-secondary);transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:var(--text-primary)}.items-per-page[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:auto;display:inline-block}"],data:{animation:[Qt("dialogAnimation",[Pt(":enter",[ot({transform:"translate(-50%, -48%) scale(0.95)",opacity:0}),Ct("200ms ease-out",ot({transform:"translate(-50%, -50%) scale(1)",opacity:1}))]),Pt(":leave",[Ct("150ms ease-in",ot({transform:"translate(-50%, -48%) scale(0.95)",opacity:0}))])])]}})}}return o})();var Io=o=>({"negative-quantity":o});function od(o,i){if(o&1&&(r(0,"option",27),c(1),a()),o&2){let e=i.$implicit;u("value",e.id),l(),w(" ",e.name," ")}}function rd(o,i){if(o&1){let e=U();r(0,"tr"),m(1,"td",28),r(2,"td"),c(3),a(),r(4,"td"),c(5),a(),r(6,"td"),c(7),a(),r(8,"td"),c(9),a(),r(10,"td")(11,"span"),c(12),a()(),r(13,"td",29),c(14),a(),r(15,"td",29),c(16),a(),r(17,"td",29),c(18),a(),r(19,"td"),c(20),a(),r(21,"td"),c(22),a(),r(23,"td",30)(24,"button",31),b("click",function(){let n=k(e).$implicit,s=P();return T(s.editProduct(n))}),m(25,"i",32),a(),r(26,"button",33),b("click",function(){let n=k(e).$implicit,s=P();return T(s.deleteProduct(n.id))}),m(27,"i",34),a()()()}if(o&2){let e,t,n,s,d,p,g=i.$implicit,h=P();l(),u("innerHTML",h.sanitizeHtml(g.name),Mn),l(2),I(g.hsnCode),l(2),I(g.categoryName),l(2),I(g.description),l(2),I(g.minimumStock),l(2),L("badge-active",g.status==="A")("badge-inactive",g.status==="I"),l(),w(" ",g.status==="A"?"Active":"Inactive"," "),l(),u("ngClass",ut(18,Io,((e=g==null?null:g.remainingQuantity)!==null&&e!==void 0?e:0)<0)),l(),w(" ",(t=g==null?null:g.remainingQuantity)!==null&&t!==void 0?t:0," "),l(),u("ngClass",ut(20,Io,((n=g==null?null:g.blockedQuantity)!==null&&n!==void 0?n:0)<0)),l(),w(" ",(s=g==null?null:g.blockedQuantity)!==null&&s!==void 0?s:0," "),l(),u("ngClass",ut(22,Io,((d=g==null?null:g.totalRemainingQuantity)!==null&&d!==void 0?d:0)<0)),l(),w(" ",(p=g==null?null:g.totalRemainingQuantity)!==null&&p!==void 0?p:0," "),l(2),I(g.purchaseAmount),l(2),I(g.saleAmount)}}function ad(o,i){if(o&1){let e=U();r(0,"app-pagination",35),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}function sd(o,i){if(o&1){let e=U();r(0,"div",36),b("click",function(){k(e);let n=P();return T(n.closeDialog())}),a()}}function cd(o,i){o&1&&(r(0,"div",89),c(1," Product name is required "),a())}function ld(o,i){if(o&1&&(r(0,"option",27),c(1),a()),o&2){let e=i.$implicit;u("value",e.id),l(),w(" ",e.name," ")}}function dd(o,i){o&1&&(r(0,"div",89),c(1," Category is required "),a())}function md(o,i){o&1&&(r(0,"div",89),c(1," Minimum stock must be 0 or greater "),a())}function pd(o,i){o&1&&(r(0,"div",89),c(1," Tax percentage must be between 0 and 100 "),a())}function ud(o,i){if(o&1){let e=U();r(0,"div",37)(1,"div",38)(2,"h2"),m(3,"i"),c(4),a(),r(5,"button",39),b("click",function(){k(e);let n=P();return T(n.closeDialog())}),m(6,"i",40),a()(),r(7,"form",3),b("ngSubmit",function(){k(e);let n=P();return T(n.onSubmit())}),r(8,"div",41)(9,"div",5)(10,"label",42),m(11,"i",43),c(12," Product Name "),r(13,"span",44),c(14,"*"),a()(),r(15,"div",45)(16,"button",46),b("click",function(){k(e);let n=P();return T(n.toggleBold())}),c(17," B "),a(),m(18,"div",47),a(),O(19,cd,2,0,"div",48),a(),r(20,"div",5)(21,"label",49),m(22,"i",50),c(23," HSN Code "),a(),m(24,"input",51),a(),r(25,"div",5)(26,"label",52),m(27,"i",53),c(28," Category "),r(29,"span",44),c(30,"*"),a()(),r(31,"select",54)(32,"option",55),c(33,"Select Category"),a(),O(34,ld,2,2,"option",10),a(),O(35,dd,2,0,"div",48),a(),r(36,"div",5)(37,"label",56),m(38,"i",57),c(39," Minimum Stock "),r(40,"span",44),c(41,"*"),a()(),m(42,"input",58),O(43,md,2,0,"div",48),a(),r(44,"div",5)(45,"label",59),m(46,"i",60),c(47," Status "),a(),r(48,"select",61)(49,"option",12),c(50,"Active"),a(),r(51,"option",13),c(52,"Inactive"),a()()(),r(53,"div",5)(54,"label",62),m(55,"i",63),c(56," Purchase Amount "),r(57,"span",44),c(58,"*"),a()(),m(59,"input",64),a(),r(60,"div",5)(61,"label",65),m(62,"i",63),c(63," Sale Amount "),r(64,"span",44),c(65,"*"),a()(),m(66,"input",66),a(),r(67,"div",5)(68,"label",67),m(69,"i",68),c(70," Measurement "),r(71,"span",44),c(72,"*"),a()(),m(73,"input",69),a(),r(74,"div",5)(75,"label",70),m(76,"i",71),c(77," Tax Percentage "),r(78,"span",44),c(79,"*"),a()(),m(80,"input",72),O(81,pd,2,0,"div",48),a(),r(82,"div",5)(83,"label",73),m(84,"i",57),c(85," Remaining Quantity "),r(86,"span",44),c(87,"*"),a()(),r(88,"input",74),b("input",function(){k(e);let n=P();return T(n.validateRemainingQuantity())}),a()(),r(89,"div",5)(90,"label",75),m(91,"i",76),c(92," Blocked Amount "),a(),m(93,"input",77),a(),r(94,"div",5)(95,"label",78),m(96,"i",79),c(97," Total Remaining Amount "),a(),m(98,"input",80),a(),r(99,"div",81)(100,"label",82),m(101,"i",83),c(102," Description "),a(),m(103,"textarea",84),a()(),r(104,"div",85)(105,"button",86),b("click",function(){k(e);let n=P();return T(n.closeDialog())}),m(106,"i",40),c(107," Cancel "),a(),r(108,"button",87),m(109,"i",88),c(110),a()()()()}if(o&2){let e,t,n,s,d,p,g,h=P();u("@dialogAnimation",void 0),l(3),or("fas ",h.isEditing?"fa-edit":"fa-plus-circle",""),l(),w(" ",h.isEditing?"Edit":"Create"," Product "),l(3),u("formGroup",h.productForm),l(11),L("is-invalid",((e=h.productForm.get("name"))==null?null:e.invalid)&&((e=h.productForm.get("name"))==null?null:e.touched)),l(),u("ngIf",((t=h.productForm.get("name"))==null?null:t.invalid)&&((t=h.productForm.get("name"))==null?null:t.touched)),l(12),L("is-invalid",((n=h.productForm.get("categoryId"))==null?null:n.invalid)&&((n=h.productForm.get("categoryId"))==null?null:n.touched)),l(3),u("ngForOf",h.categories),l(),u("ngIf",((s=h.productForm.get("categoryId"))==null?null:s.invalid)&&((s=h.productForm.get("categoryId"))==null?null:s.touched)),l(7),L("is-invalid",((d=h.productForm.get("minimumStock"))==null?null:d.invalid)&&((d=h.productForm.get("minimumStock"))==null?null:d.touched)),l(),u("ngIf",((p=h.productForm.get("minimumStock"))==null?null:p.invalid)&&((p=h.productForm.get("minimumStock"))==null?null:p.touched)),l(16),L("is-invalid",h.isFieldInvalid("purchaseAmount")),u("value",0),l(7),L("is-invalid",h.isFieldInvalid("saleAmount")),u("value",0),l(7),L("is-invalid",h.isFieldInvalid("measurement")),u("value","kg"),l(7),L("is-invalid",h.isFieldInvalid("taxPercentage")),l(),u("ngIf",h.isFieldInvalid("taxPercentage")),l(7),L("is-invalid",((g=h.productForm.get("remainingQuantity"))==null?null:g.invalid)&&((g=h.productForm.get("remainingQuantity"))==null?null:g.touched)),l(10),u("disabled",!0),l(10),u("disabled",h.productForm.invalid||h.isLoading),l(),u("ngClass",h.isLoading?"fa-spinner fa-spin":h.isEditing?"fa-save":"fa-plus"),l(),w(" ",h.isEditing?"Update":"Create"," ")}}var La=(()=>{class o{constructor(e,t,n,s,d){this.productService=e,this.categoryService=t,this.fb=n,this.snackbarService=s,this.sanitizer=d,this.products=[],this.categories=[],this.isLoading=!1,this.isEditing=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.isDialogOpen=!1,this.destroy$=new Ve,this.initializeForms()}ngOnInit(){this.loadCategories(),this.loadProducts()}initializeForms(){this.productForm=this.fb.group({name:["",[x.required]],hsnCode:[""],categoryId:["",[x.required]],minimumStock:[0,[x.required,x.min(0)]],purchaseAmount:[0,[x.required,x.min(0)]],saleAmount:[0,[x.required,x.min(0)]],measurement:["kg"],status:["A"],description:[""],remainingQuantity:[0,[x.required]],blockedQuantity:[0,[x.required,x.min(0)]],totalRemainingQuantity:[{value:0,disabled:!0}],taxPercentage:[5,[x.required,x.min(0),x.max(100)]]}),this.productForm.get("remainingQuantity")?.valueChanges.pipe(Pe(this.destroy$)).subscribe(()=>{this.calculateTotalRemainingQuantity()}),this.productForm.get("blockedQuantity")?.valueChanges.pipe(Pe(this.destroy$)).subscribe(()=>{this.calculateTotalRemainingQuantity()});let e=document.querySelector(".editable-content");e&&e.addEventListener("input",()=>{let t=e.innerHTML;t.trim()?(this.productForm.patchValue({name:t},{emitEvent:!0}),this.productForm.get("name")?.markAsTouched()):this.productForm.get("name")?.setErrors({required:!0})}),this.searchForm=this.fb.group({search:[""],hsnCode:[""],categoryId:[""],status:["A"]})}loadCategories(){this.categoryService.getCategories({status:"A"}).pipe(Pe(this.destroy$)).subscribe({next:e=>{this.categories=e.data},error:()=>{this.snackbarService.error("Failed to load categories")}})}loadProducts(){this.isLoading||(this.isLoading=!0);let e=Xe(le({},this.searchForm.value),{size:this.pageSize,page:this.currentPage});this.productService.searchProducts(e).pipe(Pe(this.destroy$)).subscribe({next:t=>{this.products=t.data.content,this.totalPages=t.data.totalPages,this.totalElements=t.data.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements),this.isLoading=!1},error:()=>{this.snackbarService.error("Failed to load products"),this.isLoading=!1}})}onSubmit(){let t=document.querySelector(".editable-content")?.innerHTML||"";if(!t.trim()){this.productForm.get("name")?.setErrors({required:!0}),this.productForm.get("name")?.markAsTouched();return}if(this.productForm.invalid){Object.keys(this.productForm.controls).forEach(d=>{let p=this.productForm.get(d);p&&p.markAsTouched()});return}this.isLoading=!0;let n=Xe(le({},this.productForm.value),{name:t});(this.isEditing?this.productService.updateProduct(this.editingId,n):this.productService.createProduct(n)).pipe(Pe(this.destroy$)).subscribe({next:d=>{this.snackbarService.success(this.isEditing?"Product updated successfully":"Product created successfully"),this.productService.refreshProducts().pipe(Pe(this.destroy$)).subscribe({next:p=>{},error:p=>{}}),this.closeDialog(),this.isLoading=!1},error:d=>{this.snackbarService.error(d?.error?.message),console.error("Error:",d),this.isLoading=!1},complete:()=>{this.isLoading=!1}})}sanitizeHtml(e){return this.sanitizer.bypassSecurityTrustHtml(e)}editProduct(e){this.isEditing=!0,this.editingId=e.id;let t=document.createElement("div");t.innerHTML=e.name,this.productForm.patchValue({name:e.name,hsnCode:e.hsnCode,categoryId:e.categoryId,description:e.description,minimumStock:e.minimumStock,purchaseAmount:e.purchaseAmount,saleAmount:e.saleAmount,measurement:e.measurement,status:e.status,remainingQuantity:e.remainingQuantity,blockedQuantity:e.blockedQuantity,totalRemainingQuantity:e.totalRemainingQuantity,taxPercentage:e.taxPercentage??5}),this.calculateTotalRemainingQuantity(),setTimeout(()=>{let n=document.querySelector(".editable-content");n&&(n.innerHTML=e.name||"")},0),this.isDialogOpen=!0}deleteProduct(e){confirm("Are you sure you want to delete this product?")&&(this.isLoading=!0,this.productService.deleteProduct(e).pipe(Pe(this.destroy$)).subscribe({next:()=>{this.snackbarService.success("Product deleted successfully"),this.productService.refreshProducts().pipe(Pe(this.destroy$)).subscribe({next:t=>{},error:t=>{}}),this.loadProducts()},error:t=>{this.snackbarService.error(t?.error?.message||"Failed to delete product"),this.isLoading=!1}}))}resetForm(){this.isEditing=!1,this.editingId=void 0,this.productForm.reset({status:"A",purchaseAmount:0,saleAmount:0,measurement:"kg",taxPercentage:5,remainingQuantity:0,blockedQuantity:0})}onSearch(){this.currentPage=0,this.isLoading=!0,this.loadProducts()}onPageChange(e){this.currentPage=e,this.loadProducts()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadProducts()}openCreateDialog(){this.isEditing=!1,this.editingId=void 0,this.productForm.reset({status:"A",minimumStock:0,purchaseAmount:0,saleAmount:0,measurement:"kg",taxPercentage:5,remainingQuantity:0,blockedQuantity:0}),this.calculateTotalRemainingQuantity(),this.isDialogOpen=!0,setTimeout(()=>{let e=document.querySelector(".editable-content");e&&(e.innerHTML="",e.focus(),e.addEventListener("input",()=>{let t=e.innerHTML;t.trim()?(this.productForm.patchValue({name:t},{emitEvent:!0}),this.productForm.get("name")?.markAsTouched()):this.productForm.get("name")?.setErrors({required:!0})}))})}closeDialog(){this.productForm.dirty||(this.isLoading=!1),this.isDialogOpen=!1,this.resetForm(),this.loadProducts()}isFieldInvalid(e){let t=this.productForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}toggleBold(){document.execCommand("bold",!1);let e=document.querySelector(".editable-content");if(e){let t=e.innerHTML;t.trim()?(this.productForm.patchValue({name:t},{emitEvent:!0}),this.productForm.get("name")?.markAsTouched()):this.productForm.get("name")?.setErrors({required:!0})}}validateRemainingQuantity(){let e=this.productForm.get("remainingQuantity")?.value,t=this.productForm.get("blockedQuantity")?.value}exportProducts(){let e=le({},this.searchForm.value);delete e.pageSize,delete e.currentPage,this.productService.exportProducts(e).pipe(Pe(this.destroy$)).subscribe({next:t=>{let n=new Blob([t],{type:"application/pdf"}),s=window.URL.createObjectURL(n),d=document.createElement("a");d.href=s,d.download="products.pdf",d.click(),window.URL.revokeObjectURL(s)},error:t=>{this.snackbarService.error("Failed to export products")}})}calculateTotalRemainingQuantity(){let e=this.productForm.get("remainingQuantity")?.value??0,t=this.productForm.get("blockedQuantity")?.value??0,n=e-t;this.productForm.patchValue({totalRemainingQuantity:n},{emitEvent:!1})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||o)(y(Yt),y(bi),y(re),y(ve),y(Kn))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-product"]],standalone:!0,features:[W],decls:67,vars:7,consts:[[1,"product-container"],["message","Processing...",3,"show"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search products...",1,"form-control"],["type","text","formControlName","hsnCode","placeholder","HSN Code",1,"form-control"],["formControlName","categoryId",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","status",1,"form-control"],["value","A"],["value","I"],["type","submit",1,"search-btn","btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"btn","btn-sm","btn-primary","mb-2",3,"click"],[1,"fas","fa-file-pdf"],[1,"btn","btn-sm","btn-primary","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"products-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],["class","dialog-backdrop",3,"click",4,"ngIf"],["class","dialog",4,"ngIf"],[3,"value"],[3,"innerHTML"],[3,"ngClass"],[1,"actions"],[1,"btn-icon",3,"click"],[1,"fas","fa-edit"],[1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"],[1,"dialog-backdrop",3,"click"],[1,"dialog"],[1,"dialog-header"],["title","Close",1,"close-button",3,"click"],[1,"fas","fa-times"],[1,"form-grid"],["for","name"],[1,"fas","fa-tag"],[1,"required"],[1,"input-with-button"],["type","button","title","Bold",1,"btn-format",3,"click"],["contenteditable","true","id","name","placeholder","Enter product name",1,"editable-content"],["class","invalid-feedback",4,"ngIf"],["for","hsnCode"],[1,"fas","fa-barcode"],["type","text","id","hsnCode","formControlName","hsnCode","placeholder","Enter HSN code",1,"form-control"],["for","categoryId"],[1,"fas","fa-folder"],["id","categoryId","formControlName","categoryId",1,"form-control"],["value","","disabled","","selected",""],["for","minimumStock"],[1,"fas","fa-cubes"],["type","number","id","minimumStock","formControlName","minimumStock","min","0","placeholder","Enter minimum stock level",1,"form-control"],["for","status"],[1,"fas","fa-toggle-on"],["id","status","formControlName","status",1,"form-control"],["for","purchaseAmount"],[1,"fas","fa-rupee-sign"],["type","number","id","purchaseAmount","formControlName","purchaseAmount","min","0","step","0.01",1,"form-control",3,"value"],["for","saleAmount"],["type","number","id","saleAmount","formControlName","saleAmount","min","0","step","0.01",1,"form-control",3,"value"],["for","measurement"],[1,"fas","fa-comment"],["type","text","id","measurement","formControlName","measurement",1,"form-control",3,"value"],["for","taxPercentage"],[1,"fas","fa-percent"],["type","number","id","taxPercentage","formControlName","taxPercentage","min","0","max","100","step","0.01","placeholder","Enter tax percentage",1,"form-control"],["for","remainingQuantity"],["type","number","id","remainingQuantity","formControlName","remainingQuantity",1,"form-control",3,"input"],["for","blockedQuantity"],[1,"fas","fa-ban"],["type","number","id","blockedQuantity","formControlName","blockedQuantity",1,"form-control"],["for","totalRemainingQuantity"],[1,"fas","fa-calculator"],["type","number","id","totalRemainingQuantity","formControlName","totalRemainingQuantity",1,"form-control",3,"disabled"],[1,"form-group","full-width"],["for","description"],[1,"fas","fa-align-left"],["id","description","formControlName","description","rows","3","placeholder","Enter product description",1,"form-control"],[1,"dialog-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],[1,"invalid-feedback"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"h3"),c(4,"Search Products"),a(),r(5,"form",3),b("ngSubmit",function(){return n.onSearch()}),r(6,"div",4)(7,"div",5),m(8,"input",6),a(),r(9,"div",5),m(10,"input",7),a(),r(11,"div",5)(12,"select",8)(13,"option",9),c(14,"All Categories"),a(),O(15,od,2,2,"option",10),a()(),r(16,"div",5)(17,"select",11)(18,"option",12),c(19,"Active"),a(),r(20,"option",13),c(21,"Inactive"),a()()(),r(22,"button",14),m(23,"i",15),c(24," Search "),a(),r(25,"button",16),b("click",function(){return n.exportProducts()}),m(26,"i",17),c(27," Export Product "),a()()()(),r(28,"button",18),b("click",function(){return n.openCreateDialog()}),m(29,"i",19),c(30," Create Product "),a(),r(31,"div",20)(32,"h2"),c(33,"Products"),a(),r(34,"div",21)(35,"table",22)(36,"thead")(37,"tr")(38,"th"),c(39,"Name"),a(),r(40,"th"),c(41,"HSN Code"),a(),r(42,"th"),c(43,"Category"),a(),r(44,"th"),c(45,"Description"),a(),r(46,"th"),c(47,"Min Stock"),a(),r(48,"th"),c(49,"Status"),a(),r(50,"th"),c(51,"Remaining Quantity"),a(),r(52,"th"),c(53,"Blocked Amount"),a(),r(54,"th"),c(55,"Total Remaining Amount"),a(),r(56,"th"),c(57,"Purchase Amount"),a(),r(58,"th"),c(59,"Sale Amount"),a(),r(60,"th"),c(61,"Actions"),a()()(),r(62,"tbody"),O(63,rd,28,24,"tr",23),a()()(),O(64,ad,1,4,"app-pagination",24),a()(),O(65,sd,1,0,"div",25)(66,ud,111,34,"div",26)),t&2&&(l(),u("show",n.isLoading),l(4),u("formGroup",n.searchForm),l(10),u("ngForOf",n.categories),l(48),u("ngForOf",n.products),l(),u("ngIf",n.totalPages>0),l(),u("ngIf",n.isDialogOpen),l(),u("ngIf",n.isDialogOpen))},dependencies:[xe,$e,me,tt,nt,ie,bt,et,oe,de,yt,Wn,ge,pe,ue,ne,ye,Fe,Y,Ze,Le],styles:[".product-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;margin:0 auto}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:2rem}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:1rem}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{max-height:42px}.product-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:42px}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]{margin-bottom:2rem}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-primary)}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.product-container[_ngcontent-%COMP%]   .product-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .badge-active[_ngcontent-%COMP%]{background-color:var(--accent2);color:#fff;padding:.25rem .5rem;border-radius:4px}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .badge-inactive[_ngcontent-%COMP%]{background-color:var(--text-secondary);color:#fff;padding:.25rem .5rem;border-radius:4px}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:16px}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:4px;transition:background-color .3s}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{background-color:#0000001a}.product-container[_ngcontent-%COMP%]   .products-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary);white-space:nowrap}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{width:auto;min-width:80px;padding:.5rem;margin-bottom:0;border-color:var(--supporting);background-color:#fff;cursor:pointer}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 2px #fd78231a}.product-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{padding:.5rem}@media (max-width: 768px){.product-container[_ngcontent-%COMP%]{padding:1rem}.product-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column}.product-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.table-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{width:100%}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{flex:1}}.dialog-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1000}.dialog[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;border-radius:var(--border-radius);box-shadow:0 4px 20px #00000026;width:90%;max-width:90vw;max-height:90vh;overflow-y:auto;z-index:1000}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;background-color:var(--background-light)}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:var(--text-primary);display:flex;align-items:center;gap:.5rem}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{background:none;border:none;color:var(--text-secondary);font-size:1.5rem;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;padding:0;margin:-.5rem -.5rem -.5rem 0}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:var(--text-primary)}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:active{background-color:#0000001a}.dialog[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem;padding:1.5rem}.dialog[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.dialog[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:40px;padding-top:6px;margin-top:8px}@media (max-width: 576px){.dialog[_ngcontent-%COMP%]{width:calc(100% - 2rem);min-width:auto;margin:1rem}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{padding:.875rem 1.25rem}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem}.dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{width:28px;height:28px;font-size:1.25rem}}.dialog-content[_ngcontent-%COMP%]{padding:1.5rem}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ced4da;border-radius:4px;transition:all .3s ease}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 .2rem #fd782340;outline:none}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #dc354540}.dialog-content[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;padding:1rem 1.5rem;border-top:1px solid var(--border);margin-top:0}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}@media (max-width: 576px){.dialog-actions[_ngcontent-%COMP%]{padding:1rem;flex-direction:column-reverse}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.text-editor-toolbar[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-bottom:.5rem}.text-editor-toolbar[_ngcontent-%COMP%]   .btn-format[_ngcontent-%COMP%]{background:none;border:1px solid var(--border-color);border-radius:4px;padding:.25rem .5rem;cursor:pointer;color:var(--text-primary);transition:all .2s ease}.text-editor-toolbar[_ngcontent-%COMP%]   .btn-format[_ngcontent-%COMP%]:hover{background-color:var(--background-light)}.text-editor-toolbar[_ngcontent-%COMP%]   .btn-format.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;border-color:var(--primary)}.editable-content[_ngcontent-%COMP%]{min-height:38px;padding:.5rem;border:1px solid var(--supporting);border-radius:4px!important}.editable-content[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(var(--primary-rgb),.1)}.editable-content[placeholder][_ngcontent-%COMP%]:empty:before{content:attr(placeholder);color:var(--text-secondary)}.input-with-button[_ngcontent-%COMP%]{display:flex;align-items:stretch;border:1px solid var(--border-color);border-radius:var(--border-radius);overflow:hidden;border:1px solid var(--supporting);border-radius:4px!important}.input-with-button[_ngcontent-%COMP%]   .btn-format[_ngcontent-%COMP%]{background-color:var(--background-light);border:none;border-right:1px solid var(--border-color);padding:0 .75rem;color:var(--text-primary);cursor:pointer;transition:all .2s ease;display:flex;align-items:center;font-weight:700}.input-with-button[_ngcontent-%COMP%]   .btn-format[_ngcontent-%COMP%]:hover, .input-with-button[_ngcontent-%COMP%]   .btn-format.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.input-with-button[_ngcontent-%COMP%]   .editable-content[_ngcontent-%COMP%]{flex:1;border:none;padding:.5rem .75rem;min-height:38px;border:1px solid var(--supporting);border-radius:4px!important}.input-with-button[_ngcontent-%COMP%]   .editable-content[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px rgba(var(--primary-rgb),.1)}.negative-quantity[_ngcontent-%COMP%]{background-color:#ffcdd2;color:#d32f2f}td.negative-quantity[_ngcontent-%COMP%]:hover{background-color:#ffebee}.dialog[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid;gap:.5rem}.dialog[_ngcontent-%COMP%]   .grid-7[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:nowrap}.dialog[_ngcontent-%COMP%]   .size-rate[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.dialog[_ngcontent-%COMP%]   .size-rate[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;white-space:nowrap;font-size:.85rem}.dialog[_ngcontent-%COMP%]   .size-rate[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:80px;height:32px;padding:.25rem .5rem;font-size:.85rem}.dialog[_ngcontent-%COMP%]   .rates-table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0;background:#fff;border:1px solid var(--supporting);border-radius:8px;overflow:hidden}.dialog[_ngcontent-%COMP%]   .rates-tables-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{text-align:left;padding:.75rem 1rem;color:var(--text-secondary);font-size:.9rem}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--background-light);color:var(--text-primary);text-align:left;padding:.75rem 1rem;font-weight:600;border-bottom:1px solid var(--supporting)}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{width:30%;padding:.75rem 1rem;color:var(--text-primary);font-weight:500;background:linear-gradient(90deg,#00000005,#0000)}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;vertical-align:middle}.dialog[_ngcontent-%COMP%]   .rates-table.premium[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table.premium[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   th[_ngcontent-%COMP%]{background-color:#00000004}.dialog[_ngcontent-%COMP%]   .rates-table.premium[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table.premium[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   th[_ngcontent-%COMP%]{background-color:#fd78230f}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{max-width:180px}@media (max-width: 768px){.dialog[_ngcontent-%COMP%]   .rates-tables-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{display:block;width:100%}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-bottom:.25rem;background:transparent}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:0}.dialog[_ngcontent-%COMP%]   .rates-table[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;max-width:100%}}"],data:{animation:[Qt("dialogAnimation",[Pt(":enter",[ot({transform:"translate(-50%, -48%) scale(0.95)",opacity:0}),Ct("200ms ease-out",ot({transform:"translate(-50%, -50%) scale(1)",opacity:1}))]),Pt(":leave",[Ct("150ms ease-in",ot({transform:"translate(-50%, -48%) scale(0.95)",opacity:0}))])])]}})}}return o})();var qe=(()=>{class o{constructor(e,t){this.authService=e,this.router=t}canActivate(){return this.authService.isAuthenticated()?!0:(this.authService.logout(),window.location.href=window.location.origin+"/login?_t="+new Date().getTime(),!1)}static{this.\u0275fac=function(t){return new(t||o)(he(mt),he(Ne))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var fd=()=>({label:"All Customers",value:""});function hd(o,i){if(o&1){let e=U();r(0,"tr")(1,"td"),c(2),a(),r(3,"td"),c(4),a(),r(5,"td"),c(6),a(),r(7,"td"),c(8),ze(9,"date"),a(),r(10,"td"),c(11),ze(12,"round"),a(),r(13,"td",26)(14,"button",27),b("click",function(){let n=k(e).$implicit,s=P();return T(s.editSales(n.id))}),m(15,"i",28),a(),r(16,"button",29),b("click",function(){let n=k(e).$implicit,s=P();return T(s.deleteSale(n.id))}),m(17,"i",30),a()()()}if(o&2){let e,t=i.$implicit,n=i.index,s=P();l(2),I(s.startIndex+n+1),l(2),I(t==null?null:t.invoiceNumber),l(2),I(t!=null&&t.customerName?t==null?null:t.customerName:"-"),l(2),I(He(9,5,t==null?null:t.saleDate,"dd-MM-yyyy")),l(3),I(Bn(12,8,(e=t==null?null:t.totalSaleAmount)!==null&&e!==void 0?e:0))}}function _d(o,i){if(o&1){let e=U();r(0,"app-pagination",31),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}function Cd(o,i){if(o&1){let e=U();r(0,"app-sale-modal",32),b("saleCreated",function(){k(e);let n=P();return T(n.loadSalesRecord())}),a()}if(o&2){let e=P();u("sales",e.selectedSales)}}var Ra=(()=>{class o{constructor(e,t,n,s,d,p,g,h,C,v){this.saleService=e,this.customerService=t,this.fb=n,this.snackbar=s,this.dialog=d,this.modalService=p,this.dateUtils=g,this.cacheService=h,this.encryptionService=C,this.router=v,this.sales=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.selectedSales=null,this.products=[],this.isLoadingProducts=!1,this.customers=[],this.isLoadingCustomers=!1,this.destroy$=new Ve,this.initializeForm()}ngOnInit(){this.loadSales(),this.loadCustomers()}initializeForm(){this.searchForm=this.fb.group({search:[""],customerId:[""],startDate:[""],endDate:[""],batchNumber:[""]})}onSearch(){this.currentPage=0,this.loadSales()}formatDateForApi(e,t){if(!e)return"";let n=new Date(e);if(isNaN(n.getTime()))return"";let s=n.getDate().toString().padStart(2,"0"),d=(n.getMonth()+1).toString().padStart(2,"0"),p=n.getFullYear();return`${s}-${d}-${p} ${t?"00:00:00":"23:59:59"}`}loadSalesRecord(){this.isLoading=!0;let e=this.searchForm.value,t=e.startDate?this.formatDateForApi(e.startDate,!0):"",n=e.endDate?this.formatDateForApi(e.endDate,!1):"",s={currentPage:this.currentPage,perPageRecord:this.pageSize,search:e.search||""};t&&(s.startDate=t),n&&(s.endDate=n),this.saleService.searchSales(s).pipe(Pe(this.destroy$)).subscribe({next:d=>{this.sales=d.data.content,this.totalPages=d.data.totalPages,this.totalElements=d.data.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load sales"),this.isLoading=!1}})}onPageChange(e){this.currentPage=e,this.loadSales()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadSales()}deleteSale(e){confirm("Are you sure you want to delete this sale? This action cannot be undone.")&&(this.isLoading=!0,this.saleService.deleteSale(e).pipe(Pe(this.destroy$)).subscribe({next:t=>{t.success?(this.snackbar.success("Sale deleted successfully"),this.loadSales()):(this.snackbar.error(t.message||"Failed to delete sale"),this.isLoading=!1)},error:t=>{this.snackbar.error(t?.error?.message||"Failed to delete sale"),this.isLoading=!1}}))}formatDate(e){return this.dateUtils.formatDate(e)}resetForm(){this.searchForm.reset(),this.currentPage=0,this.loadSales()}loadCustomers(){this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).pipe(Pe(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1}})}refreshCustomers(){this.isLoadingCustomers=!0,this.customerService.refreshCustomers().pipe(Pe(this.destroy$)).subscribe({next:e=>{e.success&&(this.customers=e.data,this.snackbar.success("Customers refreshed successfully")),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to refresh customers"),this.isLoadingCustomers=!1}})}editSales(e){localStorage.setItem("saleId",this.encryptionService.encrypt(e.toString())),this.router.navigate(["/sale/create"])}loadSales(){this.isLoading=!0;let e=le({currentPage:this.currentPage,perPageRecord:this.pageSize,startDate:this.searchForm.value.startDate?this.dateUtils.formatDate(this.searchForm.value.startDate):"",endDate:this.searchForm.value.endDate?this.dateUtils.formatDate(this.searchForm.value.endDate):""},this.searchForm.value);this.saleService.searchSales(e).pipe(Pe(this.destroy$)).subscribe({next:t=>{this.sales=t.content,this.totalPages=t.totalPages,this.totalElements=t.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements),this.isLoading=!1},error:t=>{this.snackbar.error(t.message||"Failed to load sales"),this.isLoading=!1}})}clearLocalStorage(){localStorage.removeItem("saleId"),this.router.navigate(["/sale/create"])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||o)(y(Xn),y(Zt),y(re),y(ve),y(wr),y(mn),y(Ft),y(Sr),y(dt),y(Ne))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-sale"]],standalone:!0,features:[W],decls:51,vars:11,consts:[[1,"sales-container"],[3,"show"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by invoice number...",1,"form-control"],["type","text","formControlName","batchNumber","placeholder","Search by Batch Number...",1,"form-control"],[1,"product-select-group"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","defaultOption","searchPlaceholder"],["type","button","title","Refresh Customers",1,"btn","btn-sm","btn-primary","refresh",2,"margin-top","3px",3,"click","disabled"],[1,"fas",3,"ngClass"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"btn","btn-sm","btn-primary","mb-2",3,"click"],[1,"sales-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[3,"sales","saleCreated",4,"ngIf"],[1,"actions"],["title","Edit Sale",1,"btn-icon","edit",3,"click"],[1,"fas","fa-eye"],["title","Delete Sale",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"],[3,"saleCreated","sales"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"h2"),c(4,"Search Sales"),a(),r(5,"form",3),b("ngSubmit",function(){return n.onSearch()}),r(6,"div",4)(7,"div",5),m(8,"input",6)(9,"input",7),a(),r(10,"div",5)(11,"div",8),m(12,"app-searchable-select",9),r(13,"button",10),b("click",function(){return n.refreshCustomers()}),m(14,"i",11),a()()(),r(15,"div",5),m(16,"input",12),a(),r(17,"div",5),m(18,"input",13),a(),r(19,"div",14)(20,"button",15),m(21,"i",16),c(22," Search "),a(),r(23,"button",17),b("click",function(){return n.resetForm()}),m(24,"i",18),c(25," Reset "),a()()()()(),r(26,"button",19),b("click",function(){return n.clearLocalStorage()}),c(27,"Add Sale"),a(),r(28,"div",20)(29,"h2"),c(30,"Sales"),a(),r(31,"div",21)(32,"table",22)(33,"thead")(34,"tr")(35,"th"),c(36,"No"),a(),r(37,"th"),c(38,"Invoice No."),a(),r(39,"th"),c(40,"Customer Name"),a(),r(41,"th"),c(42,"sale Date"),a(),r(43,"th"),c(44,"Total Sales Amount"),a(),r(45,"th"),c(46,"Actions"),a()()(),r(47,"tbody"),O(48,hd,18,10,"tr",23),a()()(),O(49,_d,1,4,"app-pagination",24),a()(),O(50,Cd,1,1,"app-sale-modal",25)),t&2&&(l(),u("show",n.isLoading),l(4),u("formGroup",n.searchForm),l(7),u("options",n.customers)("defaultOption",cn(10,fd))("searchPlaceholder","Search customers..."),l(),u("disabled",n.isLoadingCustomers),l(),u("ngClass",n.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt"),l(34),u("ngForOf",n.sales),l(),u("ngIf",n.totalPages>0),l(),u("ngIf",n.selectedSales))},dependencies:[ne,ye,Fe,Y,lt,ge,me,ie,oe,de,pe,ue,$e,Le,kr,Tr,xe,At,Ze,Er],styles:[".sales-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;background-color:var(--background)}.sales-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.sales-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;align-items:flex-start}@media (max-width: 768px){.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin:0}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:40px}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{width:42px;padding:0;display:flex;align-items:center;justify-content:center;border:1px solid var(--border-color);border-radius:var(--border-radius);background:var(--primary)}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary)}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}@media (max-width: 768px){.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{grid-column:1/-1}}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;height:42px;display:flex;align-items:center;justify-content:center;gap:.5rem}.sales-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.sales-container[_ngcontent-%COMP%]   .slaes-list[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.sales-container[_ngcontent-%COMP%]   .slaes-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap}.sales-container[_ngcontent-%COMP%]   .slaes-list[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.sales-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.sales-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.sales-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary);white-space:nowrap}.sales-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{width:auto;min-width:80px;padding:.5rem;margin-bottom:0}@media (max-width: 768px){.sales-container[_ngcontent-%COMP%]{padding:1rem}.sales-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.sales-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .sales-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.table-controls[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{width:100%}.table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{flex:1}}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.actions[_ngcontent-%COMP%]   .btn-icon.sale[_ngcontent-%COMP%]{color:var(--primary);background-color:#fd78231a}.actions[_ngcontent-%COMP%]   .btn-icon.sale[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.sale[_ngcontent-%COMP%]:disabled{color:var(--text-secondary);background-color:#0000000d;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{padding:6px}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}  .custom-snackbar.success{background-color:var(--accent2)}  .custom-snackbar.error{background-color:#dc3545}  .custom-snackbar .snackbar-message{display:flex;align-items:center;gap:.5rem;color:#fff}  .custom-snackbar .snackbar-message i{font-size:1.2rem}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:1000}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:var(--primary)}.product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]{background-color:var(--background);color:#fff;margin-top:3px;width:42px;height:42px;border-radius:6px;transition:all .2s ease}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:active{transform:translateY(0)}"]})}}return o})();var yi=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${ct.apiUrl}/api/profits`}searchProfits(e){return this.http.post(`${this.apiUrl}/search`,e)}getDailyProfits(e){return this.http.post(`${this.apiUrl}/daily`,e)}static{this.\u0275fac=function(t){return new(t||o)(he(Je))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var ja=(o,i)=>({"text-success":o,"text-danger":i});function Pd(o,i){if(o&1&&(r(0,"tr")(1,"td"),c(2),a(),r(3,"td"),c(4),a(),r(5,"td"),c(6),a(),r(7,"td"),c(8),a(),r(9,"td"),c(10),a(),r(11,"td"),c(12),a(),r(13,"td",20),c(14),a(),r(15,"td",20),c(16),a(),r(17,"td"),c(18),ze(19,"date"),a()()),o&2){let e=i.$implicit,t=i.index,n=P();l(2),I(n.startIndex+t+1),l(2),I(e.productName),l(2),I(e.saleInvoice),l(2),I(e.saleAmount),l(2),I(e.purchaseAmount),l(2),I(e.otherExpenses),l(),u("ngClass",_t(14,ja,e.grossProfit>0,e.grossProfit<0)),l(),w(" ",e.grossProfit," "),l(),u("ngClass",_t(17,ja,e.netProfit>0,e.netProfit<0)),l(),w(" ",e.netProfit," "),l(2),I(He(19,11,e.profitDate,"medium"))}}function bd(o,i){if(o&1){let e=U();r(0,"app-pagination",21),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var $a=(()=>{class o{constructor(e,t){this.profitService=e,this.fb=t,this.currentPage=0,this.pageSize=10,this.searchTerm="",this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.isLoading=!1,this.startIndex=0,this.endIndex=0,this.destroy$=new Ve,this.searchForm=this.fb.group({search:[""],startDate:[""],endDate:[""]})}ngOnInit(){this.loadProfits()}formatDateForApi(e,t){if(!e)return"";let n=new Date(e);if(isNaN(n.getTime()))return"";let s=n.getDate().toString().padStart(2,"0"),d=(n.getMonth()+1).toString().padStart(2,"0"),p=n.getFullYear();return`${s}-${d}-${p} ${t?"00:00:00":"23:59:59"}`}onSearch(){this.isLoading=!0;let e=this.searchForm.value,t={page:this.currentPage,size:this.pageSize};e.search?.trim()&&(t.search=e.search.trim()),e.startDate&&(t.startDate=this.formatDateForApi(e.startDate,!0)),e.endDate&&(t.endDate=this.formatDateForApi(e.endDate,!1)),this.profitService.searchProfits(t).pipe(Pe(this.destroy$)).subscribe({next:n=>{this.profits=n.data,this.totalElements=n.data.totalElements,this.isLoading=!1},error:n=>{console.error("Error loading profits:",n),this.isLoading=!1}})}onPageChange(e){this.currentPage=e,this.loadProfits()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadProfits()}loadProfits(){this.isLoading=!0;let e=this.searchForm.value,t={page:this.currentPage,size:this.pageSize};e.search?.trim()&&(t.search=e.search.trim()),e.startDate&&(t.startDate=this.formatDateForApi(e.startDate,!0)),e.endDate&&(t.endDate=this.formatDateForApi(e.endDate,!1)),this.profitService.searchProfits(t).pipe(Pe(this.destroy$)).subscribe({next:n=>{this.profits=n.data,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements,this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements),this.isLoading=!1},error:n=>{console.error("Error loading profits:",n),this.isLoading=!1}})}resetForm(){this.searchForm.reset(),this.currentPage=0,this.loadProfits()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||o)(y(yi),y(re))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-profit"]],standalone:!0,features:[W],decls:49,vars:4,consts:[[1,"profit-container"],[3,"show"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by invoice number...",1,"form-control"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"profits-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"table-controls"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[3,"ngClass"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"h2"),c(4,"Search Profits"),a(),r(5,"form",3),b("ngSubmit",function(){return n.onSearch()}),r(6,"div",4)(7,"div",5),m(8,"input",6),a(),r(9,"div",5),m(10,"input",7),a(),r(11,"div",5),m(12,"input",8),a(),r(13,"div",9)(14,"button",10),m(15,"i",11),c(16," Search "),a(),r(17,"button",12),b("click",function(){return n.resetForm()}),m(18,"i",13),c(19," Reset "),a()()()()(),r(20,"div",14)(21,"h2"),c(22,"Profits"),a(),r(23,"div",15)(24,"table",16)(25,"thead")(26,"tr")(27,"th"),c(28,"#"),a(),r(29,"th"),c(30,"Product Name"),a(),r(31,"th"),c(32,"Sale Invoice"),a(),r(33,"th"),c(34,"Sale Amount"),a(),r(35,"th"),c(36,"Purchase Amount"),a(),r(37,"th"),c(38,"Other Expenses"),a(),r(39,"th"),c(40,"Gross Profit"),a(),r(41,"th"),c(42,"Net Profit"),a(),r(43,"th"),c(44,"Date"),a()()(),r(45,"tbody"),O(46,Pd,20,20,"tr",17),a()()(),r(47,"div",18),O(48,bd,1,4,"app-pagination",19),a()()()),t&2&&(l(),u("show",n.isLoading),l(4),u("formGroup",n.searchForm),l(41),u("ngForOf",n.profits==null?null:n.profits.content),l(2),u("ngIf",n.totalPages>0))},dependencies:[ne,ye,Fe,Y,lt,ge,me,ie,oe,de,pe,ue,$e,xe,Ze],styles:[".profit-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;background-color:var(--background)}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:first-child{margin-top:0}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.profit-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:baseline}.profit-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   app-pagination[_ngcontent-%COMP%]{width:100%}.profit-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{width:100%;margin:0;overflow-x:auto}.profit-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.profit-container[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:var(--accent2)!important}.profit-container[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:var(--primary)!important}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:var(--text-secondary)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;gap:5px}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid var(--supporting);background:#fff;cursor:pointer;border-radius:4px;color:var(--text-primary);transition:all .3s ease}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--supporting)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;border-color:var(--primary)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .ellipsis[_ngcontent-%COMP%]{padding:6px 12px;color:var(--text-secondary);display:flex;align-items:center}@media (max-width: 768px){.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:15px}}.form-control[_ngcontent-%COMP%]{padding:10px;border:1px solid var(--supporting);border-radius:4px;color:var(--text-primary)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px #fd782340}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#eb5d02}"]})}}return o})();function yd(o,i){o&1&&(r(0,"div",45),c(1," Name is required "),a())}function vd(o,i){o&1&&(r(0,"div",45),c(1," Mobile number is required "),a())}function Md(o,i){o&1&&(r(0,"div",45),c(1," Please enter a valid 10-digit mobile number "),a())}function Od(o,i){o&1&&(r(0,"span"),c(1,"Please enter a valid email address"),a())}function xd(o,i){if(o&1&&(r(0,"div",45),c(1," Email is required "),O(2,Od,2,0,"span",46),a()),o&2){let e,t=P(2);l(2),u("ngIf",(e=t.customerForm.get("email"))==null||e.errors==null?null:e.errors.email)}}function Sd(o,i){o&1&&(r(0,"div",45),c(1," Please enter a valid GST number "),a())}function Ed(o,i){if(o&1){let e=U();r(0,"div",1),b("click",function(){k(e);let n=P();return T(n.close())}),r(1,"div",2),b("click",function(n){return k(e),T(n.stopPropagation())}),r(2,"div",3)(3,"h4"),m(4,"i",4),c(5),a(),r(6,"button",5),b("click",function(){k(e);let n=P();return T(n.close())}),m(7,"i",6),a()(),r(8,"form",7),b("ngSubmit",function(){k(e);let n=P();return T(n.onSubmit())})("keydown.enter",function(n){return k(e),T(n.preventDefault())}),r(9,"div",8)(10,"div",9)(11,"label",10),m(12,"i",4),c(13," Name "),r(14,"span",11),c(15,"*"),a()(),m(16,"input",12),O(17,yd,2,0,"div",13),a(),r(18,"div",9)(19,"label",14),m(20,"i",15),c(21," Mobile "),a(),m(22,"input",16),O(23,vd,2,0,"div",13)(24,Md,2,0,"div",13),a(),r(25,"div",9)(26,"label",17),m(27,"i",18),c(28," Email "),a(),m(29,"input",19),O(30,xd,3,1,"div",13),a(),r(31,"div",9)(32,"label",20),m(33,"i",21),c(34," GST Number "),a(),m(35,"input",22),O(36,Sd,2,0,"div",13),a(),r(37,"div",9)(38,"label",23),m(39,"i",24),c(40," DL Number "),a(),m(41,"input",25),a(),r(42,"div",9)(43,"label",26),c(44,"Next Action Date"),a(),r(45,"div",27),m(46,"input",28),r(47,"button",29),b("click",function(n){k(e);let s=P();return T(s.clearNextActionDate(n))})("touchstart",function(n){k(e);let s=P();return n.preventDefault(),T(s.clearNextActionDate(n))}),m(48,"i",6),a()()(),r(49,"div",9)(50,"label",30),c(51,"Remaining Payment Amount"),a(),m(52,"input",31),a(),r(53,"div",9)(54,"label",32),c(55,"Address"),a(),m(56,"textarea",33),a(),r(57,"div",9)(58,"label",34),c(59,"Remarks"),a(),m(60,"textarea",35),a(),r(61,"div",9)(62,"label",36),c(63,"Status"),a(),r(64,"select",37)(65,"option",38),c(66,"Active"),a(),r(67,"option",39),c(68,"Inactive"),a(),r(69,"option",40),c(70,"Pending"),a()()()(),r(71,"div",41)(72,"button",42),b("click",function(){k(e);let n=P();return T(n.close())}),c(73," Cancel "),a(),r(74,"button",43),m(75,"i",44),c(76),a()()()()()}if(o&2){let e,t,n,s,d,p,g,h,C,v=P();l(5),w(" ",v.isEditing?"Update":"Add New"," Customer/ Dealer"),l(3),u("formGroup",v.customerForm),l(8),L("is-invalid",((e=v.customerForm.get("name"))==null?null:e.invalid)&&((e=v.customerForm.get("name"))==null?null:e.touched)),l(),u("ngIf",(t=v.customerForm.get("name"))==null||t.errors==null?null:t.errors.required),l(5),L("is-invalid",((n=v.customerForm.get("mobile"))==null?null:n.invalid)&&((n=v.customerForm.get("mobile"))==null?null:n.touched)),l(),u("ngIf",(s=v.customerForm.get("mobile"))==null||s.errors==null?null:s.errors.required),l(),u("ngIf",(d=v.customerForm.get("mobile"))==null||d.errors==null?null:d.errors.pattern),l(5),L("is-invalid",((p=v.customerForm.get("email"))==null?null:p.invalid)&&((p=v.customerForm.get("email"))==null?null:p.touched)),l(),u("ngIf",(g=v.customerForm.get("email"))==null||g.errors==null?null:g.errors.required),l(5),L("is-invalid",((h=v.customerForm.get("gst"))==null?null:h.invalid)&&((h=v.customerForm.get("gst"))==null?null:h.touched)),l(),u("ngIf",(C=v.customerForm.get("gst"))==null||C.errors==null?null:C.errors.pattern),l(38),u("disabled",v.customerForm.invalid||v.loading),l(),u("ngClass",v.loading?"fa-spinner fa-spin":v.isEditing?"fa-save":"fa-plus"),l(),w(" ",v.loading?v.isEditing?"Updating...":"Creating...":v.isEditing?"Update":"Create"," Customer ")}}var qa=(()=>{class o{constructor(e,t,n,s){this.fb=e,this.customerService=t,this.toastr=n,this.modalService=s,this.customerSaved=new vn,this.loading=!1,this.isSubmitted=!1,this.display$=this.modalService.modalState$.pipe(jn(d=>d.isOpen&&d.modalType==="customer")),this.currentCustomer=null,this.isEditing=!1,this.destroy$=new Ve,this.initForm()}ngOnInit(){this.modalStateSubscription=this.modalService.modalState$.subscribe(e=>{e.isOpen&&e.modalType==="customer"&&(e.data?(this.currentCustomer=e.data,this.isEditing=!0,this.patchForm(e.data)):(this.currentCustomer=null,this.isEditing=!1,this.initForm()))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.modalStateSubscription&&this.modalStateSubscription.unsubscribe(),this.currentCustomer=null}initForm(){let e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,16);this.customerForm=this.fb.group({name:["",[x.required]],mobile:[""],email:[""],gst:["",[x.pattern("^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$")]],dlNumber:[""],address:[""],coatingUnitPrice:[0,[x.required,x.min(0)]],remainingPaymentAmount:[0],nextActionDate:[t],remarks:[""],status:["A"]})}patchForm(e){if(e)try{let t="";if(e.nextActionDate)try{let n=new Date(e.nextActionDate);t=new Date(n.getTime()+5.5*60*60*1e3).toISOString().slice(0,16)}catch(n){console.error("Error parsing date:",n)}this.customerForm.patchValue({name:e.name||"",mobile:e.mobile||"",email:e.email||"",gst:e.gst||"",dlNumber:e.dlNumber||"",address:e.address||"",coatingUnitPrice:e.coatingUnitPrice||0,remainingPaymentAmount:e.remainingPaymentAmount||0,nextActionDate:t,remarks:e.remarks||"",status:e.status||"A"})}catch(t){console.error("Error in patchForm:",t),this.initForm()}}onSubmit(){if(this.isSubmitted=!0,this.customerForm.valid){this.loading=!0;let e=this.customerForm.value;if(e.nextActionDate){let n=new Date(e.nextActionDate);e.nextActionDate=n.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-").replace(",","")}(this.isEditing&&this.currentCustomer?this.customerService.updateCustomer(this.currentCustomer.id,e):this.customerService.createCustomer(e)).pipe(Pe(this.destroy$)).subscribe({next:n=>{n.success&&(this.toastr.success(n.message||`Customer ${this.isEditing?"updated":"created"} successfully`),this.customerSaved.emit(!0),this.close())},error:n=>{this.toastr.error(n.message||`Failed to ${this.isEditing?"update":"create"} customer`)},complete:()=>{this.loading=!1}})}}clearNextActionDate(e){e&&(e.preventDefault(),e.stopPropagation());let t=this.customerForm.get("nextActionDate");t?.setValue(null,{emitEvent:!0}),t?.markAsDirty(),t?.markAsTouched()}close(){this.modalService.close(),this.customerForm.reset(),this.isSubmitted=!1,this.currentCustomer=null,this.isEditing=!1}getFieldError(e){let t=this.customerForm.get(e);if(t?.errors&&(t.dirty||t.touched||this.isSubmitted)){if(t.errors.required)return`${e} is required`;if(t.errors.email)return"Invalid email format";if(t.errors.pattern)return"Invalid format";if(t.errors.min)return`${e} must be greater than or equal to ${t.errors.min.min}`}return""}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(Zt),y(Xt),y(mn))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-customer-modal"]],outputs:{customerSaved:"customerSaved"},standalone:!0,features:[W],decls:2,vars:3,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"fas","fa-user"],["title","Close",1,"btn","close",3,"click"],[1,"fa-solid","fa-xmark"],[3,"ngSubmit","keydown.enter","formGroup"],[1,"form-grid"],[1,"form-group"],["for","name"],[1,"required"],["type","text","id","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","mobile"],[1,"fas","fa-phone"],["type","text","id","mobile","formControlName","mobile",1,"form-control"],["for","email"],[1,"fas","fa-envelope"],["type","email","id","email","formControlName","email",1,"form-control"],["for","gst"],[1,"fas","fa-receipt"],["type","text","id","gst","formControlName","gst",1,"form-control"],["for","dlNumber"],[1,"fas","fa-id-card"],["type","text","id","dlNumber","formControlName","dlNumber",1,"form-control"],["for","nextActionDate"],[1,"input-group"],["type","datetime-local","id","nextActionDate","formControlName","nextActionDate",1,"form-control"],["type","button","title","Clear date",1,"btn","btn-outline-secondary",3,"click","touchstart"],["for","remainingPaymentAmount"],["type","number","id","remainingPaymentAmount","formControlName","remainingPaymentAmount","min","0","step","0.01",1,"form-control"],["for","address"],["id","address","formControlName","address","rows","3",1,"form-control"],["for","remarks"],["id","remarks","formControlName","remarks","rows","3",1,"form-control"],["for","status"],["id","status","formControlName","status","title","Select status",1,"form-control"],["value","A"],["value","I"],["value","P"],[1,"modal-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,n){t&1&&(O(0,Ed,77,18,"div",0),ze(1,"async")),t&2&&u("ngIf",Bn(1,1,n.display$))},dependencies:[ne,ye,Y,lr,ge,me,tt,nt,ie,bt,et,oe,de,yt,pe,ue],styles:[".modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid var(--supporting)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.5rem;font-weight:500}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;color:var(--text-secondary);transition:all .3s ease;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center}.modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{background-color:var(--background);color:var(--text-primary)}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{max-width:300px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{transition:all .3s ease;margin-top:8px;height:43px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 2px rgba(var(--primary-rgb),.1)}.form-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{height:43px;margin-top:8px}.form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:var(--danger);font-size:.875rem;margin-top:.25rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--supporting)}.modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}@media (max-width: 576px){.sale-modal[_ngcontent-%COMP%]{padding:1rem}.sale-modal[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]{flex-direction:column}.sale-modal[_ngcontent-%COMP%]   .modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:100%;max-width:800px;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px #0000001a;animation:_ngcontent-%COMP%_slideIn .3s ease-out;padding:40px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:0px 40px;margin-bottom:1.5rem}.form-grid[_ngcontent-%COMP%]   .form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.25rem;color:var(--text-secondary);font-size:.9rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary);font-size:.9rem}.form-group[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger)}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return o})();var wd=(o,i,e)=>({active:o,inactive:i,pending:e});function kd(o,i){o&1&&(r(0,"div",29),m(1,"i",30),a())}function Td(o,i){if(o&1){let e=U();r(0,"tr")(1,"td"),c(2),a(),r(3,"td"),c(4),a(),r(5,"td"),c(6),a(),r(7,"td"),c(8),a(),r(9,"td"),c(10),a(),r(11,"td"),c(12),a(),r(13,"td"),c(14),ze(15,"number"),a(),r(16,"td"),c(17),ze(18,"date"),a(),r(19,"td"),c(20),a(),r(21,"td")(22,"span",31),c(23),a()(),r(24,"td",32)(25,"button",33),b("click",function(){let n=k(e).$implicit,s=P();return T(s.openCustomerModal(n))}),m(26,"i",34),a()()()}if(o&2){let e=i.$implicit;l(2),I(e.name),l(2),I(e.mobile),l(2),I(e.email),l(2),I(e.gst),l(2),I(e.dlNumber),l(2),I(e.address),l(2),w("\u20B9",He(15,11,e.remainingPaymentAmount,"1.2-2"),""),l(3),I(He(18,14,e.nextActionDate||null,"medium")),l(3),I(e.remarks),l(2),u("ngClass",Un(17,wd,e.status==="A",e.status==="I",e.status==="P")),l(),w(" ",e.status==="A"?"Active":e.status==="I"?"Inactive":"Pending"," ")}}function Id(o,i){o&1&&(r(0,"tr")(1,"td",35),c(2,"No customers found"),a()())}var Ua=(()=>{class o{constructor(e,t,n,s,d){this.customerService=e,this.fb=t,this.toastr=n,this.modalService=s,this.router=d,this.customers=[],this.isLoading=!1,this.displayModal=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.destroy$=new Ve,this.initializeForm()}ngOnInit(){this.loadCustomers(),this.modalStateSubscription=this.modalService.modalState$.subscribe(e=>{e.isOpen})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.modalStateSubscription&&this.modalStateSubscription.unsubscribe(),this.customers=[]}initializeForm(){this.searchForm=this.fb.group({search:[""],status:[""],startDate:[""],endDate:[""]})}formatDateForApi(e,t){if(!e)return"";let n=new Date(e);if(isNaN(n.getTime()))return"";let s=n.getDate().toString().padStart(2,"0"),d=(n.getMonth()+1).toString().padStart(2,"0"),p=n.getFullYear();return`${s}-${d}-${p} ${t?"00:00:00":"23:59:59"}`}loadCustomers(){this.isLoading=!0;let e=this.searchForm.value,t={currentPage:this.currentPage,perPageRecord:this.pageSize,search:e.search||""};e.startDate&&(t.startDate=this.formatDateForApi(e.startDate,!0)),e.endDate&&(t.endDate=this.formatDateForApi(e.endDate,!1)),e.status&&(t.status=e.status),this.customerService.searchCustomers(t).pipe(Pe(this.destroy$)).subscribe({next:n=>{n.success&&(this.customers=n.data.content,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements),this.isLoading=!1},error:()=>{this.toastr.error("Failed to load customers"),this.isLoading=!1}})}onSearch(){this.currentPage=0,this.loadCustomers()}onPageChange(e){this.currentPage=e,this.loadCustomers()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadCustomers()}openDealerRegister(){this.router.navigate(["/dealers/register"])}openCustomerModal(e){this.modalService.open("customer",e),this.modalService.modalState$.pipe(Pe(this.destroy$)).subscribe(t=>{t.isOpen})}resetForm(){this.searchForm.reset({search:"",status:"",startDate:"",endDate:""}),this.currentPage=0,this.loadCustomers()}static{this.\u0275fac=function(t){return new(t||o)(y(Zt),y(re),y(Xt),y(mn),y(Ne))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-customer"]],standalone:!0,features:[W],decls:66,vars:8,consts:[[1,"customer-container"],[1,"search-section","card"],[3,"ngSubmit","keydown.enter","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search customers...",1,"form-control"],[1,"form-group","status-filter"],["formControlName","status","title","Filter by status",1,"form-control"],["value","A"],["value","I"],["value","P"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"btn","btn-sm","btn-primary","add-customer-btn","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"customers-list","card"],[1,"table-responsive"],["class","loading-overlay",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-controls"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"],[3,"customerSaved"],[1,"loading-overlay"],[1,"fas","fa-spinner","fa-spin"],[1,"status-badge",3,"ngClass"],[1,"actions"],[1,"btn-icon","edit",3,"click"],[1,"fas","fa-edit"],["colspan","11",1,"text-center"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Search Customers"),a(),r(4,"form",2),b("ngSubmit",function(){return n.onSearch()})("keydown.enter",function(d){return d.preventDefault()}),r(5,"div",3)(6,"div",4),m(7,"input",5),a(),r(8,"div",6)(9,"select",7)(10,"option",8),c(11,"Active"),a(),r(12,"option",9),c(13,"Inactive"),a(),r(14,"option",10),c(15,"Pending"),a()()(),r(16,"div",4),m(17,"input",11),a(),r(18,"div",4),m(19,"input",12),a(),r(20,"div",13)(21,"button",14),m(22,"i",15),c(23," Search "),a(),r(24,"button",16),b("click",function(){return n.resetForm()}),m(25,"i",17),c(26," Reset "),a()()()()(),r(27,"button",18),b("click",function(){return n.openDealerRegister()}),m(28,"i",19),c(29," Add Customer / Dealer "),a(),r(30,"div",20)(31,"h2"),c(32,"Customers"),a(),r(33,"div",21),O(34,kd,2,0,"div",22),r(35,"table",23)(36,"thead")(37,"tr")(38,"th"),c(39,"Name"),a(),r(40,"th"),c(41,"Mobile"),a(),r(42,"th"),c(43,"Email"),a(),r(44,"th"),c(45,"GST"),a(),r(46,"th"),c(47,"DL Number"),a(),r(48,"th"),c(49,"Address"),a(),r(50,"th"),c(51,"Remaining Payment"),a(),r(52,"th"),c(53,"Next Action Date"),a(),r(54,"th"),c(55,"Remarks"),a(),r(56,"th"),c(57,"Status"),a(),r(58,"th"),c(59,"Actions"),a()()(),r(60,"tbody"),O(61,Td,27,21,"tr",24)(62,Id,3,0,"tr",25),a()()(),r(63,"div",26)(64,"app-pagination",27),b("pageChange",function(d){return n.onPageChange(d)})("pageSizeChange",function(d){return n.onPageSizeChange(d)}),a()()()(),r(65,"app-customer-modal",28),b("customerSaved",function(){return n.loadCustomers()}),a()),t&2&&(l(4),u("formGroup",n.searchForm),l(30),u("ngIf",n.isLoading),l(27),u("ngForOf",n.customers),l(),u("ngIf",!(n.customers!=null&&n.customers.length)),l(2),u("currentPage",n.currentPage)("pageSize",n.pageSize)("totalElements",n.totalElements)("pageSizeOptions",n.pageSizeOptions))},dependencies:[ne,ye,Fe,Y,ln,lt,ge,me,tt,nt,ie,et,oe,de,pe,ue,$e,Le,qa,Ze],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}.table-responsive[_ngcontent-%COMP%]{margin:0 -20px;padding:0 20px;overflow-x:auto;position:relative;min-height:200px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--supporting);border-radius:4px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#738c98}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;padding:15px 12px;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;font-size:.95rem}.status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-size:.85rem;font-weight:500}.status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.status-badge.inactive[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.status-badge.pending[_ngcontent-%COMP%]{background-color:#90a4ae1f;color:var(--supporting)}@media (max-width: 768px){.search-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.search-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{max-width:100%}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:.85rem;padding:10px 8px}}.customer-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background)}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.customer-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:start}.customer-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.customer-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.customer-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.customer-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--text-secondary)}.customer-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80px;padding:5px;border-radius:4px;border:1px solid var(--supporting);background-color:#fff;color:var(--text-primary)}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--supporting)}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff;font-weight:600}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#aec6cf1a}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.875rem}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:var(--accent2);color:#fff}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.customer-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.pending[_ngcontent-%COMP%]{background-color:var(--supporting);color:#fff}@media (max-width: 768px){.customer-container[_ngcontent-%COMP%]{padding:10px}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:15px}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.customer-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;border-radius:4px;transition:all .2s ease}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:rgba(var(--secondary-rgb),.1);padding:8px;border-radius:6px;transition:all .2s ease}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;justify-content:flex-start}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{padding:6px}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:1}.loading-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:var(--primary)}.search-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.form-control[_ngcontent-%COMP%]{height:43px}@media (max-width: 768px){.search-controls[_ngcontent-%COMP%]{grid-template-columns:1fr}.search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{flex-direction:column;width:100%}.search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})}}return o})();var Ba=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${ct.apiUrl}/api/combined-purchase-sale`}createCombinedPurchaseSale(e){return this.http.post(`${this.apiUrl}/create`,e)}getCombinedEntries(e={}){return this.http.get(`${this.apiUrl}`,{params:e})}getCombinedEntryById(e){return this.http.get(`${this.apiUrl}/${e}`)}updateCombinedEntry(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}deleteCombinedEntry(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(t){return new(t||o)(he(Je))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Ad=()=>({label:"Select Product",value:""});function Fd(o,i){o&1&&m(0,"app-loader")}var Ha=(()=>{class o{constructor(e,t,n,s){this.fb=e,this.productService=t,this.combinedService=n,this.snackbar=s,this.products=[],this.loading=!1,this.isLoadingProducts=!1,this.initForm(),this.setupProductChangeListener()}ngOnInit(){this.loadProducts()}initForm(){let e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,16);this.combinedForm=this.fb.group({productId:["",x.required],purchaseUnitPrice:["",[x.required,x.min(.01)]],purchaseDate:[t,x.required],purchaseInvoiceNumber:[null],purchaseOtherExpenses:[0,[x.required,x.min(0)]],quantity:["",[x.required,x.min(1)]],saleUnitPrice:["",[x.required,x.min(.01)]],saleDate:[t,x.required],saleInvoiceNumber:[null],saleOtherExpenses:[0,[x.required,x.min(0)]],purchaseDiscount:[0,[x.required,x.min(0),x.max(100)]],purchaseDiscountAmount:[0,[x.required,x.min(0)]],purchaseDiscountedPrice:[{value:0,disabled:!0}],saleDiscount:[0,[x.required,x.min(0),x.max(100)]],saleDiscountAmount:[0,[x.required,x.min(0)]],saleDiscountedPrice:[{value:0,disabled:!0}]}),this.setupPurchaseDiscountCalculation(),this.setupSaleDiscountCalculation()}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).subscribe({next:e=>{e.success&&(this.products=e.data),this.isLoadingProducts=!1},error:e=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1}})}refreshProducts(){this.isLoadingProducts=!0,this.productService.refreshProducts().subscribe({next:e=>{e.success&&(this.products=e.data,this.snackbar.success("Products refreshed successfully")),this.isLoadingProducts=!1},error:e=>{this.snackbar.error("Failed to refresh products"),this.isLoadingProducts=!1}})}onSubmit(){if(this.combinedForm.valid){this.loading=!0;let e=le({},this.combinedForm.value);if(["purchaseDate","saleDate"].forEach(t=>{if(e[t])try{let n=new Date(e[t]);if(!isNaN(n.getTime()))e[t]=n.toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-").replace(",","");else{this.snackbar.error(`Invalid ${t} format`),this.loading=!1;return}}catch{this.snackbar.error(`Invalid ${t} format`),this.loading=!1;return}}),!this.loading)return;this.combinedService.createCombinedPurchaseSale(e).subscribe({next:t=>{this.snackbar.success("Combined purchase and sale created successfully"),this.resetForm(),this.loading=!1},error:t=>{this.snackbar.error(t?.error?.message||"Failed to create combined purchase and sale"),this.loading=!1}})}}resetForm(){let e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,16);this.combinedForm.reset({purchaseDate:t,saleDate:t,purchaseOtherExpenses:0,saleOtherExpenses:0,purchaseDiscount:0,purchaseDiscountAmount:0,purchaseDiscountedPrice:0,saleDiscount:0,saleDiscountAmount:0,saleDiscountedPrice:0})}isFieldInvalid(e){let t=this.combinedForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}getFieldError(e){let t=this.combinedForm.get(e);if(t?.errors){if(t.errors.required)return`${e} is required`;if(t.errors.min)return`${e} must be greater than ${t.errors.min.min}`}return""}setupProductChangeListener(){this.combinedForm.get("productId")?.valueChanges.subscribe(e=>{if(e){let t=this.products.find(n=>n.id===e);t&&this.combinedForm.patchValue({purchaseUnitPrice:t.purchase_amount,saleUnitPrice:t.sale_amount},{emitEvent:!1})}})}setupPurchaseDiscountCalculation(){["quantity","purchaseUnitPrice","purchaseDiscount","purchaseDiscountAmount"].forEach(t=>{this.combinedForm.get(t)?.valueChanges.subscribe(()=>{this.calculatePurchaseDiscount()})})}setupSaleDiscountCalculation(){["quantity","saleUnitPrice","saleDiscount","saleDiscountAmount"].forEach(t=>{this.combinedForm.get(t)?.valueChanges.subscribe(()=>{this.calculateSaleDiscount()})})}calculateDiscount(e){let t=e.quantity*e.unitPrice;return e.discountAmount>0?(e.finalPrice=t-e.discountAmount,e.discountPercentage=e.discountAmount/t*100):e.discountPercentage>0?(e.discountAmount=t*e.discountPercentage/100,e.finalPrice=t-e.discountAmount):e.finalPrice=t,e}calculatePurchaseDiscount(){let e={quantity:this.combinedForm.get("quantity")?.value||0,unitPrice:this.combinedForm.get("purchaseUnitPrice")?.value||0,discountPercentage:this.combinedForm.get("purchaseDiscount")?.value||0,discountAmount:this.combinedForm.get("purchaseDiscountAmount")?.value||0,finalPrice:0},t=this.calculateDiscount(e);this.combinedForm.patchValue({purchaseDiscountAmount:t.discountAmount,purchaseDiscount:t.discountPercentage,purchaseDiscountedPrice:t.finalPrice},{emitEvent:!1})}calculateSaleDiscount(){let e={quantity:this.combinedForm.get("quantity")?.value||0,unitPrice:this.combinedForm.get("saleUnitPrice")?.value||0,discountPercentage:this.combinedForm.get("saleDiscount")?.value||0,discountAmount:this.combinedForm.get("saleDiscountAmount")?.value||0,finalPrice:0},t=this.calculateDiscount(e);this.combinedForm.patchValue({saleDiscountAmount:t.discountAmount,saleDiscount:t.discountPercentage,saleDiscountedPrice:t.finalPrice},{emitEvent:!1})}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(Yt),y(Ba),y(ve))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-add-combined-purchase-sale"]],standalone:!0,features:[W],decls:137,vars:33,consts:[[1,"combined-form-container"],["routerLink","/purchase",1,"btn","btn-sm","btn-secondary","back-btn"],[1,"fas","fa-arrow-left"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-cart-plus"],[1,"combined-form",3,"ngSubmit","formGroup"],[1,"section-card"],[1,"form-row","two-columns"],[1,"form-group"],["for","productId"],[1,"fas","fa-box"],[1,"required"],[1,"product-select-group"],["formControlName","productId","labelKey","name","valueKey","id",3,"options","placeholder","defaultOption","searchPlaceholder"],["type","button","title","Refresh Products",1,"btn","btn-primary","btn-sm","refresh","mt-2",3,"click","disabled"],[1,"fas",3,"ngClass"],["for","quantity"],[1,"fas","fa-hashtag"],["type","number","id","quantity","formControlName","quantity","min","1",1,"form-control"],[1,"purchase-sale-grid"],[1,"purchase-section"],[1,"section-title"],[1,"fas","fa-shopping-cart"],[1,"form-column"],["for","purchaseUnitPrice"],[1,"fas","fa-tag"],[1,"input-group"],["type","number","id","purchaseUnitPrice","formControlName","purchaseUnitPrice","min","0.01","step","0.01",1,"form-control"],["for","purchaseDate"],[1,"fas","fa-calendar"],["type","datetime-local","id","purchaseDate","formControlName","purchaseDate",1,"form-control"],["for","purchaseInvoiceNumber"],[1,"fas","fa-file-invoice"],["type","text","id","purchaseInvoiceNumber","formControlName","purchaseInvoiceNumber",1,"form-control"],["for","purchaseOtherExpenses"],[1,"fas","fa-coins"],["type","number","id","purchaseOtherExpenses","formControlName","purchaseOtherExpenses","min","0","step","0.01",1,"form-control"],["for","purchaseDiscount"],[1,"fas","fa-percent"],["type","number","id","purchaseDiscount","formControlName","purchaseDiscount","min","0","max","100","step","0.01",1,"form-control"],["for","purchaseDiscountAmount"],[1,"fas","fa-tags"],["type","number","id","purchaseDiscountAmount","formControlName","purchaseDiscountAmount","min","0","step","0.01",1,"form-control"],["for","purchaseDiscountedPrice"],[1,"fas","fa-calculator"],["type","number","id","purchaseDiscountedPrice","formControlName","purchaseDiscountedPrice","readonly","",1,"form-control"],[1,"sale-section"],[1,"fas","fa-cash-register"],["for","saleUnitPrice"],["type","number","id","saleUnitPrice","formControlName","saleUnitPrice","min","0.01","step","0.01",1,"form-control"],["for","saleDate"],["type","datetime-local","id","saleDate","formControlName","saleDate",1,"form-control"],["for","saleInvoiceNumber"],["type","text","id","saleInvoiceNumber","formControlName","saleInvoiceNumber",1,"form-control"],["for","saleOtherExpenses"],["type","number","id","saleOtherExpenses","formControlName","saleOtherExpenses","min","0","step","0.01",1,"form-control"],["for","saleDiscount"],["type","number","id","saleDiscount","formControlName","saleDiscount","min","0","max","100","step","0.01",1,"form-control"],["for","saleDiscountAmount"],["type","number","id","saleDiscountAmount","formControlName","saleDiscountAmount","min","0","step","0.01",1,"form-control"],["for","saleDiscountedPrice"],["type","number","id","saleDiscountedPrice","formControlName","saleDiscountedPrice","readonly","",1,"form-control"],[1,"form-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[4,"ngIf"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"button",1),m(2,"i",2),c(3," Back to Purchases "),a(),r(4,"div",3)(5,"div",4)(6,"h2",5),m(7,"i",6),c(8," Combined Purchase & Sale Entry "),a()(),r(9,"form",7),b("ngSubmit",function(){return n.onSubmit()}),r(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),m(14,"i",12),c(15," Select Product "),r(16,"span",13),c(17,"*"),a()(),r(18,"div",14),m(19,"app-searchable-select",15),r(20,"button",16),b("click",function(){return n.refreshProducts()}),m(21,"i",17),a()()(),r(22,"div",10)(23,"label",18),m(24,"i",19),c(25," Quantity "),r(26,"span",13),c(27,"*"),a()(),m(28,"input",20),a()()(),r(29,"div",8)(30,"div",21)(31,"div",22)(32,"h3",23),m(33,"i",24),c(34," Purchase Details "),a(),r(35,"div",25)(36,"div",10)(37,"label",26),m(38,"i",27),c(39," Purchase Unit Price "),r(40,"span",13),c(41,"*"),a()(),r(42,"div",28),m(43,"input",29),a()(),r(44,"div",10)(45,"label",30),m(46,"i",31),c(47," Purchase Date "),r(48,"span",13),c(49,"*"),a()(),m(50,"input",32),a(),r(51,"div",10)(52,"label",33),m(53,"i",34),c(54," Purchase Invoice Number "),a(),m(55,"input",35),a(),r(56,"div",10)(57,"label",36),m(58,"i",37),c(59," Purchase Other Expenses "),a(),r(60,"div",28),m(61,"input",38),a()(),r(62,"div",10)(63,"label",39),m(64,"i",40),c(65," Discount Percentage "),a(),r(66,"div",28),m(67,"input",41),a()(),r(68,"div",10)(69,"label",42),m(70,"i",43),c(71," Discount Amount "),a(),r(72,"div",28),m(73,"input",44),a()(),r(74,"div",10)(75,"label",45),m(76,"i",46),c(77," Final Price "),a(),r(78,"div",28),m(79,"input",47),a()()()(),r(80,"div",48)(81,"h3",23),m(82,"i",49),c(83," Sale Details "),a(),r(84,"div",25)(85,"div",10)(86,"label",50),m(87,"i",27),c(88," Sale Unit Price "),r(89,"span",13),c(90,"*"),a()(),r(91,"div",28),m(92,"input",51),a()(),r(93,"div",10)(94,"label",52),m(95,"i",31),c(96," Sale Date "),r(97,"span",13),c(98,"*"),a()(),m(99,"input",53),a(),r(100,"div",10)(101,"label",54),m(102,"i",34),c(103," Sale Invoice Number "),a(),m(104,"input",55),a(),r(105,"div",10)(106,"label",56),m(107,"i",37),c(108," Sale Other Expenses "),a(),r(109,"div",28),m(110,"input",57),a()(),r(111,"div",10)(112,"label",58),m(113,"i",40),c(114," Discount Percentage "),a(),r(115,"div",28),m(116,"input",59),a()(),r(117,"div",10)(118,"label",60),m(119,"i",43),c(120," Discount Amount "),a(),r(121,"div",28),m(122,"input",61),a()(),r(123,"div",10)(124,"label",62),m(125,"i",46),c(126," Final Price "),a(),r(127,"div",28),m(128,"input",63),a()()()()()(),r(129,"div",64)(130,"button",65),b("click",function(){return n.resetForm()}),m(131,"i",66),c(132," Reset "),a(),r(133,"button",67),m(134,"i",17),c(135),a()()()()(),O(136,Fd,1,0,"app-loader",68)),t&2&&(l(9),u("formGroup",n.combinedForm),l(10),L("is-invalid",n.isFieldInvalid("productId")),u("options",n.products)("placeholder","Select Product")("defaultOption",cn(32,Ad))("searchPlaceholder","Search products..."),l(),u("disabled",n.isLoadingProducts),l(),u("ngClass",n.isLoadingProducts?"fa-spinner fa-spin":"fa-sync-alt"),l(7),L("is-invalid",n.isFieldInvalid("quantity")),l(15),L("is-invalid",n.isFieldInvalid("purchaseUnitPrice")),l(7),L("is-invalid",n.isFieldInvalid("purchaseDate")),l(17),L("is-invalid",n.isFieldInvalid("purchaseDiscount")),l(6),L("is-invalid",n.isFieldInvalid("purchaseDiscountAmount")),l(19),L("is-invalid",n.isFieldInvalid("saleUnitPrice")),l(7),L("is-invalid",n.isFieldInvalid("saleDate")),l(17),L("is-invalid",n.isFieldInvalid("saleDiscount")),l(6),L("is-invalid",n.isFieldInvalid("saleDiscountAmount")),l(8),u("disabled",n.loading),l(3),u("disabled",n.combinedForm.invalid||n.loading),l(),u("ngClass",n.loading?"fa-spinner fa-spin":"fa-save"),l(),w(" ",n.loading?"Saving...":"Save Entry"," "),l(),u("ngIf",n.loading))},dependencies:[ne,ye,Y,ge,me,ie,bt,oe,de,yt,Wn,pe,ue,Le,Ge,xe,At],styles:[".combined-form-container[_ngcontent-%COMP%]{padding:1.5rem;margin:0 auto;max-width:1400px}.back-btn[_ngcontent-%COMP%]{margin-bottom:1.5rem}.back-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;border:1px solid var(--border-color);overflow:hidden;margin-bottom:2rem}.card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.combined-form[_ngcontent-%COMP%]{padding:1.5rem}@media (min-width: 768px){.combined-form[_ngcontent-%COMP%]{padding:2rem}}.section-card[_ngcontent-%COMP%]{background:var(--background-light);border-radius:8px;padding:1.25rem;margin-bottom:1rem;border:1px solid var(--border-color);box-shadow:0 2px 4px #0000000d}.section-card[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--primary);font-size:1.25rem;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}.section-card[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1em}.form-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem;grid-template-columns:1fr}@media (min-width: 576px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (min-width: 992px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;width:90%}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{width:90%}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem;color:var(--text-primary);font-weight:500;display:flex;align-items:center;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger);margin-left:4px}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[formControlName=purchaseUnitPrice][_ngcontent-%COMP%]{transition:background-color .3s ease}.form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[formControlName=purchaseUnitPrice].auto-filled[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_highlight-background 1s ease}.product-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start;width:100%}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-container{height:42px;border-radius:var(--border-radius);transition:all .3s ease}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]{background-color:var(--background);color:var(--primary);width:42px;border-radius:6px;transition:all .2s ease;flex-shrink:0}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary);color:#fff;transform:translateY(-1px)}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:active{transform:translateY(0)}.product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.input-group[_ngcontent-%COMP%]{width:100%}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:90%!important;border-top-left-radius:0;border-bottom-left-radius:0}.form-control[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:var(--border-radius);font-size:.95rem;transition:all .3s ease;background-color:var(--input-bg, #fff);color:var(--text-primary);min-width:252px}.invalid-feedback[_ngcontent-%COMP%]{display:block;color:var(--danger);font-size:.875rem;margin-top:.25rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:space-between;margin-top:2rem;padding-top:1.5rem;border-top:1px solid var(--border-color)}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;font-size:1rem;border-radius:4px;cursor:pointer;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1em}@media (max-width: 768px){.combined-form-container[_ngcontent-%COMP%], .section-card[_ngcontent-%COMP%]{padding:1rem}.form-control[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%]{height:40px;padding:.5rem .75rem}}.form-row.two-columns[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:1rem;margin-bottom:1rem;align-items:flex-start}.form-row.two-columns[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width: 768px){.form-row.two-columns[_ngcontent-%COMP%]{grid-template-columns:1fr}}.purchase-sale-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}@media (max-width: 992px){.purchase-sale-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.purchase-sale-grid[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%], .purchase-sale-grid[_ngcontent-%COMP%]   .sale-section[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);padding:1rem;border:1px solid var(--border-color);box-shadow:0 2px 4px #0000000d}.purchase-sale-grid[_ngcontent-%COMP%]   .purchase-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%], .purchase-sale-grid[_ngcontent-%COMP%]   .sale-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{color:var(--primary);font-size:1.25rem;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:2px solid var(--border-color)}.purchase-sale-grid[_ngcontent-%COMP%]   .form-column[_ngcontent-%COMP%]{display:grid;flex-direction:column;grid-template-columns:1fr 1fr;gap:.875rem}.form-control[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:var(--border-radius);font-size:.95rem;transition:all .3s ease;background-color:var(--input-bg, #fff);color:var(--text-primary)}.form-control[_ngcontent-%COMP%]:hover{border-color:var(--primary-dark)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.15)}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger, #dc3545)}.form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc354526}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:.95rem;color:var(--text-secondary);background-color:var(--background-light);border-right:0;border-radius:var(--border-radius) 0 0 var(--border-radius)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:90%!important;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:1px}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-left-width:2px}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus ~ .input-group-text[_ngcontent-%COMP%]{border-color:var(--primary)}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-container{border-radius:var(--border-radius);transition:all .3s ease}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-container:hover{border-color:var(--primary-dark)}.product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]     .select-container:focus-within{box-shadow:0 0 0 3px rgba(var(--primary-rgb),.15)}.section-card[_ngcontent-%COMP%], .purchase-section[_ngcontent-%COMP%], .sale-section[_ngcontent-%COMP%]{border-radius:var(--border-radius)}.input-group[_ngcontent-%COMP%]   input[formControlName=purchaseUnitPrice][_ngcontent-%COMP%]{transition:all .3s ease}.input-group[_ngcontent-%COMP%]   input[formControlName=purchaseUnitPrice].ng-touched[_ngcontent-%COMP%]:not(:focus){background-color:rgba(var(--primary-rgb),.05)}@keyframes _ngcontent-%COMP%_highlight{0%{background-color:rgba(var(--primary-rgb),.1)}to{background-color:transparent}}.auto-filled[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_highlight 1s ease}@keyframes _ngcontent-%COMP%_highlight-background{0%{background-color:rgba(var(--primary-rgb),.1)}50%{background-color:rgba(var(--primary-rgb),.1)}to{background-color:transparent}}.discount-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border-color)}@media (max-width: 768px){.discount-group[_ngcontent-%COMP%]{grid-template-columns:1fr}}.discount-group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:0}.discount-group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:read-only{background-color:var(--background-light);cursor:not-allowed}.discount-group[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:40px;justify-content:center}"]})}}return o})();var xt=(()=>{class o{constructor(e,t){this.http=e,this.encryptionService=t,this.CACHE_KEY="active_employees",this.apiUrl=`${ct.apiUrl}/api/employees`}searchEmployees(e){return this.http.post(`${this.apiUrl}/search`,e)}createEmployee(e){return this.http.post(this.apiUrl,e)}updateEmployee(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}deleteEmployee(e){return this.http.delete(`${this.apiUrl}/${e}`)}getEmployeeDetail(e){return this.http.post(`${this.apiUrl}/detail`,{id:e}).pipe(Ii(t=>{if(t.success){let n=this.encryptionService.encrypt(JSON.stringify(t.data));localStorage.setItem("selectedEmployee",n)}}))}getAllEmployees(){let e=localStorage.getItem(this.CACHE_KEY);if(e){let t=this.encryptionService.decrypt(e);if(t)return Bo(t)}return this.http.post(`${this.apiUrl}/all`,{}).pipe(Ii(t=>{if(t.success){let n=this.encryptionService.encrypt(t);localStorage.setItem(this.CACHE_KEY,n)}}))}refreshEmployees(){return localStorage.removeItem(this.CACHE_KEY),this.getAllEmployees()}static{this.\u0275fac=function(t){return new(t||o)(he(Je),he(dt))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Nd=(o,i)=>({active:o,inactive:i}),Ld=o=>["/employee/edit",o];function Vd(o,i){if(o&1){let e=U();r(0,"tr")(1,"td"),c(2),a(),r(3,"td"),c(4),a(),r(5,"td"),c(6),a(),r(7,"td"),c(8),a(),r(9,"td"),c(10),a(),r(11,"td")(12,"span",23),c(13),a()(),r(14,"td",24)(15,"button",25),m(16,"i",26),a(),r(17,"button",27),b("click",function(){let n=k(e).$implicit,s=P();return T(s.deleteEmployee(n.id))}),m(18,"i",28),a()()()}if(o&2){let e=i.$implicit;l(2),I(e.name),l(2),I(e.mobileNumber),l(2),I(e.email),l(2),I(e.designation),l(2),I(e.department),l(2),u("ngClass",_t(8,Nd,e.status==="A",e.status!=="A")),l(),w(" ",e.status==="A"?"Active":"Inactive"," "),l(2),u("routerLink",ut(11,Ld,e.id))}}function Rd(o,i){o&1&&(r(0,"tr")(1,"td",29),c(2,"No employees found"),a()())}function zd(o,i){if(o&1){let e=U();r(0,"app-pagination",30),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var Ga=(()=>{class o{constructor(e,t,n){this.employeeService=e,this.fb=t,this.snackbar=n,this.employees=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.initializeForm()}ngOnInit(){this.loadEmployees()}initializeForm(){this.searchForm=this.fb.group({search:[""]})}loadEmployees(){this.isLoading=!0;let e=Xe(le({},this.searchForm.value),{page:this.currentPage,size:this.pageSize});this.employeeService.searchEmployees(e).subscribe({next:t=>{t.success&&(this.employees=t.data.content,this.totalPages=t.data.totalPages,this.totalElements=t.data.totalElements,this.updatePaginationIndexes()),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load employees"),this.isLoading=!1}})}onSearch(){this.currentPage=0,this.pageSize=10,this.loadEmployees()}resetForm(){this.searchForm.reset(),this.currentPage=0,this.pageSize=10,this.loadEmployees()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadEmployees()}deleteEmployee(e){confirm("Are you sure you want to delete this employee?")&&(this.isLoading=!0,this.employeeService.deleteEmployee(e).subscribe({next:t=>{t.success&&(this.snackbar.success("Employee deleted successfully"),this.loadEmployees())},error:t=>{this.snackbar.error(t?.error?.message||"Failed to delete employee"),this.isLoading=!1}}))}onPageChange(e){e>=0&&e<this.totalPages&&(this.currentPage=e,this.loadEmployees())}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}static{this.\u0275fac=function(t){return new(t||o)(y(xt),y(re),y(ve))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-employee-list"]],standalone:!0,features:[W],decls:47,vars:7,consts:[[1,"employee-container"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search employees...",1,"form-control"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"action-buttons"],["routerLink","/employee/create",1,"btn","btn-sm","btn-primary"],[1,"fas","fa-plus"],[1,"employees-list","card"],[1,"table-wrapper"],[1,"table-container"],[3,"show"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"status-badge",3,"ngClass"],[1,"actions"],["title","Edit Employee",1,"btn-icon","edit",3,"routerLink"],[1,"fas","fa-edit"],["title","Delete Employee",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","8",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Search Employees"),a(),r(4,"form",2),b("ngSubmit",function(){return n.onSearch()}),r(5,"div",3)(6,"div",4),m(7,"input",5),a(),r(8,"div",6)(9,"button",7),m(10,"i",8),c(11," Search "),a(),r(12,"button",9),b("click",function(){return n.resetForm()}),m(13,"i",10),c(14," Reset "),a()()()()(),r(15,"div",11)(16,"button",12),m(17,"i",13),c(18," Add Employee "),a()(),r(19,"div",14)(20,"h2"),c(21,"Employees"),a(),r(22,"div",15)(23,"div",16),m(24,"app-loader",17),r(25,"div",18)(26,"table",19)(27,"thead")(28,"tr")(29,"th"),c(30,"Name"),a(),r(31,"th"),c(32,"Mobile"),a(),r(33,"th"),c(34,"Email"),a(),r(35,"th"),c(36,"Designation"),a(),r(37,"th"),c(38,"Department"),a(),r(39,"th"),c(40,"Status"),a(),r(41,"th"),c(42,"Actions"),a()()(),r(43,"tbody"),O(44,Vd,19,13,"tr",20)(45,Rd,3,0,"tr",21),a()()()()(),O(46,zd,1,4,"app-pagination",22),a()()),t&2&&(l(4),u("formGroup",n.searchForm),l(20),u("show",n.isLoading),l(),L("loading",n.isLoading),l(19),u("ngForOf",n.employees),l(),u("ngIf",!(n.employees!=null&&n.employees.length)),l(),u("ngIf",n.totalPages>0))},dependencies:[ne,ye,Fe,Y,Le,Ge,ge,me,ie,oe,de,pe,ue,$e,xe,Ze],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}.employee-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background)}.employee-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.employee-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:start}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:43px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px}.employee-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin:20px 0}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--text-secondary)}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80px;padding:5px;border-radius:4px;border:1px solid var(--supporting);background-color:#fff;color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative;min-height:200px;background:#fff}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;width:100%}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;min-height:200px;overflow-x:auto}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--supporting);border-radius:4px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#738c98}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;padding:15px 12px;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px;background-color:var(--background);color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;border-top:1px solid var(--supporting);color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:.85rem;font-weight:500}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;border-radius:4px;transition:all .2s ease}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:rgba(var(--secondary-rgb),.1);padding:8px;border-radius:6px}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a;padding:8px;border-radius:6px}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.employee-container[_ngcontent-%COMP%]{padding:10px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin:0 -15px;padding:0 15px}}"]})}}return o})();function jd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("name")," ")}}function $d(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("mobileNumber")," ")}}function qd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("aadharNumber")," ")}}function Ud(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("email")," ")}}function Bd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("designation")," ")}}function Hd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("department")," ")}}function Gd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("status")," ")}}function Qd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("regularPay")," ")}}function Kd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("overtimePay")," ")}}function Yd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("wageType")," ")}}function Zd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("regularHours")," ")}}function Wd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("startTime")," ")}}function Xd(o,i){if(o&1&&(r(0,"div",56),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("address")," ")}}var No=(()=>{class o{constructor(e,t,n,s,d){this.fb=e,this.employeeService=t,this.router=n,this.route=s,this.snackbar=d,this.isLoading=!1,this.isEditMode=!1,this.initializeForm()}ngOnInit(){this.employeeId=Number(this.route.snapshot.paramMap.get("id")),this.employeeId&&(this.isEditMode=!0,this.loadEmployee())}initializeForm(){this.employeeForm=this.fb.group({name:[null,[x.required]],mobileNumber:[null,[]],aadharNumber:[null,[x.pattern("^[0-9]{12}$")]],email:[null,[x.email]],address:[null,[]],designation:[null,[]],department:[null,[]],status:["A"],regularPay:[null,[x.required]],overtimePay:[null,[x.required]],wageType:["HOURLY",[x.required]],regularHours:[8,[x.required,x.min(0)]],startTime:["07:00",[x.required,x.pattern("^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$")]]})}formatDateForApi(e){let t=new Date(e),n=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),d=t.getFullYear();return`${n}-${s}-${d} 00:00:00`}onSubmit(){if(this.employeeForm.valid){this.isLoading=!0;let e=le({},this.employeeForm.value);(this.isEditMode?this.employeeService.updateEmployee(this.employeeId,e):this.employeeService.createEmployee(e)).subscribe({next:n=>{n.success&&(this.snackbar.success(n.message),this.router.navigate(["/employee"]))},error:n=>{this.snackbar.error(n.message||`Failed to ${this.isEditMode?"update":"create"} employee`),this.isLoading=!1}})}else Object.keys(this.employeeForm.controls).forEach(e=>{let t=this.employeeForm.get(e);t?.invalid&&t.markAsTouched()})}loadEmployee(){this.employeeId&&(this.isLoading=!0,this.employeeService.getEmployeeDetail(this.employeeId).subscribe({next:e=>{e.success&&this.employeeForm.patchValue({name:e.data.name,mobileNumber:e.data.mobileNumber,aadharNumber:e.data.aadharNumber,email:e.data.email,address:e.data.address,designation:e.data.designation,department:e.data.department,status:e.data.status,regularPay:e.data.regularPay,overtimePay:e.data.overtimePay,wageType:e.data.wageType||"HOURLY",regularHours:e.data.regularHours||8,startTime:e.data.startTime||"07:00"}),this.isLoading=!1},error:e=>{this.snackbar.error(e?.error?.message||"Failed to load employee details"),this.isLoading=!1}}))}isFieldInvalid(e){let t=this.employeeForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}getFieldError(e){let t=this.employeeForm.get(e);if(t?.errors&&t.touched){if(t.errors.required)return`${e} is required`;if(t.errors.email)return"Invalid email format";if(t.errors.pattern)return e==="startTime"?"Invalid time format (HH:mm)":"Invalid format";if(t.errors.min)return`${e} must be greater than 0`}return""}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(xt),y(Ne),y(Kt),y(ve))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-employee-form"]],standalone:!0,features:[W],decls:112,vars:45,consts:[[1,"employee-form-container"],[3,"show"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-user"],[1,"employee-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","name"],[1,"required"],["type","text","id","name","formControlName","name",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["for","mobileNumber"],[1,"fas","fa-phone"],["type","text","id","mobileNumber","formControlName","mobileNumber",1,"form-control"],["for","aadharNumber"],[1,"fas","fa-id-card"],["type","text","id","aadharNumber","formControlName","aadharNumber",1,"form-control"],["for","email"],[1,"fas","fa-envelope"],["type","email","id","email","formControlName","email",1,"form-control"],["for","designation"],[1,"fas","fa-briefcase"],["type","text","id","designation","formControlName","designation",1,"form-control"],["for","department"],[1,"fas","fa-building"],["type","text","id","department","formControlName","department",1,"form-control"],["for","status"],[1,"fas","fa-toggle-on"],["id","status","formControlName","status",1,"form-control"],["value","A"],["value","I"],["for","regularPay"],[1,"fa-solid","fa-coins"],["type","number","id","regularPay","formControlName","regularPay",1,"form-control"],["for","overtimePay"],["type","number","id","overtimePay","formControlName","overtimePay",1,"form-control"],["for","wageType"],[1,"fas","fa-money-bill"],["id","wageType","formControlName","wageType",1,"form-control"],["value","HOURLY"],["for","regularHours"],[1,"fas","fa-clock"],["type","number","id","regularHours","formControlName","regularHours","min","0",1,"form-control"],["for","startTime"],[1,"fas","fa-hourglass-start"],["type","time","id","startTime","formControlName","startTime",1,"form-control"],["for","address"],[1,"fas","fa-map-marker-alt"],["id","address","formControlName","address","rows","3",1,"form-control"],[1,"form-actions"],["type","button","routerLink","/employee",1,"btn","btn-sm","btn-secondary"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],[1,"invalid-feedback"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"div",3)(4,"h2",4),m(5,"i",5),c(6),a()(),r(7,"form",6),b("ngSubmit",function(){return n.onSubmit()}),r(8,"div",7)(9,"div",8)(10,"label",9),m(11,"i",5),c(12," Name "),r(13,"span",10),c(14,"*"),a()(),m(15,"input",11),O(16,jd,2,1,"div",12),a(),r(17,"div",8)(18,"label",13),m(19,"i",14),c(20," Mobile Number "),a(),m(21,"input",15),O(22,$d,2,1,"div",12),a(),r(23,"div",8)(24,"label",16),m(25,"i",17),c(26," Aadhar Number "),a(),m(27,"input",18),O(28,qd,2,1,"div",12),a()(),r(29,"div",7)(30,"div",8)(31,"label",19),m(32,"i",20),c(33," Email "),a(),m(34,"input",21),O(35,Ud,2,1,"div",12),a(),r(36,"div",8)(37,"label",22),m(38,"i",23),c(39," Designation "),a(),m(40,"input",24),O(41,Bd,2,1,"div",12),a()(),r(42,"div",7)(43,"div",8)(44,"label",25),m(45,"i",26),c(46," Department "),a(),m(47,"input",27),O(48,Hd,2,1,"div",12),a(),r(49,"div",8)(50,"label",28),m(51,"i",29),c(52," Status "),a(),r(53,"select",30)(54,"option",31),c(55,"Active"),a(),r(56,"option",32),c(57,"Inactive"),a()(),O(58,Gd,2,1,"div",12),a()(),r(59,"div",7)(60,"div",8)(61,"label",33),m(62,"i",34),c(63," Regular Hours Price "),a(),m(64,"input",35),O(65,Qd,2,1,"div",12),a(),r(66,"div",8)(67,"label",36),m(68,"i",34),c(69," Overtime Hours Price "),a(),m(70,"input",37),O(71,Kd,2,1,"div",12),a()(),r(72,"div",7)(73,"div",8)(74,"label",38),m(75,"i",39),c(76," Wage Type "),r(77,"span",10),c(78,"*"),a()(),r(79,"select",40)(80,"option",41),c(81,"Hourly"),a()(),O(82,Yd,2,1,"div",12),a(),r(83,"div",8)(84,"label",42),m(85,"i",43),c(86," Regular Hours "),r(87,"span",10),c(88,"*"),a()(),m(89,"input",44),O(90,Zd,2,1,"div",12),a(),r(91,"div",8)(92,"label",45),m(93,"i",46),c(94," Start Time "),r(95,"span",10),c(96,"*"),a()(),m(97,"input",47),O(98,Wd,2,1,"div",12),a()(),r(99,"div",8)(100,"label",48),m(101,"i",49),c(102," Address "),a(),m(103,"textarea",50),O(104,Xd,2,1,"div",12),a(),r(105,"div",51)(106,"button",52),m(107,"i",53),c(108," Cancel "),a(),r(109,"button",54),m(110,"i",55),c(111),a()()()()()),t&2&&(l(),u("show",n.isLoading),l(5),w(" ",n.isEditMode?"Edit Employee":"Create Employee"," "),l(),u("formGroup",n.employeeForm),l(8),L("is-invalid",n.isFieldInvalid("name")),l(),u("ngIf",n.isFieldInvalid("name")),l(5),L("is-invalid",n.isFieldInvalid("mobileNumber")),l(),u("ngIf",n.isFieldInvalid("mobileNumber")),l(5),L("is-invalid",n.isFieldInvalid("aadharNumber")),l(),u("ngIf",n.isFieldInvalid("aadharNumber")),l(6),L("is-invalid",n.isFieldInvalid("email")),l(),u("ngIf",n.isFieldInvalid("email")),l(5),L("is-invalid",n.isFieldInvalid("designation")),l(),u("ngIf",n.isFieldInvalid("designation")),l(6),L("is-invalid",n.isFieldInvalid("department")),l(),u("ngIf",n.isFieldInvalid("department")),l(5),L("is-invalid",n.isFieldInvalid("status")),l(5),u("ngIf",n.isFieldInvalid("status")),l(6),L("is-invalid",n.isFieldInvalid("regularPay")),l(),u("ngIf",n.isFieldInvalid("regularPay")),l(5),L("is-invalid",n.isFieldInvalid("overtimePay")),l(),u("ngIf",n.isFieldInvalid("overtimePay")),l(8),L("is-invalid",n.isFieldInvalid("wageType")),l(3),u("ngIf",n.isFieldInvalid("wageType")),l(7),L("is-invalid",n.isFieldInvalid("regularHours")),l(),u("ngIf",n.isFieldInvalid("regularHours")),l(7),L("is-invalid",n.isFieldInvalid("startTime")),l(),u("ngIf",n.isFieldInvalid("startTime")),l(5),L("is-invalid",n.isFieldInvalid("address")),l(),u("ngIf",n.isFieldInvalid("address")),l(5),u("disabled",n.employeeForm.invalid||n.isLoading),l(),u("ngClass",n.isLoading?"fa-spinner fa-spin":n.isEditMode?"fa-save":"fa-plus"),l(),w(" ",n.isLoading?"Processing...":n.isEditMode?"Update":"Create"," "))},dependencies:[ne,ye,Y,ge,me,tt,nt,ie,bt,et,oe,de,yt,pe,ue,xe,Ge],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}.employee-form-container[_ngcontent-%COMP%]{padding:1.5rem;margin:0 auto;max-width:1200px}.employee-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;overflow:hidden;margin-bottom:2rem}.employee-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.employee-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]{padding:2rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545;margin-left:4px}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:43px;border:1px solid var(--supporting);border-radius:8px;transition:all .3s ease}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 2px #1458811a}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 2px #dc35451a}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select.form-control[_ngcontent-%COMP%]{appearance:none;background-image:url(data:image/svg+xml,...);background-repeat:no-repeat;background-position:right .75rem center;background-size:16px 12px;padding-right:2.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem;padding-top:1rem;border-top:1px solid var(--background)}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;transition:all .3s ease}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media (max-width: 768px){.employee-form-container[_ngcontent-%COMP%]{padding:1rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]{padding:1.5rem}.employee-form-container[_ngcontent-%COMP%]   .employee-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return o})();var vi=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${ct.apiUrl}/api/employee-orders`}searchEmployeeOrders(e){return this.http.post(`${this.apiUrl}/search`,e)}createEmployeeOrder(e){return this.http.post(`${this.apiUrl}/create`,e)}updateEmployeeOrder(e){return this.http.put(`${this.apiUrl}/update`,e)}deleteEmployeeOrder(e){return this.http.delete(`${this.apiUrl}/${e}`)}getEmployeeOrderDetail(e){return this.http.post(`${this.apiUrl}/detail`,{id:e})}static{this.\u0275fac=function(t){return new(t||o)(he(Je))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Jd=o=>["/employee-order/edit",o];function em(o,i){if(o&1){let e=U();r(0,"tr")(1,"td"),c(2),a(),r(3,"td"),c(4),a(),r(5,"td"),c(6),a(),r(7,"td"),c(8),a(),r(9,"td")(10,"span",29),c(11),a()(),r(12,"td"),c(13),ze(14,"date"),a(),r(15,"td",30)(16,"button",31),m(17,"i",32),a(),r(18,"button",33),b("click",function(){let n,s=k(e).$implicit,d=P();return T(d.deleteEmployeeOrder((n=s.id)!==null&&n!==void 0?n:0))}),m(19,"i",34),a()()()}if(o&2){let e=i.$implicit;l(2),I(e.productName),l(2),w("",e.employeeIds.length||0," assigned"),l(2),I(e.quantity),l(2),I(e.remarks),l(2),u("ngClass","status-"+e.status.toLowerCase()),l(),w(" ",e.status==="O"?"Open":e.status==="I"?"In Progress":e.status==="C"?"Completed":"Unknown"," "),l(2),I(He(14,8,e.createdAt,"medium")),l(3),u("routerLink",ut(11,Jd,e.id))}}function tm(o,i){o&1&&(r(0,"tr")(1,"td",35),c(2,"No employee orders found"),a()())}function nm(o,i){if(o&1){let e=U();r(0,"app-pagination",36),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var Ka=(()=>{class o{constructor(e,t,n,s){this.employeeOrderService=e,this.fb=t,this.snackbar=n,this.dateUtils=s,this.employeeOrders=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.statusOptions=[{label:"All",value:""},{label:"Open",value:"O"},{label:"In Progress",value:"P"},{label:"Completed",value:"C"},{label:"Inactive",value:"I"}],this.initializeForm()}ngOnInit(){this.loadEmployeeOrders()}initializeForm(){this.searchForm=this.fb.group({search:[""],status:[""],startDate:[null],endDate:[null]})}loadEmployeeOrders(){this.isLoading=!0;let e=this.searchForm.value,t=Xe(le({currentPage:this.currentPage,perPageRecord:this.pageSize},e),{startDate:e.startDate?this.dateUtils.formatDateForApi(e.startDate,!0):null,endDate:e.endDate?this.dateUtils.formatDateForApi(e.endDate,!0):null});this.employeeOrderService.searchEmployeeOrders(t).subscribe({next:n=>{n.success&&(this.employeeOrders=n.data.content,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements,this.updatePaginationIndexes()),this.isLoading=!1},error:n=>{this.snackbar.error(n?.error?.message||"Failed to load employee orders"),this.isLoading=!1}})}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min((this.currentPage+1)*this.pageSize,this.totalElements)}onSearch(){this.currentPage=0,this.loadEmployeeOrders()}resetForm(){this.searchForm.reset(),this.currentPage=0,this.loadEmployeeOrders()}onPageChange(e){this.currentPage=e,this.loadEmployeeOrders()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadEmployeeOrders()}deleteEmployeeOrder(e){confirm("Are you sure you want to delete this employee order?")&&(this.isLoading=!0,this.employeeOrderService.deleteEmployeeOrder(e).subscribe({next:t=>{t.success&&(this.snackbar.success("Employee order deleted successfully"),this.loadEmployeeOrders())},error:t=>{this.snackbar.error(t.message||"Failed to delete employee order"),this.isLoading=!1}}))}getPageNumbers(){return Array.from({length:this.totalPages},(e,t)=>t+1)}static{this.\u0275fac=function(t){return new(t||o)(y(vi),y(re),y(ve),y(Ft))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-employee-order-list"]],standalone:!0,features:[W],decls:60,vars:5,consts:[[1,"employee-order-container"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by product name or remarks...",1,"form-control"],["formControlName","status",1,"form-control"],["value",""],["value","O"],["value","I"],["value","C"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"action-buttons"],["routerLink","/employee-order/create",1,"btn","btn-primary"],[1,"fas","fa-plus"],[1,"employee-orders-list","card"],[1,"table-responsive"],[3,"show"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-controls"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[3,"ngClass"],[1,"actions"],["title","Edit Order",1,"btn-icon","edit",3,"routerLink"],[1,"fas","fa-edit"],["title","Delete Order",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","7",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Search Employee Orders"),a(),r(4,"form",2),b("ngSubmit",function(){return n.onSearch()}),r(5,"div",3)(6,"div",4),m(7,"input",5),a(),r(8,"div",4)(9,"select",6)(10,"option",7),c(11,"All Status"),a(),r(12,"option",8),c(13,"Open"),a(),r(14,"option",9),c(15,"In Progress"),a(),r(16,"option",10),c(17,"Completed"),a()()(),r(18,"div",4),m(19,"input",11),a(),r(20,"div",4),m(21,"input",12),a(),r(22,"div",13)(23,"button",14),m(24,"i",15),c(25," Search "),a(),r(26,"button",16),b("click",function(){return n.resetForm()}),m(27,"i",17),c(28," Reset "),a()()()()(),r(29,"div",18)(30,"button",19),m(31,"i",20),c(32," Create Employee Order "),a()(),r(33,"div",21)(34,"h2"),c(35,"Employee Orders"),a(),r(36,"div",22),m(37,"app-loader",23),r(38,"table",24)(39,"thead")(40,"tr")(41,"th"),c(42,"Product"),a(),r(43,"th"),c(44,"Employees"),a(),r(45,"th"),c(46,"Quantity"),a(),r(47,"th"),c(48,"Remarks"),a(),r(49,"th"),c(50,"Status"),a(),r(51,"th"),c(52,"Created At"),a(),r(53,"th"),c(54,"Actions"),a()()(),r(55,"tbody"),O(56,em,20,13,"tr",25)(57,tm,3,0,"tr",26),a()()(),r(58,"div",27),O(59,nm,1,4,"app-pagination",28),a()()()),t&2&&(l(4),u("formGroup",n.searchForm),l(33),u("show",n.isLoading),l(19),u("ngForOf",n.employeeOrders),l(),u("ngIf",!(n.employeeOrders!=null&&n.employeeOrders.length)),l(2),u("ngIf",n.totalPages>0))},dependencies:[ne,ye,Fe,Y,lt,ge,me,tt,nt,ie,et,oe,de,pe,ue,$e,Le,Ge,xe,Ze],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}.employee-order-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background)}.employee-order-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.employee-order-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.employee-order-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;align-items:start}.employee-order-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}.employee-order-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin:20px 0}.employee-order-container[_ngcontent-%COMP%]   .status-o[_ngcontent-%COMP%]{color:var(--warning);background-color:#ffa5001a;padding:4px 8px;border-radius:4px;font-size:.875rem}.employee-order-container[_ngcontent-%COMP%]   .status-i[_ngcontent-%COMP%]{color:var(--info);background-color:#ffa5001a;padding:4px 8px;border-radius:4px;font-size:.875rem}.employee-order-container[_ngcontent-%COMP%]   .status-c[_ngcontent-%COMP%]{color:var(--success);background-color:#ffa5001a;padding:4px 8px;border-radius:4px;font-size:.875rem}@media (max-width: 768px){.employee-order-container[_ngcontent-%COMP%]{padding:10px}.employee-order-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:10px}.employee-order-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.employee-order-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin:0 -15px;padding:0 15px}}"]})}}return o})();function im(o,i){if(o&1&&(r(0,"div",38),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("productId")," ")}}function om(o,i){if(o&1&&(r(0,"div",38),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("employeeIds")," ")}}function rm(o,i){if(o&1&&(r(0,"div",38),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("quantity")," ")}}function am(o,i){if(o&1&&(r(0,"div",38),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("status")," ")}}var Lo=(()=>{class o{constructor(e,t,n,s,d,p,g){this.fb=e,this.employeeOrderService=t,this.employeeService=n,this.productService=s,this.router=d,this.route=p,this.snackbar=g,this.isLoading=!1,this.isEditMode=!1,this.products=[],this.employees=[],this.isLoadingProducts=!1,this.isLoadingEmployees=!1,this.initializeForm()}ngOnInit(){this.orderId=Number(this.route.snapshot.paramMap.get("id")),this.orderId&&(this.isEditMode=!0,this.loadEmployeeOrder()),this.loadProducts(),this.loadEmployees()}initializeForm(){this.employeeOrderForm=this.fb.group({productId:["",x.required],employeeIds:[[],x.required],quantity:["",[x.required,x.min(1)]],remarks:[""],status:["O",x.required]})}loadEmployeeOrder(){this.orderId&&(this.isLoading=!0,this.employeeOrderService.getEmployeeOrderDetail(this.orderId).subscribe({next:e=>{e.success&&this.employeeOrderForm.patchValue({productId:e.data.productId,employeeIds:e.data.employeeIds,quantity:e.data.quantity,remarks:e.data.remarks,status:e.data.status}),this.isLoading=!1},error:e=>{this.snackbar.error(e?.error?.message||"Failed to load employee order details"),this.isLoading=!1}}))}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).subscribe({next:e=>{e.success&&(this.products=e.data),this.isLoadingProducts=!1},error:()=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1}})}refreshProducts(){this.isLoadingProducts=!0,this.productService.refreshProducts().subscribe({next:e=>{e.success&&(this.products=e.data,this.snackbar.success("Products refreshed successfully")),this.isLoadingProducts=!1},error:e=>{this.snackbar.error("Failed to refresh products"),this.isLoadingProducts=!1}})}loadEmployees(){this.isLoadingEmployees=!0,this.employeeService.getAllEmployees().subscribe({next:e=>{e.success&&(this.employees=e.data),this.isLoadingEmployees=!1},error:()=>{this.snackbar.error("Failed to load employees"),this.isLoadingEmployees=!1}})}onSubmit(){if(this.employeeOrderForm.valid){this.isLoading=!0;let e=le({},this.employeeOrderForm.value);(this.isEditMode?this.employeeOrderService.updateEmployeeOrder(Xe(le({},e),{id:this.orderId})):this.employeeOrderService.createEmployeeOrder(e)).subscribe({next:n=>{n.success&&(this.snackbar.success(n.message),this.router.navigate(["/employee-order"]))},error:n=>{this.snackbar.error(n.message||`Failed to ${this.isEditMode?"update":"create"} employee order`),this.isLoading=!1}})}else Object.keys(this.employeeOrderForm.controls).forEach(e=>{let t=this.employeeOrderForm.get(e);t?.invalid&&t.markAsTouched()})}isFieldInvalid(e){let t=this.employeeOrderForm.get(e);return t?t.invalid&&t.touched:!1}getFieldError(e){let t=this.employeeOrderForm.get(e);if(t?.errors){if(t.errors.required)return"This field is required";if(t.errors.min)return"Value must be greater than 0"}return""}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(vi),y(xt),y(Yt),y(Ne),y(Kt),y(ve))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-employee-order-form"]],standalone:!0,features:[W],decls:64,vars:25,consts:[[1,"employee-order-form-container"],[3,"show"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-tasks"],[1,"employee-order-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","productId"],[1,"fas","fa-box"],[1,"required"],[1,"product-select-group"],["formControlName","productId","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder"],["type","button","title","Refresh Products",1,"btn-icon","refresh",3,"click","disabled"],[1,"fas",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","employeeIds"],[1,"fas","fa-users"],[1,"employee-select-group"],["formControlName","employeeIds","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder","multiple"],["type","button","title","Refresh Employees",1,"btn-icon","refresh",3,"click","disabled"],["for","quantity"],[1,"fas","fa-sort-amount-up"],["type","number","id","quantity","formControlName","quantity","min","1",1,"form-control"],["for","status"],[1,"fas","fa-info-circle"],["id","status","formControlName","status",1,"form-control"],["value","O"],["value","I"],["value","C"],["for","remarks"],[1,"fas","fa-comment"],["id","remarks","formControlName","remarks","rows","3",1,"form-control"],[1,"form-actions"],["type","button","routerLink","/employee-order",1,"btn","btn-secondary"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"div",3)(4,"h2",4),m(5,"i",5),c(6),a()(),r(7,"form",6),b("ngSubmit",function(){return n.onSubmit()}),r(8,"div",7)(9,"div",8)(10,"label",9),m(11,"i",10),c(12," Product "),r(13,"span",11),c(14,"*"),a()(),r(15,"div",12),m(16,"app-searchable-select",13),r(17,"button",14),b("click",function(){return n.refreshProducts()}),m(18,"i",15),a()(),O(19,im,2,1,"div",16),a(),r(20,"div",8)(21,"label",17),m(22,"i",18),c(23," Employees "),r(24,"span",11),c(25,"*"),a()(),r(26,"div",19),m(27,"app-searchable-select",20),r(28,"button",21),b("click",function(){return n.loadEmployees()}),m(29,"i",15),a()(),O(30,om,2,1,"div",16),a()(),r(31,"div",7)(32,"div",8)(33,"label",22),m(34,"i",23),c(35," Quantity "),r(36,"span",11),c(37,"*"),a()(),m(38,"input",24),O(39,rm,2,1,"div",16),a(),r(40,"div",8)(41,"label",25),m(42,"i",26),c(43," Status "),a(),r(44,"select",27)(45,"option",28),c(46,"Open"),a(),r(47,"option",29),c(48,"In Progress"),a(),r(49,"option",30),c(50,"Completed"),a()(),O(51,am,2,1,"div",16),a()(),r(52,"div",8)(53,"label",31),m(54,"i",32),c(55," Remarks "),a(),m(56,"textarea",33),a(),r(57,"div",34)(58,"button",35),m(59,"i",36),c(60," Cancel "),a(),r(61,"button",37),m(62,"i",15),c(63),a()()()()()),t&2&&(l(),u("show",n.isLoading),l(5),w(" ",n.isEditMode?"Edit Employee Order":"Create Employee Order"," "),l(),u("formGroup",n.employeeOrderForm),l(9),u("options",n.products)("placeholder","Select Product")("searchPlaceholder","Search products..."),l(),u("disabled",n.isLoadingProducts),l(),u("ngClass",n.isLoadingProducts?"fa-spinner fa-spin":"fa-sync-alt"),l(),u("ngIf",n.isFieldInvalid("productId")),l(8),u("options",n.employees)("placeholder","Select Employees")("searchPlaceholder","Search employees...")("multiple",!0),l(),u("disabled",n.isLoadingEmployees),l(),u("ngClass",n.isLoadingEmployees?"fa-spinner fa-spin":"fa-sync-alt"),l(),u("ngIf",n.isFieldInvalid("employeeIds")),l(8),L("is-invalid",n.isFieldInvalid("quantity")),l(),u("ngIf",n.isFieldInvalid("quantity")),l(5),L("is-invalid",n.isFieldInvalid("status")),l(7),u("ngIf",n.isFieldInvalid("status")),l(10),u("disabled",n.employeeOrderForm.invalid||n.isLoading),l(),u("ngClass",n.isLoading?"fa-spinner fa-spin":n.isEditMode?"fa-save":"fa-plus"),l(),w(" ",n.isLoading?"Processing...":n.isEditMode?"Update":"Create"," "))},dependencies:[ne,ye,Y,ge,me,tt,nt,ie,bt,et,oe,de,yt,pe,ue,xe,Ge,At,$e,Le],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}.employee-order-form-container[_ngcontent-%COMP%]{padding:1.5rem;margin:0 auto;max-width:1200px}.employee-order-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;overflow:hidden;margin-bottom:2rem}.employee-order-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.employee-order-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]{padding:2rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-bottom:1.5rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545;margin-left:4px}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%], .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%], .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%], .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]{padding:.75rem;height:42px;width:42px;display:flex;align-items:center;justify-content:center;border:1px solid var(--supporting);border-radius:8px;background:#fff;color:var(--primary);transition:all .3s ease}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled), .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .product-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled, .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}@media (max-width: 768px){.employee-order-form-container[_ngcontent-%COMP%], .employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]{padding:1rem}.employee-order-form-container[_ngcontent-%COMP%]   .employee-order-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return o})();var Mi=(o,i)=>({"text-success":o,"text-danger":i});function sm(o,i){if(o&1&&(r(0,"tr")(1,"td"),c(2),a(),r(3,"td"),c(4),ze(5,"date"),a(),r(6,"td"),c(7),ze(8,"number"),a(),r(9,"td",19),c(10),ze(11,"number"),a(),r(12,"td",19),c(13),ze(14,"number"),a()()),o&2){let e=i.$implicit,t=i.index,n=P();l(2),I(n.startIndex+t+1),l(2),I(He(5,7,e.date,"mediumDate")),l(3),I(He(8,10,e.totalExpenses,"1.2-2")),l(2),u("ngClass",_t(19,Mi,e.grossProfit>0,e.grossProfit<0)),l(),w(" ",He(11,13,e.grossProfit,"1.2-2")," "),l(2),u("ngClass",_t(22,Mi,e.netProfit>0,e.netProfit<0)),l(),w(" ",He(14,16,e.netProfit,"1.2-2")," ")}}function cm(o,i){if(o&1){let e=U();r(0,"button",26),b("click",function(){k(e);let n=P();return T(n.loadPage(0))}),c(1," 1 "),a()}}function lm(o,i){o&1&&(r(0,"span",27),c(1,"..."),a())}function dm(o,i){if(o&1){let e=U();En(0),r(1,"button",26),b("click",function(){let n=k(e).$implicit,s=P();return T(s.loadPage(n-1))}),c(2),a(),wn()}if(o&2){let e=i.$implicit,t=P();l(),L("active",e===t.currentPage+1),l(),w(" ",e," ")}}function mm(o,i){o&1&&(r(0,"span",27),c(1,"..."),a())}function pm(o,i){if(o&1){let e=U();r(0,"button",26),b("click",function(){k(e);let n=P();return T(n.loadPage((n.profits==null?null:n.profits.totalPages)-1))}),c(1),a()}if(o&2){let e=P();l(),w(" ",e.profits==null?null:e.profits.totalPages," ")}}var Ya=(()=>{class o{constructor(e,t,n){this.profitService=e,this.fb=t,this.snackbar=n,this.currentPage=0,this.pageSize=5,this.pageSizeOptions=[1,5,10,25,50],this.totalElements=0,this.startIndex=0,this.endIndex=0,this.isLoading=!1,this.destroy$=new Ve;let s=new Date,d=new Date(s.getFullYear(),s.getMonth(),1),p=new Date(s.getFullYear(),s.getMonth()+1,0);this.searchForm=this.fb.group({startDate:[this.formatDateForInput(d)],endDate:[this.formatDateForInput(p)]})}formatDateForInput(e){return e.toISOString().split("T")[0]}formatDateForApi(e,t){let n=new Date(e),s=n.getDate().toString().padStart(2,"0"),d=(n.getMonth()+1).toString().padStart(2,"0"),p=n.getFullYear();return`${s}-${d}-${p} ${t?"00:00:00":"23:59:59"}`}ngOnInit(){this.loadProfits()}loadProfits(){this.isLoading=!0;let e=this.searchForm.value,t={startDate:this.formatDateForApi(e.startDate,!0),endDate:this.formatDateForApi(e.endDate,!1)};this.profitService.getDailyProfits(t).pipe(Pe(this.destroy$)).subscribe({next:n=>{n.success?(this.profits=n.data,this.totalElements=n.data.totalElements,this.updatePaginationIndexes()):this.snackbar.error(n?.message||"Failed to load profits"),this.isLoading=!1},error:n=>{this.snackbar.error(n?.error?.message||"Failed to load profits"),this.isLoading=!1}})}onSearch(){this.loadProfits()}resetForm(){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),n=new Date(e.getFullYear(),e.getMonth()+1,0);this.searchForm.patchValue({startDate:this.formatDateForInput(t),endDate:this.formatDateForInput(n)}),this.loadProfits()}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}getTotalGrossProfit(){return this.profits?.content.reduce((e,t)=>e+t.grossProfit,0)||0}getTotalNetProfit(){return this.profits?.content.reduce((e,t)=>e+t.netProfit,0)||0}getPageNumbers(){let e=this.profits?.totalPages||0,t=this.currentPage+1,n=5,s=Math.max(1,t-Math.floor(n/2)),d=s+n-1;d>e&&(d=e,s=Math.max(1,d-n+1));let p=[];for(let g=s;g<=d;g++)p.push(g);return p}loadPage(e){e>=0&&e<this.profits?.totalPages&&(this.currentPage=e,this.loadProfits())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(t){return new(t||o)(y(yi),y(re),y(ve))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-daily-profit"]],standalone:!0,features:[W],decls:58,vars:26,consts:[[1,"profit-container"],[3,"show"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","date","formControlName","startDate","placeholder","Start Date",1,"form-control"],["type","date","formControlName","endDate","placeholder","End Date",1,"form-control"],[1,"button-group"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"profits-list","card"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"totals-row"],["colspan","3",1,"text-end"],[3,"ngClass"],[1,"pagination"],[1,"btn-page",3,"click","disabled"],[1,"fas","fa-chevron-left"],["class","btn-page",3,"click",4,"ngIf"],["class","pagination-dots",4,"ngIf"],[1,"fas","fa-chevron-right"],[1,"btn-page",3,"click"],[1,"pagination-dots"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"h2"),c(4,"Daily Profits"),a(),r(5,"form",3),b("ngSubmit",function(){return n.onSearch()}),r(6,"div",4)(7,"div",5),m(8,"input",6),a(),r(9,"div",5),m(10,"input",7),a(),r(11,"div",8)(12,"button",9),m(13,"i",10),c(14," Search "),a(),r(15,"button",11),b("click",function(){return n.resetForm()}),m(16,"i",12),c(17," Reset "),a()()()()(),r(18,"div",13)(19,"div",14)(20,"table",15)(21,"thead")(22,"tr")(23,"th"),c(24,"#"),a(),r(25,"th"),c(26,"Date"),a(),r(27,"th"),c(28,"Total Expenses"),a(),r(29,"th"),c(30,"Gross Profit"),a(),r(31,"th"),c(32,"Net Profit"),a()()(),r(33,"tbody"),O(34,sm,15,25,"tr",16),a(),r(35,"tfoot")(36,"tr",17)(37,"td",18)(38,"strong"),c(39,"Totals:"),a()(),r(40,"td",19)(41,"strong"),c(42),ze(43,"number"),a()(),r(44,"td",19)(45,"strong"),c(46),ze(47,"number"),a()()()()()()(),r(48,"div",20)(49,"button",21),b("click",function(){return n.loadPage(n.currentPage-1)}),m(50,"i",22),a(),O(51,cm,2,0,"button",23)(52,lm,2,0,"span",24)(53,dm,3,3,"ng-container",16)(54,mm,2,0,"span",24)(55,pm,2,1,"button",23),r(56,"button",21),b("click",function(){return n.loadPage(n.currentPage+1)}),m(57,"i",25),a()()()),t&2&&(l(),u("show",n.isLoading),l(4),u("formGroup",n.searchForm),l(29),u("ngForOf",n.profits==null?null:n.profits.content),l(6),u("ngClass",_t(20,Mi,n.getTotalGrossProfit()>0,n.getTotalGrossProfit()<0)),l(2),I(He(43,14,n.getTotalGrossProfit(),"1.2-2")),l(2),u("ngClass",_t(23,Mi,n.getTotalNetProfit()>0,n.getTotalNetProfit()<0)),l(2),I(He(47,17,n.getTotalNetProfit(),"1.2-2")),l(3),u("disabled",n.currentPage===0),l(2),u("ngIf",n.currentPage+1>3),l(),u("ngIf",n.currentPage+1>3),l(),u("ngForOf",n.getPageNumbers()),l(),u("ngIf",n.currentPage+1<(n.profits==null?null:n.profits.totalPages)-2),l(),u("ngIf",n.currentPage+1<(n.profits==null?null:n.profits.totalPages)-2),l(),u("disabled",n.currentPage===(n.profits==null?null:n.profits.totalPages)-1))},dependencies:[ne,ye,Fe,Y,ln,lt,ge,me,ie,oe,de,pe,ue,$e,xe],styles:[".profit-container[_ngcontent-%COMP%]{padding:2rem;position:relative;min-height:200px;background-color:var(--background)}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:0;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:first-child{margin-top:0}.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.profit-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:baseline}.profit-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--text-secondary)}.profit-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80px;padding:5px;border-radius:4px;border:1px solid var(--supporting);background-color:#fff;color:var(--text-primary)}.profit-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{width:100%;margin:0;overflow-x:auto}.profit-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.profit-container[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{color:var(--accent2)!important}.profit-container[_ngcontent-%COMP%]   .text-danger[_ngcontent-%COMP%]{color:var(--primary)!important}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination-info[_ngcontent-%COMP%]{color:var(--text-secondary)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;gap:5px}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid var(--supporting);background:#fff;cursor:pointer;border-radius:4px;color:var(--text-primary);transition:all .3s ease}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--supporting)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff;border-color:var(--primary)}.profit-container[_ngcontent-%COMP%]   .pagination-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.profit-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:15px}}.profit-container[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]{background-color:var(--background)}.profit-container[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.profit-container[_ngcontent-%COMP%]   .totals-row[_ngcontent-%COMP%]   td.text-end[_ngcontent-%COMP%]{text-align:right}.form-control[_ngcontent-%COMP%]{padding:10px;border:1px solid var(--supporting);border-radius:4px;color:var(--text-primary)}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px #fd782340}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover{background-color:#eb5d02}.pagination[_ngcontent-%COMP%]   .pagination-dots[_ngcontent-%COMP%]{padding:0 5px;color:var(--text-secondary)}"]})}}return o})();var Oi=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${ct.apiUrl}/api/attendance`}createAttendance(e){return this.http.post(`${this.apiUrl}/create`,e)}searchAttendance(e){return this.http.post(`${this.apiUrl}/search`,e)}deleteAttendances(e){return this.http.post(`${this.apiUrl}/delete`,{attendanceIds:e})}generatePdf(e){return this.http.post(`${this.apiUrl}/pdf`,e,{responseType:"blob",observe:"response"}).pipe(jn(t=>{let s=t.headers.get("Content-Disposition")?.split("filename=")[1]?.replace(/"/g,"")||"attendance.pdf";return{blob:new Blob([t.body],{type:"application/pdf"}),filename:s}}))}static{this.\u0275fac=function(t){return new(t||o)(he(Je))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function um(o,i){o&1&&(r(0,"span"),c(1," End date must be the same as start date "),a())}function gm(o,i){o&1&&(r(0,"span"),c(1," End time cannot be before start time "),a())}function fm(o,i){if(o&1&&(r(0,"div",31),O(1,um,2,0,"span",32)(2,gm,2,0,"span",32),a()),o&2){let e,t,n=P();l(),u("ngIf",(e=n.attendanceForm.get("endDateTime"))==null||e.errors==null?null:e.errors.sameDayRequired),l(),u("ngIf",(t=n.attendanceForm.get("endDateTime"))==null||t.errors==null?null:t.errors.endTimeBeforeStart)}}var Wa=(()=>{class o{constructor(e,t,n,s,d,p){this.fb=e,this.attendanceService=t,this.employeeService=n,this.router=s,this.snackbar=d,this.dateUtils=p,this.employees=[],this.isLoading=!1,this.isLoadingEmployees=!1,this.initializeForm()}ngOnInit(){this.loadEmployees()}initializeForm(){let e=new Date,t=this.setDefaultTime(e,15,0),n=this.setDefaultTime(e,23,0);this.attendanceForm=this.fb.group({employeeIds:["",x.required],startDateTime:[t,x.required],endDateTime:[n,[x.required,this.validateEndDateTime.bind(this)]],remarks:[""]}),this.attendanceForm.get("startDateTime")?.valueChanges.subscribe(()=>{this.attendanceForm.get("endDateTime")?.updateValueAndValidity()})}setDefaultTime(e,t,n){let s=new Date(e),d=t-5.5;s.setHours(d,n,0,0);let p=s.getFullYear(),g=String(s.getMonth()+1).padStart(2,"0"),h=String(s.getDate()).padStart(2,"0"),C=String(s.getHours()).padStart(2,"0"),v=String(s.getMinutes()).padStart(2,"0");return`${p}-${g}-${h}T${C}:${v}`}validateEndDateTime(e){if(!e.value)return null;let t=this.attendanceForm?.get("startDateTime")?.value;if(!t)return null;let n=new Date(t),s=new Date(e.value);return n.toDateString()!==s.toDateString()?{sameDayRequired:!0}:s<n?{endTimeBeforeStart:!0}:null}loadEmployees(){this.isLoadingEmployees=!0,this.employeeService.getAllEmployees().subscribe({next:e=>{e.success&&(this.employees=e.data),this.isLoadingEmployees=!1},error:()=>{this.snackbar.error("Failed to load employees"),this.isLoadingEmployees=!1}})}selectAllEmployees(){let e=this.employees.map(t=>t.id);this.attendanceForm.patchValue({employeeIds:e})}clearEmployeeSelection(){this.attendanceForm.patchValue({employeeIds:[]})}onSubmit(){if(this.attendanceForm.valid){this.isLoading=!0;let e=le({},this.attendanceForm.value);e.startDateTime=this.dateUtils.formatDateTimeForApi(e.startDateTime),e.endDateTime=this.dateUtils.formatDateTimeForApi(e.endDateTime),this.attendanceService.createAttendance(e).subscribe({next:t=>{t.success&&this.snackbar.success("Attendance created successfully"),this.isLoading=!1,this.attendanceForm.reset(),this.initializeForm()},error:t=>{this.snackbar.error(t?.error?.message||"Failed to create attendance"),this.isLoading=!1}})}}refreshEmployees(){this.isLoadingEmployees=!0,this.employeeService.refreshEmployees().subscribe({next:e=>{e.success&&(this.employees=e.data,this.snackbar.success("Employees refreshed successfully")),this.isLoadingEmployees=!1},error:()=>{this.snackbar.error("Failed to refresh employees"),this.isLoadingEmployees=!1}})}getMaxEndDateTime(){let e=this.attendanceForm.get("startDateTime")?.value;if(!e)return"";let t=new Date(e),n=new Date(t);return n.setHours(23,59,59),this.dateUtils.formatDateTimeForInput(n)}isFieldInvalid(e){let t=this.attendanceForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(Oi),y(xt),y(Ne),y(ve),y(Ft))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-create-attendance"]],standalone:!0,features:[cr([Ft]),W],decls:52,vars:13,consts:[[1,"attendance-form-container"],[3,"show"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-clock"],[1,"attendance-form",3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],[1,"fas","fa-users"],[1,"required"],[1,"employee-select-group"],["formControlName","employeeIds","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder","multiple"],[1,"button-group"],["type","button","title","Select All Employees",1,"btn-icon","select-all",3,"click"],[1,"fas","fa-check-double"],["type","button","title","Clear Selection",1,"btn-icon","clear",3,"click"],[1,"fas","fa-times"],["type","button","title","Refresh Employees",1,"btn-icon","refresh",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"fas","fa-hourglass-start"],["type","datetime-local","formControlName","startDateTime",1,"form-control"],[1,"fas","fa-hourglass-end"],["type","datetime-local","formControlName","endDateTime",1,"form-control",3,"max"],["class","invalid-feedback",4,"ngIf"],[1,"fas","fa-comment"],["formControlName","remarks","rows","3","placeholder","Enter remarks (optional)",1,"form-control"],[1,"form-actions"],["type","button","routerLink","/attendance",1,"btn","btn-sm","btn-secondary"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"fas","fa-save"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"div",3)(4,"h2",4),m(5,"i",5),c(6," Create Attendance "),a()(),r(7,"form",6),b("ngSubmit",function(){return n.onSubmit()}),r(8,"div",7)(9,"div",8)(10,"label"),m(11,"i",9),c(12," Employees "),r(13,"span",10),c(14,"*"),a()(),r(15,"div",11),m(16,"app-searchable-select",12),r(17,"div",13)(18,"button",14),b("click",function(){return n.selectAllEmployees()}),m(19,"i",15),a(),r(20,"button",16),b("click",function(){return n.clearEmployeeSelection()}),m(21,"i",17),a(),r(22,"button",18),b("click",function(){return n.refreshEmployees()}),m(23,"i",19),a()()()()(),r(24,"div",7)(25,"div",8)(26,"label"),m(27,"i",20),c(28," Start Time "),r(29,"span",10),c(30,"*"),a()(),m(31,"input",21),a(),r(32,"div",8)(33,"label"),m(34,"i",22),c(35," End Time "),r(36,"span",10),c(37,"*"),a()(),m(38,"input",23),O(39,fm,3,2,"div",24),a()(),r(40,"div",8)(41,"label"),m(42,"i",25),c(43," Remarks "),a(),m(44,"textarea",26),a(),r(45,"div",27)(46,"button",28),m(47,"i",17),c(48," Cancel "),a(),r(49,"button",29),m(50,"i",30),c(51," Save "),a()()()()()),t&2&&(l(),u("show",n.isLoading),l(6),u("formGroup",n.attendanceForm),l(9),u("options",n.employees)("placeholder","Select Employees")("searchPlaceholder","Search employees...")("multiple",!0),l(6),u("disabled",n.isLoadingEmployees),l(),u("ngClass",n.isLoadingEmployees?"fa-spinner fa-spin":"fa-sync-alt"),l(15),L("is-invalid",n.isFieldInvalid("endDateTime")),u("max",n.getMaxEndDateTime()),l(),u("ngIf",n.isFieldInvalid("endDateTime")),l(10),u("disabled",n.attendanceForm.invalid||n.isLoading))},dependencies:[ne,ye,Y,ge,me,ie,oe,de,pe,ue,$e,At,xe,Ge],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}.attendance-form-container[_ngcontent-%COMP%]{padding:1.5rem;margin:0 auto;max-width:1200px}.attendance-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;overflow:hidden}.attendance-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.attendance-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]{padding:2rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-bottom:1.5rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545;margin-left:4px}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   app-searchable-select[_ngcontent-%COMP%]{flex:1}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:.5rem}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{padding:.75rem;height:42px;width:42px;display:flex;align-items:center;justify-content:center;border:1px solid var(--supporting);border-radius:8px;background:#fff;transition:all .3s ease}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.select-all[_ngcontent-%COMP%]{color:var(--accent2)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.select-all[_ngcontent-%COMP%]:hover{background:var(--accent2)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.clear[_ngcontent-%COMP%]{color:var(--text-secondary)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.clear[_ngcontent-%COMP%]:hover{background:var(--text-secondary)}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]:hover{color:#fff}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]{color:var(--primary);border:1px solid var(--supporting);background:#fff;transition:all .3s ease}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary);color:#fff;transform:rotate(180deg);box-shadow:0 2px 4px #0000001a}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .employee-select-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn-icon.refresh[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.attendance-form-container[_ngcontent-%COMP%]   .attendance-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem}"]})}}return o})();var hm=(o,i)=>({active:o,inactive:i});function _m(o,i){if(o&1){let e=U();r(0,"tr")(1,"td"),c(2),a(),r(3,"td"),c(4),a(),r(5,"td"),c(6),a(),r(7,"td"),c(8),a(),r(9,"td"),c(10),a(),r(11,"td")(12,"span",23),c(13),a()(),r(14,"td",24)(15,"button",25),b("click",function(){let n=k(e).$implicit,s=P();return T(s.viewAttendanceDetails(n.id))}),m(16,"i",26),a()()()}if(o&2){let e=i.$implicit;l(2),I(e.name),l(2),I(e.mobileNumber),l(2),I(e.email),l(2),I(e.designation),l(2),I(e.department),l(2),u("ngClass",_t(7,hm,e.status==="A",e.status!=="A")),l(),w(" ",e.status==="A"?"Active":"Inactive"," ")}}function Cm(o,i){o&1&&(r(0,"tr")(1,"td",27),c(2,"No employees found"),a()())}function Pm(o,i){if(o&1){let e=U();r(0,"app-pagination",28),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var Xa=(()=>{class o{constructor(e,t,n,s,d){this.employeeService=e,this.fb=t,this.snackbar=n,this.router=s,this.encryptionService=d,this.employees=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.initializeForm()}ngOnInit(){this.loadEmployees()}initializeForm(){this.searchForm=this.fb.group({search:[""]})}loadEmployees(){this.isLoading=!0;let e=Xe(le({},this.searchForm.value),{page:this.currentPage,size:this.pageSize});this.employeeService.searchEmployees(e).subscribe({next:t=>{t.success&&(this.employees=t.data.content,this.totalPages=t.data.totalPages,this.totalElements=t.data.totalElements,this.updatePaginationIndexes()),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load employees"),this.isLoading=!1}})}onSearch(){this.currentPage=0,this.pageSize=10,this.loadEmployees()}resetForm(){this.searchForm.reset(),this.currentPage=0,this.pageSize=10,this.loadEmployees()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadEmployees()}deleteEmployee(e){confirm("Are you sure you want to delete this employee?")&&(this.isLoading=!0,this.employeeService.deleteEmployee(e).subscribe({next:t=>{t.success&&(this.snackbar.success("Employee deleted successfully"),this.loadEmployees())},error:t=>{this.snackbar.error(t?.error?.message||"Failed to delete employee"),this.isLoading=!1}}))}onPageChange(e){e>=0&&e<this.totalPages&&(this.currentPage=e,this.loadEmployees())}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}viewAttendanceDetails(e){this.isLoading=!0,this.employeeService.getEmployeeDetail(e).subscribe({next:t=>{if(t.success){let n=this.encryptionService.encrypt(JSON.stringify(t.data));localStorage.setItem("selectedEmployee",n),this.router.navigate(["/attendance/details"])}this.isLoading=!1},error:t=>{this.snackbar.error(t.message||"Failed to load employee details"),this.isLoading=!1}})}static{this.\u0275fac=function(t){return new(t||o)(y(xt),y(re),y(ve),y(Ne),y(dt))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-attendance-list"]],standalone:!0,features:[W],decls:47,vars:7,consts:[[1,"employee-container"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search employees...",1,"form-control"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"action-buttons"],["routerLink","/attendance/create",1,"btn","btn-sm","btn-primary"],[1,"fas","fa-plus"],[1,"employees-list","card"],[1,"table-wrapper"],[1,"table-container"],[3,"show"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"status-badge",3,"ngClass"],[1,"actions"],["title","Employee Attendance details",1,"btn-icon","view",3,"click"],[1,"fas","fa-eye"],["colspan","8",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Search Employees"),a(),r(4,"form",2),b("ngSubmit",function(){return n.onSearch()}),r(5,"div",3)(6,"div",4),m(7,"input",5),a(),r(8,"div",6)(9,"button",7),m(10,"i",8),c(11," Search "),a(),r(12,"button",9),b("click",function(){return n.resetForm()}),m(13,"i",10),c(14," Reset "),a()()()()(),r(15,"div",11)(16,"button",12),m(17,"i",13),c(18," Add Attendance "),a()(),r(19,"div",14)(20,"h2"),c(21,"Attendance"),a(),r(22,"div",15)(23,"div",16),m(24,"app-loader",17),r(25,"div",18)(26,"table",19)(27,"thead")(28,"tr")(29,"th"),c(30,"Name"),a(),r(31,"th"),c(32,"Mobile"),a(),r(33,"th"),c(34,"Email"),a(),r(35,"th"),c(36,"Designation"),a(),r(37,"th"),c(38,"Department"),a(),r(39,"th"),c(40,"Status"),a(),r(41,"th"),c(42,"Actions"),a()()(),r(43,"tbody"),O(44,_m,17,10,"tr",20)(45,Cm,3,0,"tr",21),a()()()()(),O(46,Pm,1,4,"app-pagination",22),a()()),t&2&&(l(4),u("formGroup",n.searchForm),l(20),u("show",n.isLoading),l(),L("loading",n.isLoading),l(19),u("ngForOf",n.employees),l(),u("ngIf",!(n.employees!=null&&n.employees.length)),l(),u("ngIf",n.totalPages>0))},dependencies:[ne,ye,Fe,Y,Le,Ge,ge,me,ie,oe,de,pe,ue,$e,xe,Ze],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}.employee-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background)}.employee-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.employee-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:start}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:43px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px}.employee-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin:20px 0}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;color:var(--text-secondary)}.employee-container[_ngcontent-%COMP%]   .table-controls[_ngcontent-%COMP%]   .page-size-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80px;padding:5px;border-radius:4px;border:1px solid var(--supporting);background-color:#fff;color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative;min-height:200px;background:#fff}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;width:100%}.employee-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;min-height:200px;overflow-x:auto}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--supporting);border-radius:4px}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#738c98}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;padding:15px 12px;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px;background-color:var(--background);color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;border-top:1px solid var(--supporting);color:var(--text-primary)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:.85rem;font-weight:500}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.employee-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;border-radius:4px;transition:all .2s ease}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:rgba(var(--secondary-rgb),.1);padding:8px;border-radius:6px}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a;padding:8px;border-radius:6px}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-1px)}.actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 768px){.employee-container[_ngcontent-%COMP%]{padding:10px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.employee-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.employee-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin:0 -15px;padding:0 15px}}"]})}}return o})();function bm(o,i){if(o&1){let e=U();r(0,"div",1),b("click",function(){k(e);let n=P();return T(n.onCancel())}),r(1,"div",2),b("click",function(n){return k(e),T(n.stopPropagation())}),r(2,"div",3)(3,"h3"),c(4),a()(),r(5,"div",4)(6,"p"),c(7),a()(),r(8,"div",5)(9,"button",6),b("click",function(){k(e);let n=P();return T(n.onCancel())}),m(10,"i",7),c(11," No "),a(),r(12,"button",8),b("click",function(){k(e);let n=P();return T(n.onConfirm())}),m(13,"i",9),c(14," Yes "),a()()()()}if(o&2){let e=P();l(4),I(e.title),l(3),I(e.message)}}var xi=(()=>{class o{constructor(){this.show=!1,this.title="Confirm Delete",this.message="Are you sure you want to delete this item?",this.confirm=new vn,this.cancel=new vn}onConfirm(){this.confirm.emit()}onCancel(){this.cancel.emit()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=Q({type:o,selectors:[["app-confirm-modal"]],inputs:{show:"show",title:"title",message:"message"},outputs:{confirm:"confirm",cancel:"cancel"},standalone:!0,features:[W],decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-body"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-check"]],template:function(t,n){t&1&&O(0,bm,15,2,"div",0),t&2&&u("ngIf",n.show)},dependencies:[ne,Y],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;width:90%;max-width:400px;box-shadow:0 4px 6px #0000001a;animation:modalIn .2s ease-out}.modal-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-bottom:1px solid #dee2e6}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary)}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-primary)}.modal-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;gap:1rem}"],data:{animation:[Qt("modalAnimation",[Pt(":enter",[ot({opacity:0,transform:"translateY(-20px)"}),Ct("200ms ease-out",ot({opacity:1,transform:"translateY(0)"}))]),Pt(":leave",[Ct("150ms ease-in",ot({opacity:0,transform:"translateY(-20px)"}))])])]}})}}return o})();var ym=(o,i,e)=>({empty:o,"has-attendance":i,wednesday:e});function vm(o,i){if(o&1&&(r(0,"div",5),c(1),a()),o&2){let e=i.$implicit;l(),I(e)}}function Mm(o,i){if(o&1&&(r(0,"span",11),c(1),a()),o&2){let e=P().$implicit;l(),w(" ",e.attendance.startTime," ")}}function Om(o,i){if(o&1&&(r(0,"div",8)(1,"span",9),c(2),ze(3,"date"),a(),O(4,Mm,2,1,"span",10),a()),o&2){let e=i.$implicit,t=P(2);u("ngClass",Un(7,ym,!e,e==null?null:e.attendance,(e==null?null:e.date.getDay())===3))("title",t.getTooltipText(e)),l(2),I(He(3,4,e==null?null:e.date,"d")),l(2),u("ngIf",e==null?null:e.attendance)}}function xm(o,i){if(o&1&&(r(0,"div",6),O(1,Om,5,11,"div",7),a()),o&2){let e=i.$implicit;l(),u("ngForOf",e)}}var Ja=(()=>{class o{constructor(){this.attendanceRecords=[],this.currentMonth=new Date,this.calendar=[],this.weekDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.attendanceDays={}}ngOnChanges(){this.processAttendanceRecords(),this.generateCalendar()}processAttendanceRecords(){this.attendanceDays={},this.attendanceRecords.forEach(e=>{let t=new Date(e.startDateTime),n=this.formatDate(t);this.attendanceDays[n]={date:n,startTime:new Date(e.startDateTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),endTime:new Date(e.endDateTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}})}generateCalendar(){let e=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),1),t=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth()+1,0);this.calendar=[];let n=[];for(let s=0;s<e.getDay();s++)n.push(null);for(let s=1;s<=t.getDate();s++){n.length===7&&(this.calendar.push(n),n=[]);let d=new Date(this.currentMonth.getFullYear(),this.currentMonth.getMonth(),s);n.push({date:d,attendance:this.attendanceDays[this.formatDate(d)]})}for(;n.length<7;)n.push(null);this.calendar.push(n)}formatDate(e){return`${String(e.getDate()).padStart(2,"0")}-${String(e.getMonth()+1).padStart(2,"0")}-${e.getFullYear()}`}isWednesday(e){return e&&e.getDay()===3}getTooltipText(e){return e?.attendance?`Time: ${e.attendance.startTime} - ${e.attendance.endTime}`:""}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=Q({type:o,selectors:[["app-calendar-view"]],inputs:{attendanceRecords:"attendanceRecords",currentMonth:"currentMonth"},standalone:!0,features:[Wo,W],decls:5,vars:2,consts:[[1,"calendar-container"],[1,"calendar-header"],["class","weekday",4,"ngFor","ngForOf"],[1,"calendar-body"],["class","week",4,"ngFor","ngForOf"],[1,"weekday"],[1,"week"],["class","day",3,"ngClass","title",4,"ngFor","ngForOf"],[1,"day",3,"ngClass","title"],[1,"date"],["class","time",4,"ngIf"],[1,"time"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1),O(2,vm,2,1,"div",2),a(),r(3,"div",3),O(4,xm,2,1,"div",4),a()()),t&2&&(l(2),u("ngForOf",n.weekDays),l(2),u("ngForOf",n.calendar))},dependencies:[ne,ye,Fe,Y,lt],styles:[".calendar-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1rem;box-shadow:0 2px 4px #0000001a;margin:1rem auto;max-width:600px;width:100%}.calendar-container[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:8px}.calendar-container[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .weekday[_ngcontent-%COMP%]{text-align:center;font-weight:600;color:var(--text-secondary);padding:6px;font-size:.75rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]{display:grid;gap:4px}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:4px;padding:4px;font-size:.75rem;transition:all .3s ease;border:1px solid var(--border)}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day.empty[_ngcontent-%COMP%]{background:transparent;border:none}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day.has-attendance[_ngcontent-%COMP%]{background-color:var(--accent1);color:#fff;border-color:var(--accent1)}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day.has-attendance[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#ffffffe6}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day.wednesday[_ngcontent-%COMP%]:not(.has-attendance){border-color:var(--primary);background-color:var(--primary-light);color:var(--primary)}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-weight:500;font-size:.875rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.65rem;margin-top:2px}@media (max-width: 768px){.calendar-container[_ngcontent-%COMP%]{margin:1rem;padding:.75rem;aspect-ratio:auto}.calendar-container[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .weekday[_ngcontent-%COMP%]{padding:4px;font-size:.75rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-size:.75rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:.875rem}.calendar-container[_ngcontent-%COMP%]   .calendar-body[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.7rem}}"]})}}return o})();var Sm=o=>({show:o}),Em=o=>({active:o});function wm(o,i){if(o&1&&(r(0,"div",33)(1,"div",34)(2,"div",35)(3,"label"),c(4,"Name:"),a(),r(5,"span"),c(6),a()(),r(7,"div",35)(8,"label"),c(9,"Email:"),a(),r(10,"span"),c(11),a()()(),r(12,"div",34)(13,"div",35)(14,"label"),c(15,"Mobile:"),a(),r(16,"span"),c(17),a()(),r(18,"div",35)(19,"label"),c(20,"Department:"),a(),r(21,"span"),c(22),a()()(),r(23,"div",34)(24,"div",35)(25,"label"),c(26,"Designation:"),a(),r(27,"span"),c(28),a()(),r(29,"div",35)(30,"label"),c(31,"Status:"),a(),r(32,"span",36),c(33),a()()()()),o&2){let e=P();l(6),I(e.employee==null?null:e.employee.name),l(5),I(e.employee.email||"N/A"),l(6),I(e.employee.mobileNumber||"N/A"),l(5),I(e.employee.department||"N/A"),l(6),I(e.employee.designation||"N/A"),l(4),u("ngClass",ut(7,Em,e.employee.status==="A")),l(),w(" ",e.employee.status==="A"?"Active":"Inactive"," ")}}function km(o,i){if(o&1){let e=U();r(0,"tr")(1,"td")(2,"input",28),b("change",function(){let n=k(e).$implicit,s=P();return T(s.toggleSelection(n.id))}),a()(),r(3,"td"),c(4),ze(5,"date"),a(),r(6,"td"),c(7),ze(8,"date"),a(),r(9,"td"),c(10),ze(11,"date"),a(),r(12,"td"),c(13),a(),r(14,"td"),c(15),a(),r(16,"td"),c(17),a(),r(18,"td"),c(19),a(),r(20,"td"),c(21),a(),r(22,"td"),c(23),a()()}if(o&2){let e=i.$implicit,t=P();l(2),u("checked",t.selectedAttendances.includes(e.id)),l(2),I(He(5,10,e.startDateTime,"dd-MM-yyyy")),l(3),I(He(8,13,e.startDateTime,"HH:mm")),l(3),I(He(11,16,e.endDateTime,"HH:mm")),l(3),I(e.regularHours),l(2),I(e.regularPay),l(2),I(e.overtimeHours),l(2),I(e.overtimePay),l(2),I(e.totalPay),l(2),I(e.remarks)}}function Tm(o,i){o&1&&(r(0,"tr")(1,"td",37),c(2,"No attendance records found"),a()())}function Im(o,i){if(o&1){let e=U();r(0,"app-pagination",38),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var es=(()=>{class o{constructor(e,t,n,s,d,p){this.employeeService=e,this.attendanceService=t,this.router=n,this.snackbar=s,this.encryptionService=d,this.fb=p,this.attendanceRecords=[],this.isLoading=!1,this.pageSizeOptions=[2,5,10,25,50,100],this.currentPage=0,this.pageSize=10,this.totalPages=0,this.totalElements=0,this.selectedAttendances=[],this.selectAll=!1,this.showDeleteModal=!1,this.startDate=new Ni(""),this.endDate=new Ni(""),this.attendanceDates=[],this.initializeDateFilter()}ngOnInit(){this.loadEmployeeDetails()}loadEmployeeDetails(){let e=localStorage.getItem("selectedEmployee");if(!e){this.router.navigate(["/attendance"]);return}try{this.employee=JSON.parse(this.encryptionService.decrypt(e)),this.loadAttendanceRecords()}catch{this.snackbar.error("Failed to load employee details"),this.router.navigate(["/attendance"])}}initializeDateFilter(){let e=new Date,t=e.getFullYear(),n=e.getMonth(),s=new Date(t,n,1),d=new Date(t,n+1,0),p=this.formatDateForInput(s),g=this.formatDateForInput(d);this.startDate.setValue(p),this.endDate.setValue(g),Ho(this.startDate.valueChanges,this.endDate.valueChanges).pipe(Go(300)).subscribe(()=>{this.startDate.value&&this.endDate.value&&(this.currentPage=0,this.loadAttendanceRecords())})}formatDateForInput(e){let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${s}`}formatDateForApi(e){let t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}-${String(t.getMonth()+1).padStart(2,"0")}-${t.getFullYear()}`}loadAttendanceRecords(){this.isLoading=!0;let e={employeeId:this.employee.id,page:this.currentPage,size:this.pageSize,startDate:this.formatDateForApi(this.startDate.value||""),endDate:this.formatDateForApi(this.endDate.value||"")};this.attendanceService.searchAttendance(e).subscribe({next:t=>{t.success&&(this.attendanceRecords=t.data.content,this.calculateTotalPayAndHours(),this.attendanceDates=this.attendanceRecords.map(n=>this.formatDateForApi(n.startDateTime)),this.totalPages=t.data.totalPages,this.totalElements=t.data.totalElements),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load attendance records"),this.isLoading=!1}})}calculateTotal(e){return e.reduce((t,n)=>t+n,0)}calculateTotalPayAndHours(){let e=this.attendanceRecords.map(p=>p.regularHours),t=this.attendanceRecords.map(p=>p.regularPay),n=this.attendanceRecords.map(p=>p.overtimeHours),s=this.attendanceRecords.map(p=>p.overtimePay),d=this.attendanceRecords.map(p=>p.totalPay);this.totalRegularHours=this.calculateTotal(e),this.totalRegularPay=this.calculateTotal(t),this.totalOvertimeHours=this.calculateTotal(n),this.totalOvertimePay=this.calculateTotal(s),this.totalOfTotalPay=this.calculateTotal(d)}onPageChange(e){this.currentPage=e,this.loadAttendanceRecords()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadAttendanceRecords()}toggleSelectAll(){this.selectAll=!this.selectAll,this.selectedAttendances=this.selectAll?this.attendanceRecords.map(e=>e.id):[]}toggleSelection(e){let t=this.selectedAttendances.indexOf(e);t===-1?this.selectedAttendances.push(e):this.selectedAttendances.splice(t,1),this.selectAll=this.selectedAttendances.length===this.attendanceRecords.length}deleteSelected(){if(!this.selectedAttendances.length){this.snackbar.error("Please select records to delete");return}this.showDeleteModal=!0}onConfirmDelete(){this.isLoading=!0,this.attendanceService.deleteAttendances(this.selectedAttendances).subscribe({next:e=>{e.success&&(this.snackbar.success("Records deleted successfully"),this.selectedAttendances=[],this.selectAll=!1,this.loadAttendanceRecords()),this.showDeleteModal=!1,this.isLoading=!1},error:e=>{this.snackbar.error(e.message||"Failed to delete records"),this.showDeleteModal=!1,this.isLoading=!1}})}onCancelDelete(){this.showDeleteModal=!1}getCurrentMonth(){return this.startDate.value?new Date(this.startDate.value):new Date}downloadAttendance(){if(!this.startDate.value){this.snackbar.error("Please select start date");return}this.isLoading=!0;let e={employeeId:this.employee.id,startDate:this.formatDateForApi(this.startDate.value)};this.attendanceService.generatePdf(e).subscribe({next:t=>{let n=window.URL.createObjectURL(t.blob),s=document.createElement("a");s.href=n,s.download=t.filename,s.click(),window.URL.revokeObjectURL(n),this.isLoading=!1},error:t=>{this.snackbar.error("Failed to download attendance report"),this.isLoading=!1}})}printAttendance(){if(!this.startDate.value){this.snackbar.error("Please select start date");return}this.isLoading=!0;let e={employeeId:this.employee.id,startDate:this.formatDateForApi(this.startDate.value)};this.attendanceService.generatePdf(e).subscribe({next:t=>{let n=t.blob,s=window.URL.createObjectURL(n),d=document.createElement("iframe");d.style.display="none",d.src=s,document.body.appendChild(d),d.onload=()=>{setTimeout(()=>{try{d.contentWindow?.print(),this.isLoading=!1}catch{this.snackbar.error("Failed to open print dialog"),this.isLoading=!1}},1e3)}},error:t=>{this.snackbar.error("Failed to generate attendance report"),this.isLoading=!1}})}static{this.\u0275fac=function(t){return new(t||o)(y(xt),y(Oi),y(Ne),y(ve),y(dt),y(re))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-attendance-detail"]],standalone:!0,features:[W],decls:91,vars:27,consts:[[1,"attendance-detail-container"],[3,"show"],[1,"employee-info","card"],[1,"card-header"],[1,"fas","fa-user"],["routerLink","/attendance",1,"btn","btn-secondary"],[1,"fas","fa-arrow-left"],["class","employee-details",4,"ngIf"],[1,"attendance-records","card"],[1,"header-actions"],[1,"header-left"],[1,"fas","fa-clock"],[1,"date-filter"],[1,"date-inputs"],[1,"form-group"],[1,"fas","fa-calendar-alt"],["type","date",1,"form-control",3,"formControl"],[1,"button-group"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fas",3,"ngClass"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"calendar-wrapper"],[3,"attendanceRecords","currentMonth"],[1,"btn","btn-danger","delete-btn",3,"click","ngClass"],[1,"fas","fa-trash"],[1,"table-wrapper"],[1,"table-responsive"],[1,"table"],["type","checkbox",3,"change","checked"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],["title","Confirm Delete",3,"confirm","cancel","show","message"],[1,"employee-details"],[1,"detail-row"],[1,"detail-item"],[1,"status-badge",3,"ngClass"],["colspan","6",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"div",3)(4,"h2"),m(5,"i",4),c(6," Employee Details "),a(),r(7,"button",5),m(8,"i",6),c(9," Back "),a()(),O(10,wm,34,9,"div",7),a(),r(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2"),m(15,"i",11),c(16," Attendance Records "),a(),m(17,"br"),r(18,"div",12)(19,"div",13)(20,"div",14)(21,"label"),m(22,"i",15),c(23," From Date "),a(),m(24,"input",16),a(),r(25,"div",14)(26,"label"),m(27,"i",15),c(28," To Date "),a(),m(29,"input",16),a(),r(30,"div",17)(31,"button",18),b("click",function(){return n.downloadAttendance()}),m(32,"i",19),c(33),a(),r(34,"button",20),b("click",function(){return n.printAttendance()}),m(35,"i",19),c(36),a()()()()()(),r(37,"div",21),m(38,"app-calendar-view",22),a(),r(39,"button",23),b("click",function(){return n.deleteSelected()}),m(40,"i",24),c(41),a(),r(42,"div",25)(43,"div",26)(44,"table",27)(45,"thead")(46,"tr")(47,"th")(48,"input",28),b("change",function(){return n.toggleSelectAll()}),a()(),r(49,"th"),c(50,"Date"),a(),r(51,"th"),c(52,"Start Time"),a(),r(53,"th"),c(54,"End Time"),a(),r(55,"th"),c(56,"Regular Hours"),a(),r(57,"th"),c(58,"Regular Pay"),a(),r(59,"th"),c(60,"Overtime Hours"),a(),r(61,"th"),c(62,"Overtime Pay"),a(),r(63,"th"),c(64,"Total Pay"),a(),r(65,"th"),c(66,"Remarks"),a()()(),r(67,"tbody"),O(68,km,24,19,"tr",29)(69,Tm,3,0,"tr",30),a(),r(70,"tfoot")(71,"tr")(72,"td")(73,"b"),c(74,"Total"),a()(),m(75,"td")(76,"td")(77,"td"),r(78,"td"),c(79),a(),r(80,"td"),c(81),a(),r(82,"td"),c(83),a(),r(84,"td"),c(85),a(),r(86,"td"),c(87),a(),m(88,"td"),a()()()()(),O(89,Im,1,4,"app-pagination",31),a(),r(90,"app-confirm-modal",32),b("confirm",function(){return n.onConfirmDelete()})("cancel",function(){return n.onCancelDelete()}),a()()),t&2&&(l(),u("show",n.isLoading),l(9),u("ngIf",n.employee),l(14),u("formControl",n.startDate),l(5),u("formControl",n.endDate),l(2),u("disabled",n.isLoading||!n.startDate.value),l(),u("ngClass",n.isLoading?"fa-spinner fa-spin":"fa-download"),l(),w(" ",n.isLoading?"Downloading...":"Download"," "),l(),u("disabled",n.isLoading||!n.startDate.value),l(),u("ngClass",n.isLoading?"fa-spinner fa-spin":"fa-print"),l(),w(" ",n.isLoading?"Processing...":"Print"," "),l(2),u("attendanceRecords",n.attendanceRecords)("currentMonth",n.getCurrentMonth()),l(),u("ngClass",ut(25,Sm,n.selectedAttendances.length>0)),l(2),w(" Delete Selected (",n.selectedAttendances.length,") "),l(7),u("checked",n.selectAll),l(20),u("ngForOf",n.attendanceRecords),l(),u("ngIf",!(n.attendanceRecords!=null&&n.attendanceRecords.length)),l(10),I(n.totalRegularHours),l(2),I(n.totalRegularPay),l(2),I(n.totalOvertimeHours),l(2),I(n.totalOvertimePay),l(2),I(n.totalOfTotalPay),l(2),u("ngIf",n.totalPages>0),l(),u("show",n.showDeleteModal)("message","Are you sure you want to delete "+n.selectedAttendances.length+" attendance record(s)?"))},dependencies:[ne,ye,Fe,Y,lt,xe,Ge,Ze,$e,ie,oe,ge,Pr,xi,Ja],styles:[".attendance-detail-container[_ngcontent-%COMP%]{padding:20px;margin:0 auto}.attendance-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 4px #0000001a;padding:20px;margin-bottom:20px}.attendance-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.attendance-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.5rem}.attendance-detail-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary);margin-right:8px}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:15px}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{flex:1}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);margin-right:8px}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-primary)}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.875rem}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:var(--success-light);color:var(--success)}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:var(--danger-light);color:var(--danger)}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{margin:20px 0}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--border)}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--background);color:var(--text-secondary);font-weight:600}.attendance-detail-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--text-primary)}@media (max-width: 768px){.attendance-detail-container[_ngcontent-%COMP%]{padding:10px}.attendance-detail-container[_ngcontent-%COMP%]   .employee-details[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.attendance-detail-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{overflow-x:auto}}.delete-btn[_ngcontent-%COMP%]{display:none;align-items:center;gap:8px;background-color:#dc3545;color:#fff;border:none;padding:8px 16px;border-radius:4px;transition:all .3s ease;opacity:0;transform:translateY(10px);cursor:pointer}.delete-btn.show[_ngcontent-%COMP%]{display:flex;opacity:1;transform:translateY(0)}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c82333;transform:translateY(-1px)}.delete-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding:.5rem 0}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-end;flex-wrap:wrap}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;height:42px}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}@media (max-width: 992px){.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}}@media (max-width: 768px){.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%], .header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .date-filter[_ngcontent-%COMP%]   .date-inputs[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;min-width:unset}}input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.calendar-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1rem;background:var(--background);border-radius:12px;margin:1rem 0}.button-group[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;height:42px}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}"]})}}return o})();function Dm(o,i){o&1&&(r(0,"div",47),c(1," Customer is required "),a())}function Am(o,i){o&1&&(r(0,"div",47),c(1," Sale date is required "),a())}function Fm(o,i){o&1&&(r(0,"div",47),c(1," Invoice number is required "),a())}function Nm(o,i){o&1&&(r(0,"div",47),c(1," Please select a product "),a())}function Lm(o,i){o&1&&(r(0,"div",47),c(1," Quantity must be 1 or greater "),a())}function Vm(o,i){o&1&&(r(0,"div",47),c(1," Double quotes are not allowed "),a())}function Rm(o,i){o&1&&(r(0,"div",47),c(1," Unit price must be greater than 0 "),a())}function zm(o,i){if(o&1){let e=U();r(0,"tr",48)(1,"td")(2,"div",49),m(3,"app-searchable-select",50),O(4,Nm,2,0,"div",18),a()(),r(5,"td")(6,"div",49),m(7,"input",51),O(8,Lm,2,0,"div",18),a()(),r(9,"td")(10,"div",49),m(11,"input",52),O(12,Vm,2,0,"div",18),a()(),r(13,"td")(14,"div",49)(15,"div",53)(16,"span",54),c(17,"\u20B9"),a(),m(18,"input",55),a(),O(19,Rm,2,0,"div",18),a()(),r(20,"td")(21,"div",53),m(22,"input",56),a()(),r(23,"td")(24,"div",53),m(25,"input",57),a()(),r(26,"td")(27,"div",49),m(28,"input",58),a()(),r(29,"td")(30,"button",59),b("click",function(){let n=k(e).index,s=P();return T(s.removeProduct(n))}),m(31,"i",60),a()()()}if(o&2){let e,t=i.index,n=P();u("formGroupName",t),l(3),L("is-invalid",n.isProductFieldInvalid(t,"productId")),u("focusWidthPx",400)("options",n.products)("placeholder","Select Product")("searchPlaceholder","Search products..."),l(),u("ngIf",n.isProductFieldInvalid(t,"productId")),l(3),L("is-invalid",n.isProductFieldInvalid(t,"quantity")),l(),u("ngIf",n.isProductFieldInvalid(t,"quantity")),l(3),L("is-invalid",n.isProductFieldInvalid(t,"batchNumber")),l(),u("ngIf",(e=n.productsFormArray.at(t).get("batchNumber"))==null||e.errors==null?null:e.errors.doubleQuotes),l(6),L("is-invalid",n.isProductFieldInvalid(t,"unitPrice")),l(),u("ngIf",n.isProductFieldInvalid(t,"unitPrice")),l(3),u("value",n.getFormattedPrice(t)),l(3),u("value",n.getFormattedTaxAmount(t)),l(5),u("disabled",n.productsFormArray.length===1)}}function jm(o,i){o&1&&m(0,"app-loader")}var ts=(()=>{class o{get productsFormArray(){return this.saleForm.get("products")}constructor(e,t,n,s,d,p,g,h){this.fb=e,this.productService=t,this.customerService=n,this.saleService=s,this.snackbar=d,this.http=p,this.router=g,this.encryptionService=h,this.products=[],this.customers=[],this.loading=!1,this.isLoadingProducts=!1,this.isLoadingCustomers=!1,this.isEdit=!1,this.destroy$=new Ve,this.productSubscriptions=[],this.initForm()}ngOnInit(){this.loadProducts(),this.loadCustomers();let e=localStorage.getItem("saleId");if(console.log("encryptedId : "+e),e){console.log("inside if encryptedId : "+e);let t=this.encryptionService.decrypt(e);t&&(console.log("saleId : "+t),this.fetchSaleDetails(Number(t)))}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.productSubscriptions.forEach(e=>e?.unsubscribe())}initForm(){this.saleForm=this.fb.group({id:[null],customerId:["",x.required],saleDate:[Gn(new Date,"yyyy-MM-dd","en"),x.required],invoiceNumber:["",x.required],products:this.fb.array([]),isBlack:[!1,x.required]}),this.addProduct()}createProductFormGroup(){return this.fb.group({productId:["",x.required],quantity:["",[x.required,x.min(1)]],batchNumber:["",[this.noDoubleQuotesValidator()]],unitPrice:["",[x.required,x.min(.01)]],price:[{value:0,disabled:!0}],taxPercentage:[{value:0,disabled:!0}],taxAmount:[{value:0,disabled:!0}],remarks:[null,[]]})}addProduct(){let e=this.createProductFormGroup();this.setupProductCalculations(e,this.productsFormArray.length),this.productsFormArray.push(e)}removeProduct(e){this.productsFormArray.length!==1&&(this.productSubscriptions[e]&&(this.productSubscriptions[e].unsubscribe(),this.productSubscriptions.splice(e,1)),this.productsFormArray.removeAt(e),this.productsFormArray.controls.forEach((t,n)=>{this.productSubscriptions[n]&&this.productSubscriptions[n].unsubscribe(),this.setupProductCalculations(t,n)}),this.calculateTotalAmount())}setupProductCalculations(e,t){let n=e.get("productId")?.valueChanges.pipe(Pe(this.destroy$)).subscribe(d=>{if(d){let p=this.products.find(g=>g.id===d);if(p){let g=p.taxPercentage||0;e.patchValue({taxPercentage:g},{emitEvent:!1}),this.calculateProductPrice(t)}}}),s=e.valueChanges.pipe(Pe(this.destroy$)).subscribe(()=>{this.calculateProductPrice(t)});this.productSubscriptions[t]=s}calculateProductPrice(e){let t=this.productsFormArray.at(e);if(!t)return;let n=Number(t.get("quantity")?.value||0),s=Number(t.get("unitPrice")?.value||0),d=Number(t.get("taxPercentage")?.value||0),p=Number((n*s).toFixed(2)),g=Number((p*d/100).toFixed(2));t.patchValue({price:p,taxAmount:g},{emitEvent:!1}),this.calculateTotalAmount()}getTotalAmount(){return this.productsFormArray.controls.reduce((e,t)=>e+(t.get("price").value||0),0)}getTotalTaxAmount(){return this.productsFormArray.controls.reduce((e,t)=>e+(t.get("taxAmount").value||0),0)}loadProducts(){this.isLoadingProducts=!0,this.productService.getProducts({status:"A"}).subscribe({next:e=>{e.success&&(this.products=e.data),this.isLoadingProducts=!1},error:e=>{this.snackbar.error("Failed to load products"),this.isLoadingProducts=!1}})}refreshProducts(){this.isLoadingProducts=!0,this.productService.refreshProducts().subscribe({next:e=>{e.success&&(this.products=e.data,this.snackbar.success("Products refreshed successfully")),this.isLoadingProducts=!1},error:e=>{this.snackbar.error("Failed to refresh products"),this.isLoadingProducts=!1}})}loadCustomers(){this.isLoadingCustomers=!0,this.customerService.getCustomers({status:"A"}).subscribe({next:e=>{e.success&&(this.customers=e.data),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1}})}refreshCustomers(){this.isLoadingCustomers=!0,this.customerService.refreshCustomers().subscribe({next:e=>{e.success&&(this.customers=e.data),this.snackbar.success("Customers refreshed successfully"),this.isLoadingCustomers=!1},error:e=>{this.snackbar.error("Failed to load customers"),this.isLoadingCustomers=!1}})}isFieldInvalid(e){let t=this.saleForm.get(e);return t?t.invalid&&t.touched:!1}isProductFieldInvalid(e,t){let n=this.productsFormArray.at(e).get(t);if(!n)return!1;if(n.invalid&&(n.dirty||n.touched)){let d=n.errors;if(d&&(d.required||d.min&&t==="quantity"||d.min&&t==="unitPrice"||d.min||d.max||d.min))return!0}return!1}resetForm(){this.isEdit=!1,this.saleForm.patchValue({id:null}),this.initForm()}onSubmit(){if(this.markFormGroupTouched(this.saleForm),this.saleForm.valid){this.loading=!0;let e=this.prepareFormData();(this.isEdit?this.saleService.updateSale(e):this.saleService.createSale(e)).subscribe({next:n=>{n?.success&&(this.snackbar.success(`Sale ${this.isEdit?"updated":"created"} successfully`),localStorage.removeItem("saleId"),this.router.navigate(["/sale"])),this.loading=!1},error:n=>{this.snackbar.error(n?.error?.message||`Failed to ${this.isEdit?"update":"create"} sale`),this.loading=!1}})}else{let e=document.querySelector(".is-invalid");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}}prepareFormData(){let e=this.saleForm.value,t={saleDate:Gn(e.saleDate,"dd-MM-yyyy","en"),customerId:e.customerId,invoiceNumber:e.invoiceNumber,price:this.getTotalAmount(),taxAmount:this.getTotalTaxAmount(),isBlack:!!e.isBlack,products:e.products.map((n,s)=>({productId:n.productId,quantity:n.quantity,batchNumber:n.batchNumber,unitPrice:n.unitPrice,price:this.productsFormArray.at(s).get("price")?.value,taxPercentage:this.productsFormArray.at(s).get("taxPercentage")?.value,taxAmount:this.productsFormArray.at(s).get("taxAmount")?.value,remarks:n.remarks}))};return this.isEdit&&e.id&&(t.id=e.id),t}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t instanceof _r||t instanceof vr?this.markFormGroupTouched(t):(t.markAsTouched(),t.markAsDirty())})}calculateTotalAmount(){let e=this.productsFormArray.controls.reduce((n,s)=>n+(s.get("price").value||0),0),t=this.productsFormArray.controls.reduce((n,s)=>n+(s.get("taxAmount").value||0),0);this.saleForm.patchValue({price:e,taxAmount:t,totalAmount:e+t},{emitEvent:!1})}noDoubleQuotesValidator(){return e=>e.value&&e.value.includes('"')?{doubleQuotes:!0}:null}getFormattedPrice(e){let t=this.productsFormArray.at(e).get("price")?.value;return t?t.toFixed(2):"0.00"}getFormattedTaxAmount(e){let t=this.productsFormArray.at(e).get("taxAmount")?.value;return t?t.toFixed(2):"0.00"}fetchSaleDetails(e){this.saleService.getSaleDetails(e).subscribe({next:t=>{console.log("response : ",t),t.id&&(console.log("response.data : ",t.id),this.isEdit=!0,this.populateForm(t))},error:t=>{this.snackbar.error(t?.error?.message||"Failed to load sale details")}})}populateForm(e){this.saleForm.patchValue({customerId:e.customerId,id:e.id,saleDate:Gn(new Date(e.saleDate),"yyyy-MM-dd","en"),invoiceNumber:e.invoiceNumber,isBlack:e.isBlack}),this.productsFormArray.clear(),e.items.forEach((t,n)=>{let s=this.createProductFormGroup();this.setupProductCalculations(s,n),s.patchValue({productId:t.productId,quantity:t.quantity,unitPrice:t.unitPrice,price:t.price,taxPercentage:t.taxPercentage,taxAmount:t.taxAmount,batchNumber:t.batchNumber,remarks:t.remarks}),this.productsFormArray.push(s)}),this.isEdit=!0}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(Yt),y(Zt),y(Xn),y(ve),y(Je),y(Ne),y(dt))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-add-sale"]],standalone:!0,features:[W],decls:113,vars:36,consts:[[1,"add-sale-container"],["routerLink","/sale",1,"btn","btn-sm","btn-secondary","back-btn"],[1,"fas","fa-arrow-left"],[1,"form-card"],[1,"card-header"],[1,"form-title"],[1,"fas","fa-cart-plus"],[1,"sale-form",3,"ngSubmit","formGroup"],[1,"header-section"],[1,"form-row"],[1,"form-group"],["for","customerId"],[1,"fas","fa-user"],[1,"required"],[1,"select-group"],["formControlName","customerId","labelKey","name","valueKey","id",3,"options","placeholder","searchPlaceholder"],["type","button","title","Refresh Customers",1,"btn","btn-sm","btn-primary","refresh","mt-2",3,"click","disabled"],[1,"fas",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","saleDate"],[1,"fas","fa-calendar"],["type","date","id","saleDate","formControlName","saleDate",1,"form-control"],["for","invoiceNumber"],[1,"fas","fa-file-invoice"],["type","text","id","invoiceNumber","formControlName","invoiceNumber",1,"form-control"],[1,"form-label"],[1,"d-flex","gap-3"],[1,"form-check"],["type","radio","formControlName","isBlack","id","isBlackTrue",1,"form-check-input",3,"value"],["for","isBlackTrue",1,"form-check-label"],["type","radio","formControlName","isBlack","id","isBlackFalse",1,"form-check-input",3,"value"],["for","isBlackFalse",1,"form-check-label"],["formArrayName","products",1,"products-section"],[1,"products-header"],[1,"fas","fa-boxes"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"table-responsive"],[1,"table","products-table"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"sale-summary"],[1,"summary-item"],[1,"form-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[4,"ngIf"],[1,"invalid-feedback"],[3,"formGroupName"],[1,"form-field-container"],["formControlName","productId","labelKey","name","valueKey","id",3,"focusWidthPx","options","placeholder","searchPlaceholder"],["type","number","formControlName","quantity","placeholder","Qty","min","1",1,"form-control"],["type","text","formControlName","batchNumber","placeholder","Batch Number",1,"form-control"],[1,"input-group"],[1,"input-group-text"],["type","number","formControlName","unitPrice","placeholder","Price","min","0.01","step","0.01",1,"form-control"],["type","number","formControlName","price","readonly","",1,"form-control",3,"value"],["type","number","formControlName","taxAmount","readonly","",1,"form-control",3,"value"],["type","text","formControlName","remarks","placeholder","Remarks",1,"form-control"],["type","button","title","Remove Product",1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"fas","fa-trash"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"button",1),m(2,"i",2),c(3," Back to Sales "),a(),r(4,"div",3)(5,"div",4)(6,"h2",5),m(7,"i",6),c(8," Add New Sale "),a()(),r(9,"form",7),b("ngSubmit",function(){return n.onSubmit()}),r(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),m(14,"i",12),c(15," Select Customer "),r(16,"span",13),c(17,"*"),a()(),r(18,"div",14),m(19,"app-searchable-select",15),r(20,"button",16),b("click",function(){return n.refreshCustomers()}),m(21,"i",17),a()(),O(22,Dm,2,0,"div",18),a(),r(23,"div",10)(24,"label",19),m(25,"i",20),c(26," Sale Date "),r(27,"span",13),c(28,"*"),a()(),m(29,"input",21),O(30,Am,2,0,"div",18),a(),r(31,"div",10)(32,"label",22),m(33,"i",23),c(34," Invoice Number "),r(35,"span",13),c(36,"*"),a()(),m(37,"input",24),O(38,Fm,2,0,"div",18),a(),r(39,"div",10)(40,"label",25),c(41,"Is Black"),a(),r(42,"div",26)(43,"div",27),m(44,"input",28),r(45,"label",29),c(46,"Yes"),a()(),r(47,"div",27),m(48,"input",30),r(49,"label",31),c(50,"No"),a()()()()()(),r(51,"div",32)(52,"div",33)(53,"h3"),m(54,"i",34),c(55," Products"),a(),r(56,"button",35),b("click",function(){return n.addProduct()}),m(57,"i",36),c(58," Add Product "),a()(),r(59,"div",37)(60,"table",38)(61,"thead")(62,"tr")(63,"th"),c(64,"Product Name"),a(),r(65,"th"),c(66,"Quantity"),a(),r(67,"th"),c(68,"Batch Number"),a(),r(69,"th"),c(70,"Sale Rate"),a(),r(71,"th"),c(72,"Price"),a(),r(73,"th"),c(74,"Tax Amount"),a(),r(75,"th"),c(76,"Remarks"),a(),r(77,"th"),c(78,"Actions"),a()()(),r(79,"tbody"),O(80,zm,32,20,"tr",39),a()()()(),r(81,"div",40)(82,"div",41)(83,"span"),c(84,"Total Products:"),a(),r(85,"strong"),c(86),a()(),r(87,"div",41)(88,"span"),c(89,"Total Price:"),a(),r(90,"strong"),c(91),ze(92,"number"),a()(),r(93,"div",41)(94,"span"),c(95,"Total Tax Amount:"),a(),r(96,"strong"),c(97),ze(98,"number"),a()(),r(99,"div",41)(100,"span"),c(101,"Grand Total:"),a(),r(102,"strong"),c(103),ze(104,"number"),a()()(),r(105,"div",42)(106,"button",43),b("click",function(){return n.resetForm()}),m(107,"i",44),c(108," Reset "),a(),r(109,"button",45),m(110,"i",17),c(111),a()()()()(),O(112,jm,1,0,"app-loader",46)),t&2&&(l(9),u("formGroup",n.saleForm),l(10),L("is-invalid",n.isFieldInvalid("customerId")),u("options",n.customers)("placeholder","Select Customer")("searchPlaceholder","Search customers..."),l(),u("disabled",n.isLoadingCustomers),l(),u("ngClass",n.isLoadingCustomers?"fa-spinner fa-spin":"fa-sync-alt"),l(),u("ngIf",n.isFieldInvalid("customerId")),l(7),L("is-invalid",n.isFieldInvalid("saleDate")),l(),u("ngIf",n.isFieldInvalid("saleDate")),l(7),L("is-invalid",n.isFieldInvalid("invoiceNumber")),l(),u("ngIf",n.isFieldInvalid("invoiceNumber")),l(6),u("value",!0),l(4),u("value",!1),l(32),u("ngForOf",n.productsFormArray.controls),l(6),I(n.productsFormArray.length),l(5),w("\u20B9",He(92,27,n.getTotalAmount(),"1.2-2"),""),l(6),w("\u20B9",He(98,30,n.getTotalTaxAmount(),"1.2-2"),""),l(6),w("\u20B9",He(104,33,n.getTotalAmount()+n.getTotalTaxAmount(),"1.2-2"),""),l(3),u("disabled",n.loading),l(3),u("disabled",n.saleForm.invalid||n.loading),l(),u("ngClass",n.loading?"fa-spinner fa-spin":"fa-save"),l(),w(" ",n.loading?"Saving...":n.isEdit?"Update Sale":"Save Sale"," "),l(),u("ngIf",n.loading))},dependencies:[ne,ye,Fe,Y,ln,ge,me,ie,bt,Cr,oe,de,yt,pe,ue,br,yr,Le,Ge,xe,At],styles:[".add-sale-container[_ngcontent-%COMP%]{padding:2rem;margin:0 auto}@media (max-width: 768px){.add-sale-container[_ngcontent-%COMP%]{padding:1rem}}.form-control[_ngcontent-%COMP%]{height:40px}.back-btn[_ngcontent-%COMP%]{margin-bottom:1rem}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);box-shadow:var(--card-shadow);overflow:hidden}.card-header[_ngcontent-%COMP%]{background-color:var(--primary);padding:1.5rem}.card-header[_ngcontent-%COMP%]   .form-title[_ngcontent-%COMP%]{color:#fff;margin:0;font-size:1.5rem;font-weight:500;display:flex;align-items:center;gap:.5rem}.sale-form[_ngcontent-%COMP%]{padding:2rem}@media (max-width: 768px){.sale-form[_ngcontent-%COMP%]{padding:1rem}}.header-section[_ngcontent-%COMP%]{background-color:var(--background-light);border-radius:var(--border-radius);padding:1.5rem;margin-bottom:2rem}.header-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}@media (max-width: 768px){.header-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.products-section[_ngcontent-%COMP%]{background-color:#fff;border-radius:var(--border-radius);padding:1.5rem;margin-top:2rem;border:1px solid var(--primary)}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.25rem;display:flex;align-items:center;gap:.5rem}.products-section[_ngcontent-%COMP%]   .products-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr 1fr auto;gap:1rem;align-items:start}@media (max-width: 1200px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 768px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.remove-product[_ngcontent-%COMP%]{background-color:var(--danger-light);color:var(--danger);border:none;width:36px;height:36px;border-radius:var(--border-radius);display:flex;align-items:center;justify-content:center;transition:all .3s ease}.remove-product[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--danger);color:#fff;transform:translateY(-1px)}.remove-product[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.remove-product[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary)}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger);margin-left:4px}.input-group[_ngcontent-%COMP%]{display:flex;align-items:stretch}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background-color:var(--background);border:1px solid var(--border-color);border-right:none;border-radius:var(--border-radius) 0 0 var(--border-radius);height:38px;color:var(--text-secondary);min-width:40px;display:flex;align-items:center;justify-content:center}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:0 var(--border-radius) var(--border-radius) 0;flex:1}.sale-summary[_ngcontent-%COMP%]{background-color:var(--background-light);border-radius:var(--border-radius);padding:1.5rem;margin-top:2rem;display:flex;justify-content:flex-end;gap:2rem;flex-wrap:wrap}.sale-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.sale-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem}.sale-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.25rem;font-weight:600}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid var(--border-color)}@media (max-width: 576px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}.table-responsive[_ngcontent-%COMP%]{margin:0 -1.5rem;padding:0 1.5rem;overflow-x:auto;min-height:400px;-webkit-overflow-scrolling:touch}@media (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{margin:0 -1rem;padding:0 1rem}}.products-table[_ngcontent-%COMP%]{width:100%;margin-bottom:0;background:#fff;border-collapse:separate;border-spacing:0}.products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--background-light);color:var(--text-primary);font-weight:600;padding:1rem;white-space:nowrap;border-bottom:2px solid var(--border-color)}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;vertical-align:middle;border-bottom:1px solid var(--border-color)}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{min-width:80px}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   .form-control[_ngcontent-%COMP%]{min-width:200px}.products-table[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{flex-wrap:nowrap}.products-table[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{margin:0 auto}@media (max-width: 768px){.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.5rem}}.form-field-container[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.form-field-container[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%], .form-field-container[_ngcontent-%COMP%]   .input-group.is-invalid[_ngcontent-%COMP%]{border-color:var(--danger);background-image:url(data:image/svg+xml,...)}.products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-bottom:1.5rem;vertical-align:top}.invalid-feedback[_ngcontent-%COMP%]{color:var(--danger);font-size:.75rem;margin-top:.25rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}"]})}}return o})();var ns=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${ct.apiUrl}/api/batch`}batchDelete(e){return this.http.post(`${this.apiUrl}/delete`,e)}static{this.\u0275fac=function(t){return new(t||o)(he(Je))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function qm(o,i){o&1&&(r(0,"div",23),c(1," Start date is required "),a())}function Um(o,i){o&1&&(r(0,"div",23),c(1," End date is required and must be after start date "),a())}function Bm(o,i){if(o&1){let e=U();r(0,"div",24)(1,"input",25),b("change",function(n){k(e);let s=P();return T(s.onCheckboxChange(n))}),a(),r(2,"label",26),c(3),a()()}if(o&2){let e=i.$implicit,t=P();l(),u("id",e)("value",e)("checked",t.selectedTypes.includes(e)),l(),u("for",e),l(),w(" ",e," ")}}function Hm(o,i){o&1&&(r(0,"div",27),c(1," Please select at least one data type "),a())}var is=(()=>{class o{constructor(e,t,n,s){this.fb=e,this.batchService=t,this.snackbar=n,this.dateUtils=s,this.isLoading=!1,this.showTypeError=!1,this.selectedTypes=[],this.showConfirmModal=!1,this.dataTypes=["PURCHASE","SALE","QUOTATION","ATTENDANCE"]}ngOnInit(){this.initializeForm()}initializeForm(){this.batchDeleteForm=this.fb.group({startDate:["",x.required],endDate:["",x.required]},{validators:this.dateRangeValidator})}isFieldInvalid(e){let t=this.batchDeleteForm.get(e);return t?t.invalid&&(t.dirty||t.touched):!1}onCheckboxChange(e){let t=e.target.value;e.target.checked?this.selectedTypes.push(t):this.selectedTypes=this.selectedTypes.filter(n=>n!==t),this.showTypeError=this.selectedTypes.length===0}dateRangeValidator(e){let t=e.get("startDate")?.value,n=e.get("endDate")?.value;return t&&n&&new Date(t)>new Date(n)?{dateRange:!0}:null}resetForm(){this.batchDeleteForm.reset(),this.selectedTypes=[],this.showTypeError=!1}onSubmit(){if(this.batchDeleteForm.valid&&this.selectedTypes.length>0){this.isLoading=!0;let e=this.batchDeleteForm.value,t={startDate:this.dateUtils.formatDateDDMMYYYY(e.startDate),endDate:this.dateUtils.formatDateDDMMYYYY(e.endDate),type:this.selectedTypes};this.batchService.batchDelete(t).subscribe({next:n=>{this.snackbar.success("Data deleted successfully"),this.resetForm(),this.isLoading=!1},error:n=>{this.snackbar.error(n.message||"Failed to delete data"),this.isLoading=!1}})}else this.showTypeError=this.selectedTypes.length===0,this.batchDeleteForm.markAllAsTouched()}onConfirmDelete(){if(this.batchDeleteForm.valid&&this.selectedTypes.length>0){this.isLoading=!0;let e=this.batchDeleteForm.value,t={startDate:this.dateUtils.formatDateDDMMYYYY(e.startDate),endDate:this.dateUtils.formatDateDDMMYYYY(e.endDate),type:this.selectedTypes};this.batchService.batchDelete(t).subscribe({next:n=>{this.snackbar.success("Data deleted successfully"),this.resetForm(),console.log(this.selectedTypes),this.ngOnInit(),this.isLoading=!1},error:n=>{this.snackbar.error(n.message||"Failed to delete data"),this.isLoading=!1}})}this.showConfirmModal=!1}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(ns),y(ve),y(Ft))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-data-center"]],standalone:!0,features:[W],decls:39,vars:16,consts:[[1,"data-center-container"],[3,"show"],[1,"batch-delete-section","card"],[1,"fas","fa-database"],[3,"formGroup"],[1,"date-range-section"],[1,"form-group"],[1,"fas","fa-calendar"],[1,"required"],["type","date","formControlName","startDate",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","date","formControlName","endDate",1,"form-control"],[1,"data-types-section"],[1,"fas","fa-check-square"],[1,"checkbox-group"],["class","form-check",4,"ngFor","ngForOf"],["class","invalid-feedback d-block",4,"ngIf"],[1,"action-buttons"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"fas","fa-undo"],["type","submit",1,"btn","btn-danger",3,"click","disabled"],[1,"fas",3,"ngClass"],["title","Confirm Delete",3,"confirm","cancel","show","message"],[1,"invalid-feedback"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","id","value","checked"],[1,"form-check-label",3,"for"],[1,"invalid-feedback","d-block"]],template:function(t,n){t&1&&(r(0,"div",0),m(1,"app-loader",1),r(2,"div",2)(3,"h2"),m(4,"i",3),c(5," Data Center Management"),a(),r(6,"form",4)(7,"div",5)(8,"div",6)(9,"label"),m(10,"i",7),c(11," Start Date "),r(12,"span",8),c(13,"*"),a()(),m(14,"input",9),O(15,qm,2,0,"div",10),a(),r(16,"div",6)(17,"label"),m(18,"i",7),c(19," End Date "),r(20,"span",8),c(21,"*"),a()(),m(22,"input",11),O(23,Um,2,0,"div",10),a()(),r(24,"div",12)(25,"h3"),m(26,"i",13),c(27," Select Data Types"),a(),r(28,"div",14),O(29,Bm,4,5,"div",15),a(),O(30,Hm,2,0,"div",16),a(),r(31,"div",17)(32,"button",18),b("click",function(){return n.resetForm()}),m(33,"i",19),c(34," Reset "),a(),r(35,"button",20),b("click",function(){return n.showConfirmModal=!0}),m(36,"i",21),c(37),a()()()(),r(38,"app-confirm-modal",22),b("confirm",function(){return n.onConfirmDelete()})("cancel",function(){return n.showConfirmModal=!1}),a()()),t&2&&(l(),u("show",n.isLoading),l(5),u("formGroup",n.batchDeleteForm),l(8),L("is-invalid",n.isFieldInvalid("startDate")),l(),u("ngIf",n.isFieldInvalid("startDate")),l(7),L("is-invalid",n.isFieldInvalid("endDate")),l(),u("ngIf",n.isFieldInvalid("endDate")),l(6),u("ngForOf",n.dataTypes),l(),u("ngIf",n.showTypeError),l(2),u("disabled",n.isLoading),l(3),u("disabled",!n.batchDeleteForm.valid||n.selectedTypes.length===0||n.isLoading),l(),u("ngClass",n.isLoading?"fa-spinner fa-spin":"fa-trash"),l(),w(" ",n.isLoading?"Deleting...":"Delete Selected Data"," "),l(),u("show",n.showConfirmModal)("message","Are you sure you want to delete the selected data? This action will never be recoverable."))},dependencies:[ne,ye,Fe,Y,ge,me,ie,oe,de,pe,ue,xe,xi],styles:[".data-center-container[_ngcontent-%COMP%]{padding:20px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;box-shadow:0 2px 4px #0000001a}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:24px;font-size:1.5rem}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;color:#666}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:24px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#555}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:4px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;transition:border-color .2s}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .date-range-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:4px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]{margin-bottom:24px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:16px;color:#444}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:8px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0;cursor:pointer}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:4px;font-weight:500;display:flex;align-items:center;gap:8px;transition:all .2s}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border:none}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#5a6268}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover:not(:disabled){background:#c82333}@media (max-width: 768px){.data-center-container[_ngcontent-%COMP%], .data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]{padding:16px}.data-center-container[_ngcontent-%COMP%]   .batch-delete-section[_ngcontent-%COMP%]   .data-types-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}}"]})}}return o})();var Ye=(()=>{class o{constructor(e,t,n){this.authService=e,this.router=t,this.snackbarService=n}canActivate(e,t){let n=e.data.roles;if(!n||n.length===0)return!0;if(!n.some(d=>this.authService.hasRole(d))){this.snackbarService.error("You do not have permission to access this page.");let d=this.authService.getDefaultRoute();return this.router.navigate([d]),!1}return!0}static{this.\u0275fac=function(t){return new(t||o)(he(mt),he(Ne),he(ve))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Si=(()=>{class o{constructor(e){this.http=e,this.apiUrl=`${ct.apiUrl}/api/users`}searchUsers(e){return this.http.post(`${this.apiUrl}/search`,e)}getUserDetail(e){return this.http.post(`${this.apiUrl}/detail`,e)}updatePassword(e){return this.http.put(`${this.apiUrl}/update-password`,e)}static{this.\u0275fac=function(t){return new(t||o)(he(Je))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Gm=o=>["/users/edit",o];function Qm(o,i){if(o&1&&(r(0,"div",30),c(1),a()),o&2){let e=P();l(),sr(" Showing ",e.startIndex+1," - ",e.endIndex," of ",e.totalElements," users ")}}function Km(o,i){if(o&1&&(r(0,"span",42),c(1),a()),o&2){let e=i.$implicit;l(),w(" ",e," ")}}function Ym(o,i){if(o&1&&(r(0,"button",43),m(1,"i",44),a()),o&2){let e=P().$implicit;u("routerLink",ut(1,Gm,e.id))}}function Zm(o,i){o&1&&(r(0,"span",45),m(1,"i",46),a())}function Wm(o,i){if(o&1&&(r(0,"tr",31)(1,"td"),c(2),a(),r(3,"td")(4,"div",32)(5,"strong"),c(6),a()()(),r(7,"td")(8,"div",33),m(9,"i",34),c(10),a()(),r(11,"td")(12,"div",35),O(13,Km,2,1,"span",36),a()(),r(14,"td")(15,"div",37),c(16),a()(),r(17,"td")(18,"span",38),m(19,"i",26),c(20),a()(),r(21,"td",39),O(22,Ym,2,3,"button",40)(23,Zm,2,0,"span",41),a()()),o&2){let e=i.$implicit,t=i.index,n=P();l(2),I(n.startIndex+t+1),l(4),qn("",e.firstName," ",e.lastName,""),l(4),w(" ",e.email," "),l(3),u("ngForOf",e.roles),l(3),w(" ",e.clientName," "),l(2),u("ngClass",n.getStatusBadgeClass(e.status)),l(),u("ngClass",e.status==="A"?"fa-check-circle":"fa-times-circle"),l(),w(" ",n.getStatusText(e.status)," "),l(2),u("ngIf",!e.isSystem),l(),u("ngIf",e.isSystem)}}function Xm(o,i){o&1&&(r(0,"tr")(1,"td",47),m(2,"i",48),r(3,"p"),c(4,"No users found"),a()()())}function Jm(o,i){if(o&1){let e=U();r(0,"app-pagination",49),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var rs=(()=>{class o{constructor(e,t,n){this.userService=e,this.fb=t,this.snackbar=n,this.users=[],this.isLoading=!1,this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.sortBy="id",this.sortDir="desc",this.clientId=1,this.statusFilter="A",this.destroy$=new Ve,this.initializeForm()}ngOnInit(){this.loadUsers()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.users=[]}initializeForm(){this.searchForm=this.fb.group({search:[""],status:["A"]})}loadUsers(){this.isLoading=!0;let e=this.searchForm.value,t={clientId:this.clientId,search:e.search?.trim()||"",status:this.statusFilter!=="all"?this.statusFilter:void 0,page:this.currentPage,size:this.pageSize,sortBy:this.sortBy,sortDir:this.sortDir};this.userService.searchUsers(t).pipe(Pe(this.destroy$)).subscribe({next:n=>{n.success&&(this.users=n.data.content,this.totalPages=n.data.totalPages,this.totalElements=n.data.totalElements,this.updatePaginationIndexes()),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load users"),this.isLoading=!1}})}updatePaginationIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}onSearch(){this.currentPage=0,this.statusFilter=this.searchForm.value.status||"A",this.loadUsers()}onPageChange(e){this.currentPage=e,this.loadUsers()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadUsers()}onSort(e){this.sortBy===e?this.sortDir=this.sortDir==="asc"?"desc":"asc":(this.sortBy=e,this.sortDir="desc"),this.currentPage=0,this.loadUsers()}resetForm(){this.searchForm.reset({search:"",status:"A"}),this.statusFilter="A",this.currentPage=0,this.sortBy="id",this.sortDir="desc",this.loadUsers()}getStatusBadgeClass(e){return e==="A"?"active":"inactive"}getStatusText(e){return e==="A"?"Active":"Inactive"}getSortIcon(e){return this.sortBy!==e?"fa-sort":this.sortDir==="asc"?"fa-sort-up":"fa-sort-down"}static{this.\u0275fac=function(t){return new(t||o)(y(Si),y(re),y(ve))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-user-list"]],standalone:!0,features:[W],decls:58,vars:11,consts:[[1,"user-container"],[1,"search-section","card"],[1,"fas","fa-users"],[3,"ngSubmit","formGroup"],[1,"search-controls"],[1,"form-group"],["type","text","formControlName","search","placeholder","Search by name or email...",1,"form-control",3,"keyup.enter"],[1,"form-group","status-filter"],["formControlName","status",1,"form-control"],["value","A"],["value","I"],["value","all"],[1,"button-group"],["type","submit",1,"search-btn","btn","btn-sm","btn-primary"],[1,"fas","fa-search"],["type","button",1,"search-btn","btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"users-list","card"],[1,"card-header"],["class","results-info",4,"ngIf"],[1,"table-wrapper"],[1,"table-container"],[3,"show"],[1,"table-responsive"],[1,"table"],[1,"sortable",3,"click"],[1,"fas",3,"ngClass"],["class","user-row",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"results-info"],[1,"user-row"],[1,"user-name"],[1,"user-email"],[1,"fas","fa-envelope"],[1,"roles"],["class","role-badge",4,"ngFor","ngForOf"],[1,"client-info"],[1,"status-badge",3,"ngClass"],[1,"actions"],["class","btn-icon edit","title","Edit User",3,"routerLink",4,"ngIf"],["class","no-action","title","System users cannot be edited",4,"ngIf"],[1,"role-badge"],["title","Edit User",1,"btn-icon","edit",3,"routerLink"],[1,"fas","fa-edit"],["title","System users cannot be edited",1,"no-action"],[1,"fas","fa-lock"],["colspan","8",1,"text-center","no-data"],[1,"fas","fa-inbox"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),m(3,"i",2),c(4," Search Users"),a(),r(5,"form",3),b("ngSubmit",function(){return n.onSearch()}),r(6,"div",4)(7,"div",5)(8,"input",6),b("keyup.enter",function(){return n.onSearch()}),a()(),r(9,"div",7)(10,"select",8)(11,"option",9),c(12,"Active"),a(),r(13,"option",10),c(14,"Inactive"),a(),r(15,"option",11),c(16,"All"),a()()(),r(17,"div",12)(18,"button",13),m(19,"i",14),c(20," Search "),a(),r(21,"button",15),b("click",function(){return n.resetForm()}),m(22,"i",16),c(23," Reset "),a()()()()(),r(24,"div",17)(25,"div",18)(26,"h2"),m(27,"i",2),c(28," Users"),a(),O(29,Qm,2,3,"div",19),a(),r(30,"div",20)(31,"div",21),m(32,"app-loader",22),r(33,"div",23)(34,"table",24)(35,"thead")(36,"tr")(37,"th",25),b("click",function(){return n.onSort("id")}),c(38," Number "),m(39,"i",26),a(),r(40,"th",25),b("click",function(){return n.onSort("firstName")}),c(41," Name "),m(42,"i",26),a(),r(43,"th"),c(44,"Email"),a(),r(45,"th"),c(46,"Roles"),a(),r(47,"th"),c(48,"Client"),a(),r(49,"th",25),b("click",function(){return n.onSort("status")}),c(50," Status "),m(51,"i",26),a(),r(52,"th"),c(53,"Actions"),a()()(),r(54,"tbody"),O(55,Wm,24,11,"tr",27)(56,Xm,5,0,"tr",28),a()()()()(),O(57,Jm,1,4,"app-pagination",29),a()()),t&2&&(l(5),u("formGroup",n.searchForm),l(24),u("ngIf",n.totalElements>0),l(3),u("show",n.isLoading),l(),L("loading",n.isLoading),l(6),u("ngClass",n.getSortIcon("id")),l(3),u("ngClass",n.getSortIcon("firstName")),l(9),u("ngClass",n.getSortIcon("status")),l(4),u("ngForOf",n.users),l(),u("ngIf",!n.isLoading&&(!n.users||n.users.length===0)),l(),u("ngIf",n.totalPages>0))},dependencies:[ne,ye,Fe,Y,ge,me,tt,nt,ie,et,oe,de,pe,ue,$e,Le,Ge,xe,Ze],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Roboto,sans-serif;background-color:var(--background);color:var(--text-primary)}.container[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width: 576px){.container[_ngcontent-%COMP%]{max-width:540px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:720px}}@media (min-width: 992px){.container[_ngcontent-%COMP%]{max-width:960px}}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{max-width:1140px}}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0a9fe2}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#102539}.form-control[_ngcontent-%COMP%]{width:90%;padding:10px;border:1px solid var(--supporting);border-radius:4px!important;margin-bottom:15px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem;background-color:#fff;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--supporting)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#aec6cf1a}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;margin-bottom:20px}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-2[_ngcontent-%COMP%]{margin-top:1rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:1rem}.p-2[_ngcontent-%COMP%]{padding:1rem}.custom-dialog-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background-color:#00000080!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{border-radius:12px!important;padding:0!important;box-shadow:0 8px 32px #0000001a!important;background:#fff!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%], .custom-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{padding:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dialog-enter .3s ease-out}@keyframes _ngcontent-%COMP%_dialog-enter{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@media (max-width: 576px){.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{margin:16px!important}}.custom-snackbar-container[_ngcontent-%COMP%]{position:fixed!important;z-index:1001!important;transform:none!important;-webkit-transform:none!important;-ms-transform:none!important}.custom-snackbar-container.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{position:fixed!important;margin:0!important;max-width:none!important;inset:20px 20px auto auto!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__surface[_ngcontent-%COMP%]{background:none!important;box-shadow:none!important;min-width:auto!important;min-height:auto!important;padding:0!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-label[_ngcontent-%COMP%], .custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__label[_ngcontent-%COMP%]{padding:0!important}@media (max-width: 576px){.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:10px!important;max-width:calc(100% - 20px)!important}}.search-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:40px;max-width:90px}.refresh[_ngcontent-%COMP%], .calculator[_ngcontent-%COMP%]{width:33px;height:33px;display:flex;justify-content:center;align-items:center}.user-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background);min-height:calc(100vh - 60px)}.user-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px;padding:20px}.user-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-primary);font-size:1.5rem;display:flex;align-items:center;gap:10px}.user-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary)}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:start;flex-wrap:wrap}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1;min-width:200px}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group.status-filter[_ngcontent-%COMP%]{flex:0 0 150px}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:43px}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px}.user-container[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;flex-wrap:wrap;gap:15px}.user-container[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.user-container[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.user-container[_ngcontent-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.user-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative;min-height:200px;background:#fff}.user-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.user-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;width:100%}.user-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-responsive.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{position:relative;min-height:200px;overflow-x:auto}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--supporting);border-radius:4px}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#738c98}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{white-space:nowrap;padding:15px 12px;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px;background-color:var(--background);color:var(--text-primary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s ease}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]:hover{background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th.sortable[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px;color:var(--secondary);font-size:.85rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;vertical-align:middle;border-top:1px solid var(--supporting);color:var(--text-primary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]:hover{background-color:rgba(var(--secondary-rgb, 23, 163, 223),.05)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--text-secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary);font-size:.85rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:500;background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1);color:var(--secondary);white-space:nowrap}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:12px;font-size:.85rem;font-weight:500;display:inline-flex;align-items:center;gap:6px}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background-color:#5a9e6f1a;color:var(--accent2)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:500;display:inline-flex;align-items:center;gap:5px;background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1);color:var(--secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .system-badge.user-badge[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.85rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{padding:40px 20px;text-align:center;color:var(--text-secondary)}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:15px;opacity:.3}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;justify-content:center}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:8px;cursor:pointer;border-radius:6px;transition:all .2s ease;display:inline-flex;align-items:center;justify-content:center}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1)}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.actions[_ngcontent-%COMP%]   .no-action[_ngcontent-%COMP%]{color:var(--text-secondary);opacity:.5;padding:8px;cursor:not-allowed}.actions[_ngcontent-%COMP%]   .no-action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 992px){.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1 1 100%}.user-container[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.user-container[_ngcontent-%COMP%]   .users-list[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}@media (max-width: 768px){.user-container[_ngcontent-%COMP%]{padding:10px}.user-container[_ngcontent-%COMP%]   .table-responsive[_ngcontent-%COMP%]{margin:0 -15px;padding:0 15px}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;font-size:.85rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .roles[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{font-size:.7rem;padding:3px 8px}}@media (max-width: 576px){.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 6px;font-size:.8rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]{font-size:.8rem}.user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%], .user-container[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%]{font-size:.75rem;padding:4px 8px}}"]})}}return o})();function ep(o,i){if(o&1&&(r(0,"span",51),c(1),a()),o&2){let e=i.$implicit;l(),w(" ",e," ")}}function tp(o,i){if(o&1&&(r(0,"div",40)(1,"div",41)(2,"div",42),m(3,"i",43),r(4,"h3"),c(5,"User Information"),a()(),r(6,"div",44)(7,"div",45)(8,"label"),m(9,"i",46),c(10," Name"),a(),r(11,"span"),c(12),a()(),r(13,"div",45)(14,"label"),m(15,"i",47),c(16," Email"),a(),r(17,"span"),c(18),a()(),r(19,"div",45)(20,"label"),m(21,"i",48),c(22," Roles"),a(),r(23,"span"),O(24,ep,2,1,"span",49),a()(),r(25,"div",45)(26,"label"),m(27,"i",50),c(28," Client"),a(),r(29,"span"),c(30),a()()()()()),o&2){let e=P(2);l(12),qn("",e.user.firstName," ",e.user.lastName,""),l(6),I(e.user.email),l(6),u("ngForOf",e.user.roles),l(6),I(e.user.clientName)}}function np(o,i){if(o&1&&(r(0,"span",52),c(1," Password Strength: "),r(2,"strong"),c(3),a()()),o&2){let e=P(2);l(3),I(e.getPasswordStrengthText())}}function ip(o,i){if(o&1&&(r(0,"div",53),c(1),a()),o&2){let e=P(2);l(),w(" ",e.getFieldError("password")," ")}}function op(o,i){if(o&1&&(r(0,"div",53),c(1),a()),o&2){let e=P(2);l(),w(" ",e.getFieldError("confirmPassword")," ")}}function rp(o,i){if(o&1&&(r(0,"div",53),c(1),a()),o&2){let e=P(2);l(),w(" ",e.getFormError()," ")}}function ap(o,i){o&1&&(r(0,"div",53),c(1," Status is required "),a())}function sp(o,i){if(o&1&&(r(0,"button",54),m(1,"i",20),c(2),a()),o&2){let e=P(2);u("disabled",e.userForm.invalid||e.isLoading||e.isEditing&&(e.user==null?null:e.user.isSystem)),l(),u("ngClass",e.isLoading?"fa-spinner fa-spin":"fa-save"),l(),w(" ",e.isLoading?"Updating...":"Update User"," ")}}function cp(o,i){o&1&&(r(0,"div",55),m(1,"i",27),c(2," System users cannot be modified "),a())}function lp(o,i){if(o&1){let e=U();r(0,"div",8),O(1,tp,31,5,"div",9),r(2,"form",10),b("ngSubmit",function(){k(e);let n=P();return T(n.onSubmit())}),r(3,"div",11)(4,"h3"),m(5,"i",12),c(6," Password Settings"),a(),r(7,"div",13)(8,"label",14),m(9,"i",15),c(10," New Password "),r(11,"span",16),c(12,"*"),a()(),r(13,"div",17)(14,"input",18),b("input",function(){k(e);let n=P();return T(n.onPasswordChange())}),a(),r(15,"button",19),b("click",function(){k(e);let n=P();return T(n.togglePasswordVisibility())}),m(16,"i",20),a()(),r(17,"div",21)(18,"div",22),m(19,"div",23),a(),O(20,np,4,1,"span",24),a(),O(21,ip,2,1,"div",25),r(22,"div",26),m(23,"i",27),c(24," Password must be at least 3 characters long "),a()(),r(25,"div",13)(26,"label",28),m(27,"i",15),c(28," Confirm Password "),r(29,"span",16),c(30,"*"),a()(),m(31,"input",29),O(32,op,2,1,"div",25)(33,rp,2,1,"div",25),a()(),r(34,"div",11)(35,"h3"),m(36,"i",30),c(37," Status Settings"),a(),r(38,"div",13)(39,"label",31),m(40,"i",32),c(41," Status "),r(42,"span",16),c(43,"*"),a()(),r(44,"select",33)(45,"option",34),c(46,"Active"),a(),r(47,"option",35),c(48,"Inactive"),a()(),O(49,ap,2,0,"div",25),r(50,"div",26),m(51,"i",27),c(52," Active users can log in, inactive users cannot "),a()()(),r(53,"div",36)(54,"button",37),b("click",function(){k(e);let n=P();return T(n.onCancel())}),m(55,"i",5),c(56," Cancel "),a(),O(57,sp,3,3,"button",38)(58,cp,3,0,"div",39),a()()()}if(o&2){let e,t,n,s,d,p,g,h,C=P();l(),u("ngIf",C.isEditing&&C.user),l(),u("formGroup",C.userForm),l(12),L("is-invalid",((e=C.userForm.get("password"))==null?null:e.invalid)&&(((e=C.userForm.get("password"))==null?null:e.touched)||C.isSubmitted)),u("type",C.showPassword?"text":"password"),l(),ar("title","",C.showPassword?"Hide":"Show"," password"),l(),u("ngClass",C.showPassword?"fa-eye-slash":"fa-eye"),l(2),u("ngClass",C.getPasswordStrengthClass()),l(2),u("ngIf",(t=C.userForm.get("password"))==null?null:t.value),l(),u("ngIf",((n=C.userForm.get("password"))==null?null:n.errors)&&(((n=C.userForm.get("password"))==null?null:n.touched)||C.isSubmitted)),l(10),L("is-invalid",(((s=C.userForm.get("confirmPassword"))==null?null:s.invalid)||(C.userForm.errors==null?null:C.userForm.errors.passwordMismatch))&&(((s=C.userForm.get("confirmPassword"))==null?null:s.touched)||C.isSubmitted)),u("type",C.showPassword?"text":"password"),l(),u("ngIf",((d=C.userForm.get("confirmPassword"))==null?null:d.errors)&&(((d=C.userForm.get("confirmPassword"))==null?null:d.touched)||C.isSubmitted)),l(),u("ngIf",(C.userForm.errors==null?null:C.userForm.errors.passwordMismatch)&&(((p=C.userForm.get("confirmPassword"))==null?null:p.touched)||C.isSubmitted)),l(11),L("is-invalid",((g=C.userForm.get("status"))==null?null:g.invalid)&&(((g=C.userForm.get("status"))==null?null:g.touched)||C.isSubmitted)),l(5),u("ngIf",((h=C.userForm.get("status"))==null?null:h.errors)&&(((h=C.userForm.get("status"))==null?null:h.touched)||C.isSubmitted)),l(8),u("ngIf",!C.isEditing||!(C.user!=null&&C.user.isSystem)),l(),u("ngIf",C.isEditing&&(C.user==null?null:C.user.isSystem))}}var as=(()=>{class o{constructor(e,t,n,s,d){this.fb=e,this.userService=t,this.snackbar=n,this.route=s,this.router=d,this.isLoading=!1,this.isLoadingUser=!1,this.isSubmitted=!1,this.userId=null,this.user=null,this.isEditing=!1,this.showPassword=!1,this.passwordStrength="weak",this.destroy$=new Ve,this.initForm()}ngOnInit(){this.route.params.pipe(Pe(this.destroy$)).subscribe(e=>{e.id?(this.userId=+e.id,this.isEditing=!0,this.loadUser()):(this.isEditing=!1,this.userId=null,this.user=null,this.initForm())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.user=null}initForm(){this.userForm=this.fb.group({password:["",[x.required,x.minLength(3),x.maxLength(50)]],confirmPassword:["",[x.required]],status:["A",[x.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(e){let t=e.get("password"),n=e.get("confirmPassword");return t&&n&&t.value!==n.value?{passwordMismatch:!0}:null}loadUser(){if(!this.userId)return;this.isLoadingUser=!0;let e={id:this.userId};this.userService.getUserDetail(e).pipe(Pe(this.destroy$)).subscribe({next:t=>{t.success&&(this.user=t.data,this.patchForm(t.data)),this.isLoadingUser=!1},error:()=>{this.snackbar.error("Failed to load user details"),this.isLoadingUser=!1,this.router.navigate(["/users"])}})}patchForm(e){e&&this.userForm.patchValue({password:"",confirmPassword:"",status:e.status||"A"})}onPasswordChange(){let e=this.userForm.get("password")?.value||"";this.checkPasswordStrength(e);let t=this.userForm.get("confirmPassword");t&&t.updateValueAndValidity()}checkPasswordStrength(e){if(e.length===0){this.passwordStrength="weak";return}let t=0;e.length>=8&&t++,e.length>=12&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^a-zA-Z0-9]/.test(e)&&t++,t<=2?this.passwordStrength="weak":t<=4?this.passwordStrength="medium":this.passwordStrength="strong"}togglePasswordVisibility(){this.showPassword=!this.showPassword}onSubmit(){if(this.isSubmitted=!0,this.userForm.valid&&this.userId){this.isLoading=!0;let e=this.userForm.value,t={id:this.userId,password:e.password,status:e.status};this.userService.updatePassword(t).pipe(Pe(this.destroy$)).subscribe({next:n=>{n.success&&(this.snackbar.success(n.message||"User updated successfully"),this.router.navigate(["/users"])),this.isLoading=!1},error:n=>{this.snackbar.error(n.error?.message||"Failed to update user"),this.isLoading=!1}})}else Object.keys(this.userForm.controls).forEach(e=>{this.userForm.get(e)?.markAsTouched()})}onCancel(){this.router.navigate(["/users"])}getFieldError(e){let t=this.userForm.get(e);if(t?.errors&&(t.dirty||t.touched||this.isSubmitted)){if(t.errors.required)return`${e==="confirmPassword"?"Confirm password":"Password"} is required`;if(t.errors.minlength)return`Password must be at least ${t.errors.minlength.requiredLength} characters`;if(t.errors.maxlength)return`Password must not exceed ${t.errors.maxlength.requiredLength} characters`}return""}getFormError(){return this.userForm.errors&&this.userForm.errors.passwordMismatch?"Passwords do not match":""}getPasswordStrengthClass(){return`password-strength ${this.passwordStrength}`}getPasswordStrengthText(){switch(this.passwordStrength){case"weak":return"Weak";case"medium":return"Medium";case"strong":return"Strong";default:return""}}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(Si),y(ve),y(Kt),y(Ne))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-add-user"]],standalone:!0,features:[W],decls:11,vars:3,consts:[[1,"user-form-container"],[1,"form-card","card"],[1,"form-header"],[1,"fas","fa-user-edit"],["title","Cancel",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-times"],[3,"show"],["class","form-content",4,"ngIf"],[1,"form-content"],["class","user-info",4,"ngIf"],[1,"user-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"fas","fa-key"],[1,"form-group"],["for","password"],[1,"fas","fa-lock"],[1,"required"],[1,"password-input-wrapper"],["id","password","formControlName","password","placeholder","Enter new password","autocomplete","new-password",1,"form-control",3,"input","type"],["type","button",1,"password-toggle",3,"click","title"],[1,"fas",3,"ngClass"],[1,"password-strength-indicator"],[1,"strength-bar",3,"ngClass"],[1,"strength-fill"],["class","strength-text",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"form-hint"],[1,"fas","fa-info-circle"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm new password","autocomplete","new-password",1,"form-control",3,"type"],[1,"fas","fa-toggle-on"],["for","status"],[1,"fas","fa-circle"],["id","status","formControlName","status",1,"form-control"],["value","A"],["value","I"],[1,"form-actions"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","submit","class","btn btn-sm btn-primary",3,"disabled",4,"ngIf"],["class","system-user-notice",4,"ngIf"],[1,"user-info"],[1,"info-card"],[1,"info-header"],[1,"fas","fa-user-circle"],[1,"info-grid"],[1,"info-item"],[1,"fas","fa-user"],[1,"fas","fa-envelope"],[1,"fas","fa-user-tag"],["class","role-badge",4,"ngFor","ngForOf"],[1,"fas","fa-building"],[1,"role-badge"],[1,"strength-text"],[1,"invalid-feedback"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled"],[1,"system-user-notice"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),m(4,"i",3),c(5),a(),r(6,"button",4),b("click",function(){return n.onCancel()}),m(7,"i",5),c(8," Cancel "),a()(),m(9,"app-loader",6),O(10,lp,59,21,"div",7),a()()),t&2&&(l(5),w(" ",n.isEditing?"Update User":"Add New User"," "),l(4),u("show",n.isLoadingUser),l(),u("ngIf",!n.isLoadingUser))},dependencies:[ne,ye,Fe,Y,ge,me,tt,nt,ie,et,oe,de,pe,ue,Le,xe],styles:["[_ngcontent-%COMP%]:root{--primary: #145881;--secondary: #17a3df;--background: #f5f9fc;--accent1: #4fc3f7;--accent2: #5A9E6F;--text-primary: #2c3e50;--text-secondary: #607d8b;--supporting: #90a4ae}body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Roboto,sans-serif;background-color:var(--background);color:var(--text-primary)}.container[_ngcontent-%COMP%]{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width: 576px){.container[_ngcontent-%COMP%]{max-width:540px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:720px}}@media (min-width: 992px){.container[_ngcontent-%COMP%]{max-width:960px}}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{max-width:1140px}}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background-color:var(--primary);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0a9fe2}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#102539}.form-control[_ngcontent-%COMP%]{width:90%;padding:10px;border:1px solid var(--supporting);border-radius:4px!important;margin-bottom:15px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem;background-color:#fff;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid var(--supporting)}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--secondary);color:#fff}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#aec6cf1a}.card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;margin-bottom:20px}.text-center[_ngcontent-%COMP%]{text-align:center}.mt-2[_ngcontent-%COMP%]{margin-top:1rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:1rem}.p-2[_ngcontent-%COMP%]{padding:1rem}.custom-dialog-backdrop[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background-color:#00000080!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{border-radius:12px!important;padding:0!important;box-shadow:0 8px 32px #0000001a!important;background:#fff!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%], .custom-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{padding:0!important}.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-container[_ngcontent-%COMP%]   .mdc-dialog__surface[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_dialog-enter .3s ease-out}@keyframes _ngcontent-%COMP%_dialog-enter{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@media (max-width: 576px){.custom-dialog-container[_ngcontent-%COMP%]   .mat-mdc-dialog-surface[_ngcontent-%COMP%]{margin:16px!important}}.custom-snackbar-container[_ngcontent-%COMP%]{position:fixed!important;z-index:1001!important;transform:none!important;-webkit-transform:none!important;-ms-transform:none!important}.custom-snackbar-container.mat-mdc-snack-bar-container[_ngcontent-%COMP%]{position:fixed!important;margin:0!important;max-width:none!important;inset:20px 20px auto auto!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__surface[_ngcontent-%COMP%]{background:none!important;box-shadow:none!important;min-width:auto!important;min-height:auto!important;padding:0!important;transform:none!important}.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-label[_ngcontent-%COMP%], .custom-snackbar-container[_ngcontent-%COMP%]   .mdc-snackbar__label[_ngcontent-%COMP%]{padding:0!important}@media (max-width: 576px){.custom-snackbar-container[_ngcontent-%COMP%]   .mat-mdc-snack-bar-container[_ngcontent-%COMP%]{margin:10px!important;max-width:calc(100% - 20px)!important}}.search-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;max-height:40px;max-width:90px}.refresh[_ngcontent-%COMP%], .calculator[_ngcontent-%COMP%]{width:33px;height:33px;display:flex;justify-content:center;align-items:center}.user-form-container[_ngcontent-%COMP%]{padding:20px;background-color:var(--background);min-height:calc(100vh - 60px)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:30px;margin:0 auto}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:20px;border-bottom:2px solid var(--background)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.75rem;display:flex;align-items:center;gap:12px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{position:relative}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]{margin-bottom:30px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]{background:var(--background);border-radius:8px;padding:20px;border:1px solid var(--supporting)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid var(--supporting)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary);font-size:1.5rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.2rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);font-weight:500;display:flex;align-items:center;gap:8px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary);font-size:.9rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1rem;font-weight:500}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:500;background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1);color:var(--secondary);margin-right:5px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%], .user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .user-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:500}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .system-badge[_ngcontent-%COMP%]{background-color:rgba(var(--secondary-rgb, 23, 163, 223),.1);color:var(--secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .user-badge[_ngcontent-%COMP%]{background-color:#607d8b1a;color:var(--text-secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:30px;padding-bottom:25px;border-bottom:1px solid var(--background)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;color:var(--text-primary);font-size:1.2rem;display:flex;align-items:center;gap:10px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:var(--text-primary);font-weight:500;font-size:.95rem;display:flex;align-items:center;gap:8px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--secondary);font-size:.9rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545;margin-left:4px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:12px 15px;border:1px solid var(--supporting);border-radius:6px;font-size:1rem;transition:all .3s ease;background-color:#fff;color:var(--text-primary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--secondary);box-shadow:0 0 0 3px rgba(var(--secondary-rgb, 23, 163, 223),.1)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.is-invalid[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #dc35451a}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary);opacity:.6}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]{position:relative}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-right:45px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--text-secondary);cursor:pointer;padding:5px;transition:color .2s ease}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:hover{color:var(--secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]{margin-top:10px;display:flex;flex-direction:column;gap:8px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]{height:6px;background-color:var(--background);border-radius:3px;overflow:hidden;position:relative}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{height:100%;transition:width .3s ease,background-color .3s ease;border-radius:3px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar.weak[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{width:33%;background-color:#dc3545}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar.medium[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{width:66%;background-color:#ffc107}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-bar.strong[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{width:100%;background-color:var(--accent2)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-text[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .password-strength-indicator[_ngcontent-%COMP%]   .strength-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{display:block;color:#dc3545;font-size:.875rem;margin-top:5px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:8px;font-size:.85rem;color:var(--text-secondary)}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-hint[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:30px;padding-top:25px;border-top:2px solid var(--background);flex-wrap:wrap}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .system-user-notice[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 15px;background-color:#ffc1071a;border:1px solid #ffc107;border-radius:6px;color:#856404;font-size:.9rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .system-user-notice[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ffc107}@media (max-width: 768px){.user-form-container[_ngcontent-%COMP%]{padding:10px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:20px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:15px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .info-card[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{padding:15px}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem}.user-form-container[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .user-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}}return o})();var ss=(()=>{class o{constructor(e){this.http=e,this.baseUrl=`${ct.apiUrl}`}registerDealer(e){return this.http.post(`${this.baseUrl}/api/customers/register`,e)}static{this.\u0275fac=function(t){return new(t||o)(he(Je))}}static{this.\u0275prov=Ee({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function dp(o,i){o&1&&(r(0,"small",35),c(1,"First name is required"),a())}function mp(o,i){o&1&&(r(0,"small",35),c(1,"Last name is required"),a())}function pp(o,i){o&1&&(r(0,"small",35),c(1,"Valid email is required"),a())}function up(o,i){o&1&&(r(0,"small",35),c(1,"Password must be at least 8 characters"),a())}function gp(o,i){o&1&&(r(0,"small",35),c(1,"Business name is required"),a())}function fp(o,i){o&1&&(r(0,"small",35),c(1,"Enter a valid GSTIN"),a())}function hp(o,i){o&1&&(r(0,"small",35),c(1,"Enter a valid 10-digit mobile"),a())}function _p(o,i){o&1&&(r(0,"small",35),c(1,"DL Number is too long"),a())}function Cp(o,i){o&1&&(r(0,"small",35),c(1,"Address is required"),a())}function Pp(o,i){o&1&&(r(0,"span"),c(1,"Submit registration"),a())}function bp(o,i){o&1&&m(0,"span",36)}var cs=(()=>{class o{constructor(e,t,n,s,d){this.formBuilder=e,this.dealersService=t,this.toastr=n,this.title=s,this.meta=d,this.isSubmitting=!1}ngOnInit(){this.title.setTitle("Register Dealer "),this.meta.updateTag({name:"description",content:"Register as a dealer to partner with Medonix. Quick, secure, and mobile-friendly registration with pending approval workflow."}),this.form=this.formBuilder.group({email:["",[x.required,x.email]],password:["",[x.required,x.minLength(8)]],firstName:["",[x.required,x.maxLength(50)]],lastName:["",[x.required,x.maxLength(50)]],customerName:["",[x.required,x.maxLength(120)]],gst:["",[x.required,x.pattern(/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}Z[0-9A-Z]{1}$/)]],dlNumber:["",[x.maxLength(32)]],address:["",[x.required,x.maxLength(250)]],mobile:["",[x.required,x.pattern(/^[6-9]\d{9}$/)]],remarks:["",[x.maxLength(250)]]})}get f(){return this.form.controls}submit(){if(this.form.invalid||this.isSubmitting){this.form.markAllAsTouched();return}let e=this.form.value;this.isSubmitting=!0,this.dealersService.registerDealer(e).subscribe({next:t=>{t?.success?(this.toastr.success("Dealer registered successfully. Pending for approval.","Success"),this.form.reset()):this.toastr.info(t?.message||"Request submitted.")},error:t=>{let n=t?.error?.message||"Failed to register dealer. Please try again.";this.toastr.error(n,"Error")},complete:()=>{this.isSubmitting=!1}})}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(ss),y(Xt),y(fr),y(gr))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-add-dealer"]],decls:69,vars:13,consts:[[1,"register-wrapper"],[1,"container"],[1,"card"],[1,"card-header"],[1,"title"],[1,"subtitle"],["novalidate","",1,"form-grid",3,"ngSubmit","keydown.enter","formGroup"],[1,"grid","two"],[1,"field"],["for","firstName"],["id","firstName","type","text","formControlName","firstName","placeholder","John"],["class","error",4,"ngIf"],["for","lastName"],["id","lastName","type","text","formControlName","lastName","placeholder","Doe"],["for","email"],["id","email","type","email","formControlName","email","placeholder","dealer@example.com","autocomplete","email"],["for","password"],["id","password","type","password","formControlName","password","placeholder","Min 8 characters","autocomplete","new-password"],[1,"hint"],["for","customerName"],["id","customerName","type","text","formControlName","customerName","placeholder","John Doe Trading Co."],["for","gst"],["id","gst","type","text","formControlName","gst","placeholder","29ABCDE1234F1Z5"],["for","mobile"],["id","mobile","type","tel","formControlName","mobile","placeholder","9876543210","autocomplete","tel"],["for","dlNumber"],["id","dlNumber","type","text","formControlName","dlNumber","placeholder","License number"],["for","address"],["id","address","rows","3","formControlName","address","placeholder","123 Main Street, City"],["for","remarks"],["id","remarks","rows","2","formControlName","remarks","placeholder","VIP Customer"],[1,"actions"],["type","submit",1,"primary",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"error"],[1,"spinner"]],template:function(t,n){t&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),c(5,"Register Dealer"),a(),r(6,"p",5),c(7,"Create your dealer account. Quick approval follows verification."),a()(),r(8,"form",6),b("ngSubmit",function(){return n.submit()})("keydown.enter",function(d){return d.preventDefault()}),r(9,"div",7)(10,"div",8)(11,"label",9),c(12,"First name"),a(),m(13,"input",10),O(14,dp,2,0,"small",11),a(),r(15,"div",8)(16,"label",12),c(17,"Last name"),a(),m(18,"input",13),O(19,mp,2,0,"small",11),a()(),r(20,"div",7)(21,"div",8)(22,"label",14),c(23,"Account email"),a(),m(24,"input",15),O(25,pp,2,0,"small",11),a(),r(26,"div",8)(27,"label",16),c(28,"Password"),a(),m(29,"input",17),r(30,"small",18),c(31,"Use at least 8 characters."),a(),O(32,up,2,0,"small",11),a()(),r(33,"div",8)(34,"label",19),c(35,"Business name"),a(),m(36,"input",20),O(37,gp,2,0,"small",11),a(),r(38,"div",7)(39,"div",8)(40,"label",21),c(41,"GSTIN"),a(),m(42,"input",22),r(43,"small",18),c(44,"Format: 29ABCDE1234F1Z5"),a(),O(45,fp,2,0,"small",11),a(),r(46,"div",8)(47,"label",23),c(48,"Mobile"),a(),m(49,"input",24),O(50,hp,2,0,"small",11),a()(),r(51,"div",8)(52,"label",25),c(53,"DL Number"),a(),m(54,"input",26),O(55,_p,2,0,"small",11),a(),r(56,"div",8)(57,"label",27),c(58,"Business address"),a(),m(59,"textarea",28),O(60,Cp,2,0,"small",11),a(),r(61,"div",8)(62,"label",29),c(63,"Remarks (optional)"),a(),m(64,"textarea",30),a(),r(65,"div",31)(66,"button",32),O(67,Pp,2,0,"span",33)(68,bp,1,0,"span",34),a()()()()()()),t&2&&(l(8),u("formGroup",n.form),l(6),u("ngIf",n.f.firstName.touched&&n.f.firstName.invalid),l(5),u("ngIf",n.f.lastName.touched&&n.f.lastName.invalid),l(6),u("ngIf",n.f.email.touched&&n.f.email.invalid),l(7),u("ngIf",n.f.password.touched&&n.f.password.invalid),l(5),u("ngIf",n.f.customerName.touched&&n.f.customerName.invalid),l(8),u("ngIf",n.f.gst.touched&&n.f.gst.invalid),l(5),u("ngIf",n.f.mobile.touched&&n.f.mobile.invalid),l(5),u("ngIf",n.f.dlNumber.touched&&n.f.dlNumber.invalid),l(5),u("ngIf",n.f.address.touched&&n.f.address.invalid),l(6),u("disabled",n.isSubmitting||n.form.invalid),l(),u("ngIf",!n.isSubmitting),l(),u("ngIf",n.isSubmitting))},dependencies:[Y,me,ie,oe,de,pe,ue],styles:[".register-wrapper[_ngcontent-%COMP%]{padding:24px 12px}.container[_ngcontent-%COMP%]{margin:0 auto}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 24px #00000014;overflow:hidden}.card-header[_ngcontent-%COMP%]{padding:20px 24px;background:linear-gradient(135deg,#0f66c3,#3cb2ff);color:#fff}.title[_ngcontent-%COMP%]{margin:0 0 6px;font-size:22px;font-weight:700}.subtitle[_ngcontent-%COMP%]{margin:0;opacity:.9}.form-grid[_ngcontent-%COMP%]{padding:22px 24px}.grid.two[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}@media (max-width: 768px){.grid.two[_ngcontent-%COMP%]{grid-template-columns:1fr}}.field[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:14px}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:8px;padding:10px 12px;outline:none;transition:border-color .2s ease,box-shadow .2s ease}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:#0f66c3;box-shadow:0 0 0 3px #0f66c326}.hint[_ngcontent-%COMP%]{color:#7a7a7a;margin-top:6px}.error[_ngcontent-%COMP%]{color:#c0392b;margin-top:6px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:6px}button.primary[_ngcontent-%COMP%]{background:#0f66c3;color:#fff;border:none;border-radius:10px;padding:10px 18px;font-weight:600;cursor:pointer;transition:transform .08s ease,box-shadow .2s ease,background .2s ease}button.primary[_ngcontent-%COMP%]:disabled{background:#a8c7ea;cursor:not-allowed}button.primary[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 16px #0f66c359;transform:translateY(-1px)}.spinner[_ngcontent-%COMP%]{width:18px;height:18px;border-radius:50%;border:2px solid rgba(255,255,255,.5);border-top-color:#fff;display:inline-block;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})}}return o})();var vp=()=>["/transport-master/edit"];function Mp(o,i){if(o&1){let e=U();r(0,"tr")(1,"td"),c(2),a(),r(3,"td"),c(4),a(),r(5,"td"),c(6),a(),r(7,"td"),c(8),a(),r(9,"td"),c(10),a(),r(11,"td")(12,"span"),c(13),a()(),r(14,"td",20)(15,"button",21),b("click",function(n){let s=k(e).$implicit,d=P();return n.preventDefault(),T(d.onEdit(s.id))}),m(16,"i",22),a(),r(17,"button",23),b("click",function(){let n=k(e).$implicit,s=P();return T(s.delete(n.id))}),m(18,"i",24),a()()()}if(o&2){let e=i.$implicit,t=i.index,n=P();l(2),I(n.startIndex+t+1),l(2),I(e.name),l(2),I(e.mobile),l(2),I(e.gst),l(2),I(e.remarks),l(2),pt("status-badge "+(e.status==="A"?"active":"inactive")),l(),w(" ",e.status==="A"?"Active":"Inactive"," "),l(2),u("routerLink",cn(9,vp))}}function Op(o,i){o&1&&(r(0,"tr")(1,"td",25),c(2,"No transports found"),a()())}function xp(o,i){if(o&1){let e=U();r(0,"app-pagination",26),b("pageChange",function(n){k(e);let s=P();return T(s.onPageChange(n))})("pageSizeChange",function(n){k(e);let s=P();return T(s.onPageSizeChange(n))}),a()}if(o&2){let e=P();u("currentPage",e.currentPage)("pageSize",e.pageSize)("totalElements",e.totalElements)("pageSizeOptions",e.pageSizeOptions)}}var ls=(()=>{class o{constructor(e,t,n,s,d){this.fb=e,this.service=t,this.snackbar=n,this.router=s,this.encryption=d,this.isLoading=!1,this.transports=[],this.currentPage=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50,100],this.totalPages=0,this.totalElements=0,this.startIndex=0,this.endIndex=0,this.searchForm=this.fb.group({search:[""]})}ngOnInit(){this.loadData()}loadData(){this.isLoading=!0;let e={search:this.searchForm.value.search||"",page:this.currentPage,size:this.pageSize,sortBy:"id",sortDir:"desc"};this.service.search(e).subscribe({next:t=>{t?.data?.content?(this.transports=t.data.content,this.totalPages=t.data.totalPages,this.totalElements=t.data.totalElements,this.updateIndexes()):Array.isArray(t?.data)?(this.transports=t.data,this.totalPages=1,this.totalElements=t.data.length,this.updateIndexes()):(this.transports=[],this.totalPages=0,this.totalElements=0,this.updateIndexes()),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load transports"),this.isLoading=!1}})}onSearch(){this.currentPage=0,this.pageSize=10,this.loadData()}reset(){this.searchForm.reset(),this.currentPage=0,this.pageSize=10,this.loadData()}onPageChange(e){this.currentPage=e,this.loadData()}onPageSizeChange(e){this.pageSize=e,this.currentPage=0,this.loadData()}delete(e){confirm("Delete this transport?")&&(this.isLoading=!0,this.service.delete(e).subscribe({next:()=>{this.snackbar.success("Transport deleted"),this.loadData()},error:()=>{this.snackbar.error("Failed to delete transport"),this.isLoading=!1}}))}updateIndexes(){this.startIndex=this.currentPage*this.pageSize,this.endIndex=Math.min(this.startIndex+this.pageSize,this.totalElements)}onEdit(e){let t=this.encryption.encrypt(e.toString());localStorage.setItem("transportMasterId",t),this.router.navigate(["/transport-master/edit"])}goToCreateTransport(){localStorage.removeItem("transportMasterId"),this.router.navigate(["/transport-master/create"])}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(Jn),y(ve),y(Ne),y(dt))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-transport-master-list"]],standalone:!0,features:[W],decls:42,vars:7,consts:[[1,"transport-master-list"],[1,"search-section","card"],[3,"ngSubmit","formGroup"],[1,"search-controls"],["type","text","placeholder","Search by name, GST, mobile","formControlName","search",1,"form-control"],[1,"button-group"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-search"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"action-buttons"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"card"],[3,"show"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"currentPage","pageSize","totalElements","pageSizeOptions","pageChange","pageSizeChange",4,"ngIf"],[1,"actions"],["title","Edit Employee",1,"btn-icon","edit",3,"click","routerLink"],[1,"fas","fa-edit"],["title","Delete",1,"btn-icon","delete",3,"click"],[1,"fas","fa-trash"],["colspan","6",1,"text-center"],[3,"pageChange","pageSizeChange","currentPage","pageSize","totalElements","pageSizeOptions"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),c(3,"Transport Masters"),a(),r(4,"form",2),b("ngSubmit",function(){return n.onSearch()}),r(5,"div",3),m(6,"input",4),r(7,"div",5)(8,"button",6),m(9,"i",7),c(10," Search "),a(),r(11,"button",8),b("click",function(){return n.reset()}),m(12,"i",9),c(13," Reset "),a()()()()(),r(14,"div",10)(15,"a",11),b("click",function(){return n.goToCreateTransport()}),m(16,"i",12),c(17," Add Transport "),a()(),r(18,"div",13),m(19,"app-loader",14),r(20,"div",15)(21,"table",16)(22,"thead")(23,"tr")(24,"th"),c(25,"#"),a(),r(26,"th"),c(27,"Name"),a(),r(28,"th"),c(29,"Mobile"),a(),r(30,"th"),c(31,"GST"),a(),r(32,"th"),c(33,"Remarks"),a(),r(34,"th"),c(35,"Status"),a(),r(36,"th"),c(37,"Actions"),a()()(),r(38,"tbody"),O(39,Mp,19,10,"tr",17)(40,Op,3,0,"tr",18),a()()(),O(41,xp,1,4,"app-pagination",19),a()()),t&2&&(l(4),u("formGroup",n.searchForm),l(15),u("show",n.isLoading),l(),L("loading",n.isLoading),l(19),u("ngForOf",n.transports),l(),u("ngIf",!n.isLoading&&n.transports.length===0),l(),u("ngIf",n.totalPages>0))},dependencies:[ne,Fe,Y,ge,me,ie,oe,de,pe,ue,Le,Ge,xe,Ze],styles:[".transport-master-list[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:12px}.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.transport-master-list[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:6px}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:6px;cursor:pointer;border-radius:4px;transition:all .2s ease}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]{color:var(--secondary);background-color:rgba(var(--secondary-rgb),.1);padding:8px;border-radius:6px}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:hover{background-color:var(--secondary);color:#fff;transform:translateY(-1px)}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.edit[_ngcontent-%COMP%]:active{transform:translateY(0)}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]{color:#dc3545;background-color:#dc35451a;padding:8px;border-radius:6px}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;transform:translateY(-1px)}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon.delete[_ngcontent-%COMP%]:active{transform:translateY(0)}.transport-master-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.transport-master-list[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin:8px 1rem 12px}@media (max-width: 768px){.transport-master-list[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}"]})}}return o})();function Sp(o,i){if(o&1&&(r(0,"div",20),c(1),a()),o&2){let e=P();l(),w(" ",e.getFieldError("mobile")," ")}}var Vo=(()=>{class o{constructor(e,t,n,s,d,p){this.fb=e,this.service=t,this.router=n,this.route=s,this.snackbar=d,this.encryption=p,this.isLoading=!1,this.isEditMode=!1,this.initializeForm()}ngOnInit(){let e=localStorage.getItem("transportMasterId");if(e){let t=this.encryption.decrypt(e);t&&(this.transportId=Number(t),this.isEditMode=!0,this.loadDetails(this.transportId))}}getFieldError(e){let t=this.form.get(e);return!t||!t.errors?"":t.errors.required?`${this.getPrettyLabel(e)} is required`:t.errors.email?"Invalid email format":t.errors.maxlength?`${this.getPrettyLabel(e)} is too long`:t.errors.pattern?e==="mobile"?"Enter a valid 10-digit mobile number":"Invalid format":"Invalid value"}isFieldInvalid(e){let t=this.form.get(e);return!!(t&&t.invalid&&(t.dirty||t.touched))}isFieldValid(e){let t=this.form.get(e);return!!(t&&t.valid&&(t.dirty||t.touched))}getPrettyLabel(e){switch(e){case"name":return"Name";case"mobile":return"Mobile";case"gst":return"GST";case"remarks":return"Remarks";default:return e}}initializeForm(){this.form=this.fb.group({name:[null,[x.required,x.maxLength(100)]],mobile:[null,[x.pattern("^\\d{10}$")]],gst:[null,[x.maxLength(15)]],remarks:[null,[x.maxLength(200)]],status:["A"]})}onSubmit(){if(this.form.invalid){Object.values(this.form.controls).forEach(n=>n.markAsTouched());return}this.isLoading=!0;let e=le({id:this.transportId},this.form.value);(this.isEditMode?this.service.update(e):this.service.create(e)).subscribe({next:n=>{if(n?.success===!1){this.snackbar.error(n?.message||"Operation failed"),this.isLoading=!1;return}this.snackbar.success(`Transport ${this.isEditMode?"updated":"created"} successfully`),localStorage.removeItem("transportMasterId"),this.router.navigate(["/transport-master"])},error:n=>{this.snackbar.error(n?.error?.message||`Failed to ${this.isEditMode?"update":"create"} transport`),this.isLoading=!1}})}loadDetails(e){this.isLoading=!0,this.service.details(e).subscribe({next:t=>{let n=t?.data||t;n&&this.form.patchValue({name:n.name,mobile:n.mobile,gst:n.gst,remarks:n.remarks,status:n.status}),this.isLoading=!1},error:()=>{this.snackbar.error("Failed to load transport details"),this.isLoading=!1}})}static{this.\u0275fac=function(t){return new(t||o)(y(re),y(Jn),y(Ne),y(Kt),y(ve),y(dt))}}static{this.\u0275cmp=Q({type:o,selectors:[["app-add-transport-master"]],standalone:!0,features:[W],decls:40,vars:11,consts:[[1,"transport-master-form-container"],[1,"card"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],[1,"req"],["type","text","formControlName","name","placeholder","Transport name",1,"form-control"],["type","text","formControlName","mobile","placeholder","10-digit mobile",1,"form-control"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","gst","placeholder","GST number",1,"form-control"],["formControlName","status",1,"form-control"],["value","A"],["value","I"],[1,"form-group","span-2"],["rows","3","formControlName","remarks","placeholder","Notes...",1,"form-control"],[1,"actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"fas",3,"ngClass"],["routerLink","/transport-master",1,"btn","btn-secondary"],[3,"show"],[1,"invalid-feedback"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),c(3),a(),r(4,"form",2),b("ngSubmit",function(){return n.onSubmit()}),r(5,"div",3)(6,"div",4)(7,"label"),c(8,"Name "),r(9,"span",5),c(10,"*"),a()(),m(11,"input",6),a(),r(12,"div",4)(13,"label"),c(14,"Mobile"),a(),m(15,"input",7),O(16,Sp,2,1,"div",8),a(),r(17,"div",4)(18,"label"),c(19,"GST"),a(),m(20,"input",9),a(),r(21,"div",4)(22,"label"),c(23,"Status"),a(),r(24,"select",10)(25,"option",11),c(26,"Active"),a(),r(27,"option",12),c(28,"Inactive"),a()()(),r(29,"div",13)(30,"label"),c(31,"Remarks"),a(),m(32,"textarea",14),a()(),r(33,"div",15)(34,"button",16),m(35,"i",17),c(36),a(),r(37,"a",18),c(38,"Cancel"),a()()()(),m(39,"app-loader",19),a()),t&2&&(l(3),I(n.isEditMode?"Edit Transport":"Add Transport"),l(),u("formGroup",n.form),l(11),L("is-invalid",n.isFieldInvalid("mobile"))("is-valid",n.isFieldValid("mobile")),l(),u("ngIf",n.isFieldInvalid("mobile")),l(18),u("disabled",n.isLoading),l(),u("ngClass",n.isLoading?"fa-spinner fa-spin":"fa-save"),l(),w(" ",n.isEditMode?"Update":"Save"," "),l(3),u("show",n.isLoading))},dependencies:[ne,ye,Y,ge,me,tt,nt,ie,et,oe,de,pe,ue,xe,Ge],styles:[".transport-master-form-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{padding:16px}.transport-master-form-container[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.transport-master-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.transport-master-form-container[_ngcontent-%COMP%]   .span-2[_ngcontent-%COMP%]{grid-column:span 2}.transport-master-form-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px}@media (max-width: 768px){.transport-master-form-container[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.transport-master-form-container[_ngcontent-%COMP%]   .span-2[_ngcontent-%COMP%]{grid-column:span 1}}"]})}}return o})();var Ep=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:Ia},{path:"category",component:Na,canActivate:[qe,Ye],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"product",component:La,canActivate:[qe,Ye],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"purchase",loadChildren:()=>import("./chunk-RIH36GG2.js").then(o=>o.PurchaseModule),canActivate:[qe,Ye],data:{preload:!0,roles:["ADMIN"]}},{path:"sale",component:Ra,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"sale/create",component:ts,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"profit",component:$a,canActivate:[qe]},{path:"customer",component:Ua,canActivate:[qe]},{path:"combined-purchase-sale",component:Ha,canActivate:[qe]},{path:"transport-master",component:ls,canActivate:[qe,Ye],data:{roles:["ADMIN","SALES_AND_MARKETING","DISPATCH"]}},{path:"transport-master/create",component:Vo,canActivate:[qe,Ye],data:{roles:["ADMIN","SALES_AND_MARKETING","DISPATCH"]}},{path:"transport-master/edit",component:Vo,canActivate:[qe,Ye],data:{roles:["ADMIN","SALES_AND_MARKETING","DISPATCH"]}},{path:"employee",component:Ga,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"employee/create",component:No,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"employee/edit/:id",component:No,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"employee-order",component:Ka,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"employee-order/create",component:Lo,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"employee-order/edit/:id",component:Lo,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"attendance",component:Xa,canActivate:[qe,Ye],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"attendance/create",component:Wa,canActivate:[qe,Ye],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"attendance/details",component:es,canActivate:[qe,Ye],data:{roles:["ADMIN","STAFF_ADMIN"]}},{path:"daily-profit",component:Ya,canActivate:[qe]},{path:"quotation",loadChildren:()=>import("./chunk-W4FNAJZJ.js").then(o=>o.QuotationModule),canActivate:[qe,Ye],data:{preload:!0,roles:["ADMIN","STAFF_ADMIN"]}},{path:"data-center",component:is,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"users",component:rs,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"users/edit/:id",component:as,canActivate:[qe,Ye],data:{roles:["ADMIN"]}},{path:"dealers/register",component:cs,data:{roles:["ADMIN","STAFF_ADMIN","DEALER"]}},{path:"chart",loadChildren:()=>import("./chunk-IUANSWOS.js").then(o=>o.ChartModule),canActivate:[qe,Ye],data:{preload:!0,roles:["ADMIN"]}},{path:"**",redirectTo:"/login",pathMatch:"full"}],ds=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=Gt({type:o})}static{this.\u0275inj=Bt({imports:[Le.forRoot(Ep,{useHash:!0,preloadingStrategy:xr}),Le]})}}return o})();var ms=(()=>{class o{static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275mod=Gt({type:o,bootstrap:[Ta]})}static{this.\u0275inj=Bt({providers:[{provide:Ai,useClass:Da,multi:!0},{provide:Ai,useClass:Aa,multi:!0}],imports:[Qn,Ma,mr,$e,ge,Le,ds,Ea.forRoot()]})}}return o})();ur().bootstrapModule(ms).catch(o=>console.error(o));
